(() => {
  var t = {
      187: (t) => {
        "use strict";
        // Função principal que processa os dados com base em parâmetros
        function e(t, e, r) {
          r = r || 2; // Define o valor padrão para r
          var o, a, s, l, c, d, p, m = e && e.length, _ = m ? e[0] * r : t.length;
          var g = n(t, 0, _, r, !0); // Chama função 'n' para manipulação inicial
          var v = [];

          // Verifica se a função 'n' retornou um valor válido
          if (!g || g.next === g.prev) return v;

          // Processa dados adicionais se 'e' (parâmetro) estiver presente
          if (
            (m &&
              (g = (function (t, e, r, i) {
                var o, a, s, l = [];
                for (o = 0, a = e.length; o < a; o++)
                  (s = n(
                    t,
                    e[o] * i,
                    o < a - 1 ? e[o + 1] * i : t.length,
                    i,
                    !1,
                  )) === s.next && (s.steiner = !0), l.push(f(s));
                for (l.sort(u), o = 0; o < l.length; o++) r = h(l[o], r);
                return r;
              })(t, e, g, r)),
            t.length > 80 * r)
          ) {
            // Ajusta valores para otimizar o processamento
            (o = s = t[0]), (a = l = t[1]);
            for (var y = r; y < _; y += r)
              (c = t[y]) < o && (o = c),
                (d = t[y + 1]) < a && (a = d),
                c > s && (s = c),
                d > l && (l = d);
            // Calcula uma escala para normalizar os valores
            p = 0 !== (p = Math.max(s - o, l - a)) ? 32767 / p : 0;
          }

          // Chama a função i para processar dados finais
          return i(g, v, r, o, a, p, 0), v;
        }

        // Função que manipula segmentos da lista
        function n(t, e, n, r, i) {
          var o, a;
          if (i === A(t, e, n, r) > 0)
            for (o = e; o < n; o += r) a = x(o, t[o], t[o + 1], a);
          else for (o = n - r; o >= e; o -= r) a = x(o, t[o], t[o + 1], a);
          return a && g(a, a.next) && (S(a), (a = a.next)), a;
        }

        // Função que ajusta e retorna um nó após processamento
        function r(t, e) {
          if (!t) return t;
          e || (e = t);
          var n, r = t;
          do {
            if (
              ((n = !1),
              r.steiner || (!g(r, r.next) && 0 !== _(r.prev, r, r.next)))
            )
              r = r.next;
            else {
              if ((S(r), (r = e = r.prev) === r.next)) break;
              n = !0;
            }
          } while (n || r !== e);
          return e;
        }

        // Função que processa os dados com uma lógica mais complexa
        function i(t, e, n, u, h, c, f) {
          if (t) {
            // Se não for o último passo, processa a transformação de dados
            !f &&
              c &&
              (function (t, e, n, r) {
                var i = t;
                do {
                  // Ajusta valores para a interpolação
                  0 === i.z && (i.z = d(i.x, i.y, e, n, r)),
                    (i.prevZ = i.prev),
                    (i.nextZ = i.next),
                    (i = i.next);
                } while (i !== t);
                (i.prevZ.nextZ = null),
                  (i.prevZ = null),
                  (function (t) {
                    var e, n, r, i, o, a, s, l, u = 1;
                    do {
                      // Realiza ordenação e ajustes com base nas coordenadas
                      for (n = t, t = null, o = null, a = 0; n; ) {
                        for (
                          a++, r = n, s = 0, e = 0;
                          e < u && (s++, (r = r.nextZ));
                          e++
                        );
                        for (l = u; s > 0 || (l > 0 && r); )
                          0 !== s && (0 === l || !r || n.z <= r.z)
                            ? ((i = n), (n = n.nextZ), s--)
                            : ((i = r), (r = r.nextZ), l--),
                            o ? (o.nextZ = i) : (t = i),
                            (i.prevZ = o),
                            (o = i);
                        n = r;
                      }
                      (o.nextZ = null), (u *= 2);
                    } while (a > 1);
                  })(i);
              })(t, u, h, c);
            // Processa os nós com base na lógica definida
            for (var p, m, _ = t; t.prev !== t.next; )
              if (((p = t.prev), (m = t.next), c ? a(t, u, h, c) : o(t)))
                e.push((p.i / n) | 0),
                  e.push((t.i / n) | 0),
                  e.push((m.i / n) | 0),
                  S(t),
                  (t = m.next),
                  (_ = m.next);
              else if ((t = m) === _) {
                f
                  ? 1 === f
                    ? i((t = s(r(t), e, n)), e, n, u, h, c, 2)
                    : 2 === f && l(t, e, n, u, h, c)
                  : i(r(t), e, n, u, h, c, 1);
                break;
              }
          }
        }
        function o(t) {
          var e = t.prev, // Atribui o nó anterior
              n = t, // Atribui o nó atual
              r = t.next; // Atribui o próximo nó
          if (_(e, n, r) >= 0) return !1; // Verifica se a condição não é válida
          for (
            var i = e.x, o = n.x, a = r.x, s = e.y, l = n.y, u = r.y,
                h = i < o ? (i < a ? i : a) : o < a ? o : a, // Calcula o valor mínimo de x
                c = s < l ? (s < u ? s : u) : l < u ? l : u, // Calcula o valor mínimo de y
                d = i > o ? (i > a ? i : a) : o > a ? o : a, // Calcula o valor máximo de x
                f = s > l ? (s > u ? s : u) : l > u ? l : u, // Calcula o valor máximo de y
                m = r.next; // Atribui o próximo nó de r
            m !== e;
          ) {
            if (
              m.x >= h &&
              m.x <= d &&
              m.y >= c &&
              m.y <= f &&
              p(i, s, o, l, a, u, m.x, m.y) && // Verifica condição com a função p
              _(m.prev, m, m.next) >= 0
            )
              return !1; // Retorna falso se as condições forem atendidas
            m = m.next; // Avança para o próximo nó
          }
          return !0; // Retorna verdadeiro se a condição for válida
        }
        
        function a(t, e, n, r) {
          var i = t.prev, // Atribui o nó anterior
              o = t, // Atribui o nó atual
              a = t.next; // Atribui o próximo nó
          if (_(i, o, a) >= 0) return !1; // Verifica a condição
          for (
            var s = i.x, l = o.x, u = a.x, h = i.y, c = o.y, f = a.y,
                m = s < l ? (s < u ? s : u) : l < u ? l : u, // Calcula o valor mínimo de x
                g = h < c ? (h < f ? h : f) : c < f ? c : f, // Calcula o valor mínimo de y
                v = s > l ? (s > u ? s : u) : l > u ? l : u, // Calcula o valor máximo de x
                y = h > c ? (h > f ? h : f) : c > f ? c : f, // Calcula o valor máximo de y
                E = d(m, g, e, n, r), // Chama a função d
                T = d(v, y, e, n, r), // Chama a função d
                b = t.prevZ, // Atribui o nó anterior com Z
                x = t.nextZ; // Atribui o próximo nó com Z
            b && b.z >= E && x && x.z <= T;
          ) {
            if (
              b.x >= m &&
              b.x <= v &&
              b.y >= g &&
              b.y <= y &&
              b !== i &&
              b !== a &&
              p(s, h, l, c, u, f, b.x, b.y) && // Verifica condição com a função p
              _(b.prev, b, b.next) >= 0
            )
              return !1; // Retorna falso se as condições forem atendidas
            if (
              ((b = b.prevZ),
              x.x >= m &&
                x.x <= v &&
                x.y >= g &&
                x.y <= y &&
                x !== i &&
                x !== a &&
                p(s, h, l, c, u, f, x.x, x.y) && // Verifica a condição
                _(x.prev, x, x.next) >= 0)
            )
              return !1; // Retorna falso se as condições forem atendidas
            x = x.nextZ; // Avança para o próximo nó
          }
          for (; b && b.z >= E; ) {
            if (
              b.x >= m &&
              b.x <= v &&
              b.y >= g &&
              b.y <= y &&
              b !== i &&
              b !== a &&
              p(s, h, l, c, u, f, b.x, b.y) && // Verifica condição com a função p
              _(b.prev, b, b.next) >= 0
            )
              return !1; // Retorna falso se as condições forem atendidas
            b = b.prevZ; // Avança para o próximo nó
          }
          for (; x && x.z <= T; ) {
            if (
              x.x >= m &&
              x.x <= v &&
              x.y >= g &&
              x.y <= y &&
              x !== i &&
              x !== a &&
              p(s, h, l, c, u, f, x.x, x.y) && // Verifica a condição
              _(x.prev, x, x.next) >= 0
            )
              return !1; // Retorna falso se as condições forem atendidas
            x = x.nextZ; // Avança para o próximo nó
          }
          return !0; // Retorna verdadeiro se a condição for válida
        }
        
        function s(t, e, n) {
          var i = t;
          do {
            var o = i.prev, // Atribui o nó anterior
                a = i.next.next; // Atribui o próximo nó
            !g(o, a) && // Verifica se g(o, a) não é verdadeiro
              v(o, i, i.next, a) && // Verifica a condição com v
              T(o, a) && // Verifica a condição com T
              T(a, o) && // Verifica a condição com T
              (e.push((o.i / n) | 0), // Processa o valor de o
              e.push((i.i / n) | 0), // Processa o valor de i
              e.push((a.i / n) | 0), // Processa o valor de a
              S(i), // Chama a função S para i
              S(i.next), // Chama a função S para o próximo de i
              (i = t = a)), // Atualiza i e t
              (i = i.next); // Avança para o próximo nó
          } while (i !== t);
          return r(i); // Retorna o valor de r(i)
        }
        
        function l(t, e, n, o, a, s) {
          var l = t;
          do {
            for (var u = l.next.next; u !== l.prev; ) {
              if (l.i !== u.i && m(l, u)) { // Verifica se l e u são diferentes e m(l, u) é verdadeiro
                var h = b(l, u); // Chama a função b
                return (
                  (l = r(l, l.next)), // Atualiza l
                  (h = r(h, h.next)), // Atualiza h
                  i(l, e, n, o, a, s, 0), // Chama a função i
                  void i(h, e, n, o, a, s, 0) // Chama a função i para h
                );
              }
              u = u.next; // Avança para o próximo nó
            }
            l = l.next; // Avança para o próximo nó
          } while (l !== t); // Continua até l ser igual a t
        }
        
        function u(t, e) {
          return t.x - e.x; // Retorna a diferença entre os valores de x de t e e
        }
        
        function h(t, e) {
          var n = (function (t, e) {
            var n,
              r = e,
              i = t.x,
              o = t.y,
              a = -1 / 0;
            do {
              if (o <= r.y && o >= r.next.y && r.next.y !== r.y) {
                var s = r.x + ((o - r.y) * (r.next.x - r.x)) / (r.next.y - r.y);
                if (
                  s <= i &&
                  s > a &&
                  ((a = s), (n = r.x < r.next.x ? r : r.next), s === i)
                )
                  return n;
              }
              r = r.next;
            } while (r !== e);
            if (!n) return null;
            var l,
              u = n,
              h = n.x,
              d = n.y,
              f = 1 / 0;
            r = n;
            do {
              i >= r.x &&
                r.x >= h &&
                i !== r.x &&
                p(o < d ? i : a, o, h, d, o < d ? a : i, o, r.x, r.y) &&
                ((l = Math.abs(o - r.y) / (i - r.x)),
                T(r, t) &&
                  (l < f ||
                    (l === f && (r.x > n.x || (r.x === n.x && c(n, r))))) &&
                  ((n = r), (f = l))),
                (r = r.next);
            } while (r !== u);
            return n;
          })(t, e);
          if (!n) return e;
          var i = b(n, t);
          return r(i, i.next), r(n, n.next);
        }
        function c(t, e) {
          return _(t.prev, t, e.prev) < 0 && _(e.next, t, t.next) < 0;
        }
        function d(t, e, n, r, i) {
          return (
            (t =
              1431655765 &
              ((t =
                858993459 &
                ((t =
                  252645135 &
                  ((t = 16711935 & ((t = ((t - n) * i) | 0) | (t << 8))) |
                    (t << 4))) |
                  (t << 2))) |
                (t << 1))) |
            ((e =
              1431655765 &
              ((e =
                858993459 &
                ((e =
                  252645135 &
                  ((e = 16711935 & ((e = ((e - r) * i) | 0) | (e << 8))) |
                    (e << 4))) |
                  (e << 2))) |
                (e << 1))) <<
              1)
          );
        }
        function f(t) {
          var e = t,
            n = t;
          do {
            (e.x < n.x || (e.x === n.x && e.y < n.y)) && (n = e), (e = e.next);
          } while (e !== t);
          return n;
        }
        function p(t, e, n, r, i, o, a, s) {
          return (
            (i - a) * (e - s) >= (t - a) * (o - s) &&
            (t - a) * (r - s) >= (n - a) * (e - s) &&
            (n - a) * (o - s) >= (i - a) * (r - s)
          );
        }
        function m(t, e) {
          return (
            t.next.i !== e.i &&
            t.prev.i !== e.i &&
            !(function (t, e) {
              var n = t;
              do {
                if (
                  n.i !== t.i &&
                  n.next.i !== t.i &&
                  n.i !== e.i &&
                  n.next.i !== e.i &&
                  v(n, n.next, t, e)
                )
                  return !0;
                n = n.next;
              } while (n !== t);
              return !1;
            })(t, e) &&
            ((T(t, e) &&
              T(e, t) &&
              (function (t, e) {
                var n = t,
                  r = !1,
                  i = (t.x + e.x) / 2,
                  o = (t.y + e.y) / 2;
                do {
                  n.y > o != n.next.y > o &&
                    n.next.y !== n.y &&
                    i <
                      ((n.next.x - n.x) * (o - n.y)) / (n.next.y - n.y) + n.x &&
                    (r = !r),
                    (n = n.next);
                } while (n !== t);
                return r;
              })(t, e) &&
              (_(t.prev, t, e.prev) || _(t, e.prev, e))) ||
              (g(t, e) && _(t.prev, t, t.next) > 0 && _(e.prev, e, e.next) > 0))
          );
        }
        function _(t, e, n) {
          return (e.y - t.y) * (n.x - e.x) - (e.x - t.x) * (n.y - e.y);
        }
        function g(t, e) {
          return t.x === e.x && t.y === e.y;
        }
        function v(t, e, n, r) {
          var i = E(_(t, e, n)),
            o = E(_(t, e, r)),
            a = E(_(n, r, t)),
            s = E(_(n, r, e));
          return (
            (i !== o && a !== s) ||
            !(0 !== i || !y(t, n, e)) ||
            !(0 !== o || !y(t, r, e)) ||
            !(0 !== a || !y(n, t, r)) ||
            !(0 !== s || !y(n, e, r))
          );
        }
        function y(t, e, n) {
          return (
            e.x <= Math.max(t.x, n.x) &&
            e.x >= Math.min(t.x, n.x) &&
            e.y <= Math.max(t.y, n.y) &&
            e.y >= Math.min(t.y, n.y)
          );
        }
        function E(t) {
          return t > 0 ? 1 : t < 0 ? -1 : 0;
        }
        function T(t, e) {
          return _(t.prev, t, t.next) < 0
            ? _(t, e, t.next) >= 0 && _(t, t.prev, e) >= 0
            : _(t, e, t.prev) < 0 || _(t, t.next, e) < 0;
        }
        function b(t, e) {
          var n = new M(t.i, t.x, t.y),
            r = new M(e.i, e.x, e.y),
            i = t.next,
            o = e.prev;
          return (
            (t.next = e),
            (e.prev = t),
            (n.next = i),
            (i.prev = n),
            (r.next = n),
            (n.prev = r),
            (o.next = r),
            (r.prev = o),
            r
          );
        }
        function x(t, e, n, r) {
          var i = new M(t, e, n);
          return (
            r
              ? ((i.next = r.next),
                (i.prev = r),
                (r.next.prev = i),
                (r.next = i))
              : ((i.prev = i), (i.next = i)),
            i
          );
        }
        function S(t) {
          (t.next.prev = t.prev),
            (t.prev.next = t.next),
            t.prevZ && (t.prevZ.nextZ = t.nextZ),
            t.nextZ && (t.nextZ.prevZ = t.prevZ);
        }
        function M(t, e, n) {
          (this.i = t),
            (this.x = e),
            (this.y = n),
            (this.prev = null),
            (this.next = null),
            (this.z = 0),
            (this.prevZ = null),
            (this.nextZ = null),
            (this.steiner = !1);
        }
        function A(t, e, n, r) {
          for (var i = 0, o = e, a = n - r; o < n; o += r)
            (i += (t[a] - t[o]) * (t[o + 1] + t[a + 1])), (a = o);
          return i;
        }
        (t.exports = e),
          (t.exports.default = e),
          (e.deviation = function (t, e, n, r) {
            var i = e && e.length,
              o = i ? e[0] * n : t.length,
              a = Math.abs(A(t, 0, o, n));
            if (i)
              for (var s = 0, l = e.length; s < l; s++) {
                var u = e[s] * n,
                  h = s < l - 1 ? e[s + 1] * n : t.length;
                a -= Math.abs(A(t, u, h, n));
              }
            var c = 0;
            for (s = 0; s < r.length; s += 3) {
              var d = r[s] * n,
                f = r[s + 1] * n,
                p = r[s + 2] * n;
              c += Math.abs(
                (t[d] - t[p]) * (t[f + 1] - t[d + 1]) -
                  (t[d] - t[f]) * (t[p + 1] - t[d + 1]),
              );
            }
            return 0 === a && 0 === c ? 0 : Math.abs((c - a) / a);
          }),
          (e.flatten = function (t) {
            for (
              var e = t[0][0].length,
                n = { vertices: [], holes: [], dimensions: e },
                r = 0,
                i = 0;
              i < t.length;
              i++
            ) {
              for (var o = 0; o < t[i].length; o++)
                for (var a = 0; a < e; a++) n.vertices.push(t[i][o][a]);
              i > 0 && ((r += t[i - 1].length), n.holes.push(r));
            }
            return n;
          });
      },
      729: (t) => {
        "use strict";
        var e = Object.prototype.hasOwnProperty,
          n = "~";
        function r() {}
        function i(t, e, n) {
          (this.fn = t), (this.context = e), (this.once = n || !1);
        }
        function o(t, e, r, o, a) {
          if ("function" != typeof r)
            throw new TypeError("The listener must be a function");
          var s = new i(r, o || t, a),
            l = n ? n + e : e;
          return (
            t._events[l]
              ? t._events[l].fn
                ? (t._events[l] = [t._events[l], s])
                : t._events[l].push(s)
              : ((t._events[l] = s), t._eventsCount++),
            t
          );
        }
        function a(t, e) {
          0 == --t._eventsCount ? (t._events = new r()) : delete t._events[e];
        }
        function s() {
          (this._events = new r()), (this._eventsCount = 0);
        }
        Object.create &&
          ((r.prototype = Object.create(null)), new r().__proto__ || (n = !1)),
          (s.prototype.eventNames = function () {
            var t,
              r,
              i = [];
            if (0 === this._eventsCount) return i;
            for (r in (t = this._events))
              e.call(t, r) && i.push(n ? r.slice(1) : r);
            return Object.getOwnPropertySymbols
              ? i.concat(Object.getOwnPropertySymbols(t))
              : i;
          }),
          (s.prototype.listeners = function (t) {
            var e = n ? n + t : t,
              r = this._events[e];
            if (!r) return [];
            if (r.fn) return [r.fn];
            for (var i = 0, o = r.length, a = new Array(o); i < o; i++)
              a[i] = r[i].fn;
            return a;
          }),
          (s.prototype.listenerCount = function (t) {
            var e = n ? n + t : t,
              r = this._events[e];
            return r ? (r.fn ? 1 : r.length) : 0;
          }),
          (s.prototype.emit = function (t, e, r, i, o, a) {
            var s = n ? n + t : t;
            if (!this._events[s]) return !1;
            var l,
              u,
              h = this._events[s],
              c = arguments.length;
            if (h.fn) {
              switch ((h.once && this.removeListener(t, h.fn, void 0, !0), c)) {
                case 1:
                  return h.fn.call(h.context), !0;
                case 2:
                  return h.fn.call(h.context, e), !0;
                case 3:
                  return h.fn.call(h.context, e, r), !0;
                case 4:
                  return h.fn.call(h.context, e, r, i), !0;
                case 5:
                  return h.fn.call(h.context, e, r, i, o), !0;
                case 6:
                  return h.fn.call(h.context, e, r, i, o, a), !0;
              }
              for (u = 1, l = new Array(c - 1); u < c; u++)
                l[u - 1] = arguments[u];
              h.fn.apply(h.context, l);
            } else {
              var d,
                f = h.length;
              for (u = 0; u < f; u++)
                switch (
                  (h[u].once && this.removeListener(t, h[u].fn, void 0, !0), c)
                ) {
                  case 1:
                    h[u].fn.call(h[u].context);
                    break;
                  case 2:
                    h[u].fn.call(h[u].context, e);
                    break;
                  case 3:
                    h[u].fn.call(h[u].context, e, r);
                    break;
                  case 4:
                    h[u].fn.call(h[u].context, e, r, i);
                    break;
                  default:
                    if (!l)
                      for (d = 1, l = new Array(c - 1); d < c; d++)
                        l[d - 1] = arguments[d];
                    h[u].fn.apply(h[u].context, l);
                }
            }
            return !0;
          }),
          (s.prototype.on = function (t, e, n) {
            return o(this, t, e, n, !1);
          }),
          (s.prototype.once = function (t, e, n) {
            return o(this, t, e, n, !0);
          }),
          (s.prototype.removeListener = function (t, e, r, i) {
            var o = n ? n + t : t;
            if (!this._events[o]) return this;
            if (!e) return a(this, o), this;
            var s = this._events[o];
            if (s.fn)
              s.fn !== e ||
                (i && !s.once) ||
                (r && s.context !== r) ||
                a(this, o);
            else {
              for (var l = 0, u = [], h = s.length; l < h; l++)
                (s[l].fn !== e ||
                  (i && !s[l].once) ||
                  (r && s[l].context !== r)) &&
                  u.push(s[l]);
              u.length
                ? (this._events[o] = 1 === u.length ? u[0] : u)
                : a(this, o);
            }
            return this;
          }),
          (s.prototype.removeAllListeners = function (t) {
            var e;
            return (
              t
                ? ((e = n ? n + t : t), this._events[e] && a(this, e))
                : ((this._events = new r()), (this._eventsCount = 0)),
              this
            );
          }),
          (s.prototype.off = s.prototype.removeListener),
          (s.prototype.addListener = s.prototype.on),
          (s.prefixed = n),
          (s.EventEmitter = s),
          (t.exports = s);
      },
      418: (t) => {
        "use strict";
        var e = Object.getOwnPropertySymbols,
          n = Object.prototype.hasOwnProperty,
          r = Object.prototype.propertyIsEnumerable;
        t.exports = (function () {
          try {
            if (!Object.assign) return !1;
            var t = new String("abc");
            if (((t[5] = "de"), "5" === Object.getOwnPropertyNames(t)[0]))
              return !1;
            for (var e = {}, n = 0; n < 10; n++)
              e["_" + String.fromCharCode(n)] = n;
            if (
              "0123456789" !==
              Object.getOwnPropertyNames(e)
                .map(function (t) {
                  return e[t];
                })
                .join("")
            )
              return !1;
            var r = {};
            return (
              "abcdefghijklmnopqrst".split("").forEach(function (t) {
                r[t] = t;
              }),
              "abcdefghijklmnopqrst" ===
                Object.keys(Object.assign({}, r)).join("")
            );
          } catch (t) {
            return !1;
          }
        })()
          ? Object.assign
          : function (t, i) {
              for (
                var o,
                  a,
                  s = (function (t) {
                    if (null == t)
                      throw new TypeError(
                        "Object.assign cannot be called with null or undefined",
                      );
                    return Object(t);
                  })(t),
                  l = 1;
                l < arguments.length;
                l++
              ) {
                for (var u in (o = Object(arguments[l])))
                  n.call(o, u) && (s[u] = o[u]);
                if (e) {
                  a = e(o);
                  for (var h = 0; h < a.length; h++)
                    r.call(o, a[h]) && (s[a[h]] = o[a[h]]);
                }
              }
              return s;
            };
      },
      703: (t, e, n) => {
        "use strict";
        var r = n(414);
        function i() {}
        function o() {}
        (o.resetWarningCache = i),
          (t.exports = function () {
            function t(t, e, n, i, o, a) {
              if (a !== r) {
                var s = new Error(
                  "Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types",
                );
                throw ((s.name = "Invariant Violation"), s);
              }
            }
            function e() {
              return t;
            }
            t.isRequired = t;
            var n = {
              array: t,
              bigint: t,
              bool: t,
              func: t,
              number: t,
              object: t,
              string: t,
              symbol: t,
              any: t,
              arrayOf: e,
              element: t,
              elementType: t,
              instanceOf: e,
              node: t,
              objectOf: e,
              oneOf: e,
              oneOfType: e,
              shape: e,
              exact: e,
              checkPropTypes: o,
              resetWarningCache: i,
            };
            return (n.PropTypes = n), n;
          });
      },
      697: (t, e, n) => {
        t.exports = n(703)();
      },
      414: (t) => {
        "use strict";
        t.exports = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
      },
      587: (t) => {
        "use strict";
        function e(t, e) {
          return Object.prototype.hasOwnProperty.call(t, e);
        }
        t.exports = function (t, n, r, i) {
          (n = n || "&"), (r = r || "=");
          var o = {};
          if ("string" != typeof t || 0 === t.length) return o;
          var a = /\+/g;
          t = t.split(n);
          var s = 1e3;
          i && "number" == typeof i.maxKeys && (s = i.maxKeys);
          var l = t.length;
          s > 0 && l > s && (l = s);
          for (var u = 0; u < l; ++u) {
            var h,
              c,
              d,
              f,
              p = t[u].replace(a, "%20"),
              m = p.indexOf(r);
            m >= 0
              ? ((h = p.substr(0, m)), (c = p.substr(m + 1)))
              : ((h = p), (c = "")),
              (d = decodeURIComponent(h)),
              (f = decodeURIComponent(c)),
              e(o, d)
                ? Array.isArray(o[d])
                  ? o[d].push(f)
                  : (o[d] = [o[d], f])
                : (o[d] = f);
          }
          return o;
        };
      },
      361: (t) => {
        "use strict";
        var e = function (t) {
          switch (typeof t) {
            case "string":
              return t;
            case "boolean":
              return t ? "true" : "false";
            case "number":
              return isFinite(t) ? t : "";
            default:
              return "";
          }
        };
        t.exports = function (t, n, r, i) {
          return (
            (n = n || "&"),
            (r = r || "="),
            null === t && (t = void 0),
            "object" == typeof t
              ? Object.keys(t)
                  .map(function (i) {
                    var o = encodeURIComponent(e(i)) + r;
                    return Array.isArray(t[i])
                      ? t[i]
                          .map(function (t) {
                            return o + encodeURIComponent(e(t));
                          })
                          .join(n)
                      : o + encodeURIComponent(e(t[i]));
                  })
                  .join(n)
              : i
                ? encodeURIComponent(e(i)) + r + encodeURIComponent(e(t))
                : ""
          );
        };
      },
      673: (t, e, n) => {
        "use strict";
        (e.decode = e.parse = n(587)), (e.encode = e.stringify = n(361));
      },
      448: (t, e, n) => {
        "use strict";
        var r = n(294),
          i = n(418),
          o = n(840);
        function a(t) {
          for (
            var e =
                "https://reactjs.org/docs/error-decoder.html?invariant=" + t,
              n = 1;
            n < arguments.length;
            n++
          )
            e += "&args[]=" + encodeURIComponent(arguments[n]);
          return (
            "Minified React error #" +
            t +
            "; visit " +
            e +
            " for the full message or use the non-minified dev environment for full errors and additional helpful warnings."
          );
        }
        if (!r) throw Error(a(227));
        var s = new Set(),
          l = {};
        function u(t, e) {
          h(t, e), h(t + "Capture", e);
        }
        function h(t, e) {
          for (l[t] = e, t = 0; t < e.length; t++) s.add(e[t]);
        }
        var c = !(
            "undefined" == typeof window ||
            void 0 === window.document ||
            void 0 === window.document.createElement
          ),
          d =
            /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
          f = Object.prototype.hasOwnProperty,
          p = {},
          m = {};
        function _(t, e, n, r, i, o, a) {
          (this.acceptsBooleans = 2 === e || 3 === e || 4 === e),
            (this.attributeName = r),
            (this.attributeNamespace = i),
            (this.mustUseProperty = n),
            (this.propertyName = t),
            (this.type = e),
            (this.sanitizeURL = o),
            (this.removeEmptyString = a);
        }
        var g = {};
        "children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style"
          .split(" ")
          .forEach(function (t) {
            g[t] = new _(t, 0, !1, t, null, !1, !1);
          }),
          [
            ["acceptCharset", "accept-charset"],
            ["className", "class"],
            ["htmlFor", "for"],
            ["httpEquiv", "http-equiv"],
          ].forEach(function (t) {
            var e = t[0];
            g[e] = new _(e, 1, !1, t[1], null, !1, !1);
          }),
          ["contentEditable", "draggable", "spellCheck", "value"].forEach(
            function (t) {
              g[t] = new _(t, 2, !1, t.toLowerCase(), null, !1, !1);
            },
          ),
          [
            "autoReverse",
            "externalResourcesRequired",
            "focusable",
            "preserveAlpha",
          ].forEach(function (t) {
            g[t] = new _(t, 2, !1, t, null, !1, !1);
          }),
          "allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope"
            .split(" ")
            .forEach(function (t) {
              g[t] = new _(t, 3, !1, t.toLowerCase(), null, !1, !1);
            }),
          ["checked", "multiple", "muted", "selected"].forEach(function (t) {
            g[t] = new _(t, 3, !0, t, null, !1, !1);
          }),
          ["capture", "download"].forEach(function (t) {
            g[t] = new _(t, 4, !1, t, null, !1, !1);
          }),
          ["cols", "rows", "size", "span"].forEach(function (t) {
            g[t] = new _(t, 6, !1, t, null, !1, !1);
          }),
          ["rowSpan", "start"].forEach(function (t) {
            g[t] = new _(t, 5, !1, t.toLowerCase(), null, !1, !1);
          });
        var v = /[\-:]([a-z])/g;
        function y(t) {
          return t[1].toUpperCase();
        }
        function E(t, e, n, r) {
          var i = g.hasOwnProperty(e) ? g[e] : null;
          (null !== i
            ? 0 === i.type
            : !r &&
              2 < e.length &&
              ("o" === e[0] || "O" === e[0]) &&
              ("n" === e[1] || "N" === e[1])) ||
            ((function (t, e, n, r) {
              if (
                null == e ||
                (function (t, e, n, r) {
                  if (null !== n && 0 === n.type) return !1;
                  switch (typeof e) {
                    case "function":
                    case "symbol":
                      return !0;
                    case "boolean":
                      return (
                        !r &&
                        (null !== n
                          ? !n.acceptsBooleans
                          : "data-" !== (t = t.toLowerCase().slice(0, 5)) &&
                            "aria-" !== t)
                      );
                    default:
                      return !1;
                  }
                })(t, e, n, r)
              )
                return !0;
              if (r) return !1;
              if (null !== n)
                switch (n.type) {
                  case 3:
                    return !e;
                  case 4:
                    return !1 === e;
                  case 5:
                    return isNaN(e);
                  case 6:
                    return isNaN(e) || 1 > e;
                }
              return !1;
            })(e, n, i, r) && (n = null),
            r || null === i
              ? (function (t) {
                  return (
                    !!f.call(m, t) ||
                    (!f.call(p, t) &&
                      (d.test(t) ? (m[t] = !0) : ((p[t] = !0), !1)))
                  );
                })(e) &&
                (null === n ? t.removeAttribute(e) : t.setAttribute(e, "" + n))
              : i.mustUseProperty
                ? (t[i.propertyName] = null === n ? 3 !== i.type && "" : n)
                : ((e = i.attributeName),
                  (r = i.attributeNamespace),
                  null === n
                    ? t.removeAttribute(e)
                    : ((n =
                        3 === (i = i.type) || (4 === i && !0 === n)
                          ? ""
                          : "" + n),
                      r ? t.setAttributeNS(r, e, n) : t.setAttribute(e, n))));
        }
        "accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height"
          .split(" ")
          .forEach(function (t) {
            var e = t.replace(v, y);
            g[e] = new _(e, 1, !1, t, null, !1, !1);
          }),
          "xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type"
            .split(" ")
            .forEach(function (t) {
              var e = t.replace(v, y);
              g[e] = new _(e, 1, !1, t, "http://www.w3.org/1999/xlink", !1, !1);
            }),
          ["xml:base", "xml:lang", "xml:space"].forEach(function (t) {
            var e = t.replace(v, y);
            g[e] = new _(
              e,
              1,
              !1,
              t,
              "http://www.w3.org/XML/1998/namespace",
              !1,
              !1,
            );
          }),
          ["tabIndex", "crossOrigin"].forEach(function (t) {
            g[t] = new _(t, 1, !1, t.toLowerCase(), null, !1, !1);
          }),
          (g.xlinkHref = new _(
            "xlinkHref",
            1,
            !1,
            "xlink:href",
            "http://www.w3.org/1999/xlink",
            !0,
            !1,
          )),
          ["src", "href", "action", "formAction"].forEach(function (t) {
            g[t] = new _(t, 1, !1, t.toLowerCase(), null, !0, !0);
          });
        var T = r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,
          b = 60103,
          x = 60106,
          S = 60107,
          M = 60108,
          A = 60114,
          R = 60109,
          w = 60110,
          P = 60112,
          I = 60113,
          O = 60120,
          C = 60115,
          N = 60116,
          L = 60121,
          D = 60128,
          U = 60129,
          F = 60130,
          B = 60131;
        if ("function" == typeof Symbol && Symbol.for) {
          var G = Symbol.for;
          (b = G("react.element")),
            (x = G("react.portal")),
            (S = G("react.fragment")),
            (M = G("react.strict_mode")),
            (A = G("react.profiler")),
            (R = G("react.provider")),
            (w = G("react.context")),
            (P = G("react.forward_ref")),
            (I = G("react.suspense")),
            (O = G("react.suspense_list")),
            (C = G("react.memo")),
            (N = G("react.lazy")),
            (L = G("react.block")),
            G("react.scope"),
            (D = G("react.opaque.id")),
            (U = G("react.debug_trace_mode")),
            (F = G("react.offscreen")),
            (B = G("react.legacy_hidden"));
        }
        var k,
          H = "function" == typeof Symbol && Symbol.iterator;
        function z(t) {
          return null === t || "object" != typeof t
            ? null
            : "function" == typeof (t = (H && t[H]) || t["@@iterator"])
              ? t
              : null;
        }
        function V(t) {
          if (void 0 === k)
            try {
              throw Error();
            } catch (t) {
              var e = t.stack.trim().match(/\n( *(at )?)/);
              k = (e && e[1]) || "";
            }
          return "\n" + k + t;
        }
        var X = !1;
        function W(t, e) {
          if (!t || X) return "";
          X = !0;
          var n = Error.prepareStackTrace;
          Error.prepareStackTrace = void 0;
          try {
            if (e)
              if (
                ((e = function () {
                  throw Error();
                }),
                Object.defineProperty(e.prototype, "props", {
                  set: function () {
                    throw Error();
                  },
                }),
                "object" == typeof Reflect && Reflect.construct)
              ) {
                try {
                  Reflect.construct(e, []);
                } catch (t) {
                  var r = t;
                }
                Reflect.construct(t, [], e);
              } else {
                try {
                  e.call();
                } catch (t) {
                  r = t;
                }
                t.call(e.prototype);
              }
            else {
              try {
                throw Error();
              } catch (t) {
                r = t;
              }
              t();
            }
          } catch (t) {
            if (t && r && "string" == typeof t.stack) {
              for (
                var i = t.stack.split("\n"),
                  o = r.stack.split("\n"),
                  a = i.length - 1,
                  s = o.length - 1;
                1 <= a && 0 <= s && i[a] !== o[s];

              )
                s--;
              for (; 1 <= a && 0 <= s; a--, s--)
                if (i[a] !== o[s]) {
                  if (1 !== a || 1 !== s)
                    do {
                      if ((a--, 0 > --s || i[a] !== o[s]))
                        return "\n" + i[a].replace(" at new ", " at ");
                    } while (1 <= a && 0 <= s);
                  break;
                }
            }
          } finally {
            (X = !1), (Error.prepareStackTrace = n);
          }
          return (t = t ? t.displayName || t.name : "") ? V(t) : "";
        }
        function j(t) {
          switch (t.tag) {
            case 5:
              return V(t.type);
            case 16:
              return V("Lazy");
            case 13:
              return V("Suspense");
            case 19:
              return V("SuspenseList");
            case 0:
            case 2:
            case 15:
              return W(t.type, !1);
            case 11:
              return W(t.type.render, !1);
            case 22:
              return W(t.type._render, !1);
            case 1:
              return W(t.type, !0);
            default:
              return "";
          }
        }
        function Y(t) {
          if (null == t) return null;
          if ("function" == typeof t) return t.displayName || t.name || null;
          if ("string" == typeof t) return t;
          switch (t) {
            case S:
              return "Fragment";
            case x:
              return "Portal";
            case A:
              return "Profiler";
            case M:
              return "StrictMode";
            case I:
              return "Suspense";
            case O:
              return "SuspenseList";
          }
          if ("object" == typeof t)
            switch (t.$$typeof) {
              case w:
                return (t.displayName || "Context") + ".Consumer";
              case R:
                return (t._context.displayName || "Context") + ".Provider";
              case P:
                var e = t.render;
                return (
                  (e = e.displayName || e.name || ""),
                  t.displayName ||
                    ("" !== e ? "ForwardRef(" + e + ")" : "ForwardRef")
                );
              case C:
                return Y(t.type);
              case L:
                return Y(t._render);
              case N:
                (e = t._payload), (t = t._init);
                try {
                  return Y(t(e));
                } catch (t) {}
            }
          return null;
        }
        function q(t) {
          switch (typeof t) {
            case "boolean":
            case "number":
            case "object":
            case "string":
            case "undefined":
              return t;
            default:
              return "";
          }
        }
        function K(t) {
          var e = t.type;
          return (
            (t = t.nodeName) &&
            "input" === t.toLowerCase() &&
            ("checkbox" === e || "radio" === e)
          );
        }
        function Z(t) {
          t._valueTracker ||
            (t._valueTracker = (function (t) {
              var e = K(t) ? "checked" : "value",
                n = Object.getOwnPropertyDescriptor(t.constructor.prototype, e),
                r = "" + t[e];
              if (
                !t.hasOwnProperty(e) &&
                void 0 !== n &&
                "function" == typeof n.get &&
                "function" == typeof n.set
              ) {
                var i = n.get,
                  o = n.set;
                return (
                  Object.defineProperty(t, e, {
                    configurable: !0,
                    get: function () {
                      return i.call(this);
                    },
                    set: function (t) {
                      (r = "" + t), o.call(this, t);
                    },
                  }),
                  Object.defineProperty(t, e, { enumerable: n.enumerable }),
                  {
                    getValue: function () {
                      return r;
                    },
                    setValue: function (t) {
                      r = "" + t;
                    },
                    stopTracking: function () {
                      (t._valueTracker = null), delete t[e];
                    },
                  }
                );
              }
            })(t));
        }
        function Q(t) {
          if (!t) return !1;
          var e = t._valueTracker;
          if (!e) return !0;
          var n = e.getValue(),
            r = "";
          return (
            t && (r = K(t) ? (t.checked ? "true" : "false") : t.value),
            (t = r) !== n && (e.setValue(t), !0)
          );
        }
        function $(t) {
          if (
            void 0 ===
            (t = t || ("undefined" != typeof document ? document : void 0))
          )
            return null;
          try {
            return t.activeElement || t.body;
          } catch (e) {
            return t.body;
          }
        }
        function J(t, e) {
          var n = e.checked;
          return i({}, e, {
            defaultChecked: void 0,
            defaultValue: void 0,
            value: void 0,
            checked: null != n ? n : t._wrapperState.initialChecked,
          });
        }
        function tt(t, e) {
          var n = null == e.defaultValue ? "" : e.defaultValue,
            r = null != e.checked ? e.checked : e.defaultChecked;
          (n = q(null != e.value ? e.value : n)),
            (t._wrapperState = {
              initialChecked: r,
              initialValue: n,
              controlled:
                "checkbox" === e.type || "radio" === e.type
                  ? null != e.checked
                  : null != e.value,
            });
        }
        function et(t, e) {
          null != (e = e.checked) && E(t, "checked", e, !1);
        }
        function nt(t, e) {
          et(t, e);
          var n = q(e.value),
            r = e.type;
          if (null != n)
            "number" === r
              ? ((0 === n && "" === t.value) || t.value != n) &&
                (t.value = "" + n)
              : t.value !== "" + n && (t.value = "" + n);
          else if ("submit" === r || "reset" === r)
            return void t.removeAttribute("value");
          e.hasOwnProperty("value")
            ? it(t, e.type, n)
            : e.hasOwnProperty("defaultValue") &&
              it(t, e.type, q(e.defaultValue)),
            null == e.checked &&
              null != e.defaultChecked &&
              (t.defaultChecked = !!e.defaultChecked);
        }
        function rt(t, e, n) {
          if (e.hasOwnProperty("value") || e.hasOwnProperty("defaultValue")) {
            var r = e.type;
            if (
              !(
                ("submit" !== r && "reset" !== r) ||
                (void 0 !== e.value && null !== e.value)
              )
            )
              return;
            (e = "" + t._wrapperState.initialValue),
              n || e === t.value || (t.value = e),
              (t.defaultValue = e);
          }
          "" !== (n = t.name) && (t.name = ""),
            (t.defaultChecked = !!t._wrapperState.initialChecked),
            "" !== n && (t.name = n);
        }
        function it(t, e, n) {
          ("number" === e && $(t.ownerDocument) === t) ||
            (null == n
              ? (t.defaultValue = "" + t._wrapperState.initialValue)
              : t.defaultValue !== "" + n && (t.defaultValue = "" + n));
        }
        function ot(t, e) {
          return (
            (t = i({ children: void 0 }, e)),
            (e = (function (t) {
              var e = "";
              return (
                r.Children.forEach(t, function (t) {
                  null != t && (e += t);
                }),
                e
              );
            })(e.children)) && (t.children = e),
            t
          );
        }
        function at(t, e, n, r) {
          if (((t = t.options), e)) {
            e = {};
            for (var i = 0; i < n.length; i++) e["$" + n[i]] = !0;
            for (n = 0; n < t.length; n++)
              (i = e.hasOwnProperty("$" + t[n].value)),
                t[n].selected !== i && (t[n].selected = i),
                i && r && (t[n].defaultSelected = !0);
          } else {
            for (n = "" + q(n), e = null, i = 0; i < t.length; i++) {
              if (t[i].value === n)
                return (
                  (t[i].selected = !0), void (r && (t[i].defaultSelected = !0))
                );
              null !== e || t[i].disabled || (e = t[i]);
            }
            null !== e && (e.selected = !0);
          }
        }
        function st(t, e) {
          if (null != e.dangerouslySetInnerHTML) throw Error(a(91));
          return i({}, e, {
            value: void 0,
            defaultValue: void 0,
            children: "" + t._wrapperState.initialValue,
          });
        }
        function lt(t, e) {
          var n = e.value;
          if (null == n) {
            if (((n = e.children), (e = e.defaultValue), null != n)) {
              if (null != e) throw Error(a(92));
              if (Array.isArray(n)) {
                if (!(1 >= n.length)) throw Error(a(93));
                n = n[0];
              }
              e = n;
            }
            null == e && (e = ""), (n = e);
          }
          t._wrapperState = { initialValue: q(n) };
        }
        function ut(t, e) {
          var n = q(e.value),
            r = q(e.defaultValue);
          null != n &&
            ((n = "" + n) !== t.value && (t.value = n),
            null == e.defaultValue &&
              t.defaultValue !== n &&
              (t.defaultValue = n)),
            null != r && (t.defaultValue = "" + r);
        }
        function ht(t) {
          var e = t.textContent;
          e === t._wrapperState.initialValue &&
            "" !== e &&
            null !== e &&
            (t.value = e);
        }
        var ct = {
          html: "http://www.w3.org/1999/xhtml",
          mathml: "http://www.w3.org/1998/Math/MathML",
          svg: "http://www.w3.org/2000/svg",
        };
        function dt(t) {
          switch (t) {
            case "svg":
              return "http://www.w3.org/2000/svg";
            case "math":
              return "http://www.w3.org/1998/Math/MathML";
            default:
              return "http://www.w3.org/1999/xhtml";
          }
        }
        function ft(t, e) {
          return null == t || "http://www.w3.org/1999/xhtml" === t
            ? dt(e)
            : "http://www.w3.org/2000/svg" === t && "foreignObject" === e
              ? "http://www.w3.org/1999/xhtml"
              : t;
        }
        var pt,
          mt,
          _t =
            ((mt = function (t, e) {
              if (t.namespaceURI !== ct.svg || "innerHTML" in t)
                t.innerHTML = e;
              else {
                for (
                  (pt = pt || document.createElement("div")).innerHTML =
                    "<svg>" + e.valueOf().toString() + "</svg>",
                    e = pt.firstChild;
                  t.firstChild;

                )
                  t.removeChild(t.firstChild);
                for (; e.firstChild; ) t.appendChild(e.firstChild);
              }
            }),
            "undefined" != typeof MSApp && MSApp.execUnsafeLocalFunction
              ? function (t, e, n, r) {
                  MSApp.execUnsafeLocalFunction(function () {
                    return mt(t, e);
                  });
                }
              : mt);
        function gt(t, e) {
          if (e) {
            var n = t.firstChild;
            if (n && n === t.lastChild && 3 === n.nodeType)
              return void (n.nodeValue = e);
          }
          t.textContent = e;
        }
        var vt = {
            animationIterationCount: !0,
            borderImageOutset: !0,
            borderImageSlice: !0,
            borderImageWidth: !0,
            boxFlex: !0,
            boxFlexGroup: !0,
            boxOrdinalGroup: !0,
            columnCount: !0,
            columns: !0,
            flex: !0,
            flexGrow: !0,
            flexPositive: !0,
            flexShrink: !0,
            flexNegative: !0,
            flexOrder: !0,
            gridArea: !0,
            gridRow: !0,
            gridRowEnd: !0,
            gridRowSpan: !0,
            gridRowStart: !0,
            gridColumn: !0,
            gridColumnEnd: !0,
            gridColumnSpan: !0,
            gridColumnStart: !0,
            fontWeight: !0,
            lineClamp: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            tabSize: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0,
            fillOpacity: !0,
            floodOpacity: !0,
            stopOpacity: !0,
            strokeDasharray: !0,
            strokeDashoffset: !0,
            strokeMiterlimit: !0,
            strokeOpacity: !0,
            strokeWidth: !0,
          },
          yt = ["Webkit", "ms", "Moz", "O"];
        function Et(t, e, n) {
          return null == e || "boolean" == typeof e || "" === e
            ? ""
            : n ||
                "number" != typeof e ||
                0 === e ||
                (vt.hasOwnProperty(t) && vt[t])
              ? ("" + e).trim()
              : e + "px";
        }
        function Tt(t, e) {
          for (var n in ((t = t.style), e))
            if (e.hasOwnProperty(n)) {
              var r = 0 === n.indexOf("--"),
                i = Et(n, e[n], r);
              "float" === n && (n = "cssFloat"),
                r ? t.setProperty(n, i) : (t[n] = i);
            }
        }
        Object.keys(vt).forEach(function (t) {
          yt.forEach(function (e) {
            (e = e + t.charAt(0).toUpperCase() + t.substring(1)),
              (vt[e] = vt[t]);
          });
        });
        var bt = i(
          { menuitem: !0 },
          {
            area: !0,
            base: !0,
            br: !0,
            col: !0,
            embed: !0,
            hr: !0,
            img: !0,
            input: !0,
            keygen: !0,
            link: !0,
            meta: !0,
            param: !0,
            source: !0,
            track: !0,
            wbr: !0,
          },
        );
        function xt(t, e) {
          if (e) {
            if (
              bt[t] &&
              (null != e.children || null != e.dangerouslySetInnerHTML)
            )
              throw Error(a(137, t));
            if (null != e.dangerouslySetInnerHTML) {
              if (null != e.children) throw Error(a(60));
              if (
                "object" != typeof e.dangerouslySetInnerHTML ||
                !("__html" in e.dangerouslySetInnerHTML)
              )
                throw Error(a(61));
            }
            if (null != e.style && "object" != typeof e.style)
              throw Error(a(62));
          }
        }
        function St(t, e) {
          if (-1 === t.indexOf("-")) return "string" == typeof e.is;
          switch (t) {
            case "annotation-xml":
            case "color-profile":
            case "font-face":
            case "font-face-src":
            case "font-face-uri":
            case "font-face-format":
            case "font-face-name":
            case "missing-glyph":
              return !1;
            default:
              return !0;
          }
        }
        function Mt(t) {
          return (
            (t = t.target || t.srcElement || window).correspondingUseElement &&
              (t = t.correspondingUseElement),
            3 === t.nodeType ? t.parentNode : t
          );
        }
        var At = null,
          Rt = null,
          wt = null;
        function Pt(t) {
          if ((t = ni(t))) {
            if ("function" != typeof At) throw Error(a(280));
            var e = t.stateNode;
            e && ((e = ii(e)), At(t.stateNode, t.type, e));
          }
        }
        function It(t) {
          Rt ? (wt ? wt.push(t) : (wt = [t])) : (Rt = t);
        }
        function Ot() {
          if (Rt) {
            var t = Rt,
              e = wt;
            if (((wt = Rt = null), Pt(t), e))
              for (t = 0; t < e.length; t++) Pt(e[t]);
          }
        }
        function Ct(t, e) {
          return t(e);
        }
        function Nt(t, e, n, r, i) {
          return t(e, n, r, i);
        }
        function Lt() {}
        var Dt = Ct,
          Ut = !1,
          Ft = !1;
        function Bt() {
          (null === Rt && null === wt) || (Lt(), Ot());
        }
        function Gt(t, e) {
          var n = t.stateNode;
          if (null === n) return null;
          var r = ii(n);
          if (null === r) return null;
          n = r[e];
          t: switch (e) {
            case "onClick":
            case "onClickCapture":
            case "onDoubleClick":
            case "onDoubleClickCapture":
            case "onMouseDown":
            case "onMouseDownCapture":
            case "onMouseMove":
            case "onMouseMoveCapture":
            case "onMouseUp":
            case "onMouseUpCapture":
            case "onMouseEnter":
              (r = !r.disabled) ||
                (r = !(
                  "button" === (t = t.type) ||
                  "input" === t ||
                  "select" === t ||
                  "textarea" === t
                )),
                (t = !r);
              break t;
            default:
              t = !1;
          }
          if (t) return null;
          if (n && "function" != typeof n) throw Error(a(231, e, typeof n));
          return n;
        }
        var kt = !1;
        if (c)
          try {
            var Ht = {};
            Object.defineProperty(Ht, "passive", {
              get: function () {
                kt = !0;
              },
            }),
              window.addEventListener("test", Ht, Ht),
              window.removeEventListener("test", Ht, Ht);
          } catch (mt) {
            kt = !1;
          }
        function zt(t, e, n, r, i, o, a, s, l) {
          var u = Array.prototype.slice.call(arguments, 3);
          try {
            e.apply(n, u);
          } catch (t) {
            this.onError(t);
          }
        }
        var Vt = !1,
          Xt = null,
          Wt = !1,
          jt = null,
          Yt = {
            onError: function (t) {
              (Vt = !0), (Xt = t);
            },
          };
        function qt(t, e, n, r, i, o, a, s, l) {
          (Vt = !1), (Xt = null), zt.apply(Yt, arguments);
        }
        function Kt(t) {
          var e = t,
            n = t;
          if (t.alternate) for (; e.return; ) e = e.return;
          else {
            t = e;
            do {
              0 != (1026 & (e = t).flags) && (n = e.return), (t = e.return);
            } while (t);
          }
          return 3 === e.tag ? n : null;
        }
        function Zt(t) {
          if (13 === t.tag) {
            var e = t.memoizedState;
            if (
              (null === e &&
                null !== (t = t.alternate) &&
                (e = t.memoizedState),
              null !== e)
            )
              return e.dehydrated;
          }
          return null;
        }
        function Qt(t) {
          if (Kt(t) !== t) throw Error(a(188));
        }
        function $t(t) {
          if (
            ((t = (function (t) {
              var e = t.alternate;
              if (!e) {
                if (null === (e = Kt(t))) throw Error(a(188));
                return e !== t ? null : t;
              }
              for (var n = t, r = e; ; ) {
                var i = n.return;
                if (null === i) break;
                var o = i.alternate;
                if (null === o) {
                  if (null !== (r = i.return)) {
                    n = r;
                    continue;
                  }
                  break;
                }
                if (i.child === o.child) {
                  for (o = i.child; o; ) {
                    if (o === n) return Qt(i), t;
                    if (o === r) return Qt(i), e;
                    o = o.sibling;
                  }
                  throw Error(a(188));
                }
                if (n.return !== r.return) (n = i), (r = o);
                else {
                  for (var s = !1, l = i.child; l; ) {
                    if (l === n) {
                      (s = !0), (n = i), (r = o);
                      break;
                    }
                    if (l === r) {
                      (s = !0), (r = i), (n = o);
                      break;
                    }
                    l = l.sibling;
                  }
                  if (!s) {
                    for (l = o.child; l; ) {
                      if (l === n) {
                        (s = !0), (n = o), (r = i);
                        break;
                      }
                      if (l === r) {
                        (s = !0), (r = o), (n = i);
                        break;
                      }
                      l = l.sibling;
                    }
                    if (!s) throw Error(a(189));
                  }
                }
                if (n.alternate !== r) throw Error(a(190));
              }
              if (3 !== n.tag) throw Error(a(188));
              return n.stateNode.current === n ? t : e;
            })(t)),
            !t)
          )
            return null;
          for (var e = t; ; ) {
            if (5 === e.tag || 6 === e.tag) return e;
            if (e.child) (e.child.return = e), (e = e.child);
            else {
              if (e === t) break;
              for (; !e.sibling; ) {
                if (!e.return || e.return === t) return null;
                e = e.return;
              }
              (e.sibling.return = e.return), (e = e.sibling);
            }
          }
          return null;
        }
        function Jt(t, e) {
          for (var n = t.alternate; null !== e; ) {
            if (e === t || e === n) return !0;
            e = e.return;
          }
          return !1;
        }
        var te,
          ee,
          ne,
          re,
          ie = !1,
          oe = [],
          ae = null,
          se = null,
          le = null,
          ue = new Map(),
          he = new Map(),
          ce = [],
          de =
            "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(
              " ",
            );
        function fe(t, e, n, r, i) {
          return {
            blockedOn: t,
            domEventName: e,
            eventSystemFlags: 16 | n,
            nativeEvent: i,
            targetContainers: [r],
          };
        }
        function pe(t, e) {
          switch (t) {
            case "focusin":
            case "focusout":
              ae = null;
              break;
            case "dragenter":
            case "dragleave":
              se = null;
              break;
            case "mouseover":
            case "mouseout":
              le = null;
              break;
            case "pointerover":
            case "pointerout":
              ue.delete(e.pointerId);
              break;
            case "gotpointercapture":
            case "lostpointercapture":
              he.delete(e.pointerId);
          }
        }
        function me(t, e, n, r, i, o) {
          return null === t || t.nativeEvent !== o
            ? ((t = fe(e, n, r, i, o)),
              null !== e && null !== (e = ni(e)) && ee(e),
              t)
            : ((t.eventSystemFlags |= r),
              (e = t.targetContainers),
              null !== i && -1 === e.indexOf(i) && e.push(i),
              t);
        }
        function _e(t) {
          var e = ei(t.target);
          if (null !== e) {
            var n = Kt(e);
            if (null !== n)
              if (13 === (e = n.tag)) {
                if (null !== (e = Zt(n)))
                  return (
                    (t.blockedOn = e),
                    void re(t.lanePriority, function () {
                      o.unstable_runWithPriority(t.priority, function () {
                        ne(n);
                      });
                    })
                  );
              } else if (3 === e && n.stateNode.hydrate)
                return void (t.blockedOn =
                  3 === n.tag ? n.stateNode.containerInfo : null);
          }
          t.blockedOn = null;
        }
        function ge(t) {
          if (null !== t.blockedOn) return !1;
          for (var e = t.targetContainers; 0 < e.length; ) {
            var n = $e(t.domEventName, t.eventSystemFlags, e[0], t.nativeEvent);
            if (null !== n)
              return null !== (e = ni(n)) && ee(e), (t.blockedOn = n), !1;
            e.shift();
          }
          return !0;
        }
        function ve(t, e, n) {
          ge(t) && n.delete(e);
        }
        function ye() {
          for (ie = !1; 0 < oe.length; ) {
            var t = oe[0];
            if (null !== t.blockedOn) {
              null !== (t = ni(t.blockedOn)) && te(t);
              break;
            }
            for (var e = t.targetContainers; 0 < e.length; ) {
              var n = $e(
                t.domEventName,
                t.eventSystemFlags,
                e[0],
                t.nativeEvent,
              );
              if (null !== n) {
                t.blockedOn = n;
                break;
              }
              e.shift();
            }
            null === t.blockedOn && oe.shift();
          }
          null !== ae && ge(ae) && (ae = null),
            null !== se && ge(se) && (se = null),
            null !== le && ge(le) && (le = null),
            ue.forEach(ve),
            he.forEach(ve);
        }
        function Ee(t, e) {
          t.blockedOn === e &&
            ((t.blockedOn = null),
            ie ||
              ((ie = !0),
              o.unstable_scheduleCallback(o.unstable_NormalPriority, ye)));
        }
        function Te(t) {
          function e(e) {
            return Ee(e, t);
          }
          if (0 < oe.length) {
            Ee(oe[0], t);
            for (var n = 1; n < oe.length; n++) {
              var r = oe[n];
              r.blockedOn === t && (r.blockedOn = null);
            }
          }
          for (
            null !== ae && Ee(ae, t),
              null !== se && Ee(se, t),
              null !== le && Ee(le, t),
              ue.forEach(e),
              he.forEach(e),
              n = 0;
            n < ce.length;
            n++
          )
            (r = ce[n]).blockedOn === t && (r.blockedOn = null);
          for (; 0 < ce.length && null === (n = ce[0]).blockedOn; )
            _e(n), null === n.blockedOn && ce.shift();
        }
        function be(t, e) {
          var n = {};
          return (
            (n[t.toLowerCase()] = e.toLowerCase()),
            (n["Webkit" + t] = "webkit" + e),
            (n["Moz" + t] = "moz" + e),
            n
          );
        }
        var xe = {
            animationend: be("Animation", "AnimationEnd"),
            animationiteration: be("Animation", "AnimationIteration"),
            animationstart: be("Animation", "AnimationStart"),
            transitionend: be("Transition", "TransitionEnd"),
          },
          Se = {},
          Me = {};
        function Ae(t) {
          if (Se[t]) return Se[t];
          if (!xe[t]) return t;
          var e,
            n = xe[t];
          for (e in n)
            if (n.hasOwnProperty(e) && e in Me) return (Se[t] = n[e]);
          return t;
        }
        c &&
          ((Me = document.createElement("div").style),
          "AnimationEvent" in window ||
            (delete xe.animationend.animation,
            delete xe.animationiteration.animation,
            delete xe.animationstart.animation),
          "TransitionEvent" in window || delete xe.transitionend.transition);
        var Re = Ae("animationend"),
          we = Ae("animationiteration"),
          Pe = Ae("animationstart"),
          Ie = Ae("transitionend"),
          Oe = new Map(),
          Ce = new Map(),
          Ne = [
            "abort",
            "abort",
            Re,
            "animationEnd",
            we,
            "animationIteration",
            Pe,
            "animationStart",
            "canplay",
            "canPlay",
            "canplaythrough",
            "canPlayThrough",
            "durationchange",
            "durationChange",
            "emptied",
            "emptied",
            "encrypted",
            "encrypted",
            "ended",
            "ended",
            "error",
            "error",
            "gotpointercapture",
            "gotPointerCapture",
            "load",
            "load",
            "loadeddata",
            "loadedData",
            "loadedmetadata",
            "loadedMetadata",
            "loadstart",
            "loadStart",
            "lostpointercapture",
            "lostPointerCapture",
            "playing",
            "playing",
            "progress",
            "progress",
            "seeking",
            "seeking",
            "stalled",
            "stalled",
            "suspend",
            "suspend",
            "timeupdate",
            "timeUpdate",
            Ie,
            "transitionEnd",
            "waiting",
            "waiting",
          ];
        function Le(t, e) {
          for (var n = 0; n < t.length; n += 2) {
            var r = t[n],
              i = t[n + 1];
            (i = "on" + (i[0].toUpperCase() + i.slice(1))),
              Ce.set(r, e),
              Oe.set(r, i),
              u(i, [r]);
          }
        }
        (0, o.unstable_now)();
        var De = 8;
        function Ue(t) {
          if (0 != (1 & t)) return (De = 15), 1;
          if (0 != (2 & t)) return (De = 14), 2;
          if (0 != (4 & t)) return (De = 13), 4;
          var e = 24 & t;
          return 0 !== e
            ? ((De = 12), e)
            : 0 != (32 & t)
              ? ((De = 11), 32)
              : 0 != (e = 192 & t)
                ? ((De = 10), e)
                : 0 != (256 & t)
                  ? ((De = 9), 256)
                  : 0 != (e = 3584 & t)
                    ? ((De = 8), e)
                    : 0 != (4096 & t)
                      ? ((De = 7), 4096)
                      : 0 != (e = 4186112 & t)
                        ? ((De = 6), e)
                        : 0 != (e = 62914560 & t)
                          ? ((De = 5), e)
                          : 67108864 & t
                            ? ((De = 4), 67108864)
                            : 0 != (134217728 & t)
                              ? ((De = 3), 134217728)
                              : 0 != (e = 805306368 & t)
                                ? ((De = 2), e)
                                : 0 != (1073741824 & t)
                                  ? ((De = 1), 1073741824)
                                  : ((De = 8), t);
        }
        function Fe(t, e) {
          var n = t.pendingLanes;
          if (0 === n) return (De = 0);
          var r = 0,
            i = 0,
            o = t.expiredLanes,
            a = t.suspendedLanes,
            s = t.pingedLanes;
          if (0 !== o) (r = o), (i = De = 15);
          else if (0 != (o = 134217727 & n)) {
            var l = o & ~a;
            0 !== l
              ? ((r = Ue(l)), (i = De))
              : 0 != (s &= o) && ((r = Ue(s)), (i = De));
          } else
            0 != (o = n & ~a)
              ? ((r = Ue(o)), (i = De))
              : 0 !== s && ((r = Ue(s)), (i = De));
          if (0 === r) return 0;
          if (
            ((r = n & (((0 > (r = 31 - Ve(r)) ? 0 : 1 << r) << 1) - 1)),
            0 !== e && e !== r && 0 == (e & a))
          ) {
            if ((Ue(e), i <= De)) return e;
            De = i;
          }
          if (0 !== (e = t.entangledLanes))
            for (t = t.entanglements, e &= r; 0 < e; )
              (i = 1 << (n = 31 - Ve(e))), (r |= t[n]), (e &= ~i);
          return r;
        }
        function Be(t) {
          return 0 != (t = -1073741825 & t.pendingLanes)
            ? t
            : 1073741824 & t
              ? 1073741824
              : 0;
        }
        function Ge(t, e) {
          switch (t) {
            case 15:
              return 1;
            case 14:
              return 2;
            case 12:
              return 0 === (t = ke(24 & ~e)) ? Ge(10, e) : t;
            case 10:
              return 0 === (t = ke(192 & ~e)) ? Ge(8, e) : t;
            case 8:
              return (
                0 === (t = ke(3584 & ~e)) &&
                  0 === (t = ke(4186112 & ~e)) &&
                  (t = 512),
                t
              );
            case 2:
              return 0 === (e = ke(805306368 & ~e)) && (e = 268435456), e;
          }
          throw Error(a(358, t));
        }
        function ke(t) {
          return t & -t;
        }
        function He(t) {
          for (var e = [], n = 0; 31 > n; n++) e.push(t);
          return e;
        }
        function ze(t, e, n) {
          t.pendingLanes |= e;
          var r = e - 1;
          (t.suspendedLanes &= r),
            (t.pingedLanes &= r),
            ((t = t.eventTimes)[(e = 31 - Ve(e))] = n);
        }
        var Ve = Math.clz32
            ? Math.clz32
            : function (t) {
                return 0 === t ? 32 : (31 - ((Xe(t) / We) | 0)) | 0;
              },
          Xe = Math.log,
          We = Math.LN2,
          je = o.unstable_UserBlockingPriority,
          Ye = o.unstable_runWithPriority,
          qe = !0;
        function Ke(t, e, n, r) {
          Ut || Lt();
          var i = Qe,
            o = Ut;
          Ut = !0;
          try {
            Nt(i, t, e, n, r);
          } finally {
            (Ut = o) || Bt();
          }
        }
        function Ze(t, e, n, r) {
          Ye(je, Qe.bind(null, t, e, n, r));
        }
        function Qe(t, e, n, r) {
          var i;
          if (qe)
            if ((i = 0 == (4 & e)) && 0 < oe.length && -1 < de.indexOf(t))
              (t = fe(null, t, e, n, r)), oe.push(t);
            else {
              var o = $e(t, e, n, r);
              if (null === o) i && pe(t, r);
              else {
                if (i) {
                  if (-1 < de.indexOf(t))
                    return (t = fe(o, t, e, n, r)), void oe.push(t);
                  if (
                    (function (t, e, n, r, i) {
                      switch (e) {
                        case "focusin":
                          return (ae = me(ae, t, e, n, r, i)), !0;
                        case "dragenter":
                          return (se = me(se, t, e, n, r, i)), !0;
                        case "mouseover":
                          return (le = me(le, t, e, n, r, i)), !0;
                        case "pointerover":
                          var o = i.pointerId;
                          return (
                            ue.set(o, me(ue.get(o) || null, t, e, n, r, i)), !0
                          );
                        case "gotpointercapture":
                          return (
                            (o = i.pointerId),
                            he.set(o, me(he.get(o) || null, t, e, n, r, i)),
                            !0
                          );
                      }
                      return !1;
                    })(o, t, e, n, r)
                  )
                    return;
                  pe(t, r);
                }
                Lr(t, e, r, null, n);
              }
            }
        }
        function $e(t, e, n, r) {
          var i = Mt(r);
          if (null !== (i = ei(i))) {
            var o = Kt(i);
            if (null === o) i = null;
            else {
              var a = o.tag;
              if (13 === a) {
                if (null !== (i = Zt(o))) return i;
                i = null;
              } else if (3 === a) {
                if (o.stateNode.hydrate)
                  return 3 === o.tag ? o.stateNode.containerInfo : null;
                i = null;
              } else o !== i && (i = null);
            }
          }
          return Lr(t, e, r, i, n), null;
        }
        var Je = null,
          tn = null,
          en = null;
        function nn() {
          if (en) return en;
          var t,
            e,
            n = tn,
            r = n.length,
            i = "value" in Je ? Je.value : Je.textContent,
            o = i.length;
          for (t = 0; t < r && n[t] === i[t]; t++);
          var a = r - t;
          for (e = 1; e <= a && n[r - e] === i[o - e]; e++);
          return (en = i.slice(t, 1 < e ? 1 - e : void 0));
        }
        function rn(t) {
          var e = t.keyCode;
          return (
            "charCode" in t
              ? 0 === (t = t.charCode) && 13 === e && (t = 13)
              : (t = e),
            10 === t && (t = 13),
            32 <= t || 13 === t ? t : 0
          );
        }
        function on() {
          return !0;
        }
        function an() {
          return !1;
        }
        function sn(t) {
          function e(e, n, r, i, o) {
            for (var a in ((this._reactName = e),
            (this._targetInst = r),
            (this.type = n),
            (this.nativeEvent = i),
            (this.target = o),
            (this.currentTarget = null),
            t))
              t.hasOwnProperty(a) && ((e = t[a]), (this[a] = e ? e(i) : i[a]));
            return (
              (this.isDefaultPrevented = (
                null != i.defaultPrevented
                  ? i.defaultPrevented
                  : !1 === i.returnValue
              )
                ? on
                : an),
              (this.isPropagationStopped = an),
              this
            );
          }
          return (
            i(e.prototype, {
              preventDefault: function () {
                this.defaultPrevented = !0;
                var t = this.nativeEvent;
                t &&
                  (t.preventDefault
                    ? t.preventDefault()
                    : "unknown" != typeof t.returnValue && (t.returnValue = !1),
                  (this.isDefaultPrevented = on));
              },
              stopPropagation: function () {
                var t = this.nativeEvent;
                t &&
                  (t.stopPropagation
                    ? t.stopPropagation()
                    : "unknown" != typeof t.cancelBubble &&
                      (t.cancelBubble = !0),
                  (this.isPropagationStopped = on));
              },
              persist: function () {},
              isPersistent: on,
            }),
            e
          );
        }
        var ln,
          un,
          hn,
          cn = {
            eventPhase: 0,
            bubbles: 0,
            cancelable: 0,
            timeStamp: function (t) {
              return t.timeStamp || Date.now();
            },
            defaultPrevented: 0,
            isTrusted: 0,
          },
          dn = sn(cn),
          fn = i({}, cn, { view: 0, detail: 0 }),
          pn = sn(fn),
          mn = i({}, fn, {
            screenX: 0,
            screenY: 0,
            clientX: 0,
            clientY: 0,
            pageX: 0,
            pageY: 0,
            ctrlKey: 0,
            shiftKey: 0,
            altKey: 0,
            metaKey: 0,
            getModifierState: Rn,
            button: 0,
            buttons: 0,
            relatedTarget: function (t) {
              return void 0 === t.relatedTarget
                ? t.fromElement === t.srcElement
                  ? t.toElement
                  : t.fromElement
                : t.relatedTarget;
            },
            movementX: function (t) {
              return "movementX" in t
                ? t.movementX
                : (t !== hn &&
                    (hn && "mousemove" === t.type
                      ? ((ln = t.screenX - hn.screenX),
                        (un = t.screenY - hn.screenY))
                      : (un = ln = 0),
                    (hn = t)),
                  ln);
            },
            movementY: function (t) {
              return "movementY" in t ? t.movementY : un;
            },
          }),
          _n = sn(mn),
          gn = sn(i({}, mn, { dataTransfer: 0 })),
          vn = sn(i({}, fn, { relatedTarget: 0 })),
          yn = sn(
            i({}, cn, { animationName: 0, elapsedTime: 0, pseudoElement: 0 }),
          ),
          En = i({}, cn, {
            clipboardData: function (t) {
              return "clipboardData" in t
                ? t.clipboardData
                : window.clipboardData;
            },
          }),
          Tn = sn(En),
          bn = sn(i({}, cn, { data: 0 })),
          xn = {
            Esc: "Escape",
            Spacebar: " ",
            Left: "ArrowLeft",
            Up: "ArrowUp",
            Right: "ArrowRight",
            Down: "ArrowDown",
            Del: "Delete",
            Win: "OS",
            Menu: "ContextMenu",
            Apps: "ContextMenu",
            Scroll: "ScrollLock",
            MozPrintableKey: "Unidentified",
          },
          Sn = {
            8: "Backspace",
            9: "Tab",
            12: "Clear",
            13: "Enter",
            16: "Shift",
            17: "Control",
            18: "Alt",
            19: "Pause",
            20: "CapsLock",
            27: "Escape",
            32: " ",
            33: "PageUp",
            34: "PageDown",
            35: "End",
            36: "Home",
            37: "ArrowLeft",
            38: "ArrowUp",
            39: "ArrowRight",
            40: "ArrowDown",
            45: "Insert",
            46: "Delete",
            112: "F1",
            113: "F2",
            114: "F3",
            115: "F4",
            116: "F5",
            117: "F6",
            118: "F7",
            119: "F8",
            120: "F9",
            121: "F10",
            122: "F11",
            123: "F12",
            144: "NumLock",
            145: "ScrollLock",
            224: "Meta",
          },
          Mn = {
            Alt: "altKey",
            Control: "ctrlKey",
            Meta: "metaKey",
            Shift: "shiftKey",
          };
        function An(t) {
          var e = this.nativeEvent;
          return e.getModifierState
            ? e.getModifierState(t)
            : !!(t = Mn[t]) && !!e[t];
        }
        function Rn() {
          return An;
        }
        var wn = i({}, fn, {
            key: function (t) {
              if (t.key) {
                var e = xn[t.key] || t.key;
                if ("Unidentified" !== e) return e;
              }
              return "keypress" === t.type
                ? 13 === (t = rn(t))
                  ? "Enter"
                  : String.fromCharCode(t)
                : "keydown" === t.type || "keyup" === t.type
                  ? Sn[t.keyCode] || "Unidentified"
                  : "";
            },
            code: 0,
            location: 0,
            ctrlKey: 0,
            shiftKey: 0,
            altKey: 0,
            metaKey: 0,
            repeat: 0,
            locale: 0,
            getModifierState: Rn,
            charCode: function (t) {
              return "keypress" === t.type ? rn(t) : 0;
            },
            keyCode: function (t) {
              return "keydown" === t.type || "keyup" === t.type ? t.keyCode : 0;
            },
            which: function (t) {
              return "keypress" === t.type
                ? rn(t)
                : "keydown" === t.type || "keyup" === t.type
                  ? t.keyCode
                  : 0;
            },
          }),
          Pn = sn(wn),
          In = sn(
            i({}, mn, {
              pointerId: 0,
              width: 0,
              height: 0,
              pressure: 0,
              tangentialPressure: 0,
              tiltX: 0,
              tiltY: 0,
              twist: 0,
              pointerType: 0,
              isPrimary: 0,
            }),
          ),
          On = sn(
            i({}, fn, {
              touches: 0,
              targetTouches: 0,
              changedTouches: 0,
              altKey: 0,
              metaKey: 0,
              ctrlKey: 0,
              shiftKey: 0,
              getModifierState: Rn,
            }),
          ),
          Cn = sn(
            i({}, cn, { propertyName: 0, elapsedTime: 0, pseudoElement: 0 }),
          ),
          Nn = i({}, mn, {
            deltaX: function (t) {
              return "deltaX" in t
                ? t.deltaX
                : "wheelDeltaX" in t
                  ? -t.wheelDeltaX
                  : 0;
            },
            deltaY: function (t) {
              return "deltaY" in t
                ? t.deltaY
                : "wheelDeltaY" in t
                  ? -t.wheelDeltaY
                  : "wheelDelta" in t
                    ? -t.wheelDelta
                    : 0;
            },
            deltaZ: 0,
            deltaMode: 0,
          }),
          Ln = sn(Nn),
          Dn = [9, 13, 27, 32],
          Un = c && "CompositionEvent" in window,
          Fn = null;
        c && "documentMode" in document && (Fn = document.documentMode);
        var Bn = c && "TextEvent" in window && !Fn,
          Gn = c && (!Un || (Fn && 8 < Fn && 11 >= Fn)),
          kn = String.fromCharCode(32),
          Hn = !1;
        function zn(t, e) {
          switch (t) {
            case "keyup":
              return -1 !== Dn.indexOf(e.keyCode);
            case "keydown":
              return 229 !== e.keyCode;
            case "keypress":
            case "mousedown":
            case "focusout":
              return !0;
            default:
              return !1;
          }
        }
        function Vn(t) {
          return "object" == typeof (t = t.detail) && "data" in t
            ? t.data
            : null;
        }
        var Xn = !1,
          Wn = {
            color: !0,
            date: !0,
            datetime: !0,
            "datetime-local": !0,
            email: !0,
            month: !0,
            number: !0,
            password: !0,
            range: !0,
            search: !0,
            tel: !0,
            text: !0,
            time: !0,
            url: !0,
            week: !0,
          };
        function jn(t) {
          var e = t && t.nodeName && t.nodeName.toLowerCase();
          return "input" === e ? !!Wn[t.type] : "textarea" === e;
        }
        function Yn(t, e, n, r) {
          It(r),
            0 < (e = Ur(e, "onChange")).length &&
              ((n = new dn("onChange", "change", null, n, r)),
              t.push({ event: n, listeners: e }));
        }
        var qn = null,
          Kn = null;
        function Zn(t) {
          wr(t, 0);
        }
        function Qn(t) {
          if (Q(ri(t))) return t;
        }
        function $n(t, e) {
          if ("change" === t) return e;
        }
        var Jn = !1;
        if (c) {
          var tr;
          if (c) {
            var er = "oninput" in document;
            if (!er) {
              var nr = document.createElement("div");
              nr.setAttribute("oninput", "return;"),
                (er = "function" == typeof nr.oninput);
            }
            tr = er;
          } else tr = !1;
          Jn = tr && (!document.documentMode || 9 < document.documentMode);
        }
        function rr() {
          qn && (qn.detachEvent("onpropertychange", ir), (Kn = qn = null));
        }
        function ir(t) {
          if ("value" === t.propertyName && Qn(Kn)) {
            var e = [];
            if ((Yn(e, Kn, t, Mt(t)), (t = Zn), Ut)) t(e);
            else {
              Ut = !0;
              try {
                Ct(t, e);
              } finally {
                (Ut = !1), Bt();
              }
            }
          }
        }
        function or(t, e, n) {
          "focusin" === t
            ? (rr(), (Kn = n), (qn = e).attachEvent("onpropertychange", ir))
            : "focusout" === t && rr();
        }
        function ar(t) {
          if ("selectionchange" === t || "keyup" === t || "keydown" === t)
            return Qn(Kn);
        }
        function sr(t, e) {
          if ("click" === t) return Qn(e);
        }
        function lr(t, e) {
          if ("input" === t || "change" === t) return Qn(e);
        }
        var ur =
            "function" == typeof Object.is
              ? Object.is
              : function (t, e) {
                  return (
                    (t === e && (0 !== t || 1 / t == 1 / e)) ||
                    (t != t && e != e)
                  );
                },
          hr = Object.prototype.hasOwnProperty;
        function cr(t, e) {
          if (ur(t, e)) return !0;
          if (
            "object" != typeof t ||
            null === t ||
            "object" != typeof e ||
            null === e
          )
            return !1;
          var n = Object.keys(t),
            r = Object.keys(e);
          if (n.length !== r.length) return !1;
          for (r = 0; r < n.length; r++)
            if (!hr.call(e, n[r]) || !ur(t[n[r]], e[n[r]])) return !1;
          return !0;
        }
        function dr(t) {
          for (; t && t.firstChild; ) t = t.firstChild;
          return t;
        }
        function fr(t, e) {
          var n,
            r = dr(t);
          for (t = 0; r; ) {
            if (3 === r.nodeType) {
              if (((n = t + r.textContent.length), t <= e && n >= e))
                return { node: r, offset: e - t };
              t = n;
            }
            t: {
              for (; r; ) {
                if (r.nextSibling) {
                  r = r.nextSibling;
                  break t;
                }
                r = r.parentNode;
              }
              r = void 0;
            }
            r = dr(r);
          }
        }
        function pr(t, e) {
          return (
            !(!t || !e) &&
            (t === e ||
              ((!t || 3 !== t.nodeType) &&
                (e && 3 === e.nodeType
                  ? pr(t, e.parentNode)
                  : "contains" in t
                    ? t.contains(e)
                    : !!t.compareDocumentPosition &&
                      !!(16 & t.compareDocumentPosition(e)))))
          );
        }
        function mr() {
          for (var t = window, e = $(); e instanceof t.HTMLIFrameElement; ) {
            try {
              var n = "string" == typeof e.contentWindow.location.href;
            } catch (t) {
              n = !1;
            }
            if (!n) break;
            e = $((t = e.contentWindow).document);
          }
          return e;
        }
        function _r(t) {
          var e = t && t.nodeName && t.nodeName.toLowerCase();
          return (
            e &&
            (("input" === e &&
              ("text" === t.type ||
                "search" === t.type ||
                "tel" === t.type ||
                "url" === t.type ||
                "password" === t.type)) ||
              "textarea" === e ||
              "true" === t.contentEditable)
          );
        }
        var gr = c && "documentMode" in document && 11 >= document.documentMode,
          vr = null,
          yr = null,
          Er = null,
          Tr = !1;
        function br(t, e, n) {
          var r =
            n.window === n
              ? n.document
              : 9 === n.nodeType
                ? n
                : n.ownerDocument;
          Tr ||
            null == vr ||
            vr !== $(r) ||
            ((r =
              "selectionStart" in (r = vr) && _r(r)
                ? { start: r.selectionStart, end: r.selectionEnd }
                : {
                    anchorNode: (r = (
                      (r.ownerDocument && r.ownerDocument.defaultView) ||
                      window
                    ).getSelection()).anchorNode,
                    anchorOffset: r.anchorOffset,
                    focusNode: r.focusNode,
                    focusOffset: r.focusOffset,
                  }),
            (Er && cr(Er, r)) ||
              ((Er = r),
              0 < (r = Ur(yr, "onSelect")).length &&
                ((e = new dn("onSelect", "select", null, e, n)),
                t.push({ event: e, listeners: r }),
                (e.target = vr))));
        }
        Le(
          "cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(
            " ",
          ),
          0,
        ),
          Le(
            "drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(
              " ",
            ),
            1,
          ),
          Le(Ne, 2);
        for (
          var xr =
              "change selectionchange textInput compositionstart compositionend compositionupdate".split(
                " ",
              ),
            Sr = 0;
          Sr < xr.length;
          Sr++
        )
          Ce.set(xr[Sr], 0);
        h("onMouseEnter", ["mouseout", "mouseover"]),
          h("onMouseLeave", ["mouseout", "mouseover"]),
          h("onPointerEnter", ["pointerout", "pointerover"]),
          h("onPointerLeave", ["pointerout", "pointerover"]),
          u(
            "onChange",
            "change click focusin focusout input keydown keyup selectionchange".split(
              " ",
            ),
          ),
          u(
            "onSelect",
            "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(
              " ",
            ),
          ),
          u("onBeforeInput", [
            "compositionend",
            "keypress",
            "textInput",
            "paste",
          ]),
          u(
            "onCompositionEnd",
            "compositionend focusout keydown keypress keyup mousedown".split(
              " ",
            ),
          ),
          u(
            "onCompositionStart",
            "compositionstart focusout keydown keypress keyup mousedown".split(
              " ",
            ),
          ),
          u(
            "onCompositionUpdate",
            "compositionupdate focusout keydown keypress keyup mousedown".split(
              " ",
            ),
          );
        var Mr =
            "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(
              " ",
            ),
          Ar = new Set(
            "cancel close invalid load scroll toggle".split(" ").concat(Mr),
          );
        function Rr(t, e, n) {
          var r = t.type || "unknown-event";
          (t.currentTarget = n),
            (function (t, e, n, r, i, o, s, l, u) {
              if ((qt.apply(this, arguments), Vt)) {
                if (!Vt) throw Error(a(198));
                var h = Xt;
                (Vt = !1), (Xt = null), Wt || ((Wt = !0), (jt = h));
              }
            })(r, e, void 0, t),
            (t.currentTarget = null);
        }
        function wr(t, e) {
          e = 0 != (4 & e);
          for (var n = 0; n < t.length; n++) {
            var r = t[n],
              i = r.event;
            r = r.listeners;
            t: {
              var o = void 0;
              if (e)
                for (var a = r.length - 1; 0 <= a; a--) {
                  var s = r[a],
                    l = s.instance,
                    u = s.currentTarget;
                  if (((s = s.listener), l !== o && i.isPropagationStopped()))
                    break t;
                  Rr(i, s, u), (o = l);
                }
              else
                for (a = 0; a < r.length; a++) {
                  if (
                    ((l = (s = r[a]).instance),
                    (u = s.currentTarget),
                    (s = s.listener),
                    l !== o && i.isPropagationStopped())
                  )
                    break t;
                  Rr(i, s, u), (o = l);
                }
            }
          }
          if (Wt) throw ((t = jt), (Wt = !1), (jt = null), t);
        }
        function Pr(t, e) {
          var n = oi(e),
            r = t + "__bubble";
          n.has(r) || (Nr(e, t, 2, !1), n.add(r));
        }
        var Ir = "_reactListening" + Math.random().toString(36).slice(2);
        function Or(t) {
          t[Ir] ||
            ((t[Ir] = !0),
            s.forEach(function (e) {
              Ar.has(e) || Cr(e, !1, t, null), Cr(e, !0, t, null);
            }));
        }
        function Cr(t, e, n, r) {
          var i =
              4 < arguments.length && void 0 !== arguments[4]
                ? arguments[4]
                : 0,
            o = n;
          if (
            ("selectionchange" === t &&
              9 !== n.nodeType &&
              (o = n.ownerDocument),
            null !== r && !e && Ar.has(t))
          ) {
            if ("scroll" !== t) return;
            (i |= 2), (o = r);
          }
          var a = oi(o),
            s = t + "__" + (e ? "capture" : "bubble");
          a.has(s) || (e && (i |= 4), Nr(o, t, i, e), a.add(s));
        }
        function Nr(t, e, n, r) {
          var i = Ce.get(e);
          switch (void 0 === i ? 2 : i) {
            case 0:
              i = Ke;
              break;
            case 1:
              i = Ze;
              break;
            default:
              i = Qe;
          }
          (n = i.bind(null, e, n, t)),
            (i = void 0),
            !kt ||
              ("touchstart" !== e && "touchmove" !== e && "wheel" !== e) ||
              (i = !0),
            r
              ? void 0 !== i
                ? t.addEventListener(e, n, { capture: !0, passive: i })
                : t.addEventListener(e, n, !0)
              : void 0 !== i
                ? t.addEventListener(e, n, { passive: i })
                : t.addEventListener(e, n, !1);
        }
        function Lr(t, e, n, r, i) {
          var o = r;
          if (0 == (1 & e) && 0 == (2 & e) && null !== r)
            t: for (;;) {
              if (null === r) return;
              var a = r.tag;
              if (3 === a || 4 === a) {
                var s = r.stateNode.containerInfo;
                if (s === i || (8 === s.nodeType && s.parentNode === i)) break;
                if (4 === a)
                  for (a = r.return; null !== a; ) {
                    var l = a.tag;
                    if (
                      (3 === l || 4 === l) &&
                      ((l = a.stateNode.containerInfo) === i ||
                        (8 === l.nodeType && l.parentNode === i))
                    )
                      return;
                    a = a.return;
                  }
                for (; null !== s; ) {
                  if (null === (a = ei(s))) return;
                  if (5 === (l = a.tag) || 6 === l) {
                    r = o = a;
                    continue t;
                  }
                  s = s.parentNode;
                }
              }
              r = r.return;
            }
          !(function (t, e, n) {
            if (Ft) return t();
            Ft = !0;
            try {
              return Dt(t, e, n);
            } finally {
              (Ft = !1), Bt();
            }
          })(function () {
            var r = o,
              i = Mt(n),
              a = [];
            t: {
              var s = Oe.get(t);
              if (void 0 !== s) {
                var l = dn,
                  u = t;
                switch (t) {
                  case "keypress":
                    if (0 === rn(n)) break t;
                  case "keydown":
                  case "keyup":
                    l = Pn;
                    break;
                  case "focusin":
                    (u = "focus"), (l = vn);
                    break;
                  case "focusout":
                    (u = "blur"), (l = vn);
                    break;
                  case "beforeblur":
                  case "afterblur":
                    l = vn;
                    break;
                  case "click":
                    if (2 === n.button) break t;
                  case "auxclick":
                  case "dblclick":
                  case "mousedown":
                  case "mousemove":
                  case "mouseup":
                  case "mouseout":
                  case "mouseover":
                  case "contextmenu":
                    l = _n;
                    break;
                  case "drag":
                  case "dragend":
                  case "dragenter":
                  case "dragexit":
                  case "dragleave":
                  case "dragover":
                  case "dragstart":
                  case "drop":
                    l = gn;
                    break;
                  case "touchcancel":
                  case "touchend":
                  case "touchmove":
                  case "touchstart":
                    l = On;
                    break;
                  case Re:
                  case we:
                  case Pe:
                    l = yn;
                    break;
                  case Ie:
                    l = Cn;
                    break;
                  case "scroll":
                    l = pn;
                    break;
                  case "wheel":
                    l = Ln;
                    break;
                  case "copy":
                  case "cut":
                  case "paste":
                    l = Tn;
                    break;
                  case "gotpointercapture":
                  case "lostpointercapture":
                  case "pointercancel":
                  case "pointerdown":
                  case "pointermove":
                  case "pointerout":
                  case "pointerover":
                  case "pointerup":
                    l = In;
                }
                var h = 0 != (4 & e),
                  c = !h && "scroll" === t,
                  d = h ? (null !== s ? s + "Capture" : null) : s;
                h = [];
                for (var f, p = r; null !== p; ) {
                  var m = (f = p).stateNode;
                  if (
                    (5 === f.tag &&
                      null !== m &&
                      ((f = m),
                      null !== d &&
                        null != (m = Gt(p, d)) &&
                        h.push(Dr(p, m, f))),
                    c)
                  )
                    break;
                  p = p.return;
                }
                0 < h.length &&
                  ((s = new l(s, u, null, n, i)),
                  a.push({ event: s, listeners: h }));
              }
            }
            if (0 == (7 & e)) {
              if (
                ((l = "mouseout" === t || "pointerout" === t),
                (!(s = "mouseover" === t || "pointerover" === t) ||
                  0 != (16 & e) ||
                  !(u = n.relatedTarget || n.fromElement) ||
                  (!ei(u) && !u[Jr])) &&
                  (l || s) &&
                  ((s =
                    i.window === i
                      ? i
                      : (s = i.ownerDocument)
                        ? s.defaultView || s.parentWindow
                        : window),
                  l
                    ? ((l = r),
                      null !==
                        (u = (u = n.relatedTarget || n.toElement)
                          ? ei(u)
                          : null) &&
                        (u !== (c = Kt(u)) || (5 !== u.tag && 6 !== u.tag)) &&
                        (u = null))
                    : ((l = null), (u = r)),
                  l !== u))
              ) {
                if (
                  ((h = _n),
                  (m = "onMouseLeave"),
                  (d = "onMouseEnter"),
                  (p = "mouse"),
                  ("pointerout" !== t && "pointerover" !== t) ||
                    ((h = In),
                    (m = "onPointerLeave"),
                    (d = "onPointerEnter"),
                    (p = "pointer")),
                  (c = null == l ? s : ri(l)),
                  (f = null == u ? s : ri(u)),
                  ((s = new h(m, p + "leave", l, n, i)).target = c),
                  (s.relatedTarget = f),
                  (m = null),
                  ei(i) === r &&
                    (((h = new h(d, p + "enter", u, n, i)).target = f),
                    (h.relatedTarget = c),
                    (m = h)),
                  (c = m),
                  l && u)
                )
                  t: {
                    for (d = u, p = 0, f = h = l; f; f = Fr(f)) p++;
                    for (f = 0, m = d; m; m = Fr(m)) f++;
                    for (; 0 < p - f; ) (h = Fr(h)), p--;
                    for (; 0 < f - p; ) (d = Fr(d)), f--;
                    for (; p--; ) {
                      if (h === d || (null !== d && h === d.alternate)) break t;
                      (h = Fr(h)), (d = Fr(d));
                    }
                    h = null;
                  }
                else h = null;
                null !== l && Br(a, s, l, h, !1),
                  null !== u && null !== c && Br(a, c, u, h, !0);
              }
              if (
                "select" ===
                  (l =
                    (s = r ? ri(r) : window).nodeName &&
                    s.nodeName.toLowerCase()) ||
                ("input" === l && "file" === s.type)
              )
                var _ = $n;
              else if (jn(s))
                if (Jn) _ = lr;
                else {
                  _ = ar;
                  var g = or;
                }
              else
                (l = s.nodeName) &&
                  "input" === l.toLowerCase() &&
                  ("checkbox" === s.type || "radio" === s.type) &&
                  (_ = sr);
              switch (
                (_ && (_ = _(t, r))
                  ? Yn(a, _, n, i)
                  : (g && g(t, s, r),
                    "focusout" === t &&
                      (g = s._wrapperState) &&
                      g.controlled &&
                      "number" === s.type &&
                      it(s, "number", s.value)),
                (g = r ? ri(r) : window),
                t)
              ) {
                case "focusin":
                  (jn(g) || "true" === g.contentEditable) &&
                    ((vr = g), (yr = r), (Er = null));
                  break;
                case "focusout":
                  Er = yr = vr = null;
                  break;
                case "mousedown":
                  Tr = !0;
                  break;
                case "contextmenu":
                case "mouseup":
                case "dragend":
                  (Tr = !1), br(a, n, i);
                  break;
                case "selectionchange":
                  if (gr) break;
                case "keydown":
                case "keyup":
                  br(a, n, i);
              }
              var v;
              if (Un)
                t: {
                  switch (t) {
                    case "compositionstart":
                      var y = "onCompositionStart";
                      break t;
                    case "compositionend":
                      y = "onCompositionEnd";
                      break t;
                    case "compositionupdate":
                      y = "onCompositionUpdate";
                      break t;
                  }
                  y = void 0;
                }
              else
                Xn
                  ? zn(t, n) && (y = "onCompositionEnd")
                  : "keydown" === t &&
                    229 === n.keyCode &&
                    (y = "onCompositionStart");
              y &&
                (Gn &&
                  "ko" !== n.locale &&
                  (Xn || "onCompositionStart" !== y
                    ? "onCompositionEnd" === y && Xn && (v = nn())
                    : ((tn = "value" in (Je = i) ? Je.value : Je.textContent),
                      (Xn = !0))),
                0 < (g = Ur(r, y)).length &&
                  ((y = new bn(y, t, null, n, i)),
                  a.push({ event: y, listeners: g }),
                  (v || null !== (v = Vn(n))) && (y.data = v))),
                (v = Bn
                  ? (function (t, e) {
                      switch (t) {
                        case "compositionend":
                          return Vn(e);
                        case "keypress":
                          return 32 !== e.which ? null : ((Hn = !0), kn);
                        case "textInput":
                          return (t = e.data) === kn && Hn ? null : t;
                        default:
                          return null;
                      }
                    })(t, n)
                  : (function (t, e) {
                      if (Xn)
                        return "compositionend" === t || (!Un && zn(t, e))
                          ? ((t = nn()), (en = tn = Je = null), (Xn = !1), t)
                          : null;
                      switch (t) {
                        case "paste":
                        default:
                          return null;
                        case "keypress":
                          if (
                            !(e.ctrlKey || e.altKey || e.metaKey) ||
                            (e.ctrlKey && e.altKey)
                          ) {
                            if (e.char && 1 < e.char.length) return e.char;
                            if (e.which) return String.fromCharCode(e.which);
                          }
                          return null;
                        case "compositionend":
                          return Gn && "ko" !== e.locale ? null : e.data;
                      }
                    })(t, n)) &&
                  0 < (r = Ur(r, "onBeforeInput")).length &&
                  ((i = new bn("onBeforeInput", "beforeinput", null, n, i)),
                  a.push({ event: i, listeners: r }),
                  (i.data = v));
            }
            wr(a, e);
          });
        }
        function Dr(t, e, n) {
          return { instance: t, listener: e, currentTarget: n };
        }
        function Ur(t, e) {
          for (var n = e + "Capture", r = []; null !== t; ) {
            var i = t,
              o = i.stateNode;
            5 === i.tag &&
              null !== o &&
              ((i = o),
              null != (o = Gt(t, n)) && r.unshift(Dr(t, o, i)),
              null != (o = Gt(t, e)) && r.push(Dr(t, o, i))),
              (t = t.return);
          }
          return r;
        }
        function Fr(t) {
          if (null === t) return null;
          do {
            t = t.return;
          } while (t && 5 !== t.tag);
          return t || null;
        }
        function Br(t, e, n, r, i) {
          for (var o = e._reactName, a = []; null !== n && n !== r; ) {
            var s = n,
              l = s.alternate,
              u = s.stateNode;
            if (null !== l && l === r) break;
            5 === s.tag &&
              null !== u &&
              ((s = u),
              i
                ? null != (l = Gt(n, o)) && a.unshift(Dr(n, l, s))
                : i || (null != (l = Gt(n, o)) && a.push(Dr(n, l, s)))),
              (n = n.return);
          }
          0 !== a.length && t.push({ event: e, listeners: a });
        }
        function Gr() {}
        var kr = null,
          Hr = null;
        function zr(t, e) {
          switch (t) {
            case "button":
            case "input":
            case "select":
            case "textarea":
              return !!e.autoFocus;
          }
          return !1;
        }
        function Vr(t, e) {
          return (
            "textarea" === t ||
            "option" === t ||
            "noscript" === t ||
            "string" == typeof e.children ||
            "number" == typeof e.children ||
            ("object" == typeof e.dangerouslySetInnerHTML &&
              null !== e.dangerouslySetInnerHTML &&
              null != e.dangerouslySetInnerHTML.__html)
          );
        }
        var Xr = "function" == typeof setTimeout ? setTimeout : void 0,
          Wr = "function" == typeof clearTimeout ? clearTimeout : void 0;
        function jr(t) {
          (1 === t.nodeType || (9 === t.nodeType && null != (t = t.body))) &&
            (t.textContent = "");
        }
        function Yr(t) {
          for (; null != t; t = t.nextSibling) {
            var e = t.nodeType;
            if (1 === e || 3 === e) break;
          }
          return t;
        }
        function qr(t) {
          t = t.previousSibling;
          for (var e = 0; t; ) {
            if (8 === t.nodeType) {
              var n = t.data;
              if ("$" === n || "$!" === n || "$?" === n) {
                if (0 === e) return t;
                e--;
              } else "/$" === n && e++;
            }
            t = t.previousSibling;
          }
          return null;
        }
        var Kr = 0,
          Zr = Math.random().toString(36).slice(2),
          Qr = "__reactFiber$" + Zr,
          $r = "__reactProps$" + Zr,
          Jr = "__reactContainer$" + Zr,
          ti = "__reactEvents$" + Zr;
        function ei(t) {
          var e = t[Qr];
          if (e) return e;
          for (var n = t.parentNode; n; ) {
            if ((e = n[Jr] || n[Qr])) {
              if (
                ((n = e.alternate),
                null !== e.child || (null !== n && null !== n.child))
              )
                for (t = qr(t); null !== t; ) {
                  if ((n = t[Qr])) return n;
                  t = qr(t);
                }
              return e;
            }
            n = (t = n).parentNode;
          }
          return null;
        }
        function ni(t) {
          return !(t = t[Qr] || t[Jr]) ||
            (5 !== t.tag && 6 !== t.tag && 13 !== t.tag && 3 !== t.tag)
            ? null
            : t;
        }
        function ri(t) {
          if (5 === t.tag || 6 === t.tag) return t.stateNode;
          throw Error(a(33));
        }
        function ii(t) {
          return t[$r] || null;
        }
        function oi(t) {
          var e = t[ti];
          return void 0 === e && (e = t[ti] = new Set()), e;
        }
        var ai = [],
          si = -1;
        function li(t) {
          return { current: t };
        }
        function ui(t) {
          0 > si || ((t.current = ai[si]), (ai[si] = null), si--);
        }
        function hi(t, e) {
          si++, (ai[si] = t.current), (t.current = e);
        }
        var ci = {},
          di = li(ci),
          fi = li(!1),
          pi = ci;
        function mi(t, e) {
          var n = t.type.contextTypes;
          if (!n) return ci;
          var r = t.stateNode;
          if (r && r.__reactInternalMemoizedUnmaskedChildContext === e)
            return r.__reactInternalMemoizedMaskedChildContext;
          var i,
            o = {};
          for (i in n) o[i] = e[i];
          return (
            r &&
              (((t = t.stateNode).__reactInternalMemoizedUnmaskedChildContext =
                e),
              (t.__reactInternalMemoizedMaskedChildContext = o)),
            o
          );
        }
        function _i(t) {
          return null != t.childContextTypes;
        }
        function gi() {
          ui(fi), ui(di);
        }
        function vi(t, e, n) {
          if (di.current !== ci) throw Error(a(168));
          hi(di, e), hi(fi, n);
        }
        function yi(t, e, n) {
          var r = t.stateNode;
          if (
            ((t = e.childContextTypes), "function" != typeof r.getChildContext)
          )
            return n;
          for (var o in (r = r.getChildContext()))
            if (!(o in t)) throw Error(a(108, Y(e) || "Unknown", o));
          return i({}, n, r);
        }
        function Ei(t) {
          return (
            (t =
              ((t = t.stateNode) &&
                t.__reactInternalMemoizedMergedChildContext) ||
              ci),
            (pi = di.current),
            hi(di, t),
            hi(fi, fi.current),
            !0
          );
        }
        function Ti(t, e, n) {
          var r = t.stateNode;
          if (!r) throw Error(a(169));
          n
            ? ((t = yi(t, e, pi)),
              (r.__reactInternalMemoizedMergedChildContext = t),
              ui(fi),
              ui(di),
              hi(di, t))
            : ui(fi),
            hi(fi, n);
        }
        var bi = null,
          xi = null,
          Si = o.unstable_runWithPriority,
          Mi = o.unstable_scheduleCallback,
          Ai = o.unstable_cancelCallback,
          Ri = o.unstable_shouldYield,
          wi = o.unstable_requestPaint,
          Pi = o.unstable_now,
          Ii = o.unstable_getCurrentPriorityLevel,
          Oi = o.unstable_ImmediatePriority,
          Ci = o.unstable_UserBlockingPriority,
          Ni = o.unstable_NormalPriority,
          Li = o.unstable_LowPriority,
          Di = o.unstable_IdlePriority,
          Ui = {},
          Fi = void 0 !== wi ? wi : function () {},
          Bi = null,
          Gi = null,
          ki = !1,
          Hi = Pi(),
          zi =
            1e4 > Hi
              ? Pi
              : function () {
                  return Pi() - Hi;
                };
        function Vi() {
          switch (Ii()) {
            case Oi:
              return 99;
            case Ci:
              return 98;
            case Ni:
              return 97;
            case Li:
              return 96;
            case Di:
              return 95;
            default:
              throw Error(a(332));
          }
        }
        function Xi(t) {
          switch (t) {
            case 99:
              return Oi;
            case 98:
              return Ci;
            case 97:
              return Ni;
            case 96:
              return Li;
            case 95:
              return Di;
            default:
              throw Error(a(332));
          }
        }
        function Wi(t, e) {
          return (t = Xi(t)), Si(t, e);
        }
        function ji(t, e, n) {
          return (t = Xi(t)), Mi(t, e, n);
        }
        function Yi() {
          if (null !== Gi) {
            var t = Gi;
            (Gi = null), Ai(t);
          }
          qi();
        }
        function qi() {
          if (!ki && null !== Bi) {
            ki = !0;
            var t = 0;
            try {
              var e = Bi;
              Wi(99, function () {
                for (; t < e.length; t++) {
                  var n = e[t];
                  do {
                    n = n(!0);
                  } while (null !== n);
                }
              }),
                (Bi = null);
            } catch (e) {
              throw (null !== Bi && (Bi = Bi.slice(t + 1)), Mi(Oi, Yi), e);
            } finally {
              ki = !1;
            }
          }
        }
        var Ki = T.ReactCurrentBatchConfig;
        function Zi(t, e) {
          if (t && t.defaultProps) {
            for (var n in ((e = i({}, e)), (t = t.defaultProps)))
              void 0 === e[n] && (e[n] = t[n]);
            return e;
          }
          return e;
        }
        var Qi = li(null),
          $i = null,
          Ji = null,
          to = null;
        function eo() {
          to = Ji = $i = null;
        }
        function no(t) {
          var e = Qi.current;
          ui(Qi), (t.type._context._currentValue = e);
        }
        function ro(t, e) {
          for (; null !== t; ) {
            var n = t.alternate;
            if ((t.childLanes & e) === e) {
              if (null === n || (n.childLanes & e) === e) break;
              n.childLanes |= e;
            } else (t.childLanes |= e), null !== n && (n.childLanes |= e);
            t = t.return;
          }
        }
        function io(t, e) {
          ($i = t),
            (to = Ji = null),
            null !== (t = t.dependencies) &&
              null !== t.firstContext &&
              (0 != (t.lanes & e) && (Ua = !0), (t.firstContext = null));
        }
        function oo(t, e) {
          if (to !== t && !1 !== e && 0 !== e)
            if (
              (("number" == typeof e && 1073741823 !== e) ||
                ((to = t), (e = 1073741823)),
              (e = { context: t, observedBits: e, next: null }),
              null === Ji)
            ) {
              if (null === $i) throw Error(a(308));
              (Ji = e),
                ($i.dependencies = {
                  lanes: 0,
                  firstContext: e,
                  responders: null,
                });
            } else Ji = Ji.next = e;
          return t._currentValue;
        }
        var ao = !1;
        function so(t) {
          t.updateQueue = {
            baseState: t.memoizedState,
            firstBaseUpdate: null,
            lastBaseUpdate: null,
            shared: { pending: null },
            effects: null,
          };
        }
        function lo(t, e) {
          (t = t.updateQueue),
            e.updateQueue === t &&
              (e.updateQueue = {
                baseState: t.baseState,
                firstBaseUpdate: t.firstBaseUpdate,
                lastBaseUpdate: t.lastBaseUpdate,
                shared: t.shared,
                effects: t.effects,
              });
        }
        function uo(t, e) {
          return {
            eventTime: t,
            lane: e,
            tag: 0,
            payload: null,
            callback: null,
            next: null,
          };
        }
        function ho(t, e) {
          if (null !== (t = t.updateQueue)) {
            var n = (t = t.shared).pending;
            null === n ? (e.next = e) : ((e.next = n.next), (n.next = e)),
              (t.pending = e);
          }
        }
        function co(t, e) {
          var n = t.updateQueue,
            r = t.alternate;
          if (null !== r && n === (r = r.updateQueue)) {
            var i = null,
              o = null;
            if (null !== (n = n.firstBaseUpdate)) {
              do {
                var a = {
                  eventTime: n.eventTime,
                  lane: n.lane,
                  tag: n.tag,
                  payload: n.payload,
                  callback: n.callback,
                  next: null,
                };
                null === o ? (i = o = a) : (o = o.next = a), (n = n.next);
              } while (null !== n);
              null === o ? (i = o = e) : (o = o.next = e);
            } else i = o = e;
            return (
              (n = {
                baseState: r.baseState,
                firstBaseUpdate: i,
                lastBaseUpdate: o,
                shared: r.shared,
                effects: r.effects,
              }),
              void (t.updateQueue = n)
            );
          }
          null === (t = n.lastBaseUpdate)
            ? (n.firstBaseUpdate = e)
            : (t.next = e),
            (n.lastBaseUpdate = e);
        }
        function fo(t, e, n, r) {
          var o = t.updateQueue;
          ao = !1;
          var a = o.firstBaseUpdate,
            s = o.lastBaseUpdate,
            l = o.shared.pending;
          if (null !== l) {
            o.shared.pending = null;
            var u = l,
              h = u.next;
            (u.next = null), null === s ? (a = h) : (s.next = h), (s = u);
            var c = t.alternate;
            if (null !== c) {
              var d = (c = c.updateQueue).lastBaseUpdate;
              d !== s &&
                (null === d ? (c.firstBaseUpdate = h) : (d.next = h),
                (c.lastBaseUpdate = u));
            }
          }
          if (null !== a) {
            for (d = o.baseState, s = 0, c = h = u = null; ; ) {
              l = a.lane;
              var f = a.eventTime;
              if ((r & l) === l) {
                null !== c &&
                  (c = c.next =
                    {
                      eventTime: f,
                      lane: 0,
                      tag: a.tag,
                      payload: a.payload,
                      callback: a.callback,
                      next: null,
                    });
                t: {
                  var p = t,
                    m = a;
                  switch (((l = e), (f = n), m.tag)) {
                    case 1:
                      if ("function" == typeof (p = m.payload)) {
                        d = p.call(f, d, l);
                        break t;
                      }
                      d = p;
                      break t;
                    case 3:
                      p.flags = (-4097 & p.flags) | 64;
                    case 0:
                      if (
                        null ==
                        (l =
                          "function" == typeof (p = m.payload)
                            ? p.call(f, d, l)
                            : p)
                      )
                        break t;
                      d = i({}, d, l);
                      break t;
                    case 2:
                      ao = !0;
                  }
                }
                null !== a.callback &&
                  ((t.flags |= 32),
                  null === (l = o.effects) ? (o.effects = [a]) : l.push(a));
              } else
                (f = {
                  eventTime: f,
                  lane: l,
                  tag: a.tag,
                  payload: a.payload,
                  callback: a.callback,
                  next: null,
                }),
                  null === c ? ((h = c = f), (u = d)) : (c = c.next = f),
                  (s |= l);
              if (null === (a = a.next)) {
                if (null === (l = o.shared.pending)) break;
                (a = l.next),
                  (l.next = null),
                  (o.lastBaseUpdate = l),
                  (o.shared.pending = null);
              }
            }
            null === c && (u = d),
              (o.baseState = u),
              (o.firstBaseUpdate = h),
              (o.lastBaseUpdate = c),
              (Gs |= s),
              (t.lanes = s),
              (t.memoizedState = d);
          }
        }
        function po(t, e, n) {
          if (((t = e.effects), (e.effects = null), null !== t))
            for (e = 0; e < t.length; e++) {
              var r = t[e],
                i = r.callback;
              if (null !== i) {
                if (((r.callback = null), (r = n), "function" != typeof i))
                  throw Error(a(191, i));
                i.call(r);
              }
            }
        }
        var mo = new r.Component().refs;
        function _o(t, e, n, r) {
          (n = null == (n = n(r, (e = t.memoizedState))) ? e : i({}, e, n)),
            (t.memoizedState = n),
            0 === t.lanes && (t.updateQueue.baseState = n);
        }
        var go = {
          isMounted: function (t) {
            return !!(t = t._reactInternals) && Kt(t) === t;
          },
          enqueueSetState: function (t, e, n) {
            t = t._reactInternals;
            var r = hl(),
              i = cl(t),
              o = uo(r, i);
            (o.payload = e),
              null != n && (o.callback = n),
              ho(t, o),
              dl(t, i, r);
          },
          enqueueReplaceState: function (t, e, n) {
            t = t._reactInternals;
            var r = hl(),
              i = cl(t),
              o = uo(r, i);
            (o.tag = 1),
              (o.payload = e),
              null != n && (o.callback = n),
              ho(t, o),
              dl(t, i, r);
          },
          enqueueForceUpdate: function (t, e) {
            t = t._reactInternals;
            var n = hl(),
              r = cl(t),
              i = uo(n, r);
            (i.tag = 2), null != e && (i.callback = e), ho(t, i), dl(t, r, n);
          },
        };
        function vo(t, e, n, r, i, o, a) {
          return "function" == typeof (t = t.stateNode).shouldComponentUpdate
            ? t.shouldComponentUpdate(r, o, a)
            : !(
                e.prototype &&
                e.prototype.isPureReactComponent &&
                cr(n, r) &&
                cr(i, o)
              );
        }
        function yo(t, e, n) {
          var r = !1,
            i = ci,
            o = e.contextType;
          return (
            "object" == typeof o && null !== o
              ? (o = oo(o))
              : ((i = _i(e) ? pi : di.current),
                (o = (r = null != (r = e.contextTypes)) ? mi(t, i) : ci)),
            (e = new e(n, o)),
            (t.memoizedState =
              null !== e.state && void 0 !== e.state ? e.state : null),
            (e.updater = go),
            (t.stateNode = e),
            (e._reactInternals = t),
            r &&
              (((t = t.stateNode).__reactInternalMemoizedUnmaskedChildContext =
                i),
              (t.__reactInternalMemoizedMaskedChildContext = o)),
            e
          );
        }
        function Eo(t, e, n, r) {
          (t = e.state),
            "function" == typeof e.componentWillReceiveProps &&
              e.componentWillReceiveProps(n, r),
            "function" == typeof e.UNSAFE_componentWillReceiveProps &&
              e.UNSAFE_componentWillReceiveProps(n, r),
            e.state !== t && go.enqueueReplaceState(e, e.state, null);
        }
        function To(t, e, n, r) {
          var i = t.stateNode;
          (i.props = n), (i.state = t.memoizedState), (i.refs = mo), so(t);
          var o = e.contextType;
          "object" == typeof o && null !== o
            ? (i.context = oo(o))
            : ((o = _i(e) ? pi : di.current), (i.context = mi(t, o))),
            fo(t, n, i, r),
            (i.state = t.memoizedState),
            "function" == typeof (o = e.getDerivedStateFromProps) &&
              (_o(t, e, o, n), (i.state = t.memoizedState)),
            "function" == typeof e.getDerivedStateFromProps ||
              "function" == typeof i.getSnapshotBeforeUpdate ||
              ("function" != typeof i.UNSAFE_componentWillMount &&
                "function" != typeof i.componentWillMount) ||
              ((e = i.state),
              "function" == typeof i.componentWillMount &&
                i.componentWillMount(),
              "function" == typeof i.UNSAFE_componentWillMount &&
                i.UNSAFE_componentWillMount(),
              e !== i.state && go.enqueueReplaceState(i, i.state, null),
              fo(t, n, i, r),
              (i.state = t.memoizedState)),
            "function" == typeof i.componentDidMount && (t.flags |= 4);
        }
        var bo = Array.isArray;
        function xo(t, e, n) {
          if (
            null !== (t = n.ref) &&
            "function" != typeof t &&
            "object" != typeof t
          ) {
            if (n._owner) {
              if ((n = n._owner)) {
                if (1 !== n.tag) throw Error(a(309));
                var r = n.stateNode;
              }
              if (!r) throw Error(a(147, t));
              var i = "" + t;
              return null !== e &&
                null !== e.ref &&
                "function" == typeof e.ref &&
                e.ref._stringRef === i
                ? e.ref
                : ((e = function (t) {
                    var e = r.refs;
                    e === mo && (e = r.refs = {}),
                      null === t ? delete e[i] : (e[i] = t);
                  }),
                  (e._stringRef = i),
                  e);
            }
            if ("string" != typeof t) throw Error(a(284));
            if (!n._owner) throw Error(a(290, t));
          }
          return t;
        }
        function So(t, e) {
          if ("textarea" !== t.type)
            throw Error(
              a(
                31,
                "[object Object]" === Object.prototype.toString.call(e)
                  ? "object with keys {" + Object.keys(e).join(", ") + "}"
                  : e,
              ),
            );
        }
        function Mo(t) {
          function e(e, n) {
            if (t) {
              var r = e.lastEffect;
              null !== r
                ? ((r.nextEffect = n), (e.lastEffect = n))
                : (e.firstEffect = e.lastEffect = n),
                (n.nextEffect = null),
                (n.flags = 8);
            }
          }
          function n(n, r) {
            if (!t) return null;
            for (; null !== r; ) e(n, r), (r = r.sibling);
            return null;
          }
          function r(t, e) {
            for (t = new Map(); null !== e; )
              null !== e.key ? t.set(e.key, e) : t.set(e.index, e),
                (e = e.sibling);
            return t;
          }
          function i(t, e) {
            return ((t = Xl(t, e)).index = 0), (t.sibling = null), t;
          }
          function o(e, n, r) {
            return (
              (e.index = r),
              t
                ? null !== (r = e.alternate)
                  ? (r = r.index) < n
                    ? ((e.flags = 2), n)
                    : r
                  : ((e.flags = 2), n)
                : n
            );
          }
          function s(e) {
            return t && null === e.alternate && (e.flags = 2), e;
          }
          function l(t, e, n, r) {
            return null === e || 6 !== e.tag
              ? (((e = ql(n, t.mode, r)).return = t), e)
              : (((e = i(e, n)).return = t), e);
          }
          function u(t, e, n, r) {
            return null !== e && e.elementType === n.type
              ? (((r = i(e, n.props)).ref = xo(t, e, n)), (r.return = t), r)
              : (((r = Wl(n.type, n.key, n.props, null, t.mode, r)).ref = xo(
                  t,
                  e,
                  n,
                )),
                (r.return = t),
                r);
          }
          function h(t, e, n, r) {
            return null === e ||
              4 !== e.tag ||
              e.stateNode.containerInfo !== n.containerInfo ||
              e.stateNode.implementation !== n.implementation
              ? (((e = Kl(n, t.mode, r)).return = t), e)
              : (((e = i(e, n.children || [])).return = t), e);
          }
          function c(t, e, n, r, o) {
            return null === e || 7 !== e.tag
              ? (((e = jl(n, t.mode, r, o)).return = t), e)
              : (((e = i(e, n)).return = t), e);
          }
          function d(t, e, n) {
            if ("string" == typeof e || "number" == typeof e)
              return ((e = ql("" + e, t.mode, n)).return = t), e;
            if ("object" == typeof e && null !== e) {
              switch (e.$$typeof) {
                case b:
                  return (
                    ((n = Wl(e.type, e.key, e.props, null, t.mode, n)).ref = xo(
                      t,
                      null,
                      e,
                    )),
                    (n.return = t),
                    n
                  );
                case x:
                  return ((e = Kl(e, t.mode, n)).return = t), e;
              }
              if (bo(e) || z(e))
                return ((e = jl(e, t.mode, n, null)).return = t), e;
              So(t, e);
            }
            return null;
          }
          function f(t, e, n, r) {
            var i = null !== e ? e.key : null;
            if ("string" == typeof n || "number" == typeof n)
              return null !== i ? null : l(t, e, "" + n, r);
            if ("object" == typeof n && null !== n) {
              switch (n.$$typeof) {
                case b:
                  return n.key === i
                    ? n.type === S
                      ? c(t, e, n.props.children, r, i)
                      : u(t, e, n, r)
                    : null;
                case x:
                  return n.key === i ? h(t, e, n, r) : null;
              }
              if (bo(n) || z(n)) return null !== i ? null : c(t, e, n, r, null);
              So(t, n);
            }
            return null;
          }
          function p(t, e, n, r, i) {
            if ("string" == typeof r || "number" == typeof r)
              return l(e, (t = t.get(n) || null), "" + r, i);
            if ("object" == typeof r && null !== r) {
              switch (r.$$typeof) {
                case b:
                  return (
                    (t = t.get(null === r.key ? n : r.key) || null),
                    r.type === S
                      ? c(e, t, r.props.children, i, r.key)
                      : u(e, t, r, i)
                  );
                case x:
                  return h(
                    e,
                    (t = t.get(null === r.key ? n : r.key) || null),
                    r,
                    i,
                  );
              }
              if (bo(r) || z(r))
                return c(e, (t = t.get(n) || null), r, i, null);
              So(e, r);
            }
            return null;
          }
          function m(i, a, s, l) {
            for (
              var u = null, h = null, c = a, m = (a = 0), _ = null;
              null !== c && m < s.length;
              m++
            ) {
              c.index > m ? ((_ = c), (c = null)) : (_ = c.sibling);
              var g = f(i, c, s[m], l);
              if (null === g) {
                null === c && (c = _);
                break;
              }
              t && c && null === g.alternate && e(i, c),
                (a = o(g, a, m)),
                null === h ? (u = g) : (h.sibling = g),
                (h = g),
                (c = _);
            }
            if (m === s.length) return n(i, c), u;
            if (null === c) {
              for (; m < s.length; m++)
                null !== (c = d(i, s[m], l)) &&
                  ((a = o(c, a, m)),
                  null === h ? (u = c) : (h.sibling = c),
                  (h = c));
              return u;
            }
            for (c = r(i, c); m < s.length; m++)
              null !== (_ = p(c, i, m, s[m], l)) &&
                (t &&
                  null !== _.alternate &&
                  c.delete(null === _.key ? m : _.key),
                (a = o(_, a, m)),
                null === h ? (u = _) : (h.sibling = _),
                (h = _));
            return (
              t &&
                c.forEach(function (t) {
                  return e(i, t);
                }),
              u
            );
          }
          function _(i, s, l, u) {
            var h = z(l);
            if ("function" != typeof h) throw Error(a(150));
            if (null == (l = h.call(l))) throw Error(a(151));
            for (
              var c = (h = null), m = s, _ = (s = 0), g = null, v = l.next();
              null !== m && !v.done;
              _++, v = l.next()
            ) {
              m.index > _ ? ((g = m), (m = null)) : (g = m.sibling);
              var y = f(i, m, v.value, u);
              if (null === y) {
                null === m && (m = g);
                break;
              }
              t && m && null === y.alternate && e(i, m),
                (s = o(y, s, _)),
                null === c ? (h = y) : (c.sibling = y),
                (c = y),
                (m = g);
            }
            if (v.done) return n(i, m), h;
            if (null === m) {
              for (; !v.done; _++, v = l.next())
                null !== (v = d(i, v.value, u)) &&
                  ((s = o(v, s, _)),
                  null === c ? (h = v) : (c.sibling = v),
                  (c = v));
              return h;
            }
            for (m = r(i, m); !v.done; _++, v = l.next())
              null !== (v = p(m, i, _, v.value, u)) &&
                (t &&
                  null !== v.alternate &&
                  m.delete(null === v.key ? _ : v.key),
                (s = o(v, s, _)),
                null === c ? (h = v) : (c.sibling = v),
                (c = v));
            return (
              t &&
                m.forEach(function (t) {
                  return e(i, t);
                }),
              h
            );
          }
          return function (t, r, o, l) {
            var u =
              "object" == typeof o &&
              null !== o &&
              o.type === S &&
              null === o.key;
            u && (o = o.props.children);
            var h = "object" == typeof o && null !== o;
            if (h)
              switch (o.$$typeof) {
                case b:
                  t: {
                    for (h = o.key, u = r; null !== u; ) {
                      if (u.key === h) {
                        if (7 === u.tag) {
                          if (o.type === S) {
                            n(t, u.sibling),
                              ((r = i(u, o.props.children)).return = t),
                              (t = r);
                            break t;
                          }
                        } else if (u.elementType === o.type) {
                          n(t, u.sibling),
                            ((r = i(u, o.props)).ref = xo(t, u, o)),
                            (r.return = t),
                            (t = r);
                          break t;
                        }
                        n(t, u);
                        break;
                      }
                      e(t, u), (u = u.sibling);
                    }
                    o.type === S
                      ? (((r = jl(o.props.children, t.mode, l, o.key)).return =
                          t),
                        (t = r))
                      : (((l = Wl(
                          o.type,
                          o.key,
                          o.props,
                          null,
                          t.mode,
                          l,
                        )).ref = xo(t, r, o)),
                        (l.return = t),
                        (t = l));
                  }
                  return s(t);
                case x:
                  t: {
                    for (u = o.key; null !== r; ) {
                      if (r.key === u) {
                        if (
                          4 === r.tag &&
                          r.stateNode.containerInfo === o.containerInfo &&
                          r.stateNode.implementation === o.implementation
                        ) {
                          n(t, r.sibling),
                            ((r = i(r, o.children || [])).return = t),
                            (t = r);
                          break t;
                        }
                        n(t, r);
                        break;
                      }
                      e(t, r), (r = r.sibling);
                    }
                    ((r = Kl(o, t.mode, l)).return = t), (t = r);
                  }
                  return s(t);
              }
            if ("string" == typeof o || "number" == typeof o)
              return (
                (o = "" + o),
                null !== r && 6 === r.tag
                  ? (n(t, r.sibling), ((r = i(r, o)).return = t), (t = r))
                  : (n(t, r), ((r = ql(o, t.mode, l)).return = t), (t = r)),
                s(t)
              );
            if (bo(o)) return m(t, r, o, l);
            if (z(o)) return _(t, r, o, l);
            if ((h && So(t, o), void 0 === o && !u))
              switch (t.tag) {
                case 1:
                case 22:
                case 0:
                case 11:
                case 15:
                  throw Error(a(152, Y(t.type) || "Component"));
              }
            return n(t, r);
          };
        }
        var Ao = Mo(!0),
          Ro = Mo(!1),
          wo = {},
          Po = li(wo),
          Io = li(wo),
          Oo = li(wo);
        function Co(t) {
          if (t === wo) throw Error(a(174));
          return t;
        }
        function No(t, e) {
          switch ((hi(Oo, e), hi(Io, t), hi(Po, wo), (t = e.nodeType))) {
            case 9:
            case 11:
              e = (e = e.documentElement) ? e.namespaceURI : ft(null, "");
              break;
            default:
              e = ft(
                (e = (t = 8 === t ? e.parentNode : e).namespaceURI || null),
                (t = t.tagName),
              );
          }
          ui(Po), hi(Po, e);
        }
        function Lo() {
          ui(Po), ui(Io), ui(Oo);
        }
        function Do(t) {
          Co(Oo.current);
          var e = Co(Po.current),
            n = ft(e, t.type);
          e !== n && (hi(Io, t), hi(Po, n));
        }
        function Uo(t) {
          Io.current === t && (ui(Po), ui(Io));
        }
        var Fo = li(0);
        function Bo(t) {
          for (var e = t; null !== e; ) {
            if (13 === e.tag) {
              var n = e.memoizedState;
              if (
                null !== n &&
                (null === (n = n.dehydrated) ||
                  "$?" === n.data ||
                  "$!" === n.data)
              )
                return e;
            } else if (19 === e.tag && void 0 !== e.memoizedProps.revealOrder) {
              if (0 != (64 & e.flags)) return e;
            } else if (null !== e.child) {
              (e.child.return = e), (e = e.child);
              continue;
            }
            if (e === t) break;
            for (; null === e.sibling; ) {
              if (null === e.return || e.return === t) return null;
              e = e.return;
            }
            (e.sibling.return = e.return), (e = e.sibling);
          }
          return null;
        }
        var Go = null,
          ko = null,
          Ho = !1;
        function zo(t, e) {
          var n = zl(5, null, null, 0);
          (n.elementType = "DELETED"),
            (n.type = "DELETED"),
            (n.stateNode = e),
            (n.return = t),
            (n.flags = 8),
            null !== t.lastEffect
              ? ((t.lastEffect.nextEffect = n), (t.lastEffect = n))
              : (t.firstEffect = t.lastEffect = n);
        }
        function Vo(t, e) {
          switch (t.tag) {
            case 5:
              var n = t.type;
              return (
                null !==
                  (e =
                    1 !== e.nodeType ||
                    n.toLowerCase() !== e.nodeName.toLowerCase()
                      ? null
                      : e) && ((t.stateNode = e), !0)
              );
            case 6:
              return (
                null !==
                  (e = "" === t.pendingProps || 3 !== e.nodeType ? null : e) &&
                ((t.stateNode = e), !0)
              );
            default:
              return !1;
          }
        }
        function Xo(t) {
          if (Ho) {
            var e = ko;
            if (e) {
              var n = e;
              if (!Vo(t, e)) {
                if (!(e = Yr(n.nextSibling)) || !Vo(t, e))
                  return (
                    (t.flags = (-1025 & t.flags) | 2), (Ho = !1), void (Go = t)
                  );
                zo(Go, n);
              }
              (Go = t), (ko = Yr(e.firstChild));
            } else (t.flags = (-1025 & t.flags) | 2), (Ho = !1), (Go = t);
          }
        }
        function Wo(t) {
          for (
            t = t.return;
            null !== t && 5 !== t.tag && 3 !== t.tag && 13 !== t.tag;

          )
            t = t.return;
          Go = t;
        }
        function jo(t) {
          if (t !== Go) return !1;
          if (!Ho) return Wo(t), (Ho = !0), !1;
          var e = t.type;
          if (
            5 !== t.tag ||
            ("head" !== e && "body" !== e && !Vr(e, t.memoizedProps))
          )
            for (e = ko; e; ) zo(t, e), (e = Yr(e.nextSibling));
          if ((Wo(t), 13 === t.tag)) {
            if (!(t = null !== (t = t.memoizedState) ? t.dehydrated : null))
              throw Error(a(317));
            t: {
              for (t = t.nextSibling, e = 0; t; ) {
                if (8 === t.nodeType) {
                  var n = t.data;
                  if ("/$" === n) {
                    if (0 === e) {
                      ko = Yr(t.nextSibling);
                      break t;
                    }
                    e--;
                  } else ("$" !== n && "$!" !== n && "$?" !== n) || e++;
                }
                t = t.nextSibling;
              }
              ko = null;
            }
          } else ko = Go ? Yr(t.stateNode.nextSibling) : null;
          return !0;
        }
        function Yo() {
          (ko = Go = null), (Ho = !1);
        }
        var qo = [];
        function Ko() {
          for (var t = 0; t < qo.length; t++)
            qo[t]._workInProgressVersionPrimary = null;
          qo.length = 0;
        }
        var Zo = T.ReactCurrentDispatcher,
          Qo = T.ReactCurrentBatchConfig,
          $o = 0,
          Jo = null,
          ta = null,
          ea = null,
          na = !1,
          ra = !1;
        function ia() {
          throw Error(a(321));
        }
        function oa(t, e) {
          if (null === e) return !1;
          for (var n = 0; n < e.length && n < t.length; n++)
            if (!ur(t[n], e[n])) return !1;
          return !0;
        }
        function aa(t, e, n, r, i, o) {
          if (
            (($o = o),
            (Jo = e),
            (e.memoizedState = null),
            (e.updateQueue = null),
            (e.lanes = 0),
            (Zo.current = null === t || null === t.memoizedState ? Ca : Na),
            (t = n(r, i)),
            ra)
          ) {
            o = 0;
            do {
              if (((ra = !1), !(25 > o))) throw Error(a(301));
              (o += 1),
                (ea = ta = null),
                (e.updateQueue = null),
                (Zo.current = La),
                (t = n(r, i));
            } while (ra);
          }
          if (
            ((Zo.current = Oa),
            (e = null !== ta && null !== ta.next),
            ($o = 0),
            (ea = ta = Jo = null),
            (na = !1),
            e)
          )
            throw Error(a(300));
          return t;
        }
        function sa() {
          var t = {
            memoizedState: null,
            baseState: null,
            baseQueue: null,
            queue: null,
            next: null,
          };
          return (
            null === ea ? (Jo.memoizedState = ea = t) : (ea = ea.next = t), ea
          );
        }
        function la() {
          if (null === ta) {
            var t = Jo.alternate;
            t = null !== t ? t.memoizedState : null;
          } else t = ta.next;
          var e = null === ea ? Jo.memoizedState : ea.next;
          if (null !== e) (ea = e), (ta = t);
          else {
            if (null === t) throw Error(a(310));
            (t = {
              memoizedState: (ta = t).memoizedState,
              baseState: ta.baseState,
              baseQueue: ta.baseQueue,
              queue: ta.queue,
              next: null,
            }),
              null === ea ? (Jo.memoizedState = ea = t) : (ea = ea.next = t);
          }
          return ea;
        }
        function ua(t, e) {
          return "function" == typeof e ? e(t) : e;
        }
        function ha(t) {
          var e = la(),
            n = e.queue;
          if (null === n) throw Error(a(311));
          n.lastRenderedReducer = t;
          var r = ta,
            i = r.baseQueue,
            o = n.pending;
          if (null !== o) {
            if (null !== i) {
              var s = i.next;
              (i.next = o.next), (o.next = s);
            }
            (r.baseQueue = i = o), (n.pending = null);
          }
          if (null !== i) {
            (i = i.next), (r = r.baseState);
            var l = (s = o = null),
              u = i;
            do {
              var h = u.lane;
              if (($o & h) === h)
                null !== l &&
                  (l = l.next =
                    {
                      lane: 0,
                      action: u.action,
                      eagerReducer: u.eagerReducer,
                      eagerState: u.eagerState,
                      next: null,
                    }),
                  (r = u.eagerReducer === t ? u.eagerState : t(r, u.action));
              else {
                var c = {
                  lane: h,
                  action: u.action,
                  eagerReducer: u.eagerReducer,
                  eagerState: u.eagerState,
                  next: null,
                };
                null === l ? ((s = l = c), (o = r)) : (l = l.next = c),
                  (Jo.lanes |= h),
                  (Gs |= h);
              }
              u = u.next;
            } while (null !== u && u !== i);
            null === l ? (o = r) : (l.next = s),
              ur(r, e.memoizedState) || (Ua = !0),
              (e.memoizedState = r),
              (e.baseState = o),
              (e.baseQueue = l),
              (n.lastRenderedState = r);
          }
          return [e.memoizedState, n.dispatch];
        }
        function ca(t) {
          var e = la(),
            n = e.queue;
          if (null === n) throw Error(a(311));
          n.lastRenderedReducer = t;
          var r = n.dispatch,
            i = n.pending,
            o = e.memoizedState;
          if (null !== i) {
            n.pending = null;
            var s = (i = i.next);
            do {
              (o = t(o, s.action)), (s = s.next);
            } while (s !== i);
            ur(o, e.memoizedState) || (Ua = !0),
              (e.memoizedState = o),
              null === e.baseQueue && (e.baseState = o),
              (n.lastRenderedState = o);
          }
          return [o, r];
        }
        function da(t, e, n) {
          var r = e._getVersion;
          r = r(e._source);
          var i = e._workInProgressVersionPrimary;
          if (
            (null !== i
              ? (t = i === r)
              : ((t = t.mutableReadLanes),
                (t = ($o & t) === t) &&
                  ((e._workInProgressVersionPrimary = r), qo.push(e))),
            t)
          )
            return n(e._source);
          throw (qo.push(e), Error(a(350)));
        }
        function fa(t, e, n, r) {
          var i = Os;
          if (null === i) throw Error(a(349));
          var o = e._getVersion,
            s = o(e._source),
            l = Zo.current,
            u = l.useState(function () {
              return da(i, e, n);
            }),
            h = u[1],
            c = u[0];
          u = ea;
          var d = t.memoizedState,
            f = d.refs,
            p = f.getSnapshot,
            m = d.source;
          d = d.subscribe;
          var _ = Jo;
          return (
            (t.memoizedState = { refs: f, source: e, subscribe: r }),
            l.useEffect(
              function () {
                (f.getSnapshot = n), (f.setSnapshot = h);
                var t = o(e._source);
                if (!ur(s, t)) {
                  (t = n(e._source)),
                    ur(c, t) ||
                      (h(t),
                      (t = cl(_)),
                      (i.mutableReadLanes |= t & i.pendingLanes)),
                    (t = i.mutableReadLanes),
                    (i.entangledLanes |= t);
                  for (var r = i.entanglements, a = t; 0 < a; ) {
                    var l = 31 - Ve(a),
                      u = 1 << l;
                    (r[l] |= t), (a &= ~u);
                  }
                }
              },
              [n, e, r],
            ),
            l.useEffect(
              function () {
                return r(e._source, function () {
                  var t = f.getSnapshot,
                    n = f.setSnapshot;
                  try {
                    n(t(e._source));
                    var r = cl(_);
                    i.mutableReadLanes |= r & i.pendingLanes;
                  } catch (t) {
                    n(function () {
                      throw t;
                    });
                  }
                });
              },
              [e, r],
            ),
            (ur(p, n) && ur(m, e) && ur(d, r)) ||
              (((t = {
                pending: null,
                dispatch: null,
                lastRenderedReducer: ua,
                lastRenderedState: c,
              }).dispatch = h =
                Ia.bind(null, Jo, t)),
              (u.queue = t),
              (u.baseQueue = null),
              (c = da(i, e, n)),
              (u.memoizedState = u.baseState = c)),
            c
          );
        }
        function pa(t, e, n) {
          return fa(la(), t, e, n);
        }
        function ma(t) {
          var e = sa();
          return (
            "function" == typeof t && (t = t()),
            (e.memoizedState = e.baseState = t),
            (t = (t = e.queue =
              {
                pending: null,
                dispatch: null,
                lastRenderedReducer: ua,
                lastRenderedState: t,
              }).dispatch =
              Ia.bind(null, Jo, t)),
            [e.memoizedState, t]
          );
        }
        function _a(t, e, n, r) {
          return (
            (t = { tag: t, create: e, destroy: n, deps: r, next: null }),
            null === (e = Jo.updateQueue)
              ? ((e = { lastEffect: null }),
                (Jo.updateQueue = e),
                (e.lastEffect = t.next = t))
              : null === (n = e.lastEffect)
                ? (e.lastEffect = t.next = t)
                : ((r = n.next),
                  (n.next = t),
                  (t.next = r),
                  (e.lastEffect = t)),
            t
          );
        }
        function ga(t) {
          return (t = { current: t }), (sa().memoizedState = t);
        }
        function va() {
          return la().memoizedState;
        }
        function ya(t, e, n, r) {
          var i = sa();
          (Jo.flags |= t),
            (i.memoizedState = _a(1 | e, n, void 0, void 0 === r ? null : r));
        }
        function Ea(t, e, n, r) {
          var i = la();
          r = void 0 === r ? null : r;
          var o = void 0;
          if (null !== ta) {
            var a = ta.memoizedState;
            if (((o = a.destroy), null !== r && oa(r, a.deps)))
              return void _a(e, n, o, r);
          }
          (Jo.flags |= t), (i.memoizedState = _a(1 | e, n, o, r));
        }
        function Ta(t, e) {
          return ya(516, 4, t, e);
        }
        function ba(t, e) {
          return Ea(516, 4, t, e);
        }
        function xa(t, e) {
          return Ea(4, 2, t, e);
        }
        function Sa(t, e) {
          return "function" == typeof e
            ? ((t = t()),
              e(t),
              function () {
                e(null);
              })
            : null != e
              ? ((t = t()),
                (e.current = t),
                function () {
                  e.current = null;
                })
              : void 0;
        }
        function Ma(t, e, n) {
          return (
            (n = null != n ? n.concat([t]) : null),
            Ea(4, 2, Sa.bind(null, e, t), n)
          );
        }
        function Aa() {}
        function Ra(t, e) {
          var n = la();
          e = void 0 === e ? null : e;
          var r = n.memoizedState;
          return null !== r && null !== e && oa(e, r[1])
            ? r[0]
            : ((n.memoizedState = [t, e]), t);
        }
        function wa(t, e) {
          var n = la();
          e = void 0 === e ? null : e;
          var r = n.memoizedState;
          return null !== r && null !== e && oa(e, r[1])
            ? r[0]
            : ((t = t()), (n.memoizedState = [t, e]), t);
        }
        function Pa(t, e) {
          var n = Vi();
          Wi(98 > n ? 98 : n, function () {
            t(!0);
          }),
            Wi(97 < n ? 97 : n, function () {
              var n = Qo.transition;
              Qo.transition = 1;
              try {
                t(!1), e();
              } finally {
                Qo.transition = n;
              }
            });
        }
        function Ia(t, e, n) {
          var r = hl(),
            i = cl(t),
            o = {
              lane: i,
              action: n,
              eagerReducer: null,
              eagerState: null,
              next: null,
            },
            a = e.pending;
          if (
            (null === a ? (o.next = o) : ((o.next = a.next), (a.next = o)),
            (e.pending = o),
            (a = t.alternate),
            t === Jo || (null !== a && a === Jo))
          )
            ra = na = !0;
          else {
            if (
              0 === t.lanes &&
              (null === a || 0 === a.lanes) &&
              null !== (a = e.lastRenderedReducer)
            )
              try {
                var s = e.lastRenderedState,
                  l = a(s, n);
                if (((o.eagerReducer = a), (o.eagerState = l), ur(l, s)))
                  return;
              } catch (t) {}
            dl(t, i, r);
          }
        }
        var Oa = {
            readContext: oo,
            useCallback: ia,
            useContext: ia,
            useEffect: ia,
            useImperativeHandle: ia,
            useLayoutEffect: ia,
            useMemo: ia,
            useReducer: ia,
            useRef: ia,
            useState: ia,
            useDebugValue: ia,
            useDeferredValue: ia,
            useTransition: ia,
            useMutableSource: ia,
            useOpaqueIdentifier: ia,
            unstable_isNewReconciler: !1,
          },
          Ca = {
            readContext: oo,
            useCallback: function (t, e) {
              return (sa().memoizedState = [t, void 0 === e ? null : e]), t;
            },
            useContext: oo,
            useEffect: Ta,
            useImperativeHandle: function (t, e, n) {
              return (
                (n = null != n ? n.concat([t]) : null),
                ya(4, 2, Sa.bind(null, e, t), n)
              );
            },
            useLayoutEffect: function (t, e) {
              return ya(4, 2, t, e);
            },
            useMemo: function (t, e) {
              var n = sa();
              return (
                (e = void 0 === e ? null : e),
                (t = t()),
                (n.memoizedState = [t, e]),
                t
              );
            },
            useReducer: function (t, e, n) {
              var r = sa();
              return (
                (e = void 0 !== n ? n(e) : e),
                (r.memoizedState = r.baseState = e),
                (t = (t = r.queue =
                  {
                    pending: null,
                    dispatch: null,
                    lastRenderedReducer: t,
                    lastRenderedState: e,
                  }).dispatch =
                  Ia.bind(null, Jo, t)),
                [r.memoizedState, t]
              );
            },
            useRef: ga,
            useState: ma,
            useDebugValue: Aa,
            useDeferredValue: function (t) {
              var e = ma(t),
                n = e[0],
                r = e[1];
              return (
                Ta(
                  function () {
                    var e = Qo.transition;
                    Qo.transition = 1;
                    try {
                      r(t);
                    } finally {
                      Qo.transition = e;
                    }
                  },
                  [t],
                ),
                n
              );
            },
            useTransition: function () {
              var t = ma(!1),
                e = t[0];
              return ga((t = Pa.bind(null, t[1]))), [t, e];
            },
            useMutableSource: function (t, e, n) {
              var r = sa();
              return (
                (r.memoizedState = {
                  refs: { getSnapshot: e, setSnapshot: null },
                  source: t,
                  subscribe: n,
                }),
                fa(r, t, e, n)
              );
            },
            useOpaqueIdentifier: function () {
              if (Ho) {
                var t = !1,
                  e = (function (t) {
                    return { $$typeof: D, toString: t, valueOf: t };
                  })(function () {
                    throw (
                      (t || ((t = !0), n("r:" + (Kr++).toString(36))),
                      Error(a(355)))
                    );
                  }),
                  n = ma(e)[1];
                return (
                  0 == (2 & Jo.mode) &&
                    ((Jo.flags |= 516),
                    _a(
                      5,
                      function () {
                        n("r:" + (Kr++).toString(36));
                      },
                      void 0,
                      null,
                    )),
                  e
                );
              }
              return ma((e = "r:" + (Kr++).toString(36))), e;
            },
            unstable_isNewReconciler: !1,
          },
          Na = {
            readContext: oo,
            useCallback: Ra,
            useContext: oo,
            useEffect: ba,
            useImperativeHandle: Ma,
            useLayoutEffect: xa,
            useMemo: wa,
            useReducer: ha,
            useRef: va,
            useState: function () {
              return ha(ua);
            },
            useDebugValue: Aa,
            useDeferredValue: function (t) {
              var e = ha(ua),
                n = e[0],
                r = e[1];
              return (
                ba(
                  function () {
                    var e = Qo.transition;
                    Qo.transition = 1;
                    try {
                      r(t);
                    } finally {
                      Qo.transition = e;
                    }
                  },
                  [t],
                ),
                n
              );
            },
            useTransition: function () {
              var t = ha(ua)[0];
              return [va().current, t];
            },
            useMutableSource: pa,
            useOpaqueIdentifier: function () {
              return ha(ua)[0];
            },
            unstable_isNewReconciler: !1,
          },
          La = {
            readContext: oo,
            useCallback: Ra,
            useContext: oo,
            useEffect: ba,
            useImperativeHandle: Ma,
            useLayoutEffect: xa,
            useMemo: wa,
            useReducer: ca,
            useRef: va,
            useState: function () {
              return ca(ua);
            },
            useDebugValue: Aa,
            useDeferredValue: function (t) {
              var e = ca(ua),
                n = e[0],
                r = e[1];
              return (
                ba(
                  function () {
                    var e = Qo.transition;
                    Qo.transition = 1;
                    try {
                      r(t);
                    } finally {
                      Qo.transition = e;
                    }
                  },
                  [t],
                ),
                n
              );
            },
            useTransition: function () {
              var t = ca(ua)[0];
              return [va().current, t];
            },
            useMutableSource: pa,
            useOpaqueIdentifier: function () {
              return ca(ua)[0];
            },
            unstable_isNewReconciler: !1,
          },
          Da = T.ReactCurrentOwner,
          Ua = !1;
        function Fa(t, e, n, r) {
          e.child = null === t ? Ro(e, null, n, r) : Ao(e, t.child, n, r);
        }
        function Ba(t, e, n, r, i) {
          n = n.render;
          var o = e.ref;
          return (
            io(e, i),
            (r = aa(t, e, n, r, o, i)),
            null === t || Ua
              ? ((e.flags |= 1), Fa(t, e, r, i), e.child)
              : ((e.updateQueue = t.updateQueue),
                (e.flags &= -517),
                (t.lanes &= ~i),
                rs(t, e, i))
          );
        }
        function Ga(t, e, n, r, i, o) {
          if (null === t) {
            var a = n.type;
            return "function" != typeof a ||
              Vl(a) ||
              void 0 !== a.defaultProps ||
              null !== n.compare ||
              void 0 !== n.defaultProps
              ? (((t = Wl(n.type, null, r, e, e.mode, o)).ref = e.ref),
                (t.return = e),
                (e.child = t))
              : ((e.tag = 15), (e.type = a), ka(t, e, a, r, i, o));
          }
          return (
            (a = t.child),
            0 == (i & o) &&
            ((i = a.memoizedProps),
            (n = null !== (n = n.compare) ? n : cr)(i, r) && t.ref === e.ref)
              ? rs(t, e, o)
              : ((e.flags |= 1),
                ((t = Xl(a, r)).ref = e.ref),
                (t.return = e),
                (e.child = t))
          );
        }
        function ka(t, e, n, r, i, o) {
          if (null !== t && cr(t.memoizedProps, r) && t.ref === e.ref) {
            if (((Ua = !1), 0 == (o & i)))
              return (e.lanes = t.lanes), rs(t, e, o);
            0 != (16384 & t.flags) && (Ua = !0);
          }
          return Va(t, e, n, r, o);
        }
        function Ha(t, e, n) {
          var r = e.pendingProps,
            i = r.children,
            o = null !== t ? t.memoizedState : null;
          if ("hidden" === r.mode || "unstable-defer-without-hiding" === r.mode)
            if (0 == (4 & e.mode))
              (e.memoizedState = { baseLanes: 0 }), El(0, n);
            else {
              if (0 == (1073741824 & n))
                return (
                  (t = null !== o ? o.baseLanes | n : n),
                  (e.lanes = e.childLanes = 1073741824),
                  (e.memoizedState = { baseLanes: t }),
                  El(0, t),
                  null
                );
              (e.memoizedState = { baseLanes: 0 }),
                El(0, null !== o ? o.baseLanes : n);
            }
          else
            null !== o
              ? ((r = o.baseLanes | n), (e.memoizedState = null))
              : (r = n),
              El(0, r);
          return Fa(t, e, i, n), e.child;
        }
        function za(t, e) {
          var n = e.ref;
          ((null === t && null !== n) || (null !== t && t.ref !== n)) &&
            (e.flags |= 128);
        }
        function Va(t, e, n, r, i) {
          var o = _i(n) ? pi : di.current;
          return (
            (o = mi(e, o)),
            io(e, i),
            (n = aa(t, e, n, r, o, i)),
            null === t || Ua
              ? ((e.flags |= 1), Fa(t, e, n, i), e.child)
              : ((e.updateQueue = t.updateQueue),
                (e.flags &= -517),
                (t.lanes &= ~i),
                rs(t, e, i))
          );
        }
        function Xa(t, e, n, r, i) {
          if (_i(n)) {
            var o = !0;
            Ei(e);
          } else o = !1;
          if ((io(e, i), null === e.stateNode))
            null !== t &&
              ((t.alternate = null), (e.alternate = null), (e.flags |= 2)),
              yo(e, n, r),
              To(e, n, r, i),
              (r = !0);
          else if (null === t) {
            var a = e.stateNode,
              s = e.memoizedProps;
            a.props = s;
            var l = a.context,
              u = n.contextType;
            u =
              "object" == typeof u && null !== u
                ? oo(u)
                : mi(e, (u = _i(n) ? pi : di.current));
            var h = n.getDerivedStateFromProps,
              c =
                "function" == typeof h ||
                "function" == typeof a.getSnapshotBeforeUpdate;
            c ||
              ("function" != typeof a.UNSAFE_componentWillReceiveProps &&
                "function" != typeof a.componentWillReceiveProps) ||
              ((s !== r || l !== u) && Eo(e, a, r, u)),
              (ao = !1);
            var d = e.memoizedState;
            (a.state = d),
              fo(e, r, a, i),
              (l = e.memoizedState),
              s !== r || d !== l || fi.current || ao
                ? ("function" == typeof h &&
                    (_o(e, n, h, r), (l = e.memoizedState)),
                  (s = ao || vo(e, n, s, r, d, l, u))
                    ? (c ||
                        ("function" != typeof a.UNSAFE_componentWillMount &&
                          "function" != typeof a.componentWillMount) ||
                        ("function" == typeof a.componentWillMount &&
                          a.componentWillMount(),
                        "function" == typeof a.UNSAFE_componentWillMount &&
                          a.UNSAFE_componentWillMount()),
                      "function" == typeof a.componentDidMount &&
                        (e.flags |= 4))
                    : ("function" == typeof a.componentDidMount &&
                        (e.flags |= 4),
                      (e.memoizedProps = r),
                      (e.memoizedState = l)),
                  (a.props = r),
                  (a.state = l),
                  (a.context = u),
                  (r = s))
                : ("function" == typeof a.componentDidMount && (e.flags |= 4),
                  (r = !1));
          } else {
            (a = e.stateNode),
              lo(t, e),
              (s = e.memoizedProps),
              (u = e.type === e.elementType ? s : Zi(e.type, s)),
              (a.props = u),
              (c = e.pendingProps),
              (d = a.context),
              (l =
                "object" == typeof (l = n.contextType) && null !== l
                  ? oo(l)
                  : mi(e, (l = _i(n) ? pi : di.current)));
            var f = n.getDerivedStateFromProps;
            (h =
              "function" == typeof f ||
              "function" == typeof a.getSnapshotBeforeUpdate) ||
              ("function" != typeof a.UNSAFE_componentWillReceiveProps &&
                "function" != typeof a.componentWillReceiveProps) ||
              ((s !== c || d !== l) && Eo(e, a, r, l)),
              (ao = !1),
              (d = e.memoizedState),
              (a.state = d),
              fo(e, r, a, i);
            var p = e.memoizedState;
            s !== c || d !== p || fi.current || ao
              ? ("function" == typeof f &&
                  (_o(e, n, f, r), (p = e.memoizedState)),
                (u = ao || vo(e, n, u, r, d, p, l))
                  ? (h ||
                      ("function" != typeof a.UNSAFE_componentWillUpdate &&
                        "function" != typeof a.componentWillUpdate) ||
                      ("function" == typeof a.componentWillUpdate &&
                        a.componentWillUpdate(r, p, l),
                      "function" == typeof a.UNSAFE_componentWillUpdate &&
                        a.UNSAFE_componentWillUpdate(r, p, l)),
                    "function" == typeof a.componentDidUpdate && (e.flags |= 4),
                    "function" == typeof a.getSnapshotBeforeUpdate &&
                      (e.flags |= 256))
                  : ("function" != typeof a.componentDidUpdate ||
                      (s === t.memoizedProps && d === t.memoizedState) ||
                      (e.flags |= 4),
                    "function" != typeof a.getSnapshotBeforeUpdate ||
                      (s === t.memoizedProps && d === t.memoizedState) ||
                      (e.flags |= 256),
                    (e.memoizedProps = r),
                    (e.memoizedState = p)),
                (a.props = r),
                (a.state = p),
                (a.context = l),
                (r = u))
              : ("function" != typeof a.componentDidUpdate ||
                  (s === t.memoizedProps && d === t.memoizedState) ||
                  (e.flags |= 4),
                "function" != typeof a.getSnapshotBeforeUpdate ||
                  (s === t.memoizedProps && d === t.memoizedState) ||
                  (e.flags |= 256),
                (r = !1));
          }
          return Wa(t, e, n, r, o, i);
        }
        function Wa(t, e, n, r, i, o) {
          za(t, e);
          var a = 0 != (64 & e.flags);
          if (!r && !a) return i && Ti(e, n, !1), rs(t, e, o);
          (r = e.stateNode), (Da.current = e);
          var s =
            a && "function" != typeof n.getDerivedStateFromError
              ? null
              : r.render();
          return (
            (e.flags |= 1),
            null !== t && a
              ? ((e.child = Ao(e, t.child, null, o)),
                (e.child = Ao(e, null, s, o)))
              : Fa(t, e, s, o),
            (e.memoizedState = r.state),
            i && Ti(e, n, !0),
            e.child
          );
        }
        function ja(t) {
          var e = t.stateNode;
          e.pendingContext
            ? vi(0, e.pendingContext, e.pendingContext !== e.context)
            : e.context && vi(0, e.context, !1),
            No(t, e.containerInfo);
        }
        var Ya,
          qa,
          Ka,
          Za,
          Qa = { dehydrated: null, retryLane: 0 };
        function $a(t, e, n) {
          var r,
            i = e.pendingProps,
            o = Fo.current,
            a = !1;
          return (
            (r = 0 != (64 & e.flags)) ||
              (r = (null === t || null !== t.memoizedState) && 0 != (2 & o)),
            r
              ? ((a = !0), (e.flags &= -65))
              : (null !== t && null === t.memoizedState) ||
                void 0 === i.fallback ||
                !0 === i.unstable_avoidThisFallback ||
                (o |= 1),
            hi(Fo, 1 & o),
            null === t
              ? (void 0 !== i.fallback && Xo(e),
                (t = i.children),
                (o = i.fallback),
                a
                  ? ((t = Ja(e, t, o, n)),
                    (e.child.memoizedState = { baseLanes: n }),
                    (e.memoizedState = Qa),
                    t)
                  : "number" == typeof i.unstable_expectedLoadTime
                    ? ((t = Ja(e, t, o, n)),
                      (e.child.memoizedState = { baseLanes: n }),
                      (e.memoizedState = Qa),
                      (e.lanes = 33554432),
                      t)
                    : (((n = Yl(
                        { mode: "visible", children: t },
                        e.mode,
                        n,
                        null,
                      )).return = e),
                      (e.child = n)))
              : (t.memoizedState,
                a
                  ? ((i = (function (t, e, n, r, i) {
                      var o = e.mode,
                        a = t.child;
                      t = a.sibling;
                      var s = { mode: "hidden", children: n };
                      return (
                        0 == (2 & o) && e.child !== a
                          ? (((n = e.child).childLanes = 0),
                            (n.pendingProps = s),
                            null !== (a = n.lastEffect)
                              ? ((e.firstEffect = n.firstEffect),
                                (e.lastEffect = a),
                                (a.nextEffect = null))
                              : (e.firstEffect = e.lastEffect = null))
                          : (n = Xl(a, s)),
                        null !== t
                          ? (r = Xl(t, r))
                          : ((r = jl(r, o, i, null)).flags |= 2),
                        (r.return = e),
                        (n.return = e),
                        (n.sibling = r),
                        (e.child = n),
                        r
                      );
                    })(t, e, i.children, i.fallback, n)),
                    (a = e.child),
                    (o = t.child.memoizedState),
                    (a.memoizedState =
                      null === o
                        ? { baseLanes: n }
                        : { baseLanes: o.baseLanes | n }),
                    (a.childLanes = t.childLanes & ~n),
                    (e.memoizedState = Qa),
                    i)
                  : ((n = (function (t, e, n, r) {
                      var i = t.child;
                      return (
                        (t = i.sibling),
                        (n = Xl(i, { mode: "visible", children: n })),
                        0 == (2 & e.mode) && (n.lanes = r),
                        (n.return = e),
                        (n.sibling = null),
                        null !== t &&
                          ((t.nextEffect = null),
                          (t.flags = 8),
                          (e.firstEffect = e.lastEffect = t)),
                        (e.child = n)
                      );
                    })(t, e, i.children, n)),
                    (e.memoizedState = null),
                    n))
          );
        }
        function Ja(t, e, n, r) {
          var i = t.mode,
            o = t.child;
          return (
            (e = { mode: "hidden", children: e }),
            0 == (2 & i) && null !== o
              ? ((o.childLanes = 0), (o.pendingProps = e))
              : (o = Yl(e, i, 0, null)),
            (n = jl(n, i, r, null)),
            (o.return = t),
            (n.return = t),
            (o.sibling = n),
            (t.child = o),
            n
          );
        }
        function ts(t, e) {
          t.lanes |= e;
          var n = t.alternate;
          null !== n && (n.lanes |= e), ro(t.return, e);
        }
        function es(t, e, n, r, i, o) {
          var a = t.memoizedState;
          null === a
            ? (t.memoizedState = {
                isBackwards: e,
                rendering: null,
                renderingStartTime: 0,
                last: r,
                tail: n,
                tailMode: i,
                lastEffect: o,
              })
            : ((a.isBackwards = e),
              (a.rendering = null),
              (a.renderingStartTime = 0),
              (a.last = r),
              (a.tail = n),
              (a.tailMode = i),
              (a.lastEffect = o));
        }
        function ns(t, e, n) {
          var r = e.pendingProps,
            i = r.revealOrder,
            o = r.tail;
          if ((Fa(t, e, r.children, n), 0 != (2 & (r = Fo.current))))
            (r = (1 & r) | 2), (e.flags |= 64);
          else {
            if (null !== t && 0 != (64 & t.flags))
              t: for (t = e.child; null !== t; ) {
                if (13 === t.tag) null !== t.memoizedState && ts(t, n);
                else if (19 === t.tag) ts(t, n);
                else if (null !== t.child) {
                  (t.child.return = t), (t = t.child);
                  continue;
                }
                if (t === e) break t;
                for (; null === t.sibling; ) {
                  if (null === t.return || t.return === e) break t;
                  t = t.return;
                }
                (t.sibling.return = t.return), (t = t.sibling);
              }
            r &= 1;
          }
          if ((hi(Fo, r), 0 == (2 & e.mode))) e.memoizedState = null;
          else
            switch (i) {
              case "forwards":
                for (n = e.child, i = null; null !== n; )
                  null !== (t = n.alternate) && null === Bo(t) && (i = n),
                    (n = n.sibling);
                null === (n = i)
                  ? ((i = e.child), (e.child = null))
                  : ((i = n.sibling), (n.sibling = null)),
                  es(e, !1, i, n, o, e.lastEffect);
                break;
              case "backwards":
                for (n = null, i = e.child, e.child = null; null !== i; ) {
                  if (null !== (t = i.alternate) && null === Bo(t)) {
                    e.child = i;
                    break;
                  }
                  (t = i.sibling), (i.sibling = n), (n = i), (i = t);
                }
                es(e, !0, n, null, o, e.lastEffect);
                break;
              case "together":
                es(e, !1, null, null, void 0, e.lastEffect);
                break;
              default:
                e.memoizedState = null;
            }
          return e.child;
        }
        function rs(t, e, n) {
          if (
            (null !== t && (e.dependencies = t.dependencies),
            (Gs |= e.lanes),
            0 != (n & e.childLanes))
          ) {
            if (null !== t && e.child !== t.child) throw Error(a(153));
            if (null !== e.child) {
              for (
                n = Xl((t = e.child), t.pendingProps),
                  e.child = n,
                  n.return = e;
                null !== t.sibling;

              )
                (t = t.sibling),
                  ((n = n.sibling = Xl(t, t.pendingProps)).return = e);
              n.sibling = null;
            }
            return e.child;
          }
          return null;
        }
        function is(t, e) {
          if (!Ho)
            switch (t.tailMode) {
              case "hidden":
                e = t.tail;
                for (var n = null; null !== e; )
                  null !== e.alternate && (n = e), (e = e.sibling);
                null === n ? (t.tail = null) : (n.sibling = null);
                break;
              case "collapsed":
                n = t.tail;
                for (var r = null; null !== n; )
                  null !== n.alternate && (r = n), (n = n.sibling);
                null === r
                  ? e || null === t.tail
                    ? (t.tail = null)
                    : (t.tail.sibling = null)
                  : (r.sibling = null);
            }
        }
        function os(t, e, n) {
          var r = e.pendingProps;
          switch (e.tag) {
            case 2:
            case 16:
            case 15:
            case 0:
            case 11:
            case 7:
            case 8:
            case 12:
            case 9:
            case 14:
              return null;
            case 1:
            case 17:
              return _i(e.type) && gi(), null;
            case 3:
              return (
                Lo(),
                ui(fi),
                ui(di),
                Ko(),
                (r = e.stateNode).pendingContext &&
                  ((r.context = r.pendingContext), (r.pendingContext = null)),
                (null !== t && null !== t.child) ||
                  (jo(e) ? (e.flags |= 4) : r.hydrate || (e.flags |= 256)),
                qa(e),
                null
              );
            case 5:
              Uo(e);
              var o = Co(Oo.current);
              if (((n = e.type), null !== t && null != e.stateNode))
                Ka(t, e, n, r, o), t.ref !== e.ref && (e.flags |= 128);
              else {
                if (!r) {
                  if (null === e.stateNode) throw Error(a(166));
                  return null;
                }
                if (((t = Co(Po.current)), jo(e))) {
                  (r = e.stateNode), (n = e.type);
                  var s = e.memoizedProps;
                  switch (((r[Qr] = e), (r[$r] = s), n)) {
                    case "dialog":
                      Pr("cancel", r), Pr("close", r);
                      break;
                    case "iframe":
                    case "object":
                    case "embed":
                      Pr("load", r);
                      break;
                    case "video":
                    case "audio":
                      for (t = 0; t < Mr.length; t++) Pr(Mr[t], r);
                      break;
                    case "source":
                      Pr("error", r);
                      break;
                    case "img":
                    case "image":
                    case "link":
                      Pr("error", r), Pr("load", r);
                      break;
                    case "details":
                      Pr("toggle", r);
                      break;
                    case "input":
                      tt(r, s), Pr("invalid", r);
                      break;
                    case "select":
                      (r._wrapperState = { wasMultiple: !!s.multiple }),
                        Pr("invalid", r);
                      break;
                    case "textarea":
                      lt(r, s), Pr("invalid", r);
                  }
                  for (var u in (xt(n, s), (t = null), s))
                    s.hasOwnProperty(u) &&
                      ((o = s[u]),
                      "children" === u
                        ? "string" == typeof o
                          ? r.textContent !== o && (t = ["children", o])
                          : "number" == typeof o &&
                            r.textContent !== "" + o &&
                            (t = ["children", "" + o])
                        : l.hasOwnProperty(u) &&
                          null != o &&
                          "onScroll" === u &&
                          Pr("scroll", r));
                  switch (n) {
                    case "input":
                      Z(r), rt(r, s, !0);
                      break;
                    case "textarea":
                      Z(r), ht(r);
                      break;
                    case "select":
                    case "option":
                      break;
                    default:
                      "function" == typeof s.onClick && (r.onclick = Gr);
                  }
                  (r = t), (e.updateQueue = r), null !== r && (e.flags |= 4);
                } else {
                  switch (
                    ((u = 9 === o.nodeType ? o : o.ownerDocument),
                    t === ct.html && (t = dt(n)),
                    t === ct.html
                      ? "script" === n
                        ? (((t = u.createElement("div")).innerHTML =
                            "<script><\/script>"),
                          (t = t.removeChild(t.firstChild)))
                        : "string" == typeof r.is
                          ? (t = u.createElement(n, { is: r.is }))
                          : ((t = u.createElement(n)),
                            "select" === n &&
                              ((u = t),
                              r.multiple
                                ? (u.multiple = !0)
                                : r.size && (u.size = r.size)))
                      : (t = u.createElementNS(t, n)),
                    (t[Qr] = e),
                    (t[$r] = r),
                    Ya(t, e, !1, !1),
                    (e.stateNode = t),
                    (u = St(n, r)),
                    n)
                  ) {
                    case "dialog":
                      Pr("cancel", t), Pr("close", t), (o = r);
                      break;
                    case "iframe":
                    case "object":
                    case "embed":
                      Pr("load", t), (o = r);
                      break;
                    case "video":
                    case "audio":
                      for (o = 0; o < Mr.length; o++) Pr(Mr[o], t);
                      o = r;
                      break;
                    case "source":
                      Pr("error", t), (o = r);
                      break;
                    case "img":
                    case "image":
                    case "link":
                      Pr("error", t), Pr("load", t), (o = r);
                      break;
                    case "details":
                      Pr("toggle", t), (o = r);
                      break;
                    case "input":
                      tt(t, r), (o = J(t, r)), Pr("invalid", t);
                      break;
                    case "option":
                      o = ot(t, r);
                      break;
                    case "select":
                      (t._wrapperState = { wasMultiple: !!r.multiple }),
                        (o = i({}, r, { value: void 0 })),
                        Pr("invalid", t);
                      break;
                    case "textarea":
                      lt(t, r), (o = st(t, r)), Pr("invalid", t);
                      break;
                    default:
                      o = r;
                  }
                  xt(n, o);
                  var h = o;
                  for (s in h)
                    if (h.hasOwnProperty(s)) {
                      var c = h[s];
                      "style" === s
                        ? Tt(t, c)
                        : "dangerouslySetInnerHTML" === s
                          ? null != (c = c ? c.__html : void 0) && _t(t, c)
                          : "children" === s
                            ? "string" == typeof c
                              ? ("textarea" !== n || "" !== c) && gt(t, c)
                              : "number" == typeof c && gt(t, "" + c)
                            : "suppressContentEditableWarning" !== s &&
                              "suppressHydrationWarning" !== s &&
                              "autoFocus" !== s &&
                              (l.hasOwnProperty(s)
                                ? null != c &&
                                  "onScroll" === s &&
                                  Pr("scroll", t)
                                : null != c && E(t, s, c, u));
                    }
                  switch (n) {
                    case "input":
                      Z(t), rt(t, r, !1);
                      break;
                    case "textarea":
                      Z(t), ht(t);
                      break;
                    case "option":
                      null != r.value &&
                        t.setAttribute("value", "" + q(r.value));
                      break;
                    case "select":
                      (t.multiple = !!r.multiple),
                        null != (s = r.value)
                          ? at(t, !!r.multiple, s, !1)
                          : null != r.defaultValue &&
                            at(t, !!r.multiple, r.defaultValue, !0);
                      break;
                    default:
                      "function" == typeof o.onClick && (t.onclick = Gr);
                  }
                  zr(n, r) && (e.flags |= 4);
                }
                null !== e.ref && (e.flags |= 128);
              }
              return null;
            case 6:
              if (t && null != e.stateNode) Za(t, e, t.memoizedProps, r);
              else {
                if ("string" != typeof r && null === e.stateNode)
                  throw Error(a(166));
                (n = Co(Oo.current)),
                  Co(Po.current),
                  jo(e)
                    ? ((r = e.stateNode),
                      (n = e.memoizedProps),
                      (r[Qr] = e),
                      r.nodeValue !== n && (e.flags |= 4))
                    : (((r = (
                        9 === n.nodeType ? n : n.ownerDocument
                      ).createTextNode(r))[Qr] = e),
                      (e.stateNode = r));
              }
              return null;
            case 13:
              return (
                ui(Fo),
                (r = e.memoizedState),
                0 != (64 & e.flags)
                  ? ((e.lanes = n), e)
                  : ((r = null !== r),
                    (n = !1),
                    null === t
                      ? void 0 !== e.memoizedProps.fallback && jo(e)
                      : (n = null !== t.memoizedState),
                    r &&
                      !n &&
                      0 != (2 & e.mode) &&
                      ((null === t &&
                        !0 !== e.memoizedProps.unstable_avoidThisFallback) ||
                      0 != (1 & Fo.current)
                        ? 0 === Us && (Us = 3)
                        : ((0 !== Us && 3 !== Us) || (Us = 4),
                          null === Os ||
                            (0 == (134217727 & Gs) && 0 == (134217727 & ks)) ||
                            _l(Os, Ns))),
                    (r || n) && (e.flags |= 4),
                    null)
              );
            case 4:
              return (
                Lo(), qa(e), null === t && Or(e.stateNode.containerInfo), null
              );
            case 10:
              return no(e), null;
            case 19:
              if ((ui(Fo), null === (r = e.memoizedState))) return null;
              if (((s = 0 != (64 & e.flags)), null === (u = r.rendering)))
                if (s) is(r, !1);
                else {
                  if (0 !== Us || (null !== t && 0 != (64 & t.flags)))
                    for (t = e.child; null !== t; ) {
                      if (null !== (u = Bo(t))) {
                        for (
                          e.flags |= 64,
                            is(r, !1),
                            null !== (s = u.updateQueue) &&
                              ((e.updateQueue = s), (e.flags |= 4)),
                            null === r.lastEffect && (e.firstEffect = null),
                            e.lastEffect = r.lastEffect,
                            r = n,
                            n = e.child;
                          null !== n;

                        )
                          (t = r),
                            ((s = n).flags &= 2),
                            (s.nextEffect = null),
                            (s.firstEffect = null),
                            (s.lastEffect = null),
                            null === (u = s.alternate)
                              ? ((s.childLanes = 0),
                                (s.lanes = t),
                                (s.child = null),
                                (s.memoizedProps = null),
                                (s.memoizedState = null),
                                (s.updateQueue = null),
                                (s.dependencies = null),
                                (s.stateNode = null))
                              : ((s.childLanes = u.childLanes),
                                (s.lanes = u.lanes),
                                (s.child = u.child),
                                (s.memoizedProps = u.memoizedProps),
                                (s.memoizedState = u.memoizedState),
                                (s.updateQueue = u.updateQueue),
                                (s.type = u.type),
                                (t = u.dependencies),
                                (s.dependencies =
                                  null === t
                                    ? null
                                    : {
                                        lanes: t.lanes,
                                        firstContext: t.firstContext,
                                      })),
                            (n = n.sibling);
                        return hi(Fo, (1 & Fo.current) | 2), e.child;
                      }
                      t = t.sibling;
                    }
                  null !== r.tail &&
                    zi() > Xs &&
                    ((e.flags |= 64),
                    (s = !0),
                    is(r, !1),
                    (e.lanes = 33554432));
                }
              else {
                if (!s)
                  if (null !== (t = Bo(u))) {
                    if (
                      ((e.flags |= 64),
                      (s = !0),
                      null !== (n = t.updateQueue) &&
                        ((e.updateQueue = n), (e.flags |= 4)),
                      is(r, !0),
                      null === r.tail &&
                        "hidden" === r.tailMode &&
                        !u.alternate &&
                        !Ho)
                    )
                      return (
                        null !== (e = e.lastEffect = r.lastEffect) &&
                          (e.nextEffect = null),
                        null
                      );
                  } else
                    2 * zi() - r.renderingStartTime > Xs &&
                      1073741824 !== n &&
                      ((e.flags |= 64),
                      (s = !0),
                      is(r, !1),
                      (e.lanes = 33554432));
                r.isBackwards
                  ? ((u.sibling = e.child), (e.child = u))
                  : (null !== (n = r.last) ? (n.sibling = u) : (e.child = u),
                    (r.last = u));
              }
              return null !== r.tail
                ? ((n = r.tail),
                  (r.rendering = n),
                  (r.tail = n.sibling),
                  (r.lastEffect = e.lastEffect),
                  (r.renderingStartTime = zi()),
                  (n.sibling = null),
                  (e = Fo.current),
                  hi(Fo, s ? (1 & e) | 2 : 1 & e),
                  n)
                : null;
            case 23:
            case 24:
              return (
                Tl(),
                null !== t &&
                  (null !== t.memoizedState) != (null !== e.memoizedState) &&
                  "unstable-defer-without-hiding" !== r.mode &&
                  (e.flags |= 4),
                null
              );
          }
          throw Error(a(156, e.tag));
        }
        function as(t) {
          switch (t.tag) {
            case 1:
              _i(t.type) && gi();
              var e = t.flags;
              return 4096 & e ? ((t.flags = (-4097 & e) | 64), t) : null;
            case 3:
              if ((Lo(), ui(fi), ui(di), Ko(), 0 != (64 & (e = t.flags))))
                throw Error(a(285));
              return (t.flags = (-4097 & e) | 64), t;
            case 5:
              return Uo(t), null;
            case 13:
              return (
                ui(Fo),
                4096 & (e = t.flags) ? ((t.flags = (-4097 & e) | 64), t) : null
              );
            case 19:
              return ui(Fo), null;
            case 4:
              return Lo(), null;
            case 10:
              return no(t), null;
            case 23:
            case 24:
              return Tl(), null;
            default:
              return null;
          }
        }
        function ss(t, e) {
          try {
            var n = "",
              r = e;
            do {
              (n += j(r)), (r = r.return);
            } while (r);
            var i = n;
          } catch (t) {
            i = "\nError generating stack: " + t.message + "\n" + t.stack;
          }
          return { value: t, source: e, stack: i };
        }
        function ls(t, e) {
          try {
            console.error(e.value);
          } catch (t) {
            setTimeout(function () {
              throw t;
            });
          }
        }
        (Ya = function (t, e) {
          for (var n = e.child; null !== n; ) {
            if (5 === n.tag || 6 === n.tag) t.appendChild(n.stateNode);
            else if (4 !== n.tag && null !== n.child) {
              (n.child.return = n), (n = n.child);
              continue;
            }
            if (n === e) break;
            for (; null === n.sibling; ) {
              if (null === n.return || n.return === e) return;
              n = n.return;
            }
            (n.sibling.return = n.return), (n = n.sibling);
          }
        }),
          (qa = function () {}),
          (Ka = function (t, e, n, r) {
            var o = t.memoizedProps;
            if (o !== r) {
              (t = e.stateNode), Co(Po.current);
              var a,
                s = null;
              switch (n) {
                case "input":
                  (o = J(t, o)), (r = J(t, r)), (s = []);
                  break;
                case "option":
                  (o = ot(t, o)), (r = ot(t, r)), (s = []);
                  break;
                case "select":
                  (o = i({}, o, { value: void 0 })),
                    (r = i({}, r, { value: void 0 })),
                    (s = []);
                  break;
                case "textarea":
                  (o = st(t, o)), (r = st(t, r)), (s = []);
                  break;
                default:
                  "function" != typeof o.onClick &&
                    "function" == typeof r.onClick &&
                    (t.onclick = Gr);
              }
              for (c in (xt(n, r), (n = null), o))
                if (!r.hasOwnProperty(c) && o.hasOwnProperty(c) && null != o[c])
                  if ("style" === c) {
                    var u = o[c];
                    for (a in u)
                      u.hasOwnProperty(a) && (n || (n = {}), (n[a] = ""));
                  } else
                    "dangerouslySetInnerHTML" !== c &&
                      "children" !== c &&
                      "suppressContentEditableWarning" !== c &&
                      "suppressHydrationWarning" !== c &&
                      "autoFocus" !== c &&
                      (l.hasOwnProperty(c)
                        ? s || (s = [])
                        : (s = s || []).push(c, null));
              for (c in r) {
                var h = r[c];
                if (
                  ((u = null != o ? o[c] : void 0),
                  r.hasOwnProperty(c) && h !== u && (null != h || null != u))
                )
                  if ("style" === c)
                    if (u) {
                      for (a in u)
                        !u.hasOwnProperty(a) ||
                          (h && h.hasOwnProperty(a)) ||
                          (n || (n = {}), (n[a] = ""));
                      for (a in h)
                        h.hasOwnProperty(a) &&
                          u[a] !== h[a] &&
                          (n || (n = {}), (n[a] = h[a]));
                    } else n || (s || (s = []), s.push(c, n)), (n = h);
                  else
                    "dangerouslySetInnerHTML" === c
                      ? ((h = h ? h.__html : void 0),
                        (u = u ? u.__html : void 0),
                        null != h && u !== h && (s = s || []).push(c, h))
                      : "children" === c
                        ? ("string" != typeof h && "number" != typeof h) ||
                          (s = s || []).push(c, "" + h)
                        : "suppressContentEditableWarning" !== c &&
                          "suppressHydrationWarning" !== c &&
                          (l.hasOwnProperty(c)
                            ? (null != h && "onScroll" === c && Pr("scroll", t),
                              s || u === h || (s = []))
                            : "object" == typeof h &&
                                null !== h &&
                                h.$$typeof === D
                              ? h.toString()
                              : (s = s || []).push(c, h));
              }
              n && (s = s || []).push("style", n);
              var c = s;
              (e.updateQueue = c) && (e.flags |= 4);
            }
          }),
          (Za = function (t, e, n, r) {
            n !== r && (e.flags |= 4);
          });
        var us = "function" == typeof WeakMap ? WeakMap : Map;
        function hs(t, e, n) {
          ((n = uo(-1, n)).tag = 3), (n.payload = { element: null });
          var r = e.value;
          return (
            (n.callback = function () {
              qs || ((qs = !0), (Ks = r)), ls(0, e);
            }),
            n
          );
        }
        function cs(t, e, n) {
          (n = uo(-1, n)).tag = 3;
          var r = t.type.getDerivedStateFromError;
          if ("function" == typeof r) {
            var i = e.value;
            n.payload = function () {
              return ls(0, e), r(i);
            };
          }
          var o = t.stateNode;
          return (
            null !== o &&
              "function" == typeof o.componentDidCatch &&
              (n.callback = function () {
                "function" != typeof r &&
                  (null === Zs ? (Zs = new Set([this])) : Zs.add(this),
                  ls(0, e));
                var t = e.stack;
                this.componentDidCatch(e.value, {
                  componentStack: null !== t ? t : "",
                });
              }),
            n
          );
        }
        var ds = "function" == typeof WeakSet ? WeakSet : Set;
        function fs(t) {
          var e = t.ref;
          if (null !== e)
            if ("function" == typeof e)
              try {
                e(null);
              } catch (e) {
                Bl(t, e);
              }
            else e.current = null;
        }
        function ps(t, e) {
          switch (e.tag) {
            case 0:
            case 11:
            case 15:
            case 22:
            case 5:
            case 6:
            case 4:
            case 17:
              return;
            case 1:
              if (256 & e.flags && null !== t) {
                var n = t.memoizedProps,
                  r = t.memoizedState;
                (e = (t = e.stateNode).getSnapshotBeforeUpdate(
                  e.elementType === e.type ? n : Zi(e.type, n),
                  r,
                )),
                  (t.__reactInternalSnapshotBeforeUpdate = e);
              }
              return;
            case 3:
              return void (256 & e.flags && jr(e.stateNode.containerInfo));
          }
          throw Error(a(163));
        }
        function ms(t, e, n) {
          switch (n.tag) {
            case 0:
            case 11:
            case 15:
            case 22:
              if (
                null !==
                (e = null !== (e = n.updateQueue) ? e.lastEffect : null)
              ) {
                t = e = e.next;
                do {
                  if (3 == (3 & t.tag)) {
                    var r = t.create;
                    t.destroy = r();
                  }
                  t = t.next;
                } while (t !== e);
              }
              if (
                null !==
                (e = null !== (e = n.updateQueue) ? e.lastEffect : null)
              ) {
                t = e = e.next;
                do {
                  var i = t;
                  (r = i.next),
                    0 != (4 & (i = i.tag)) &&
                      0 != (1 & i) &&
                      (Dl(n, t), Ll(n, t)),
                    (t = r);
                } while (t !== e);
              }
              return;
            case 1:
              return (
                (t = n.stateNode),
                4 & n.flags &&
                  (null === e
                    ? t.componentDidMount()
                    : ((r =
                        n.elementType === n.type
                          ? e.memoizedProps
                          : Zi(n.type, e.memoizedProps)),
                      t.componentDidUpdate(
                        r,
                        e.memoizedState,
                        t.__reactInternalSnapshotBeforeUpdate,
                      ))),
                void (null !== (e = n.updateQueue) && po(n, e, t))
              );
            case 3:
              if (null !== (e = n.updateQueue)) {
                if (((t = null), null !== n.child))
                  switch (n.child.tag) {
                    case 5:
                    case 1:
                      t = n.child.stateNode;
                  }
                po(n, e, t);
              }
              return;
            case 5:
              return (
                (t = n.stateNode),
                void (
                  null === e &&
                  4 & n.flags &&
                  zr(n.type, n.memoizedProps) &&
                  t.focus()
                )
              );
            case 6:
            case 4:
            case 12:
            case 19:
            case 17:
            case 20:
            case 21:
            case 23:
            case 24:
              return;
            case 13:
              return void (
                null === n.memoizedState &&
                ((n = n.alternate),
                null !== n &&
                  ((n = n.memoizedState),
                  null !== n && ((n = n.dehydrated), null !== n && Te(n))))
              );
          }
          throw Error(a(163));
        }
        function _s(t, e) {
          for (var n = t; ; ) {
            if (5 === n.tag) {
              var r = n.stateNode;
              if (e)
                "function" == typeof (r = r.style).setProperty
                  ? r.setProperty("display", "none", "important")
                  : (r.display = "none");
              else {
                r = n.stateNode;
                var i = n.memoizedProps.style;
                (i =
                  null != i && i.hasOwnProperty("display") ? i.display : null),
                  (r.style.display = Et("display", i));
              }
            } else if (6 === n.tag)
              n.stateNode.nodeValue = e ? "" : n.memoizedProps;
            else if (
              ((23 !== n.tag && 24 !== n.tag) ||
                null === n.memoizedState ||
                n === t) &&
              null !== n.child
            ) {
              (n.child.return = n), (n = n.child);
              continue;
            }
            if (n === t) break;
            for (; null === n.sibling; ) {
              if (null === n.return || n.return === t) return;
              n = n.return;
            }
            (n.sibling.return = n.return), (n = n.sibling);
          }
        }
        function gs(t, e) {
          if (xi && "function" == typeof xi.onCommitFiberUnmount)
            try {
              xi.onCommitFiberUnmount(bi, e);
            } catch (t) {}
          switch (e.tag) {
            case 0:
            case 11:
            case 14:
            case 15:
            case 22:
              if (null !== (t = e.updateQueue) && null !== (t = t.lastEffect)) {
                var n = (t = t.next);
                do {
                  var r = n,
                    i = r.destroy;
                  if (((r = r.tag), void 0 !== i))
                    if (0 != (4 & r)) Dl(e, n);
                    else {
                      r = e;
                      try {
                        i();
                      } catch (t) {
                        Bl(r, t);
                      }
                    }
                  n = n.next;
                } while (n !== t);
              }
              break;
            case 1:
              if (
                (fs(e),
                "function" == typeof (t = e.stateNode).componentWillUnmount)
              )
                try {
                  (t.props = e.memoizedProps),
                    (t.state = e.memoizedState),
                    t.componentWillUnmount();
                } catch (t) {
                  Bl(e, t);
                }
              break;
            case 5:
              fs(e);
              break;
            case 4:
              xs(t, e);
          }
        }
        function vs(t) {
          (t.alternate = null),
            (t.child = null),
            (t.dependencies = null),
            (t.firstEffect = null),
            (t.lastEffect = null),
            (t.memoizedProps = null),
            (t.memoizedState = null),
            (t.pendingProps = null),
            (t.return = null),
            (t.updateQueue = null);
        }
        function ys(t) {
          return 5 === t.tag || 3 === t.tag || 4 === t.tag;
        }
        function Es(t) {
          t: {
            for (var e = t.return; null !== e; ) {
              if (ys(e)) break t;
              e = e.return;
            }
            throw Error(a(160));
          }
          var n = e;
          switch (((e = n.stateNode), n.tag)) {
            case 5:
              var r = !1;
              break;
            case 3:
            case 4:
              (e = e.containerInfo), (r = !0);
              break;
            default:
              throw Error(a(161));
          }
          16 & n.flags && (gt(e, ""), (n.flags &= -17));
          t: e: for (n = t; ; ) {
            for (; null === n.sibling; ) {
              if (null === n.return || ys(n.return)) {
                n = null;
                break t;
              }
              n = n.return;
            }
            for (
              n.sibling.return = n.return, n = n.sibling;
              5 !== n.tag && 6 !== n.tag && 18 !== n.tag;

            ) {
              if (2 & n.flags) continue e;
              if (null === n.child || 4 === n.tag) continue e;
              (n.child.return = n), (n = n.child);
            }
            if (!(2 & n.flags)) {
              n = n.stateNode;
              break t;
            }
          }
          r ? Ts(t, n, e) : bs(t, n, e);
        }
        function Ts(t, e, n) {
          var r = t.tag,
            i = 5 === r || 6 === r;
          if (i)
            (t = i ? t.stateNode : t.stateNode.instance),
              e
                ? 8 === n.nodeType
                  ? n.parentNode.insertBefore(t, e)
                  : n.insertBefore(t, e)
                : (8 === n.nodeType
                    ? (e = n.parentNode).insertBefore(t, n)
                    : (e = n).appendChild(t),
                  null != (n = n._reactRootContainer) ||
                    null !== e.onclick ||
                    (e.onclick = Gr));
          else if (4 !== r && null !== (t = t.child))
            for (Ts(t, e, n), t = t.sibling; null !== t; )
              Ts(t, e, n), (t = t.sibling);
        }
        function bs(t, e, n) {
          var r = t.tag,
            i = 5 === r || 6 === r;
          if (i)
            (t = i ? t.stateNode : t.stateNode.instance),
              e ? n.insertBefore(t, e) : n.appendChild(t);
          else if (4 !== r && null !== (t = t.child))
            for (bs(t, e, n), t = t.sibling; null !== t; )
              bs(t, e, n), (t = t.sibling);
        }
        function xs(t, e) {
          for (var n, r, i = e, o = !1; ; ) {
            if (!o) {
              o = i.return;
              t: for (;;) {
                if (null === o) throw Error(a(160));
                switch (((n = o.stateNode), o.tag)) {
                  case 5:
                    r = !1;
                    break t;
                  case 3:
                  case 4:
                    (n = n.containerInfo), (r = !0);
                    break t;
                }
                o = o.return;
              }
              o = !0;
            }
            if (5 === i.tag || 6 === i.tag) {
              t: for (var s = t, l = i, u = l; ; )
                if ((gs(s, u), null !== u.child && 4 !== u.tag))
                  (u.child.return = u), (u = u.child);
                else {
                  if (u === l) break t;
                  for (; null === u.sibling; ) {
                    if (null === u.return || u.return === l) break t;
                    u = u.return;
                  }
                  (u.sibling.return = u.return), (u = u.sibling);
                }
              r
                ? ((s = n),
                  (l = i.stateNode),
                  8 === s.nodeType
                    ? s.parentNode.removeChild(l)
                    : s.removeChild(l))
                : n.removeChild(i.stateNode);
            } else if (4 === i.tag) {
              if (null !== i.child) {
                (n = i.stateNode.containerInfo),
                  (r = !0),
                  (i.child.return = i),
                  (i = i.child);
                continue;
              }
            } else if ((gs(t, i), null !== i.child)) {
              (i.child.return = i), (i = i.child);
              continue;
            }
            if (i === e) break;
            for (; null === i.sibling; ) {
              if (null === i.return || i.return === e) return;
              4 === (i = i.return).tag && (o = !1);
            }
            (i.sibling.return = i.return), (i = i.sibling);
          }
        }
        function Ss(t, e) {
          switch (e.tag) {
            case 0:
            case 11:
            case 14:
            case 15:
            case 22:
              var n = e.updateQueue;
              if (null !== (n = null !== n ? n.lastEffect : null)) {
                var r = (n = n.next);
                do {
                  3 == (3 & r.tag) &&
                    ((t = r.destroy),
                    (r.destroy = void 0),
                    void 0 !== t && t()),
                    (r = r.next);
                } while (r !== n);
              }
              return;
            case 1:
            case 12:
            case 17:
              return;
            case 5:
              if (null != (n = e.stateNode)) {
                r = e.memoizedProps;
                var i = null !== t ? t.memoizedProps : r;
                t = e.type;
                var o = e.updateQueue;
                if (((e.updateQueue = null), null !== o)) {
                  for (
                    n[$r] = r,
                      "input" === t &&
                        "radio" === r.type &&
                        null != r.name &&
                        et(n, r),
                      St(t, i),
                      e = St(t, r),
                      i = 0;
                    i < o.length;
                    i += 2
                  ) {
                    var s = o[i],
                      l = o[i + 1];
                    "style" === s
                      ? Tt(n, l)
                      : "dangerouslySetInnerHTML" === s
                        ? _t(n, l)
                        : "children" === s
                          ? gt(n, l)
                          : E(n, s, l, e);
                  }
                  switch (t) {
                    case "input":
                      nt(n, r);
                      break;
                    case "textarea":
                      ut(n, r);
                      break;
                    case "select":
                      (t = n._wrapperState.wasMultiple),
                        (n._wrapperState.wasMultiple = !!r.multiple),
                        null != (o = r.value)
                          ? at(n, !!r.multiple, o, !1)
                          : t !== !!r.multiple &&
                            (null != r.defaultValue
                              ? at(n, !!r.multiple, r.defaultValue, !0)
                              : at(n, !!r.multiple, r.multiple ? [] : "", !1));
                  }
                }
              }
              return;
            case 6:
              if (null === e.stateNode) throw Error(a(162));
              return void (e.stateNode.nodeValue = e.memoizedProps);
            case 3:
              return void (
                (n = e.stateNode).hydrate &&
                ((n.hydrate = !1), Te(n.containerInfo))
              );
            case 13:
              return (
                null !== e.memoizedState && ((Vs = zi()), _s(e.child, !0)),
                void Ms(e)
              );
            case 19:
              return void Ms(e);
            case 23:
            case 24:
              return void _s(e, null !== e.memoizedState);
          }
          throw Error(a(163));
        }
        function Ms(t) {
          var e = t.updateQueue;
          if (null !== e) {
            t.updateQueue = null;
            var n = t.stateNode;
            null === n && (n = t.stateNode = new ds()),
              e.forEach(function (e) {
                var r = kl.bind(null, t, e);
                n.has(e) || (n.add(e), e.then(r, r));
              });
          }
        }
        function As(t, e) {
          return (
            null !== t &&
            (null === (t = t.memoizedState) || null !== t.dehydrated) &&
            null !== (e = e.memoizedState) &&
            null === e.dehydrated
          );
        }
        var Rs = Math.ceil,
          ws = T.ReactCurrentDispatcher,
          Ps = T.ReactCurrentOwner,
          Is = 0,
          Os = null,
          Cs = null,
          Ns = 0,
          Ls = 0,
          Ds = li(0),
          Us = 0,
          Fs = null,
          Bs = 0,
          Gs = 0,
          ks = 0,
          Hs = 0,
          zs = null,
          Vs = 0,
          Xs = 1 / 0;
        function Ws() {
          Xs = zi() + 500;
        }
        var js,
          Ys = null,
          qs = !1,
          Ks = null,
          Zs = null,
          Qs = !1,
          $s = null,
          Js = 90,
          tl = [],
          el = [],
          nl = null,
          rl = 0,
          il = null,
          ol = -1,
          al = 0,
          sl = 0,
          ll = null,
          ul = !1;
        function hl() {
          return 0 != (48 & Is) ? zi() : -1 !== ol ? ol : (ol = zi());
        }
        function cl(t) {
          if (0 == (2 & (t = t.mode))) return 1;
          if (0 == (4 & t)) return 99 === Vi() ? 1 : 2;
          if ((0 === al && (al = Bs), 0 !== Ki.transition)) {
            0 !== sl && (sl = null !== zs ? zs.pendingLanes : 0), (t = al);
            var e = 4186112 & ~sl;
            return (
              0 == (e &= -e) &&
                0 == (e = (t = 4186112 & ~t) & -t) &&
                (e = 8192),
              e
            );
          }
          return (
            (t = Vi()),
            (t = Ge(
              0 != (4 & Is) && 98 === t
                ? 12
                : (t = (function (t) {
                    switch (t) {
                      case 99:
                        return 15;
                      case 98:
                        return 10;
                      case 97:
                      case 96:
                        return 8;
                      case 95:
                        return 2;
                      default:
                        return 0;
                    }
                  })(t)),
              al,
            ))
          );
        }
        function dl(t, e, n) {
          if (50 < rl) throw ((rl = 0), (il = null), Error(a(185)));
          if (null === (t = fl(t, e))) return null;
          ze(t, e, n), t === Os && ((ks |= e), 4 === Us && _l(t, Ns));
          var r = Vi();
          1 === e
            ? 0 != (8 & Is) && 0 == (48 & Is)
              ? gl(t)
              : (pl(t, n), 0 === Is && (Ws(), Yi()))
            : (0 == (4 & Is) ||
                (98 !== r && 99 !== r) ||
                (null === nl ? (nl = new Set([t])) : nl.add(t)),
              pl(t, n)),
            (zs = t);
        }
        function fl(t, e) {
          t.lanes |= e;
          var n = t.alternate;
          for (null !== n && (n.lanes |= e), n = t, t = t.return; null !== t; )
            (t.childLanes |= e),
              null !== (n = t.alternate) && (n.childLanes |= e),
              (n = t),
              (t = t.return);
          return 3 === n.tag ? n.stateNode : null;
        }
        function pl(t, e) {
          for (
            var n = t.callbackNode,
              r = t.suspendedLanes,
              i = t.pingedLanes,
              o = t.expirationTimes,
              s = t.pendingLanes;
            0 < s;

          ) {
            var l = 31 - Ve(s),
              u = 1 << l,
              h = o[l];
            if (-1 === h) {
              if (0 == (u & r) || 0 != (u & i)) {
                (h = e), Ue(u);
                var c = De;
                o[l] = 10 <= c ? h + 250 : 6 <= c ? h + 5e3 : -1;
              }
            } else h <= e && (t.expiredLanes |= u);
            s &= ~u;
          }
          if (((r = Fe(t, t === Os ? Ns : 0)), (e = De), 0 === r))
            null !== n &&
              (n !== Ui && Ai(n),
              (t.callbackNode = null),
              (t.callbackPriority = 0));
          else {
            if (null !== n) {
              if (t.callbackPriority === e) return;
              n !== Ui && Ai(n);
            }
            15 === e
              ? ((n = gl.bind(null, t)),
                null === Bi ? ((Bi = [n]), (Gi = Mi(Oi, qi))) : Bi.push(n),
                (n = Ui))
              : 14 === e
                ? (n = ji(99, gl.bind(null, t)))
                : ((n = (function (t) {
                    switch (t) {
                      case 15:
                      case 14:
                        return 99;
                      case 13:
                      case 12:
                      case 11:
                      case 10:
                        return 98;
                      case 9:
                      case 8:
                      case 7:
                      case 6:
                      case 4:
                      case 5:
                        return 97;
                      case 3:
                      case 2:
                      case 1:
                        return 95;
                      case 0:
                        return 90;
                      default:
                        throw Error(a(358, t));
                    }
                  })(e)),
                  (n = ji(n, ml.bind(null, t)))),
              (t.callbackPriority = e),
              (t.callbackNode = n);
          }
        }
        function ml(t) {
          if (((ol = -1), (sl = al = 0), 0 != (48 & Is))) throw Error(a(327));
          var e = t.callbackNode;
          if (Nl() && t.callbackNode !== e) return null;
          var n = Fe(t, t === Os ? Ns : 0);
          if (0 === n) return null;
          var r = n,
            i = Is;
          Is |= 16;
          var o = Sl();
          for ((Os === t && Ns === r) || (Ws(), bl(t, r)); ; )
            try {
              Rl();
              break;
            } catch (e) {
              xl(t, e);
            }
          if (
            (eo(),
            (ws.current = o),
            (Is = i),
            null !== Cs ? (r = 0) : ((Os = null), (Ns = 0), (r = Us)),
            0 != (Bs & ks))
          )
            bl(t, 0);
          else if (0 !== r) {
            if (
              (2 === r &&
                ((Is |= 64),
                t.hydrate && ((t.hydrate = !1), jr(t.containerInfo)),
                0 !== (n = Be(t)) && (r = Ml(t, n))),
              1 === r)
            )
              throw ((e = Fs), bl(t, 0), _l(t, n), pl(t, zi()), e);
            switch (
              ((t.finishedWork = t.current.alternate), (t.finishedLanes = n), r)
            ) {
              case 0:
              case 1:
                throw Error(a(345));
              case 2:
              case 5:
                Il(t);
                break;
              case 3:
                if (
                  (_l(t, n), (62914560 & n) === n && 10 < (r = Vs + 500 - zi()))
                ) {
                  if (0 !== Fe(t, 0)) break;
                  if (((i = t.suspendedLanes) & n) !== n) {
                    hl(), (t.pingedLanes |= t.suspendedLanes & i);
                    break;
                  }
                  t.timeoutHandle = Xr(Il.bind(null, t), r);
                  break;
                }
                Il(t);
                break;
              case 4:
                if ((_l(t, n), (4186112 & n) === n)) break;
                for (r = t.eventTimes, i = -1; 0 < n; ) {
                  var s = 31 - Ve(n);
                  (o = 1 << s), (s = r[s]) > i && (i = s), (n &= ~o);
                }
                if (
                  ((n = i),
                  10 <
                    (n =
                      (120 > (n = zi() - n)
                        ? 120
                        : 480 > n
                          ? 480
                          : 1080 > n
                            ? 1080
                            : 1920 > n
                              ? 1920
                              : 3e3 > n
                                ? 3e3
                                : 4320 > n
                                  ? 4320
                                  : 1960 * Rs(n / 1960)) - n))
                ) {
                  t.timeoutHandle = Xr(Il.bind(null, t), n);
                  break;
                }
                Il(t);
                break;
              default:
                throw Error(a(329));
            }
          }
          return pl(t, zi()), t.callbackNode === e ? ml.bind(null, t) : null;
        }
        function _l(t, e) {
          for (
            e &= ~Hs,
              e &= ~ks,
              t.suspendedLanes |= e,
              t.pingedLanes &= ~e,
              t = t.expirationTimes;
            0 < e;

          ) {
            var n = 31 - Ve(e),
              r = 1 << n;
            (t[n] = -1), (e &= ~r);
          }
        }
        function gl(t) {
          if (0 != (48 & Is)) throw Error(a(327));
          if ((Nl(), t === Os && 0 != (t.expiredLanes & Ns))) {
            var e = Ns,
              n = Ml(t, e);
            0 != (Bs & ks) && (n = Ml(t, (e = Fe(t, e))));
          } else n = Ml(t, (e = Fe(t, 0)));
          if (
            (0 !== t.tag &&
              2 === n &&
              ((Is |= 64),
              t.hydrate && ((t.hydrate = !1), jr(t.containerInfo)),
              0 !== (e = Be(t)) && (n = Ml(t, e))),
            1 === n)
          )
            throw ((n = Fs), bl(t, 0), _l(t, e), pl(t, zi()), n);
          return (
            (t.finishedWork = t.current.alternate),
            (t.finishedLanes = e),
            Il(t),
            pl(t, zi()),
            null
          );
        }
        function vl(t, e) {
          var n = Is;
          Is |= 1;
          try {
            return t(e);
          } finally {
            0 === (Is = n) && (Ws(), Yi());
          }
        }
        function yl(t, e) {
          var n = Is;
          (Is &= -2), (Is |= 8);
          try {
            return t(e);
          } finally {
            0 === (Is = n) && (Ws(), Yi());
          }
        }
        function El(t, e) {
          hi(Ds, Ls), (Ls |= e), (Bs |= e);
        }
        function Tl() {
          (Ls = Ds.current), ui(Ds);
        }
        function bl(t, e) {
          (t.finishedWork = null), (t.finishedLanes = 0);
          var n = t.timeoutHandle;
          if ((-1 !== n && ((t.timeoutHandle = -1), Wr(n)), null !== Cs))
            for (n = Cs.return; null !== n; ) {
              var r = n;
              switch (r.tag) {
                case 1:
                  null != (r = r.type.childContextTypes) && gi();
                  break;
                case 3:
                  Lo(), ui(fi), ui(di), Ko();
                  break;
                case 5:
                  Uo(r);
                  break;
                case 4:
                  Lo();
                  break;
                case 13:
                case 19:
                  ui(Fo);
                  break;
                case 10:
                  no(r);
                  break;
                case 23:
                case 24:
                  Tl();
              }
              n = n.return;
            }
          (Os = t),
            (Cs = Xl(t.current, null)),
            (Ns = Ls = Bs = e),
            (Us = 0),
            (Fs = null),
            (Hs = ks = Gs = 0);
        }
        function xl(t, e) {
          for (;;) {
            var n = Cs;
            try {
              if ((eo(), (Zo.current = Oa), na)) {
                for (var r = Jo.memoizedState; null !== r; ) {
                  var i = r.queue;
                  null !== i && (i.pending = null), (r = r.next);
                }
                na = !1;
              }
              if (
                (($o = 0),
                (ea = ta = Jo = null),
                (ra = !1),
                (Ps.current = null),
                null === n || null === n.return)
              ) {
                (Us = 1), (Fs = e), (Cs = null);
                break;
              }
              t: {
                var o = t,
                  a = n.return,
                  s = n,
                  l = e;
                if (
                  ((e = Ns),
                  (s.flags |= 2048),
                  (s.firstEffect = s.lastEffect = null),
                  null !== l &&
                    "object" == typeof l &&
                    "function" == typeof l.then)
                ) {
                  var u = l;
                  if (0 == (2 & s.mode)) {
                    var h = s.alternate;
                    h
                      ? ((s.updateQueue = h.updateQueue),
                        (s.memoizedState = h.memoizedState),
                        (s.lanes = h.lanes))
                      : ((s.updateQueue = null), (s.memoizedState = null));
                  }
                  var c = 0 != (1 & Fo.current),
                    d = a;
                  do {
                    var f;
                    if ((f = 13 === d.tag)) {
                      var p = d.memoizedState;
                      if (null !== p) f = null !== p.dehydrated;
                      else {
                        var m = d.memoizedProps;
                        f =
                          void 0 !== m.fallback &&
                          (!0 !== m.unstable_avoidThisFallback || !c);
                      }
                    }
                    if (f) {
                      var _ = d.updateQueue;
                      if (null === _) {
                        var g = new Set();
                        g.add(u), (d.updateQueue = g);
                      } else _.add(u);
                      if (0 == (2 & d.mode)) {
                        if (
                          ((d.flags |= 64),
                          (s.flags |= 16384),
                          (s.flags &= -2981),
                          1 === s.tag)
                        )
                          if (null === s.alternate) s.tag = 17;
                          else {
                            var v = uo(-1, 1);
                            (v.tag = 2), ho(s, v);
                          }
                        s.lanes |= 1;
                        break t;
                      }
                      (l = void 0), (s = e);
                      var y = o.pingCache;
                      if (
                        (null === y
                          ? ((y = o.pingCache = new us()),
                            (l = new Set()),
                            y.set(u, l))
                          : void 0 === (l = y.get(u)) &&
                            ((l = new Set()), y.set(u, l)),
                        !l.has(s))
                      ) {
                        l.add(s);
                        var E = Gl.bind(null, o, u, s);
                        u.then(E, E);
                      }
                      (d.flags |= 4096), (d.lanes = e);
                      break t;
                    }
                    d = d.return;
                  } while (null !== d);
                  l = Error(
                    (Y(s.type) || "A React component") +
                      " suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.",
                  );
                }
                5 !== Us && (Us = 2), (l = ss(l, s)), (d = a);
                do {
                  switch (d.tag) {
                    case 3:
                      (o = l),
                        (d.flags |= 4096),
                        (e &= -e),
                        (d.lanes |= e),
                        co(d, hs(0, o, e));
                      break t;
                    case 1:
                      o = l;
                      var T = d.type,
                        b = d.stateNode;
                      if (
                        0 == (64 & d.flags) &&
                        ("function" == typeof T.getDerivedStateFromError ||
                          (null !== b &&
                            "function" == typeof b.componentDidCatch &&
                            (null === Zs || !Zs.has(b))))
                      ) {
                        (d.flags |= 4096),
                          (e &= -e),
                          (d.lanes |= e),
                          co(d, cs(d, o, e));
                        break t;
                      }
                  }
                  d = d.return;
                } while (null !== d);
              }
              Pl(n);
            } catch (t) {
              (e = t), Cs === n && null !== n && (Cs = n = n.return);
              continue;
            }
            break;
          }
        }
        function Sl() {
          var t = ws.current;
          return (ws.current = Oa), null === t ? Oa : t;
        }
        function Ml(t, e) {
          var n = Is;
          Is |= 16;
          var r = Sl();
          for ((Os === t && Ns === e) || bl(t, e); ; )
            try {
              Al();
              break;
            } catch (e) {
              xl(t, e);
            }
          if ((eo(), (Is = n), (ws.current = r), null !== Cs))
            throw Error(a(261));
          return (Os = null), (Ns = 0), Us;
        }
        function Al() {
          for (; null !== Cs; ) wl(Cs);
        }
        function Rl() {
          for (; null !== Cs && !Ri(); ) wl(Cs);
        }
        function wl(t) {
          var e = js(t.alternate, t, Ls);
          (t.memoizedProps = t.pendingProps),
            null === e ? Pl(t) : (Cs = e),
            (Ps.current = null);
        }
        function Pl(t) {
          var e = t;
          do {
            var n = e.alternate;
            if (((t = e.return), 0 == (2048 & e.flags))) {
              if (null !== (n = os(n, e, Ls))) return void (Cs = n);
              if (
                (24 !== (n = e).tag && 23 !== n.tag) ||
                null === n.memoizedState ||
                0 != (1073741824 & Ls) ||
                0 == (4 & n.mode)
              ) {
                for (var r = 0, i = n.child; null !== i; )
                  (r |= i.lanes | i.childLanes), (i = i.sibling);
                n.childLanes = r;
              }
              null !== t &&
                0 == (2048 & t.flags) &&
                (null === t.firstEffect && (t.firstEffect = e.firstEffect),
                null !== e.lastEffect &&
                  (null !== t.lastEffect &&
                    (t.lastEffect.nextEffect = e.firstEffect),
                  (t.lastEffect = e.lastEffect)),
                1 < e.flags &&
                  (null !== t.lastEffect
                    ? (t.lastEffect.nextEffect = e)
                    : (t.firstEffect = e),
                  (t.lastEffect = e)));
            } else {
              if (null !== (n = as(e))) return (n.flags &= 2047), void (Cs = n);
              null !== t &&
                ((t.firstEffect = t.lastEffect = null), (t.flags |= 2048));
            }
            if (null !== (e = e.sibling)) return void (Cs = e);
            Cs = e = t;
          } while (null !== e);
          0 === Us && (Us = 5);
        }
        function Il(t) {
          var e = Vi();
          return Wi(99, Ol.bind(null, t, e)), null;
        }
        function Ol(t, e) {
          do {
            Nl();
          } while (null !== $s);
          if (0 != (48 & Is)) throw Error(a(327));
          var n = t.finishedWork;
          if (null === n) return null;
          if (((t.finishedWork = null), (t.finishedLanes = 0), n === t.current))
            throw Error(a(177));
          t.callbackNode = null;
          var r = n.lanes | n.childLanes,
            i = r,
            o = t.pendingLanes & ~i;
          (t.pendingLanes = i),
            (t.suspendedLanes = 0),
            (t.pingedLanes = 0),
            (t.expiredLanes &= i),
            (t.mutableReadLanes &= i),
            (t.entangledLanes &= i),
            (i = t.entanglements);
          for (var s = t.eventTimes, l = t.expirationTimes; 0 < o; ) {
            var u = 31 - Ve(o),
              h = 1 << u;
            (i[u] = 0), (s[u] = -1), (l[u] = -1), (o &= ~h);
          }
          if (
            (null !== nl && 0 == (24 & r) && nl.has(t) && nl.delete(t),
            t === Os && ((Cs = Os = null), (Ns = 0)),
            1 < n.flags
              ? null !== n.lastEffect
                ? ((n.lastEffect.nextEffect = n), (r = n.firstEffect))
                : (r = n)
              : (r = n.firstEffect),
            null !== r)
          ) {
            if (
              ((i = Is),
              (Is |= 32),
              (Ps.current = null),
              (kr = qe),
              _r((s = mr())))
            ) {
              if ("selectionStart" in s)
                l = { start: s.selectionStart, end: s.selectionEnd };
              else
                t: if (
                  ((l = ((l = s.ownerDocument) && l.defaultView) || window),
                  (h = l.getSelection && l.getSelection()) &&
                    0 !== h.rangeCount)
                ) {
                  (l = h.anchorNode),
                    (o = h.anchorOffset),
                    (u = h.focusNode),
                    (h = h.focusOffset);
                  try {
                    l.nodeType, u.nodeType;
                  } catch (t) {
                    l = null;
                    break t;
                  }
                  var c = 0,
                    d = -1,
                    f = -1,
                    p = 0,
                    m = 0,
                    _ = s,
                    g = null;
                  e: for (;;) {
                    for (
                      var v;
                      _ !== l || (0 !== o && 3 !== _.nodeType) || (d = c + o),
                        _ !== u || (0 !== h && 3 !== _.nodeType) || (f = c + h),
                        3 === _.nodeType && (c += _.nodeValue.length),
                        null !== (v = _.firstChild);

                    )
                      (g = _), (_ = v);
                    for (;;) {
                      if (_ === s) break e;
                      if (
                        (g === l && ++p === o && (d = c),
                        g === u && ++m === h && (f = c),
                        null !== (v = _.nextSibling))
                      )
                        break;
                      g = (_ = g).parentNode;
                    }
                    _ = v;
                  }
                  l = -1 === d || -1 === f ? null : { start: d, end: f };
                } else l = null;
              l = l || { start: 0, end: 0 };
            } else l = null;
            (Hr = { focusedElem: s, selectionRange: l }),
              (qe = !1),
              (ll = null),
              (ul = !1),
              (Ys = r);
            do {
              try {
                Cl();
              } catch (t) {
                if (null === Ys) throw Error(a(330));
                Bl(Ys, t), (Ys = Ys.nextEffect);
              }
            } while (null !== Ys);
            (ll = null), (Ys = r);
            do {
              try {
                for (s = t; null !== Ys; ) {
                  var y = Ys.flags;
                  if ((16 & y && gt(Ys.stateNode, ""), 128 & y)) {
                    var E = Ys.alternate;
                    if (null !== E) {
                      var T = E.ref;
                      null !== T &&
                        ("function" == typeof T ? T(null) : (T.current = null));
                    }
                  }
                  switch (1038 & y) {
                    case 2:
                      Es(Ys), (Ys.flags &= -3);
                      break;
                    case 6:
                      Es(Ys), (Ys.flags &= -3), Ss(Ys.alternate, Ys);
                      break;
                    case 1024:
                      Ys.flags &= -1025;
                      break;
                    case 1028:
                      (Ys.flags &= -1025), Ss(Ys.alternate, Ys);
                      break;
                    case 4:
                      Ss(Ys.alternate, Ys);
                      break;
                    case 8:
                      xs(s, (l = Ys));
                      var b = l.alternate;
                      vs(l), null !== b && vs(b);
                  }
                  Ys = Ys.nextEffect;
                }
              } catch (t) {
                if (null === Ys) throw Error(a(330));
                Bl(Ys, t), (Ys = Ys.nextEffect);
              }
            } while (null !== Ys);
            if (
              ((T = Hr),
              (E = mr()),
              (y = T.focusedElem),
              (s = T.selectionRange),
              E !== y &&
                y &&
                y.ownerDocument &&
                pr(y.ownerDocument.documentElement, y))
            ) {
              null !== s &&
                _r(y) &&
                ((E = s.start),
                void 0 === (T = s.end) && (T = E),
                "selectionStart" in y
                  ? ((y.selectionStart = E),
                    (y.selectionEnd = Math.min(T, y.value.length)))
                  : (T =
                      ((E = y.ownerDocument || document) && E.defaultView) ||
                      window).getSelection &&
                    ((T = T.getSelection()),
                    (l = y.textContent.length),
                    (b = Math.min(s.start, l)),
                    (s = void 0 === s.end ? b : Math.min(s.end, l)),
                    !T.extend && b > s && ((l = s), (s = b), (b = l)),
                    (l = fr(y, b)),
                    (o = fr(y, s)),
                    l &&
                      o &&
                      (1 !== T.rangeCount ||
                        T.anchorNode !== l.node ||
                        T.anchorOffset !== l.offset ||
                        T.focusNode !== o.node ||
                        T.focusOffset !== o.offset) &&
                      ((E = E.createRange()).setStart(l.node, l.offset),
                      T.removeAllRanges(),
                      b > s
                        ? (T.addRange(E), T.extend(o.node, o.offset))
                        : (E.setEnd(o.node, o.offset), T.addRange(E))))),
                (E = []);
              for (T = y; (T = T.parentNode); )
                1 === T.nodeType &&
                  E.push({ element: T, left: T.scrollLeft, top: T.scrollTop });
              for (
                "function" == typeof y.focus && y.focus(), y = 0;
                y < E.length;
                y++
              )
                ((T = E[y]).element.scrollLeft = T.left),
                  (T.element.scrollTop = T.top);
            }
            (qe = !!kr), (Hr = kr = null), (t.current = n), (Ys = r);
            do {
              try {
                for (y = t; null !== Ys; ) {
                  var x = Ys.flags;
                  if ((36 & x && ms(y, Ys.alternate, Ys), 128 & x)) {
                    E = void 0;
                    var S = Ys.ref;
                    if (null !== S) {
                      var M = Ys.stateNode;
                      Ys.tag,
                        (E = M),
                        "function" == typeof S ? S(E) : (S.current = E);
                    }
                  }
                  Ys = Ys.nextEffect;
                }
              } catch (t) {
                if (null === Ys) throw Error(a(330));
                Bl(Ys, t), (Ys = Ys.nextEffect);
              }
            } while (null !== Ys);
            (Ys = null), Fi(), (Is = i);
          } else t.current = n;
          if (Qs) (Qs = !1), ($s = t), (Js = e);
          else
            for (Ys = r; null !== Ys; )
              (e = Ys.nextEffect),
                (Ys.nextEffect = null),
                8 & Ys.flags &&
                  (((x = Ys).sibling = null), (x.stateNode = null)),
                (Ys = e);
          if (
            (0 === (r = t.pendingLanes) && (Zs = null),
            1 === r ? (t === il ? rl++ : ((rl = 0), (il = t))) : (rl = 0),
            (n = n.stateNode),
            xi && "function" == typeof xi.onCommitFiberRoot)
          )
            try {
              xi.onCommitFiberRoot(bi, n, void 0, 64 == (64 & n.current.flags));
            } catch (t) {}
          if ((pl(t, zi()), qs)) throw ((qs = !1), (t = Ks), (Ks = null), t);
          return 0 != (8 & Is) || Yi(), null;
        }
        function Cl() {
          for (; null !== Ys; ) {
            var t = Ys.alternate;
            ul ||
              null === ll ||
              (0 != (8 & Ys.flags)
                ? Jt(Ys, ll) && (ul = !0)
                : 13 === Ys.tag && As(t, Ys) && Jt(Ys, ll) && (ul = !0));
            var e = Ys.flags;
            0 != (256 & e) && ps(t, Ys),
              0 == (512 & e) ||
                Qs ||
                ((Qs = !0),
                ji(97, function () {
                  return Nl(), null;
                })),
              (Ys = Ys.nextEffect);
          }
        }
        function Nl() {
          if (90 !== Js) {
            var t = 97 < Js ? 97 : Js;
            return (Js = 90), Wi(t, Ul);
          }
          return !1;
        }
        function Ll(t, e) {
          tl.push(e, t),
            Qs ||
              ((Qs = !0),
              ji(97, function () {
                return Nl(), null;
              }));
        }
        function Dl(t, e) {
          el.push(e, t),
            Qs ||
              ((Qs = !0),
              ji(97, function () {
                return Nl(), null;
              }));
        }
        function Ul() {
          if (null === $s) return !1;
          var t = $s;
          if ((($s = null), 0 != (48 & Is))) throw Error(a(331));
          var e = Is;
          Is |= 32;
          var n = el;
          el = [];
          for (var r = 0; r < n.length; r += 2) {
            var i = n[r],
              o = n[r + 1],
              s = i.destroy;
            if (((i.destroy = void 0), "function" == typeof s))
              try {
                s();
              } catch (t) {
                if (null === o) throw Error(a(330));
                Bl(o, t);
              }
          }
          for (n = tl, tl = [], r = 0; r < n.length; r += 2) {
            (i = n[r]), (o = n[r + 1]);
            try {
              var l = i.create;
              i.destroy = l();
            } catch (t) {
              if (null === o) throw Error(a(330));
              Bl(o, t);
            }
          }
          for (l = t.current.firstEffect; null !== l; )
            (t = l.nextEffect),
              (l.nextEffect = null),
              8 & l.flags && ((l.sibling = null), (l.stateNode = null)),
              (l = t);
          return (Is = e), Yi(), !0;
        }
        function Fl(t, e, n) {
          ho(t, (e = hs(0, (e = ss(n, e)), 1))),
            (e = hl()),
            null !== (t = fl(t, 1)) && (ze(t, 1, e), pl(t, e));
        }
        function Bl(t, e) {
          if (3 === t.tag) Fl(t, t, e);
          else
            for (var n = t.return; null !== n; ) {
              if (3 === n.tag) {
                Fl(n, t, e);
                break;
              }
              if (1 === n.tag) {
                var r = n.stateNode;
                if (
                  "function" == typeof n.type.getDerivedStateFromError ||
                  ("function" == typeof r.componentDidCatch &&
                    (null === Zs || !Zs.has(r)))
                ) {
                  var i = cs(n, (t = ss(e, t)), 1);
                  if ((ho(n, i), (i = hl()), null !== (n = fl(n, 1))))
                    ze(n, 1, i), pl(n, i);
                  else if (
                    "function" == typeof r.componentDidCatch &&
                    (null === Zs || !Zs.has(r))
                  )
                    try {
                      r.componentDidCatch(e, t);
                    } catch (t) {}
                  break;
                }
              }
              n = n.return;
            }
        }
        function Gl(t, e, n) {
          var r = t.pingCache;
          null !== r && r.delete(e),
            (e = hl()),
            (t.pingedLanes |= t.suspendedLanes & n),
            Os === t &&
              (Ns & n) === n &&
              (4 === Us ||
              (3 === Us && (62914560 & Ns) === Ns && 500 > zi() - Vs)
                ? bl(t, 0)
                : (Hs |= n)),
            pl(t, e);
        }
        function kl(t, e) {
          var n = t.stateNode;
          null !== n && n.delete(e),
            0 == (e = 0) &&
              (0 == (2 & (e = t.mode))
                ? (e = 1)
                : 0 == (4 & e)
                  ? (e = 99 === Vi() ? 1 : 2)
                  : (0 === al && (al = Bs),
                    0 === (e = ke(62914560 & ~al)) && (e = 4194304))),
            (n = hl()),
            null !== (t = fl(t, e)) && (ze(t, e, n), pl(t, n));
        }
        function Hl(t, e, n, r) {
          (this.tag = t),
            (this.key = n),
            (this.sibling =
              this.child =
              this.return =
              this.stateNode =
              this.type =
              this.elementType =
                null),
            (this.index = 0),
            (this.ref = null),
            (this.pendingProps = e),
            (this.dependencies =
              this.memoizedState =
              this.updateQueue =
              this.memoizedProps =
                null),
            (this.mode = r),
            (this.flags = 0),
            (this.lastEffect = this.firstEffect = this.nextEffect = null),
            (this.childLanes = this.lanes = 0),
            (this.alternate = null);
        }
        function zl(t, e, n, r) {
          return new Hl(t, e, n, r);
        }
        function Vl(t) {
          return !(!(t = t.prototype) || !t.isReactComponent);
        }
        function Xl(t, e) {
          var n = t.alternate;
          return (
            null === n
              ? (((n = zl(t.tag, e, t.key, t.mode)).elementType =
                  t.elementType),
                (n.type = t.type),
                (n.stateNode = t.stateNode),
                (n.alternate = t),
                (t.alternate = n))
              : ((n.pendingProps = e),
                (n.type = t.type),
                (n.flags = 0),
                (n.nextEffect = null),
                (n.firstEffect = null),
                (n.lastEffect = null)),
            (n.childLanes = t.childLanes),
            (n.lanes = t.lanes),
            (n.child = t.child),
            (n.memoizedProps = t.memoizedProps),
            (n.memoizedState = t.memoizedState),
            (n.updateQueue = t.updateQueue),
            (e = t.dependencies),
            (n.dependencies =
              null === e
                ? null
                : { lanes: e.lanes, firstContext: e.firstContext }),
            (n.sibling = t.sibling),
            (n.index = t.index),
            (n.ref = t.ref),
            n
          );
        }
        function Wl(t, e, n, r, i, o) {
          var s = 2;
          if (((r = t), "function" == typeof t)) Vl(t) && (s = 1);
          else if ("string" == typeof t) s = 5;
          else
            t: switch (t) {
              case S:
                return jl(n.children, i, o, e);
              case U:
                (s = 8), (i |= 16);
                break;
              case M:
                (s = 8), (i |= 1);
                break;
              case A:
                return (
                  ((t = zl(12, n, e, 8 | i)).elementType = A),
                  (t.type = A),
                  (t.lanes = o),
                  t
                );
              case I:
                return (
                  ((t = zl(13, n, e, i)).type = I),
                  (t.elementType = I),
                  (t.lanes = o),
                  t
                );
              case O:
                return (
                  ((t = zl(19, n, e, i)).elementType = O), (t.lanes = o), t
                );
              case F:
                return Yl(n, i, o, e);
              case B:
                return (
                  ((t = zl(24, n, e, i)).elementType = B), (t.lanes = o), t
                );
              default:
                if ("object" == typeof t && null !== t)
                  switch (t.$$typeof) {
                    case R:
                      s = 10;
                      break t;
                    case w:
                      s = 9;
                      break t;
                    case P:
                      s = 11;
                      break t;
                    case C:
                      s = 14;
                      break t;
                    case N:
                      (s = 16), (r = null);
                      break t;
                    case L:
                      s = 22;
                      break t;
                  }
                throw Error(a(130, null == t ? t : typeof t, ""));
            }
          return (
            ((e = zl(s, n, e, i)).elementType = t),
            (e.type = r),
            (e.lanes = o),
            e
          );
        }
        function jl(t, e, n, r) {
          return ((t = zl(7, t, r, e)).lanes = n), t;
        }
        function Yl(t, e, n, r) {
          return ((t = zl(23, t, r, e)).elementType = F), (t.lanes = n), t;
        }
        function ql(t, e, n) {
          return ((t = zl(6, t, null, e)).lanes = n), t;
        }
        function Kl(t, e, n) {
          return (
            ((e = zl(
              4,
              null !== t.children ? t.children : [],
              t.key,
              e,
            )).lanes = n),
            (e.stateNode = {
              containerInfo: t.containerInfo,
              pendingChildren: null,
              implementation: t.implementation,
            }),
            e
          );
        }
        function Zl(t, e, n) {
          (this.tag = e),
            (this.containerInfo = t),
            (this.finishedWork =
              this.pingCache =
              this.current =
              this.pendingChildren =
                null),
            (this.timeoutHandle = -1),
            (this.pendingContext = this.context = null),
            (this.hydrate = n),
            (this.callbackNode = null),
            (this.callbackPriority = 0),
            (this.eventTimes = He(0)),
            (this.expirationTimes = He(-1)),
            (this.entangledLanes =
              this.finishedLanes =
              this.mutableReadLanes =
              this.expiredLanes =
              this.pingedLanes =
              this.suspendedLanes =
              this.pendingLanes =
                0),
            (this.entanglements = He(0)),
            (this.mutableSourceEagerHydrationData = null);
        }
        function Ql(t, e, n, r) {
          var i = e.current,
            o = hl(),
            s = cl(i);
          t: if (n) {
            e: {
              if (Kt((n = n._reactInternals)) !== n || 1 !== n.tag)
                throw Error(a(170));
              var l = n;
              do {
                switch (l.tag) {
                  case 3:
                    l = l.stateNode.context;
                    break e;
                  case 1:
                    if (_i(l.type)) {
                      l = l.stateNode.__reactInternalMemoizedMergedChildContext;
                      break e;
                    }
                }
                l = l.return;
              } while (null !== l);
              throw Error(a(171));
            }
            if (1 === n.tag) {
              var u = n.type;
              if (_i(u)) {
                n = yi(n, u, l);
                break t;
              }
            }
            n = l;
          } else n = ci;
          return (
            null === e.context ? (e.context = n) : (e.pendingContext = n),
            ((e = uo(o, s)).payload = { element: t }),
            null !== (r = void 0 === r ? null : r) && (e.callback = r),
            ho(i, e),
            dl(i, s, o),
            s
          );
        }
        function $l(t) {
          return (t = t.current).child
            ? (t.child.tag, t.child.stateNode)
            : null;
        }
        function Jl(t, e) {
          if (null !== (t = t.memoizedState) && null !== t.dehydrated) {
            var n = t.retryLane;
            t.retryLane = 0 !== n && n < e ? n : e;
          }
        }
        function tu(t, e) {
          Jl(t, e), (t = t.alternate) && Jl(t, e);
        }
        function eu(t, e, n) {
          var r =
            (null != n &&
              null != n.hydrationOptions &&
              n.hydrationOptions.mutableSources) ||
            null;
          if (
            ((n = new Zl(t, e, null != n && !0 === n.hydrate)),
            (e = zl(3, null, null, 2 === e ? 7 : 1 === e ? 3 : 0)),
            (n.current = e),
            (e.stateNode = n),
            so(e),
            (t[Jr] = n.current),
            Or(8 === t.nodeType ? t.parentNode : t),
            r)
          )
            for (t = 0; t < r.length; t++) {
              var i = (e = r[t])._getVersion;
              (i = i(e._source)),
                null == n.mutableSourceEagerHydrationData
                  ? (n.mutableSourceEagerHydrationData = [e, i])
                  : n.mutableSourceEagerHydrationData.push(e, i);
            }
          this._internalRoot = n;
        }
        function nu(t) {
          return !(
            !t ||
            (1 !== t.nodeType &&
              9 !== t.nodeType &&
              11 !== t.nodeType &&
              (8 !== t.nodeType ||
                " react-mount-point-unstable " !== t.nodeValue))
          );
        }
        function ru(t, e, n, r, i) {
          var o = n._reactRootContainer;
          if (o) {
            var a = o._internalRoot;
            if ("function" == typeof i) {
              var s = i;
              i = function () {
                var t = $l(a);
                s.call(t);
              };
            }
            Ql(e, a, t, i);
          } else {
            if (
              ((o = n._reactRootContainer =
                (function (t, e) {
                  if (
                    (e ||
                      (e = !(
                        !(e = t
                          ? 9 === t.nodeType
                            ? t.documentElement
                            : t.firstChild
                          : null) ||
                        1 !== e.nodeType ||
                        !e.hasAttribute("data-reactroot")
                      )),
                    !e)
                  )
                    for (var n; (n = t.lastChild); ) t.removeChild(n);
                  return new eu(t, 0, e ? { hydrate: !0 } : void 0);
                })(n, r)),
              (a = o._internalRoot),
              "function" == typeof i)
            ) {
              var l = i;
              i = function () {
                var t = $l(a);
                l.call(t);
              };
            }
            yl(function () {
              Ql(e, a, t, i);
            });
          }
          return $l(a);
        }
        function iu(t, e) {
          var n =
            2 < arguments.length && void 0 !== arguments[2]
              ? arguments[2]
              : null;
          if (!nu(e)) throw Error(a(200));
          return (function (t, e, n) {
            var r =
              3 < arguments.length && void 0 !== arguments[3]
                ? arguments[3]
                : null;
            return {
              $$typeof: x,
              key: null == r ? null : "" + r,
              children: t,
              containerInfo: e,
              implementation: n,
            };
          })(t, e, null, n);
        }
        (js = function (t, e, n) {
          var r = e.lanes;
          if (null !== t)
            if (t.memoizedProps !== e.pendingProps || fi.current) Ua = !0;
            else {
              if (0 == (n & r)) {
                switch (((Ua = !1), e.tag)) {
                  case 3:
                    ja(e), Yo();
                    break;
                  case 5:
                    Do(e);
                    break;
                  case 1:
                    _i(e.type) && Ei(e);
                    break;
                  case 4:
                    No(e, e.stateNode.containerInfo);
                    break;
                  case 10:
                    r = e.memoizedProps.value;
                    var i = e.type._context;
                    hi(Qi, i._currentValue), (i._currentValue = r);
                    break;
                  case 13:
                    if (null !== e.memoizedState)
                      return 0 != (n & e.child.childLanes)
                        ? $a(t, e, n)
                        : (hi(Fo, 1 & Fo.current),
                          null !== (e = rs(t, e, n)) ? e.sibling : null);
                    hi(Fo, 1 & Fo.current);
                    break;
                  case 19:
                    if (((r = 0 != (n & e.childLanes)), 0 != (64 & t.flags))) {
                      if (r) return ns(t, e, n);
                      e.flags |= 64;
                    }
                    if (
                      (null !== (i = e.memoizedState) &&
                        ((i.rendering = null),
                        (i.tail = null),
                        (i.lastEffect = null)),
                      hi(Fo, Fo.current),
                      r)
                    )
                      break;
                    return null;
                  case 23:
                  case 24:
                    return (e.lanes = 0), Ha(t, e, n);
                }
                return rs(t, e, n);
              }
              Ua = 0 != (16384 & t.flags);
            }
          else Ua = !1;
          switch (((e.lanes = 0), e.tag)) {
            case 2:
              if (
                ((r = e.type),
                null !== t &&
                  ((t.alternate = null), (e.alternate = null), (e.flags |= 2)),
                (t = e.pendingProps),
                (i = mi(e, di.current)),
                io(e, n),
                (i = aa(null, e, r, t, i, n)),
                (e.flags |= 1),
                "object" == typeof i &&
                  null !== i &&
                  "function" == typeof i.render &&
                  void 0 === i.$$typeof)
              ) {
                if (
                  ((e.tag = 1),
                  (e.memoizedState = null),
                  (e.updateQueue = null),
                  _i(r))
                ) {
                  var o = !0;
                  Ei(e);
                } else o = !1;
                (e.memoizedState =
                  null !== i.state && void 0 !== i.state ? i.state : null),
                  so(e);
                var s = r.getDerivedStateFromProps;
                "function" == typeof s && _o(e, r, s, t),
                  (i.updater = go),
                  (e.stateNode = i),
                  (i._reactInternals = e),
                  To(e, r, t, n),
                  (e = Wa(null, e, r, !0, o, n));
              } else (e.tag = 0), Fa(null, e, i, n), (e = e.child);
              return e;
            case 16:
              i = e.elementType;
              t: {
                switch (
                  (null !== t &&
                    ((t.alternate = null),
                    (e.alternate = null),
                    (e.flags |= 2)),
                  (t = e.pendingProps),
                  (i = (o = i._init)(i._payload)),
                  (e.type = i),
                  (o = e.tag =
                    (function (t) {
                      if ("function" == typeof t) return Vl(t) ? 1 : 0;
                      if (null != t) {
                        if ((t = t.$$typeof) === P) return 11;
                        if (t === C) return 14;
                      }
                      return 2;
                    })(i)),
                  (t = Zi(i, t)),
                  o)
                ) {
                  case 0:
                    e = Va(null, e, i, t, n);
                    break t;
                  case 1:
                    e = Xa(null, e, i, t, n);
                    break t;
                  case 11:
                    e = Ba(null, e, i, t, n);
                    break t;
                  case 14:
                    e = Ga(null, e, i, Zi(i.type, t), r, n);
                    break t;
                }
                throw Error(a(306, i, ""));
              }
              return e;
            case 0:
              return (
                (r = e.type),
                (i = e.pendingProps),
                Va(t, e, r, (i = e.elementType === r ? i : Zi(r, i)), n)
              );
            case 1:
              return (
                (r = e.type),
                (i = e.pendingProps),
                Xa(t, e, r, (i = e.elementType === r ? i : Zi(r, i)), n)
              );
            case 3:
              if ((ja(e), (r = e.updateQueue), null === t || null === r))
                throw Error(a(282));
              if (
                ((r = e.pendingProps),
                (i = null !== (i = e.memoizedState) ? i.element : null),
                lo(t, e),
                fo(e, r, null, n),
                (r = e.memoizedState.element) === i)
              )
                Yo(), (e = rs(t, e, n));
              else {
                if (
                  ((o = (i = e.stateNode).hydrate) &&
                    ((ko = Yr(e.stateNode.containerInfo.firstChild)),
                    (Go = e),
                    (o = Ho = !0)),
                  o)
                ) {
                  if (null != (t = i.mutableSourceEagerHydrationData))
                    for (i = 0; i < t.length; i += 2)
                      ((o = t[i])._workInProgressVersionPrimary = t[i + 1]),
                        qo.push(o);
                  for (n = Ro(e, null, r, n), e.child = n; n; )
                    (n.flags = (-3 & n.flags) | 1024), (n = n.sibling);
                } else Fa(t, e, r, n), Yo();
                e = e.child;
              }
              return e;
            case 5:
              return (
                Do(e),
                null === t && Xo(e),
                (r = e.type),
                (i = e.pendingProps),
                (o = null !== t ? t.memoizedProps : null),
                (s = i.children),
                Vr(r, i)
                  ? (s = null)
                  : null !== o && Vr(r, o) && (e.flags |= 16),
                za(t, e),
                Fa(t, e, s, n),
                e.child
              );
            case 6:
              return null === t && Xo(e), null;
            case 13:
              return $a(t, e, n);
            case 4:
              return (
                No(e, e.stateNode.containerInfo),
                (r = e.pendingProps),
                null === t ? (e.child = Ao(e, null, r, n)) : Fa(t, e, r, n),
                e.child
              );
            case 11:
              return (
                (r = e.type),
                (i = e.pendingProps),
                Ba(t, e, r, (i = e.elementType === r ? i : Zi(r, i)), n)
              );
            case 7:
              return Fa(t, e, e.pendingProps, n), e.child;
            case 8:
            case 12:
              return Fa(t, e, e.pendingProps.children, n), e.child;
            case 10:
              t: {
                (r = e.type._context),
                  (i = e.pendingProps),
                  (s = e.memoizedProps),
                  (o = i.value);
                var l = e.type._context;
                if (
                  (hi(Qi, l._currentValue), (l._currentValue = o), null !== s)
                )
                  if (
                    ((l = s.value),
                    0 ==
                      (o = ur(l, o)
                        ? 0
                        : 0 |
                          ("function" == typeof r._calculateChangedBits
                            ? r._calculateChangedBits(l, o)
                            : 1073741823)))
                  ) {
                    if (s.children === i.children && !fi.current) {
                      e = rs(t, e, n);
                      break t;
                    }
                  } else
                    for (
                      null !== (l = e.child) && (l.return = e);
                      null !== l;

                    ) {
                      var u = l.dependencies;
                      if (null !== u) {
                        s = l.child;
                        for (var h = u.firstContext; null !== h; ) {
                          if (h.context === r && 0 != (h.observedBits & o)) {
                            1 === l.tag &&
                              (((h = uo(-1, n & -n)).tag = 2), ho(l, h)),
                              (l.lanes |= n),
                              null !== (h = l.alternate) && (h.lanes |= n),
                              ro(l.return, n),
                              (u.lanes |= n);
                            break;
                          }
                          h = h.next;
                        }
                      } else
                        s = 10 === l.tag && l.type === e.type ? null : l.child;
                      if (null !== s) s.return = l;
                      else
                        for (s = l; null !== s; ) {
                          if (s === e) {
                            s = null;
                            break;
                          }
                          if (null !== (l = s.sibling)) {
                            (l.return = s.return), (s = l);
                            break;
                          }
                          s = s.return;
                        }
                      l = s;
                    }
                Fa(t, e, i.children, n), (e = e.child);
              }
              return e;
            case 9:
              return (
                (i = e.type),
                (r = (o = e.pendingProps).children),
                io(e, n),
                (r = r((i = oo(i, o.unstable_observedBits)))),
                (e.flags |= 1),
                Fa(t, e, r, n),
                e.child
              );
            case 14:
              return (
                (o = Zi((i = e.type), e.pendingProps)),
                Ga(t, e, i, (o = Zi(i.type, o)), r, n)
              );
            case 15:
              return ka(t, e, e.type, e.pendingProps, r, n);
            case 17:
              return (
                (r = e.type),
                (i = e.pendingProps),
                (i = e.elementType === r ? i : Zi(r, i)),
                null !== t &&
                  ((t.alternate = null), (e.alternate = null), (e.flags |= 2)),
                (e.tag = 1),
                _i(r) ? ((t = !0), Ei(e)) : (t = !1),
                io(e, n),
                yo(e, r, i),
                To(e, r, i, n),
                Wa(null, e, r, !0, t, n)
              );
            case 19:
              return ns(t, e, n);
            case 23:
            case 24:
              return Ha(t, e, n);
          }
          throw Error(a(156, e.tag));
        }),
          (eu.prototype.render = function (t) {
            Ql(t, this._internalRoot, null, null);
          }),
          (eu.prototype.unmount = function () {
            var t = this._internalRoot,
              e = t.containerInfo;
            Ql(null, t, null, function () {
              e[Jr] = null;
            });
          }),
          (te = function (t) {
            13 === t.tag && (dl(t, 4, hl()), tu(t, 4));
          }),
          (ee = function (t) {
            13 === t.tag && (dl(t, 67108864, hl()), tu(t, 67108864));
          }),
          (ne = function (t) {
            if (13 === t.tag) {
              var e = hl(),
                n = cl(t);
              dl(t, n, e), tu(t, n);
            }
          }),
          (re = function (t, e) {
            return e();
          }),
          (At = function (t, e, n) {
            switch (e) {
              case "input":
                if ((nt(t, n), (e = n.name), "radio" === n.type && null != e)) {
                  for (n = t; n.parentNode; ) n = n.parentNode;
                  for (
                    n = n.querySelectorAll(
                      "input[name=" +
                        JSON.stringify("" + e) +
                        '][type="radio"]',
                    ),
                      e = 0;
                    e < n.length;
                    e++
                  ) {
                    var r = n[e];
                    if (r !== t && r.form === t.form) {
                      var i = ii(r);
                      if (!i) throw Error(a(90));
                      Q(r), nt(r, i);
                    }
                  }
                }
                break;
              case "textarea":
                ut(t, n);
                break;
              case "select":
                null != (e = n.value) && at(t, !!n.multiple, e, !1);
            }
          }),
          (Ct = vl),
          (Nt = function (t, e, n, r, i) {
            var o = Is;
            Is |= 4;
            try {
              return Wi(98, t.bind(null, e, n, r, i));
            } finally {
              0 === (Is = o) && (Ws(), Yi());
            }
          }),
          (Lt = function () {
            0 == (49 & Is) &&
              ((function () {
                if (null !== nl) {
                  var t = nl;
                  (nl = null),
                    t.forEach(function (t) {
                      (t.expiredLanes |= 24 & t.pendingLanes), pl(t, zi());
                    });
                }
                Yi();
              })(),
              Nl());
          }),
          (Dt = function (t, e) {
            var n = Is;
            Is |= 2;
            try {
              return t(e);
            } finally {
              0 === (Is = n) && (Ws(), Yi());
            }
          });
        var ou = { Events: [ni, ri, ii, It, Ot, Nl, { current: !1 }] },
          au = {
            findFiberByHostInstance: ei,
            bundleType: 0,
            version: "17.0.2",
            rendererPackageName: "react-dom",
          },
          su = {
            bundleType: au.bundleType,
            version: au.version,
            rendererPackageName: au.rendererPackageName,
            rendererConfig: au.rendererConfig,
            overrideHookState: null,
            overrideHookStateDeletePath: null,
            overrideHookStateRenamePath: null,
            overrideProps: null,
            overridePropsDeletePath: null,
            overridePropsRenamePath: null,
            setSuspenseHandler: null,
            scheduleUpdate: null,
            currentDispatcherRef: T.ReactCurrentDispatcher,
            findHostInstanceByFiber: function (t) {
              return null === (t = $t(t)) ? null : t.stateNode;
            },
            findFiberByHostInstance:
              au.findFiberByHostInstance ||
              function () {
                return null;
              },
            findHostInstancesForRefresh: null,
            scheduleRefresh: null,
            scheduleRoot: null,
            setRefreshHandler: null,
            getCurrentFiber: null,
          };
        if ("undefined" != typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {
          var lu = __REACT_DEVTOOLS_GLOBAL_HOOK__;
          if (!lu.isDisabled && lu.supportsFiber)
            try {
              (bi = lu.inject(su)), (xi = lu);
            } catch (mt) {}
        }
        (e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = ou),
          (e.createPortal = iu),
          (e.findDOMNode = function (t) {
            if (null == t) return null;
            if (1 === t.nodeType) return t;
            var e = t._reactInternals;
            if (void 0 === e) {
              if ("function" == typeof t.render) throw Error(a(188));
              throw Error(a(268, Object.keys(t)));
            }
            return null === (t = $t(e)) ? null : t.stateNode;
          }),
          (e.flushSync = function (t, e) {
            var n = Is;
            if (0 != (48 & n)) return t(e);
            Is |= 1;
            try {
              if (t) return Wi(99, t.bind(null, e));
            } finally {
              (Is = n), Yi();
            }
          }),
          (e.hydrate = function (t, e, n) {
            if (!nu(e)) throw Error(a(200));
            return ru(null, t, e, !0, n);
          }),
          (e.render = function (t, e, n) {
            if (!nu(e)) throw Error(a(200));
            return ru(null, t, e, !1, n);
          }),
          (e.unmountComponentAtNode = function (t) {
            if (!nu(t)) throw Error(a(40));
            return (
              !!t._reactRootContainer &&
              (yl(function () {
                ru(null, null, t, !1, function () {
                  (t._reactRootContainer = null), (t[Jr] = null);
                });
              }),
              !0)
            );
          }),
          (e.unstable_batchedUpdates = vl),
          (e.unstable_createPortal = function (t, e) {
            return iu(
              t,
              e,
              2 < arguments.length && void 0 !== arguments[2]
                ? arguments[2]
                : null,
            );
          }),
          (e.unstable_renderSubtreeIntoContainer = function (t, e, n, r) {
            if (!nu(n)) throw Error(a(200));
            if (null == t || void 0 === t._reactInternals) throw Error(a(38));
            return ru(t, e, n, !1, r);
          }),
          (e.version = "17.0.2");
      },
      935: (t, e, n) => {
        "use strict";
        !(function t() {
          if (
            "undefined" != typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&
            "function" == typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE
          )
            try {
              __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t);
            } catch (t) {
              console.error(t);
            }
        })(),
          (t.exports = n(448));
      },
      87: (t, e) => {
        (() => {
          var t = {
              418: (t) => {
                "use strict";
                var e = Object.getOwnPropertySymbols,
                  n = Object.prototype.hasOwnProperty,
                  r = Object.prototype.propertyIsEnumerable;
                t.exports = (function () {
                  try {
                    if (!Object.assign) return !1;
                    var t = new String("abc");
                    if (
                      ((t[5] = "de"), "5" === Object.getOwnPropertyNames(t)[0])
                    )
                      return !1;
                    for (var e = {}, n = 0; n < 10; n++)
                      e["_" + String.fromCharCode(n)] = n;
                    if (
                      "0123456789" !==
                      Object.getOwnPropertyNames(e)
                        .map(function (t) {
                          return e[t];
                        })
                        .join("")
                    )
                      return !1;
                    var r = {};
                    return (
                      "abcdefghijklmnopqrst".split("").forEach(function (t) {
                        r[t] = t;
                      }),
                      "abcdefghijklmnopqrst" ===
                        Object.keys(Object.assign({}, r)).join("")
                    );
                  } catch (t) {
                    return !1;
                  }
                })()
                  ? Object.assign
                  : function (t, i) {
                      for (
                        var o,
                          a,
                          s = (function (t) {
                            if (null == t)
                              throw new TypeError(
                                "Object.assign cannot be called with null or undefined",
                              );
                            return Object(t);
                          })(t),
                          l = 1;
                        l < arguments.length;
                        l++
                      ) {
                        for (var u in (o = Object(arguments[l])))
                          n.call(o, u) && (s[u] = o[u]);
                        if (e) {
                          a = e(o);
                          for (var h = 0; h < a.length; h++)
                            r.call(o, a[h]) && (s[a[h]] = o[a[h]]);
                        }
                      }
                      return s;
                    };
              },
              703: (t, e, n) => {
                "use strict";
                var r = n(414);
                function i() {}
                function o() {}
                (o.resetWarningCache = i),
                  (t.exports = function () {
                    function t(t, e, n, i, o, a) {
                      if (a !== r) {
                        var s = new Error(
                          "Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types",
                        );
                        throw ((s.name = "Invariant Violation"), s);
                      }
                    }
                    function e() {
                      return t;
                    }
                    t.isRequired = t;
                    var n = {
                      array: t,
                      bool: t,
                      func: t,
                      number: t,
                      object: t,
                      string: t,
                      symbol: t,
                      any: t,
                      arrayOf: e,
                      element: t,
                      elementType: t,
                      instanceOf: e,
                      node: t,
                      objectOf: e,
                      oneOf: e,
                      oneOfType: e,
                      shape: e,
                      exact: e,
                      checkPropTypes: o,
                      resetWarningCache: i,
                    };
                    return (n.PropTypes = n), n;
                  });
              },
              697: (t, e, n) => {
                t.exports = n(703)();
              },
              414: (t) => {
                "use strict";
                t.exports = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
              },
              408: (t, e, n) => {
                "use strict";
                var r = n(418),
                  i = 60103,
                  o = 60106;
                (e.Fragment = 60107),
                  (e.StrictMode = 60108),
                  (e.Profiler = 60114);
                var a = 60109,
                  s = 60110,
                  l = 60112;
                e.Suspense = 60113;
                var u = 60115,
                  h = 60116;
                if ("function" == typeof Symbol && Symbol.for) {
                  var c = Symbol.for;
                  (i = c("react.element")),
                    (o = c("react.portal")),
                    (e.Fragment = c("react.fragment")),
                    (e.StrictMode = c("react.strict_mode")),
                    (e.Profiler = c("react.profiler")),
                    (a = c("react.provider")),
                    (s = c("react.context")),
                    (l = c("react.forward_ref")),
                    (e.Suspense = c("react.suspense")),
                    (u = c("react.memo")),
                    (h = c("react.lazy"));
                }
                var d = "function" == typeof Symbol && Symbol.iterator;
                function f(t) {
                  for (
                    var e =
                        "https://reactjs.org/docs/error-decoder.html?invariant=" +
                        t,
                      n = 1;
                    n < arguments.length;
                    n++
                  )
                    e += "&args[]=" + encodeURIComponent(arguments[n]);
                  return (
                    "Minified React error #" +
                    t +
                    "; visit " +
                    e +
                    " for the full message or use the non-minified dev environment for full errors and additional helpful warnings."
                  );
                }
                var p = {
                    isMounted: function () {
                      return !1;
                    },
                    enqueueForceUpdate: function () {},
                    enqueueReplaceState: function () {},
                    enqueueSetState: function () {},
                  },
                  m = {};
                function _(t, e, n) {
                  (this.props = t),
                    (this.context = e),
                    (this.refs = m),
                    (this.updater = n || p);
                }
                function g() {}
                function v(t, e, n) {
                  (this.props = t),
                    (this.context = e),
                    (this.refs = m),
                    (this.updater = n || p);
                }
                (_.prototype.isReactComponent = {}),
                  (_.prototype.setState = function (t, e) {
                    if (
                      "object" != typeof t &&
                      "function" != typeof t &&
                      null != t
                    )
                      throw Error(f(85));
                    this.updater.enqueueSetState(this, t, e, "setState");
                  }),
                  (_.prototype.forceUpdate = function (t) {
                    this.updater.enqueueForceUpdate(this, t, "forceUpdate");
                  }),
                  (g.prototype = _.prototype);
                var y = (v.prototype = new g());
                (y.constructor = v),
                  r(y, _.prototype),
                  (y.isPureReactComponent = !0);
                var E = { current: null },
                  T = Object.prototype.hasOwnProperty,
                  b = { key: !0, ref: !0, __self: !0, __source: !0 };
                function x(t, e, n) {
                  var r,
                    o = {},
                    a = null,
                    s = null;
                  if (null != e)
                    for (r in (void 0 !== e.ref && (s = e.ref),
                    void 0 !== e.key && (a = "" + e.key),
                    e))
                      T.call(e, r) && !b.hasOwnProperty(r) && (o[r] = e[r]);
                  var l = arguments.length - 2;
                  if (1 === l) o.children = n;
                  else if (1 < l) {
                    for (var u = Array(l), h = 0; h < l; h++)
                      u[h] = arguments[h + 2];
                    o.children = u;
                  }
                  if (t && t.defaultProps)
                    for (r in (l = t.defaultProps))
                      void 0 === o[r] && (o[r] = l[r]);
                  return {
                    $$typeof: i,
                    type: t,
                    key: a,
                    ref: s,
                    props: o,
                    _owner: E.current,
                  };
                }
                function S(t) {
                  return "object" == typeof t && null !== t && t.$$typeof === i;
                }
                var M = /\/+/g;
                function A(t, e) {
                  return "object" == typeof t && null !== t && null != t.key
                    ? (function (t) {
                        var e = { "=": "=0", ":": "=2" };
                        return (
                          "$" +
                          t.replace(/[=:]/g, function (t) {
                            return e[t];
                          })
                        );
                      })("" + t.key)
                    : e.toString(36);
                }
                function R(t, e, n, r, a) {
                  var s = typeof t;
                  ("undefined" !== s && "boolean" !== s) || (t = null);
                  var l = !1;
                  if (null === t) l = !0;
                  else
                    switch (s) {
                      case "string":
                      case "number":
                        l = !0;
                        break;
                      case "object":
                        switch (t.$$typeof) {
                          case i:
                          case o:
                            l = !0;
                        }
                    }
                  if (l)
                    return (
                      (a = a((l = t))),
                      (t = "" === r ? "." + A(l, 0) : r),
                      Array.isArray(a)
                        ? ((n = ""),
                          null != t && (n = t.replace(M, "$&/") + "/"),
                          R(a, e, n, "", function (t) {
                            return t;
                          }))
                        : null != a &&
                          (S(a) &&
                            (a = (function (t, e) {
                              return {
                                $$typeof: i,
                                type: t.type,
                                key: e,
                                ref: t.ref,
                                props: t.props,
                                _owner: t._owner,
                              };
                            })(
                              a,
                              n +
                                (!a.key || (l && l.key === a.key)
                                  ? ""
                                  : ("" + a.key).replace(M, "$&/") + "/") +
                                t,
                            )),
                          e.push(a)),
                      1
                    );
                  if (
                    ((l = 0), (r = "" === r ? "." : r + ":"), Array.isArray(t))
                  )
                    for (var u = 0; u < t.length; u++) {
                      var h = r + A((s = t[u]), u);
                      l += R(s, e, n, h, a);
                    }
                  else if (
                    "function" ==
                    typeof (h = (function (t) {
                      return null === t || "object" != typeof t
                        ? null
                        : "function" ==
                            typeof (t = (d && t[d]) || t["@@iterator"])
                          ? t
                          : null;
                    })(t))
                  )
                    for (t = h.call(t), u = 0; !(s = t.next()).done; )
                      l += R((s = s.value), e, n, (h = r + A(s, u++)), a);
                  else if ("object" === s)
                    throw (
                      ((e = "" + t),
                      Error(
                        f(
                          31,
                          "[object Object]" === e
                            ? "object with keys {" +
                                Object.keys(t).join(", ") +
                                "}"
                            : e,
                        ),
                      ))
                    );
                  return l;
                }
                function w(t, e, n) {
                  if (null == t) return t;
                  var r = [],
                    i = 0;
                  return (
                    R(t, r, "", "", function (t) {
                      return e.call(n, t, i++);
                    }),
                    r
                  );
                }
                function P(t) {
                  if (-1 === t._status) {
                    var e = t._result;
                    (e = e()),
                      (t._status = 0),
                      (t._result = e),
                      e.then(
                        function (e) {
                          0 === t._status &&
                            ((e = e.default), (t._status = 1), (t._result = e));
                        },
                        function (e) {
                          0 === t._status && ((t._status = 2), (t._result = e));
                        },
                      );
                  }
                  if (1 === t._status) return t._result;
                  throw t._result;
                }
                var I = { current: null };
                function O() {
                  var t = I.current;
                  if (null === t) throw Error(f(321));
                  return t;
                }
                var C = {
                  ReactCurrentDispatcher: I,
                  ReactCurrentBatchConfig: { transition: 0 },
                  ReactCurrentOwner: E,
                  IsSomeRendererActing: { current: !1 },
                  assign: r,
                };
                (e.Children = {
                  map: w,
                  forEach: function (t, e, n) {
                    w(
                      t,
                      function () {
                        e.apply(this, arguments);
                      },
                      n,
                    );
                  },
                  count: function (t) {
                    var e = 0;
                    return (
                      w(t, function () {
                        e++;
                      }),
                      e
                    );
                  },
                  toArray: function (t) {
                    return (
                      w(t, function (t) {
                        return t;
                      }) || []
                    );
                  },
                  only: function (t) {
                    if (!S(t)) throw Error(f(143));
                    return t;
                  },
                }),
                  (e.Component = _),
                  (e.PureComponent = v),
                  (e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = C),
                  (e.cloneElement = function (t, e, n) {
                    if (null == t) throw Error(f(267, t));
                    var o = r({}, t.props),
                      a = t.key,
                      s = t.ref,
                      l = t._owner;
                    if (null != e) {
                      if (
                        (void 0 !== e.ref && ((s = e.ref), (l = E.current)),
                        void 0 !== e.key && (a = "" + e.key),
                        t.type && t.type.defaultProps)
                      )
                        var u = t.type.defaultProps;
                      for (h in e)
                        T.call(e, h) &&
                          !b.hasOwnProperty(h) &&
                          (o[h] =
                            void 0 === e[h] && void 0 !== u ? u[h] : e[h]);
                    }
                    var h = arguments.length - 2;
                    if (1 === h) o.children = n;
                    else if (1 < h) {
                      u = Array(h);
                      for (var c = 0; c < h; c++) u[c] = arguments[c + 2];
                      o.children = u;
                    }
                    return {
                      $$typeof: i,
                      type: t.type,
                      key: a,
                      ref: s,
                      props: o,
                      _owner: l,
                    };
                  }),
                  (e.createContext = function (t, e) {
                    return (
                      void 0 === e && (e = null),
                      ((t = {
                        $$typeof: s,
                        _calculateChangedBits: e,
                        _currentValue: t,
                        _currentValue2: t,
                        _threadCount: 0,
                        Provider: null,
                        Consumer: null,
                      }).Provider = { $$typeof: a, _context: t }),
                      (t.Consumer = t)
                    );
                  }),
                  (e.createElement = x),
                  (e.createFactory = function (t) {
                    var e = x.bind(null, t);
                    return (e.type = t), e;
                  }),
                  (e.createRef = function () {
                    return { current: null };
                  }),
                  (e.forwardRef = function (t) {
                    return { $$typeof: l, render: t };
                  }),
                  (e.isValidElement = S),
                  (e.lazy = function (t) {
                    return {
                      $$typeof: h,
                      _payload: { _status: -1, _result: t },
                      _init: P,
                    };
                  }),
                  (e.memo = function (t, e) {
                    return {
                      $$typeof: u,
                      type: t,
                      compare: void 0 === e ? null : e,
                    };
                  }),
                  (e.useCallback = function (t, e) {
                    return O().useCallback(t, e);
                  }),
                  (e.useContext = function (t, e) {
                    return O().useContext(t, e);
                  }),
                  (e.useDebugValue = function () {}),
                  (e.useEffect = function (t, e) {
                    return O().useEffect(t, e);
                  }),
                  (e.useImperativeHandle = function (t, e, n) {
                    return O().useImperativeHandle(t, e, n);
                  }),
                  (e.useLayoutEffect = function (t, e) {
                    return O().useLayoutEffect(t, e);
                  }),
                  (e.useMemo = function (t, e) {
                    return O().useMemo(t, e);
                  }),
                  (e.useReducer = function (t, e, n) {
                    return O().useReducer(t, e, n);
                  }),
                  (e.useRef = function (t) {
                    return O().useRef(t);
                  }),
                  (e.useState = function (t) {
                    return O().useState(t);
                  }),
                  (e.version = "17.0.1");
              },
              294: (t, e, n) => {
                "use strict";
                t.exports = n(408);
              },
            },
            n = {};
          function r(e) {
            if (n[e]) return n[e].exports;
            var i = (n[e] = { exports: {} });
            return t[e](i, i.exports, r), i.exports;
          }
          (r.n = (t) => {
            var e = t && t.__esModule ? () => t.default : () => t;
            return r.d(e, { a: e }), e;
          }),
            (r.d = (t, e) => {
              for (var n in e)
                r.o(e, n) &&
                  !r.o(t, n) &&
                  Object.defineProperty(t, n, { enumerable: !0, get: e[n] });
            }),
            (r.o = (t, e) => Object.prototype.hasOwnProperty.call(t, e)),
            (r.r = (t) => {
              "undefined" != typeof Symbol &&
                Symbol.toStringTag &&
                Object.defineProperty(t, Symbol.toStringTag, {
                  value: "Module",
                }),
                Object.defineProperty(t, "__esModule", { value: !0 });
            });
          var i = {};
          (() => {
            "use strict";
            r.r(i), r.d(i, { RangeStepInput: () => h });
            var t = r(294),
              e = r(697),
              n = r.n(e);
            function o(t) {
              return (o =
                "function" == typeof Symbol &&
                "symbol" == typeof Symbol.iterator
                  ? function (t) {
                      return typeof t;
                    }
                  : function (t) {
                      return t &&
                        "function" == typeof Symbol &&
                        t.constructor === Symbol &&
                        t !== Symbol.prototype
                        ? "symbol"
                        : typeof t;
                    })(t);
            }
            function a(t, e) {
              return (a =
                Object.setPrototypeOf ||
                function (t, e) {
                  return (t.__proto__ = e), t;
                })(t, e);
            }
            function s(t, e) {
              return !e || ("object" !== o(e) && "function" != typeof e)
                ? l(t)
                : e;
            }
            function l(t) {
              if (void 0 === t)
                throw new ReferenceError(
                  "this hasn't been initialised - super() hasn't been called",
                );
              return t;
            }
            function u(t) {
              return (u = Object.setPrototypeOf
                ? Object.getPrototypeOf
                : function (t) {
                    return t.__proto__ || Object.getPrototypeOf(t);
                  })(t);
            }
            var h = (function (e) {
              !(function (t, e) {
                if ("function" != typeof e && null !== e)
                  throw new TypeError(
                    "Super expression must either be null or a function",
                  );
                (t.prototype = Object.create(e && e.prototype, {
                  constructor: { value: t, writable: !0, configurable: !0 },
                })),
                  e && a(t, e);
              })(h, e);
              var n,
                r,
                i,
                o =
                  ((r = h),
                  (i = (function () {
                    if ("undefined" == typeof Reflect || !Reflect.construct)
                      return !1;
                    if (Reflect.construct.sham) return !1;
                    if ("function" == typeof Proxy) return !0;
                    try {
                      return (
                        Boolean.prototype.valueOf.call(
                          Reflect.construct(Boolean, [], function () {}),
                        ),
                        !0
                      );
                    } catch (t) {
                      return !1;
                    }
                  })()),
                  function () {
                    var t,
                      e = u(r);
                    if (i) {
                      var n = u(this).constructor;
                      t = Reflect.construct(e, arguments, n);
                    } else t = e.apply(this, arguments);
                    return s(this, t);
                  });
              function h(e) {
                var n;
                return (
                  (function (t, e) {
                    if (!(t instanceof e))
                      throw new TypeError("Cannot call a class as a function");
                  })(this, h),
                  ((n = o.call(this, e)).state = {
                    isMouseDown: !1,
                    isDragging: !1,
                  }),
                  (n.onInput = n.onInput.bind(l(n))),
                  (n.onMouseDown = n.onMouseDown.bind(l(n))),
                  (n.onMouseUp = n.onMouseUp.bind(l(n))),
                  (n.onMouseMove = n.onMouseMove.bind(l(n))),
                  (n.domRef = t.createRef()),
                  n
                );
              }
              return (
                (n = [
                  {
                    key: "render",
                    value: function () {
                      return t.createElement("input", {
                        type: "range",
                        ref: this.domRef,
                        className: this.props.className,
                        min: this.props.min,
                        max: this.props.max,
                        step: this.props.step,
                        value: this.props.value,
                        name: this.props.name,
                        id: this.props.id,
                        style: this.props.style,
                        disabled: this.props.disabled,
                        onChange: this.props.onChange,
                        onMouseDown: this.onMouseDown,
                        onMouseUp: this.onMouseUp,
                        onMouseMove: this.onMouseMove,
                        onClick: this.onClick,
                        onInput: this.onInput,
                      });
                    },
                  },
                  {
                    key: "onMouseDown",
                    value: function () {
                      if (
                        (this.setState({ isMouseDown: !0 }), this.props.hold)
                      ) {
                        this.holdLoop && clearInterval(this.holdLoop);
                        var t = this.props.value,
                          e = this;
                        setTimeout(function () {
                          e.holdLoop && clearInterval(e.holdLoop),
                            (e.holdLoop = e.makeHoldLoop(t));
                        }, 250);
                      }
                    },
                  },
                  {
                    key: "onMouseUp",
                    value: function () {
                      this.setState({ isMouseDown: !1, isDragging: !1 }),
                        this.holdLoop && clearInterval(this.holdLoop);
                    },
                  },
                  {
                    key: "onMouseMove",
                    value: function () {
                      this.state.isMouseDown &&
                        this.setState({ isDragging: !0 });
                    },
                  },
                  {
                    key: "onInput",
                    value: function (t) {
                      var e,
                        n = this.props.step,
                        r =
                          ((e = t.target.value),
                          (e = Number(e)),
                          (isNaN(e) || void 0 === e) && (e = 0),
                          e),
                        i = this.props.value;
                      (this.state.isMouseDown && this.state.isDragging) ||
                        !i ||
                        (t.target.value = r > i ? i + n : i - n);
                    },
                  },
                  {
                    key: "makeHoldLoop",
                    value: function (t) {
                      var e = this;
                      return setInterval(function () {
                        if (!e.state.isMouseDown || e.state.isDragging)
                          return e.holdLoop && clearInterval(e.holdLoop), !1;
                        var n = e.domRef.current,
                          r = e.props.value;
                        if (
                          (t > r && r - e.props.step >= e.props.min
                            ? (r -= e.props.step)
                            : t < r &&
                              r + e.props.step <= e.props.max &&
                              (r += e.props.step),
                          t === r)
                        )
                          return !1;
                        Object.getOwnPropertyDescriptor(
                          window.HTMLInputElement.prototype,
                          "value",
                        ).set.call(n, r);
                        var i = new Event("change", { bubbles: !0 });
                        return n.dispatchEvent(i);
                      }, 100);
                    },
                  },
                ]) &&
                  (function (t, e) {
                    for (var n = 0; n < e.length; n++) {
                      var r = e[n];
                      (r.enumerable = r.enumerable || !1),
                        (r.configurable = !0),
                        "value" in r && (r.writable = !0),
                        Object.defineProperty(t, r.key, r);
                    }
                  })(h.prototype, n),
                h
              );
            })(t.Component);
            (h.propTypes = {
              value: n().number.isRequired,
              onChange: n().func.isRequired,
              step: n().number.isRequired,
              className: n().string,
              min: n().number,
              max: n().number,
              id: n().string,
              name: n().string,
              disabled: n().bool,
              style: n().string,
              hold: n().bool,
            }),
              (h.defaultProps = { hold: !0 });
          })();
          var o = e;
          for (var a in i) o[a] = i[a];
          i.__esModule && Object.defineProperty(o, "__esModule", { value: !0 });
        })();
      },
      408: (t, e, n) => {
        "use strict";
        var r = n(418),
          i = 60103,
          o = 60106;
        (e.Fragment = 60107), (e.StrictMode = 60108), (e.Profiler = 60114);
        var a = 60109,
          s = 60110,
          l = 60112;
        e.Suspense = 60113;
        var u = 60115,
          h = 60116;
        if ("function" == typeof Symbol && Symbol.for) {
          var c = Symbol.for;
          (i = c("react.element")),
            (o = c("react.portal")),
            (e.Fragment = c("react.fragment")),
            (e.StrictMode = c("react.strict_mode")),
            (e.Profiler = c("react.profiler")),
            (a = c("react.provider")),
            (s = c("react.context")),
            (l = c("react.forward_ref")),
            (e.Suspense = c("react.suspense")),
            (u = c("react.memo")),
            (h = c("react.lazy"));
        }
        var d = "function" == typeof Symbol && Symbol.iterator;
        function f(t) {
          for (
            var e =
                "https://reactjs.org/docs/error-decoder.html?invariant=" + t,
              n = 1;
            n < arguments.length;
            n++
          )
            e += "&args[]=" + encodeURIComponent(arguments[n]);
          return (
            "Minified React error #" +
            t +
            "; visit " +
            e +
            " for the full message or use the non-minified dev environment for full errors and additional helpful warnings."
          );
        }
        var p = {
            isMounted: function () {
              return !1;
            },
            enqueueForceUpdate: function () {},
            enqueueReplaceState: function () {},
            enqueueSetState: function () {},
          },
          m = {};
        function _(t, e, n) {
          (this.props = t),
            (this.context = e),
            (this.refs = m),
            (this.updater = n || p);
        }
        function g() {}
        function v(t, e, n) {
          (this.props = t),
            (this.context = e),
            (this.refs = m),
            (this.updater = n || p);
        }
        (_.prototype.isReactComponent = {}),
          (_.prototype.setState = function (t, e) {
            if ("object" != typeof t && "function" != typeof t && null != t)
              throw Error(f(85));
            this.updater.enqueueSetState(this, t, e, "setState");
          }),
          (_.prototype.forceUpdate = function (t) {
            this.updater.enqueueForceUpdate(this, t, "forceUpdate");
          }),
          (g.prototype = _.prototype);
        var y = (v.prototype = new g());
        (y.constructor = v), r(y, _.prototype), (y.isPureReactComponent = !0);
        var E = { current: null },
          T = Object.prototype.hasOwnProperty,
          b = { key: !0, ref: !0, __self: !0, __source: !0 };
        function x(t, e, n) {
          var r,
            o = {},
            a = null,
            s = null;
          if (null != e)
            for (r in (void 0 !== e.ref && (s = e.ref),
            void 0 !== e.key && (a = "" + e.key),
            e))
              T.call(e, r) && !b.hasOwnProperty(r) && (o[r] = e[r]);
          var l = arguments.length - 2;
          if (1 === l) o.children = n;
          else if (1 < l) {
            for (var u = Array(l), h = 0; h < l; h++) u[h] = arguments[h + 2];
            o.children = u;
          }
          if (t && t.defaultProps)
            for (r in (l = t.defaultProps)) void 0 === o[r] && (o[r] = l[r]);
          return {
            $$typeof: i,
            type: t,
            key: a,
            ref: s,
            props: o,
            _owner: E.current,
          };
        }
        function S(t) {
          return "object" == typeof t && null !== t && t.$$typeof === i;
        }
        var M = /\/+/g;
        function A(t, e) {
          return "object" == typeof t && null !== t && null != t.key
            ? (function (t) {
                var e = { "=": "=0", ":": "=2" };
                return (
                  "$" +
                  t.replace(/[=:]/g, function (t) {
                    return e[t];
                  })
                );
              })("" + t.key)
            : e.toString(36);
        }
        function R(t, e, n, r, a) {
          var s = typeof t;
          ("undefined" !== s && "boolean" !== s) || (t = null);
          var l = !1;
          if (null === t) l = !0;
          else
            switch (s) {
              case "string":
              case "number":
                l = !0;
                break;
              case "object":
                switch (t.$$typeof) {
                  case i:
                  case o:
                    l = !0;
                }
            }
          if (l)
            return (
              (a = a((l = t))),
              (t = "" === r ? "." + A(l, 0) : r),
              Array.isArray(a)
                ? ((n = ""),
                  null != t && (n = t.replace(M, "$&/") + "/"),
                  R(a, e, n, "", function (t) {
                    return t;
                  }))
                : null != a &&
                  (S(a) &&
                    (a = (function (t, e) {
                      return {
                        $$typeof: i,
                        type: t.type,
                        key: e,
                        ref: t.ref,
                        props: t.props,
                        _owner: t._owner,
                      };
                    })(
                      a,
                      n +
                        (!a.key || (l && l.key === a.key)
                          ? ""
                          : ("" + a.key).replace(M, "$&/") + "/") +
                        t,
                    )),
                  e.push(a)),
              1
            );
          if (((l = 0), (r = "" === r ? "." : r + ":"), Array.isArray(t)))
            for (var u = 0; u < t.length; u++) {
              var h = r + A((s = t[u]), u);
              l += R(s, e, n, h, a);
            }
          else if (
            ((h = (function (t) {
              return null === t || "object" != typeof t
                ? null
                : "function" == typeof (t = (d && t[d]) || t["@@iterator"])
                  ? t
                  : null;
            })(t)),
            "function" == typeof h)
          )
            for (t = h.call(t), u = 0; !(s = t.next()).done; )
              l += R((s = s.value), e, n, (h = r + A(s, u++)), a);
          else if ("object" === s)
            throw (
              ((e = "" + t),
              Error(
                f(
                  31,
                  "[object Object]" === e
                    ? "object with keys {" + Object.keys(t).join(", ") + "}"
                    : e,
                ),
              ))
            );
          return l;
        }
        function w(t, e, n) {
          if (null == t) return t;
          var r = [],
            i = 0;
          return (
            R(t, r, "", "", function (t) {
              return e.call(n, t, i++);
            }),
            r
          );
        }
        function P(t) {
          if (-1 === t._status) {
            var e = t._result;
            (e = e()),
              (t._status = 0),
              (t._result = e),
              e.then(
                function (e) {
                  0 === t._status &&
                    ((e = e.default), (t._status = 1), (t._result = e));
                },
                function (e) {
                  0 === t._status && ((t._status = 2), (t._result = e));
                },
              );
          }
          if (1 === t._status) return t._result;
          throw t._result;
        }
        var I = { current: null };
        function O() {
          var t = I.current;
          if (null === t) throw Error(f(321));
          return t;
        }
        var C = {
          ReactCurrentDispatcher: I,
          ReactCurrentBatchConfig: { transition: 0 },
          ReactCurrentOwner: E,
          IsSomeRendererActing: { current: !1 },
          assign: r,
        };
        (e.Children = {
          map: w,
          forEach: function (t, e, n) {
            w(
              t,
              function () {
                e.apply(this, arguments);
              },
              n,
            );
          },
          count: function (t) {
            var e = 0;
            return (
              w(t, function () {
                e++;
              }),
              e
            );
          },
          toArray: function (t) {
            return (
              w(t, function (t) {
                return t;
              }) || []
            );
          },
          only: function (t) {
            if (!S(t)) throw Error(f(143));
            return t;
          },
        }),
          (e.Component = _),
          (e.PureComponent = v),
          (e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = C),
          (e.cloneElement = function (t, e, n) {
            if (null == t) throw Error(f(267, t));
            var o = r({}, t.props),
              a = t.key,
              s = t.ref,
              l = t._owner;
            if (null != e) {
              if (
                (void 0 !== e.ref && ((s = e.ref), (l = E.current)),
                void 0 !== e.key && (a = "" + e.key),
                t.type && t.type.defaultProps)
              )
                var u = t.type.defaultProps;
              for (h in e)
                T.call(e, h) &&
                  !b.hasOwnProperty(h) &&
                  (o[h] = void 0 === e[h] && void 0 !== u ? u[h] : e[h]);
            }
            var h = arguments.length - 2;
            if (1 === h) o.children = n;
            else if (1 < h) {
              u = Array(h);
              for (var c = 0; c < h; c++) u[c] = arguments[c + 2];
              o.children = u;
            }
            return {
              $$typeof: i,
              type: t.type,
              key: a,
              ref: s,
              props: o,
              _owner: l,
            };
          }),
          (e.createContext = function (t, e) {
            return (
              void 0 === e && (e = null),
              ((t = {
                $$typeof: s,
                _calculateChangedBits: e,
                _currentValue: t,
                _currentValue2: t,
                _threadCount: 0,
                Provider: null,
                Consumer: null,
              }).Provider = { $$typeof: a, _context: t }),
              (t.Consumer = t)
            );
          }),
          (e.createElement = x),
          (e.createFactory = function (t) {
            var e = x.bind(null, t);
            return (e.type = t), e;
          }),
          (e.createRef = function () {
            return { current: null };
          }),
          (e.forwardRef = function (t) {
            return { $$typeof: l, render: t };
          }),
          (e.isValidElement = S),
          (e.lazy = function (t) {
            return {
              $$typeof: h,
              _payload: { _status: -1, _result: t },
              _init: P,
            };
          }),
          (e.memo = function (t, e) {
            return { $$typeof: u, type: t, compare: void 0 === e ? null : e };
          }),
          (e.useCallback = function (t, e) {
            return O().useCallback(t, e);
          }),
          (e.useContext = function (t, e) {
            return O().useContext(t, e);
          }),
          (e.useDebugValue = function () {}),
          (e.useEffect = function (t, e) {
            return O().useEffect(t, e);
          }),
          (e.useImperativeHandle = function (t, e, n) {
            return O().useImperativeHandle(t, e, n);
          }),
          (e.useLayoutEffect = function (t, e) {
            return O().useLayoutEffect(t, e);
          }),
          (e.useMemo = function (t, e) {
            return O().useMemo(t, e);
          }),
          (e.useReducer = function (t, e, n) {
            return O().useReducer(t, e, n);
          }),
          (e.useRef = function (t) {
            return O().useRef(t);
          }),
          (e.useState = function (t) {
            return O().useState(t);
          }),
          (e.version = "17.0.2");
      },
      294: (t, e, n) => {
        "use strict";
        t.exports = n(408);
      },
      53: (t, e) => {
        "use strict";
        var n, r, i, o;
        if (
          "object" == typeof performance &&
          "function" == typeof performance.now
        ) {
          var a = performance;
          e.unstable_now = function () {
            return a.now();
          };
        } else {
          var s = Date,
            l = s.now();
          e.unstable_now = function () {
            return s.now() - l;
          };
        }
        if (
          "undefined" == typeof window ||
          "function" != typeof MessageChannel
        ) {
          var u = null,
            h = null,
            c = function () {
              if (null !== u)
                try {
                  var t = e.unstable_now();
                  u(!0, t), (u = null);
                } catch (t) {
                  throw (setTimeout(c, 0), t);
                }
            };
          (n = function (t) {
            null !== u ? setTimeout(n, 0, t) : ((u = t), setTimeout(c, 0));
          }),
            (r = function (t, e) {
              h = setTimeout(t, e);
            }),
            (i = function () {
              clearTimeout(h);
            }),
            (e.unstable_shouldYield = function () {
              return !1;
            }),
            (o = e.unstable_forceFrameRate = function () {});
        } else {
          var d = window.setTimeout,
            f = window.clearTimeout;
          if ("undefined" != typeof console) {
            var p = window.cancelAnimationFrame;
            "function" != typeof window.requestAnimationFrame &&
              console.error(
                "This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills",
              ),
              "function" != typeof p &&
                console.error(
                  "This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills",
                );
          }
          var m = !1,
            _ = null,
            g = -1,
            v = 5,
            y = 0;
          (e.unstable_shouldYield = function () {
            return e.unstable_now() >= y;
          }),
            (o = function () {}),
            (e.unstable_forceFrameRate = function (t) {
              0 > t || 125 < t
                ? console.error(
                    "forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported",
                  )
                : (v = 0 < t ? Math.floor(1e3 / t) : 5);
            });
          var E = new MessageChannel(),
            T = E.port2;
          (E.port1.onmessage = function () {
            if (null !== _) {
              var t = e.unstable_now();
              y = t + v;
              try {
                _(!0, t) ? T.postMessage(null) : ((m = !1), (_ = null));
              } catch (t) {
                throw (T.postMessage(null), t);
              }
            } else m = !1;
          }),
            (n = function (t) {
              (_ = t), m || ((m = !0), T.postMessage(null));
            }),
            (r = function (t, n) {
              g = d(function () {
                t(e.unstable_now());
              }, n);
            }),
            (i = function () {
              f(g), (g = -1);
            });
        }
        function b(t, e) {
          var n = t.length;
          t.push(e);
          t: for (;;) {
            var r = (n - 1) >>> 1,
              i = t[r];
            if (!(void 0 !== i && 0 < M(i, e))) break t;
            (t[r] = e), (t[n] = i), (n = r);
          }
        }
        function x(t) {
          return void 0 === (t = t[0]) ? null : t;
        }
        function S(t) {
          var e = t[0];
          if (void 0 !== e) {
            var n = t.pop();
            if (n !== e) {
              t[0] = n;
              t: for (var r = 0, i = t.length; r < i; ) {
                var o = 2 * (r + 1) - 1,
                  a = t[o],
                  s = o + 1,
                  l = t[s];
                if (void 0 !== a && 0 > M(a, n))
                  void 0 !== l && 0 > M(l, a)
                    ? ((t[r] = l), (t[s] = n), (r = s))
                    : ((t[r] = a), (t[o] = n), (r = o));
                else {
                  if (!(void 0 !== l && 0 > M(l, n))) break t;
                  (t[r] = l), (t[s] = n), (r = s);
                }
              }
            }
            return e;
          }
          return null;
        }
        function M(t, e) {
          var n = t.sortIndex - e.sortIndex;
          return 0 !== n ? n : t.id - e.id;
        }
        var A = [],
          R = [],
          w = 1,
          P = null,
          I = 3,
          O = !1,
          C = !1,
          N = !1;
        function L(t) {
          for (var e = x(R); null !== e; ) {
            if (null === e.callback) S(R);
            else {
              if (!(e.startTime <= t)) break;
              S(R), (e.sortIndex = e.expirationTime), b(A, e);
            }
            e = x(R);
          }
        }
        function D(t) {
          if (((N = !1), L(t), !C))
            if (null !== x(A)) (C = !0), n(U);
            else {
              var e = x(R);
              null !== e && r(D, e.startTime - t);
            }
        }
        function U(t, n) {
          (C = !1), N && ((N = !1), i()), (O = !0);
          var o = I;
          try {
            for (
              L(n), P = x(A);
              null !== P &&
              (!(P.expirationTime > n) || (t && !e.unstable_shouldYield()));

            ) {
              var a = P.callback;
              if ("function" == typeof a) {
                (P.callback = null), (I = P.priorityLevel);
                var s = a(P.expirationTime <= n);
                (n = e.unstable_now()),
                  "function" == typeof s
                    ? (P.callback = s)
                    : P === x(A) && S(A),
                  L(n);
              } else S(A);
              P = x(A);
            }
            if (null !== P) var l = !0;
            else {
              var u = x(R);
              null !== u && r(D, u.startTime - n), (l = !1);
            }
            return l;
          } finally {
            (P = null), (I = o), (O = !1);
          }
        }
        var F = o;
        (e.unstable_IdlePriority = 5),
          (e.unstable_ImmediatePriority = 1),
          (e.unstable_LowPriority = 4),
          (e.unstable_NormalPriority = 3),
          (e.unstable_Profiling = null),
          (e.unstable_UserBlockingPriority = 2),
          (e.unstable_cancelCallback = function (t) {
            t.callback = null;
          }),
          (e.unstable_continueExecution = function () {
            C || O || ((C = !0), n(U));
          }),
          (e.unstable_getCurrentPriorityLevel = function () {
            return I;
          }),
          (e.unstable_getFirstCallbackNode = function () {
            return x(A);
          }),
          (e.unstable_next = function (t) {
            switch (I) {
              case 1:
              case 2:
              case 3:
                var e = 3;
                break;
              default:
                e = I;
            }
            var n = I;
            I = e;
            try {
              return t();
            } finally {
              I = n;
            }
          }),
          (e.unstable_pauseExecution = function () {}),
          (e.unstable_requestPaint = F),
          (e.unstable_runWithPriority = function (t, e) {
            switch (t) {
              case 1:
              case 2:
              case 3:
              case 4:
              case 5:
                break;
              default:
                t = 3;
            }
            var n = I;
            I = t;
            try {
              return e();
            } finally {
              I = n;
            }
          }),
          (e.unstable_scheduleCallback = function (t, o, a) {
            var s = e.unstable_now();
            switch (
              ((a =
                "object" == typeof a &&
                null !== a &&
                "number" == typeof (a = a.delay) &&
                0 < a
                  ? s + a
                  : s),
              t)
            ) {
              case 1:
                var l = -1;
                break;
              case 2:
                l = 250;
                break;
              case 5:
                l = 1073741823;
                break;
              case 4:
                l = 1e4;
                break;
              default:
                l = 5e3;
            }
            return (
              (t = {
                id: w++,
                callback: o,
                priorityLevel: t,
                startTime: a,
                expirationTime: (l = a + l),
                sortIndex: -1,
              }),
              a > s
                ? ((t.sortIndex = a),
                  b(R, t),
                  null === x(A) &&
                    t === x(R) &&
                    (N ? i() : (N = !0), r(D, a - s)))
                : ((t.sortIndex = l), b(A, t), C || O || ((C = !0), n(U))),
              t
            );
          }),
          (e.unstable_wrapCallback = function (t) {
            var e = I;
            return function () {
              var n = I;
              I = e;
              try {
                return t.apply(this, arguments);
              } finally {
                I = n;
              }
            };
          });
      },
      840: (t, e, n) => {
        "use strict";
        t.exports = n(53);
      },
      511: function (t, e, n) {
        var r;
        (t = n.nmd(t)),
          (function (i) {
            e && e.nodeType, t && t.nodeType;
            var o = "object" == typeof n.g && n.g;
            o.global !== o && o.window !== o && o.self;
            var a,
              s = 2147483647,
              l = 36,
              u = 26,
              h = 38,
              c = 700,
              d = /^xn--/,
              f = /[^\x20-\x7E]/,
              p = /[\x2E\u3002\uFF0E\uFF61]/g,
              m = {
                overflow: "Overflow: input needs wider integers to process",
                "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                "invalid-input": "Invalid input",
              },
              _ = l - 1,
              g = Math.floor,
              v = String.fromCharCode;
            function y(t) {
              throw RangeError(m[t]);
            }
            function E(t, e) {
              for (var n = t.length, r = []; n--; ) r[n] = e(t[n]);
              return r;
            }
            function T(t, e) {
              var n = t.split("@"),
                r = "";
              return (
                n.length > 1 && ((r = n[0] + "@"), (t = n[1])),
                r + E((t = t.replace(p, ".")).split("."), e).join(".")
              );
            }
            function b(t) {
              for (var e, n, r = [], i = 0, o = t.length; i < o; )
                (e = t.charCodeAt(i++)) >= 55296 && e <= 56319 && i < o
                  ? 56320 == (64512 & (n = t.charCodeAt(i++)))
                    ? r.push(((1023 & e) << 10) + (1023 & n) + 65536)
                    : (r.push(e), i--)
                  : r.push(e);
              return r;
            }
            function x(t) {
              return E(t, function (t) {
                var e = "";
                return (
                  t > 65535 &&
                    ((e += v((((t -= 65536) >>> 10) & 1023) | 55296)),
                    (t = 56320 | (1023 & t))),
                  e + v(t)
                );
              }).join("");
            }
            function S(t, e) {
              return t + 22 + 75 * (t < 26) - ((0 != e) << 5);
            }
            function M(t, e, n) {
              var r = 0;
              for (
                t = n ? g(t / c) : t >> 1, t += g(t / e);
                t > (_ * u) >> 1;
                r += l
              )
                t = g(t / _);
              return g(r + ((_ + 1) * t) / (t + h));
            }
            function A(t) {
              var e,
                n,
                r,
                i,
                o,
                a,
                h,
                c,
                d,
                f,
                p,
                m = [],
                _ = t.length,
                v = 0,
                E = 128,
                T = 72;
              for ((n = t.lastIndexOf("-")) < 0 && (n = 0), r = 0; r < n; ++r)
                t.charCodeAt(r) >= 128 && y("not-basic"),
                  m.push(t.charCodeAt(r));
              for (i = n > 0 ? n + 1 : 0; i < _; ) {
                for (
                  o = v, a = 1, h = l;
                  i >= _ && y("invalid-input"),
                    ((c =
                      (p = t.charCodeAt(i++)) - 48 < 10
                        ? p - 22
                        : p - 65 < 26
                          ? p - 65
                          : p - 97 < 26
                            ? p - 97
                            : l) >= l ||
                      c > g((s - v) / a)) &&
                      y("overflow"),
                    (v += c * a),
                    !(c < (d = h <= T ? 1 : h >= T + u ? u : h - T));
                  h += l
                )
                  a > g(s / (f = l - d)) && y("overflow"), (a *= f);
                (T = M(v - o, (e = m.length + 1), 0 == o)),
                  g(v / e) > s - E && y("overflow"),
                  (E += g(v / e)),
                  (v %= e),
                  m.splice(v++, 0, E);
              }
              return x(m);
            }
            function R(t) {
              var e,
                n,
                r,
                i,
                o,
                a,
                h,
                c,
                d,
                f,
                p,
                m,
                _,
                E,
                T,
                x = [];
              for (
                m = (t = b(t)).length, e = 128, n = 0, o = 72, a = 0;
                a < m;
                ++a
              )
                (p = t[a]) < 128 && x.push(v(p));
              for (r = i = x.length, i && x.push("-"); r < m; ) {
                for (h = s, a = 0; a < m; ++a)
                  (p = t[a]) >= e && p < h && (h = p);
                for (
                  h - e > g((s - n) / (_ = r + 1)) && y("overflow"),
                    n += (h - e) * _,
                    e = h,
                    a = 0;
                  a < m;
                  ++a
                )
                  if (((p = t[a]) < e && ++n > s && y("overflow"), p == e)) {
                    for (
                      c = n, d = l;
                      !(c < (f = d <= o ? 1 : d >= o + u ? u : d - o));
                      d += l
                    )
                      (T = c - f),
                        (E = l - f),
                        x.push(v(S(f + (T % E), 0))),
                        (c = g(T / E));
                    x.push(v(S(c, 0))), (o = M(n, _, r == i)), (n = 0), ++r;
                  }
                ++n, ++e;
              }
              return x.join("");
            }
            (a = {
              version: "1.3.2",
              ucs2: { decode: b, encode: x },
              decode: A,
              encode: R,
              toASCII: function (t) {
                return T(t, function (t) {
                  return f.test(t) ? "xn--" + R(t) : t;
                });
              },
              toUnicode: function (t) {
                return T(t, function (t) {
                  return d.test(t) ? A(t.slice(4).toLowerCase()) : t;
                });
              },
            }),
              void 0 ===
                (r = function () {
                  return a;
                }.call(e, n, e, t)) || (t.exports = r);
          })();
      },
      575: (t, e, n) => {
        "use strict";
        var r = n(511),
          i = n(502);
        function o() {
          (this.protocol = null),
            (this.slashes = null),
            (this.auth = null),
            (this.host = null),
            (this.port = null),
            (this.hostname = null),
            (this.hash = null),
            (this.search = null),
            (this.query = null),
            (this.pathname = null),
            (this.path = null),
            (this.href = null);
        }
        (e.Qc = y),
          (e.DB = function (t, e) {
            return y(t, !1, !0).resolve(e);
          }),
          (e.WU = function (t) {
            return (
              i.isString(t) && (t = y(t)),
              t instanceof o ? t.format() : o.prototype.format.call(t)
            );
          });
        var a = /^([a-z0-9.+-]+:)/i,
          s = /:[0-9]*$/,
          l = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,
          u = ["{", "}", "|", "\\", "^", "`"].concat([
            "<",
            ">",
            '"',
            "`",
            " ",
            "\r",
            "\n",
            "\t",
          ]),
          h = ["'"].concat(u),
          c = ["%", "/", "?", ";", "#"].concat(h),
          d = ["/", "?", "#"],
          f = /^[+a-z0-9A-Z_-]{0,63}$/,
          p = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
          m = { javascript: !0, "javascript:": !0 },
          _ = { javascript: !0, "javascript:": !0 },
          g = {
            http: !0,
            https: !0,
            ftp: !0,
            gopher: !0,
            file: !0,
            "http:": !0,
            "https:": !0,
            "ftp:": !0,
            "gopher:": !0,
            "file:": !0,
          },
          v = n(673);
        function y(t, e, n) {
          if (t && i.isObject(t) && t instanceof o) return t;
          var r = new o();
          return r.parse(t, e, n), r;
        }
        (o.prototype.parse = function (t, e, n) {
          if (!i.isString(t))
            throw new TypeError(
              "Parameter 'url' must be a string, not " + typeof t,
            );
          var o = t.indexOf("?"),
            s = -1 !== o && o < t.indexOf("#") ? "?" : "#",
            u = t.split(s);
          u[0] = u[0].replace(/\\/g, "/");
          var y = (t = u.join(s));
          if (((y = y.trim()), !n && 1 === t.split("#").length)) {
            var E = l.exec(y);
            if (E)
              return (
                (this.path = y),
                (this.href = y),
                (this.pathname = E[1]),
                E[2]
                  ? ((this.search = E[2]),
                    (this.query = e
                      ? v.parse(this.search.substr(1))
                      : this.search.substr(1)))
                  : e && ((this.search = ""), (this.query = {})),
                this
              );
          }
          var T = a.exec(y);
          if (T) {
            var b = (T = T[0]).toLowerCase();
            (this.protocol = b), (y = y.substr(T.length));
          }
          if (n || T || y.match(/^\/\/[^@\/]+@[^@\/]+/)) {
            var x = "//" === y.substr(0, 2);
            !x || (T && _[T]) || ((y = y.substr(2)), (this.slashes = !0));
          }
          if (!_[T] && (x || (T && !g[T]))) {
            for (var S, M, A = -1, R = 0; R < d.length; R++)
              -1 !== (w = y.indexOf(d[R])) && (-1 === A || w < A) && (A = w);
            for (
              -1 !==
                (M = -1 === A ? y.lastIndexOf("@") : y.lastIndexOf("@", A)) &&
                ((S = y.slice(0, M)),
                (y = y.slice(M + 1)),
                (this.auth = decodeURIComponent(S))),
                A = -1,
                R = 0;
              R < c.length;
              R++
            ) {
              var w;
              -1 !== (w = y.indexOf(c[R])) && (-1 === A || w < A) && (A = w);
            }
            -1 === A && (A = y.length),
              (this.host = y.slice(0, A)),
              (y = y.slice(A)),
              this.parseHost(),
              (this.hostname = this.hostname || "");
            var P =
              "[" === this.hostname[0] &&
              "]" === this.hostname[this.hostname.length - 1];
            if (!P)
              for (
                var I = this.hostname.split(/\./), O = ((R = 0), I.length);
                R < O;
                R++
              ) {
                var C = I[R];
                if (C && !C.match(f)) {
                  for (var N = "", L = 0, D = C.length; L < D; L++)
                    C.charCodeAt(L) > 127 ? (N += "x") : (N += C[L]);
                  if (!N.match(f)) {
                    var U = I.slice(0, R),
                      F = I.slice(R + 1),
                      B = C.match(p);
                    B && (U.push(B[1]), F.unshift(B[2])),
                      F.length && (y = "/" + F.join(".") + y),
                      (this.hostname = U.join("."));
                    break;
                  }
                }
              }
            this.hostname.length > 255
              ? (this.hostname = "")
              : (this.hostname = this.hostname.toLowerCase()),
              P || (this.hostname = r.toASCII(this.hostname));
            var G = this.port ? ":" + this.port : "",
              k = this.hostname || "";
            (this.host = k + G),
              (this.href += this.host),
              P &&
                ((this.hostname = this.hostname.substr(
                  1,
                  this.hostname.length - 2,
                )),
                "/" !== y[0] && (y = "/" + y));
          }
          if (!m[b])
            for (R = 0, O = h.length; R < O; R++) {
              var H = h[R];
              if (-1 !== y.indexOf(H)) {
                var z = encodeURIComponent(H);
                z === H && (z = escape(H)), (y = y.split(H).join(z));
              }
            }
          var V = y.indexOf("#");
          -1 !== V && ((this.hash = y.substr(V)), (y = y.slice(0, V)));
          var X = y.indexOf("?");
          if (
            (-1 !== X
              ? ((this.search = y.substr(X)),
                (this.query = y.substr(X + 1)),
                e && (this.query = v.parse(this.query)),
                (y = y.slice(0, X)))
              : e && ((this.search = ""), (this.query = {})),
            y && (this.pathname = y),
            g[b] && this.hostname && !this.pathname && (this.pathname = "/"),
            this.pathname || this.search)
          ) {
            G = this.pathname || "";
            var W = this.search || "";
            this.path = G + W;
          }
          return (this.href = this.format()), this;
        }),
          (o.prototype.format = function () {
            var t = this.auth || "";
            t &&
              ((t = (t = encodeURIComponent(t)).replace(/%3A/i, ":")),
              (t += "@"));
            var e = this.protocol || "",
              n = this.pathname || "",
              r = this.hash || "",
              o = !1,
              a = "";
            this.host
              ? (o = t + this.host)
              : this.hostname &&
                ((o =
                  t +
                  (-1 === this.hostname.indexOf(":")
                    ? this.hostname
                    : "[" + this.hostname + "]")),
                this.port && (o += ":" + this.port)),
              this.query &&
                i.isObject(this.query) &&
                Object.keys(this.query).length &&
                (a = v.stringify(this.query));
            var s = this.search || (a && "?" + a) || "";
            return (
              e && ":" !== e.substr(-1) && (e += ":"),
              this.slashes || ((!e || g[e]) && !1 !== o)
                ? ((o = "//" + (o || "")),
                  n && "/" !== n.charAt(0) && (n = "/" + n))
                : o || (o = ""),
              r && "#" !== r.charAt(0) && (r = "#" + r),
              s && "?" !== s.charAt(0) && (s = "?" + s),
              e +
                o +
                (n = n.replace(/[?#]/g, function (t) {
                  return encodeURIComponent(t);
                })) +
                (s = s.replace("#", "%23")) +
                r
            );
          }),
          (o.prototype.resolve = function (t) {
            return this.resolveObject(y(t, !1, !0)).format();
          }),
          (o.prototype.resolveObject = function (t) {
            if (i.isString(t)) {
              var e = new o();
              e.parse(t, !1, !0), (t = e);
            }
            for (
              var n = new o(), r = Object.keys(this), a = 0;
              a < r.length;
              a++
            ) {
              var s = r[a];
              n[s] = this[s];
            }
            if (((n.hash = t.hash), "" === t.href))
              return (n.href = n.format()), n;
            if (t.slashes && !t.protocol) {
              for (var l = Object.keys(t), u = 0; u < l.length; u++) {
                var h = l[u];
                "protocol" !== h && (n[h] = t[h]);
              }
              return (
                g[n.protocol] &&
                  n.hostname &&
                  !n.pathname &&
                  (n.path = n.pathname = "/"),
                (n.href = n.format()),
                n
              );
            }
            if (t.protocol && t.protocol !== n.protocol) {
              if (!g[t.protocol]) {
                for (var c = Object.keys(t), d = 0; d < c.length; d++) {
                  var f = c[d];
                  n[f] = t[f];
                }
                return (n.href = n.format()), n;
              }
              if (((n.protocol = t.protocol), t.host || _[t.protocol]))
                n.pathname = t.pathname;
              else {
                for (
                  var p = (t.pathname || "").split("/");
                  p.length && !(t.host = p.shift());

                );
                t.host || (t.host = ""),
                  t.hostname || (t.hostname = ""),
                  "" !== p[0] && p.unshift(""),
                  p.length < 2 && p.unshift(""),
                  (n.pathname = p.join("/"));
              }
              if (
                ((n.search = t.search),
                (n.query = t.query),
                (n.host = t.host || ""),
                (n.auth = t.auth),
                (n.hostname = t.hostname || t.host),
                (n.port = t.port),
                n.pathname || n.search)
              ) {
                var m = n.pathname || "",
                  v = n.search || "";
                n.path = m + v;
              }
              return (
                (n.slashes = n.slashes || t.slashes), (n.href = n.format()), n
              );
            }
            var y = n.pathname && "/" === n.pathname.charAt(0),
              E = t.host || (t.pathname && "/" === t.pathname.charAt(0)),
              T = E || y || (n.host && t.pathname),
              b = T,
              x = (n.pathname && n.pathname.split("/")) || [],
              S =
                ((p = (t.pathname && t.pathname.split("/")) || []),
                n.protocol && !g[n.protocol]);
            if (
              (S &&
                ((n.hostname = ""),
                (n.port = null),
                n.host && ("" === x[0] ? (x[0] = n.host) : x.unshift(n.host)),
                (n.host = ""),
                t.protocol &&
                  ((t.hostname = null),
                  (t.port = null),
                  t.host && ("" === p[0] ? (p[0] = t.host) : p.unshift(t.host)),
                  (t.host = null)),
                (T = T && ("" === p[0] || "" === x[0]))),
              E)
            )
              (n.host = t.host || "" === t.host ? t.host : n.host),
                (n.hostname =
                  t.hostname || "" === t.hostname ? t.hostname : n.hostname),
                (n.search = t.search),
                (n.query = t.query),
                (x = p);
            else if (p.length)
              x || (x = []),
                x.pop(),
                (x = x.concat(p)),
                (n.search = t.search),
                (n.query = t.query);
            else if (!i.isNullOrUndefined(t.search))
              return (
                S &&
                  ((n.hostname = n.host = x.shift()),
                  (P =
                    !!(n.host && n.host.indexOf("@") > 0) &&
                    n.host.split("@")) &&
                    ((n.auth = P.shift()), (n.host = n.hostname = P.shift()))),
                (n.search = t.search),
                (n.query = t.query),
                (i.isNull(n.pathname) && i.isNull(n.search)) ||
                  (n.path =
                    (n.pathname ? n.pathname : "") +
                    (n.search ? n.search : "")),
                (n.href = n.format()),
                n
              );
            if (!x.length)
              return (
                (n.pathname = null),
                n.search ? (n.path = "/" + n.search) : (n.path = null),
                (n.href = n.format()),
                n
              );
            for (
              var M = x.slice(-1)[0],
                A =
                  ((n.host || t.host || x.length > 1) &&
                    ("." === M || ".." === M)) ||
                  "" === M,
                R = 0,
                w = x.length;
              w >= 0;
              w--
            )
              "." === (M = x[w])
                ? x.splice(w, 1)
                : ".." === M
                  ? (x.splice(w, 1), R++)
                  : R && (x.splice(w, 1), R--);
            if (!T && !b) for (; R--; R) x.unshift("..");
            !T ||
              "" === x[0] ||
              (x[0] && "/" === x[0].charAt(0)) ||
              x.unshift(""),
              A && "/" !== x.join("/").substr(-1) && x.push("");
            var P,
              I = "" === x[0] || (x[0] && "/" === x[0].charAt(0));
            return (
              S &&
                ((n.hostname = n.host = I ? "" : x.length ? x.shift() : ""),
                (P =
                  !!(n.host && n.host.indexOf("@") > 0) && n.host.split("@")) &&
                  ((n.auth = P.shift()), (n.host = n.hostname = P.shift()))),
              (T = T || (n.host && x.length)) && !I && x.unshift(""),
              x.length
                ? (n.pathname = x.join("/"))
                : ((n.pathname = null), (n.path = null)),
              (i.isNull(n.pathname) && i.isNull(n.search)) ||
                (n.path =
                  (n.pathname ? n.pathname : "") + (n.search ? n.search : "")),
              (n.auth = t.auth || n.auth),
              (n.slashes = n.slashes || t.slashes),
              (n.href = n.format()),
              n
            );
          }),
          (o.prototype.parseHost = function () {
            var t = this.host,
              e = s.exec(t);
            e &&
              (":" !== (e = e[0]) && (this.port = e.substr(1)),
              (t = t.substr(0, t.length - e.length))),
              t && (this.hostname = t);
          });
      },
      502: (t) => {
        "use strict";
        t.exports = {
          isString: function (t) {
            return "string" == typeof t;
          },
          isObject: function (t) {
            return "object" == typeof t && null !== t;
          },
          isNull: function (t) {
            return null === t;
          },
          isNullOrUndefined: function (t) {
            return null == t;
          },
        };
      },
    },
    e = {};
  function n(r) {
    var i = e[r];
    if (void 0 !== i) return i.exports;
    var o = (e[r] = { id: r, loaded: !1, exports: {} });
    return t[r].call(o.exports, o, o.exports, n), (o.loaded = !0), o.exports;
  }
  (n.n = (t) => {
    var e = t && t.__esModule ? () => t.default : () => t;
    return n.d(e, { a: e }), e;
  }),
    (n.d = (t, e) => {
      for (var r in e)
        n.o(e, r) &&
          !n.o(t, r) &&
          Object.defineProperty(t, r, { enumerable: !0, get: e[r] });
    }),
    (n.g = (function () {
      if ("object" == typeof globalThis) return globalThis;
      try {
        return this || new Function("return this")();
      } catch (t) {
        if ("object" == typeof window) return window;
      }
    })()),
    (n.o = (t, e) => Object.prototype.hasOwnProperty.call(t, e)),
    (n.nmd = (t) => ((t.paths = []), t.children || (t.children = []), t)),
    (() => {
      "use strict";
      var t = n(294),
        e = n(935),
        r = n(697),
        i = n.n(r);
      var o = setTimeout;
      function a(t) {
        return Boolean(t && void 0 !== t.length);
      }
      function s() {}
      function l(t) {
        if (!(this instanceof l))
          throw new TypeError("Promises must be constructed via new");
        if ("function" != typeof t) throw new TypeError("not a function");
        (this._state = 0),
          (this._handled = !1),
          (this._value = void 0),
          (this._deferreds = []),
          p(t, this);
      }
      function u(t, e) {
        for (; 3 === t._state; ) t = t._value;
        0 !== t._state
          ? ((t._handled = !0),
            l._immediateFn(function () {
              var n = 1 === t._state ? e.onFulfilled : e.onRejected;
              if (null !== n) {
                var r;
                try {
                  r = n(t._value);
                } catch (t) {
                  return void c(e.promise, t);
                }
                h(e.promise, r);
              } else (1 === t._state ? h : c)(e.promise, t._value);
            }))
          : t._deferreds.push(e);
      }
      function h(t, e) {
        try {
          if (e === t)
            throw new TypeError("A promise cannot be resolved with itself.");
          if (e && ("object" == typeof e || "function" == typeof e)) {
            var n = e.then;
            if (e instanceof l)
              return (t._state = 3), (t._value = e), void d(t);
            if ("function" == typeof n)
              return void p(
                ((r = n),
                (i = e),
                function () {
                  r.apply(i, arguments);
                }),
                t,
              );
          }
          (t._state = 1), (t._value = e), d(t);
        } catch (e) {
          c(t, e);
        }
        var r, i;
      }
      function c(t, e) {
        (t._state = 2), (t._value = e), d(t);
      }
      function d(t) {
        2 === t._state &&
          0 === t._deferreds.length &&
          l._immediateFn(function () {
            t._handled || l._unhandledRejectionFn(t._value);
          });
        for (var e = 0, n = t._deferreds.length; e < n; e++)
          u(t, t._deferreds[e]);
        t._deferreds = null;
      }
      function f(t, e, n) {
        (this.onFulfilled = "function" == typeof t ? t : null),
          (this.onRejected = "function" == typeof e ? e : null),
          (this.promise = n);
      }
      function p(t, e) {
        var n = !1;
        try {
          t(
            function (t) {
              n || ((n = !0), h(e, t));
            },
            function (t) {
              n || ((n = !0), c(e, t));
            },
          );
        } catch (t) {
          if (n) return;
          (n = !0), c(e, t);
        }
      }
      (l.prototype.catch = function (t) {
        return this.then(null, t);
      }),
        (l.prototype.then = function (t, e) {
          var n = new this.constructor(s);
          return u(this, new f(t, e, n)), n;
        }),
        (l.prototype.finally = function (t) {
          var e = this.constructor;
          return this.then(
            function (n) {
              return e.resolve(t()).then(function () {
                return n;
              });
            },
            function (n) {
              return e.resolve(t()).then(function () {
                return e.reject(n);
              });
            },
          );
        }),
        (l.all = function (t) {
          return new l(function (e, n) {
            if (!a(t)) return n(new TypeError("Promise.all accepts an array"));
            var r = Array.prototype.slice.call(t);
            if (0 === r.length) return e([]);
            var i = r.length;
            function o(t, a) {
              try {
                if (a && ("object" == typeof a || "function" == typeof a)) {
                  var s = a.then;
                  if ("function" == typeof s)
                    return void s.call(
                      a,
                      function (e) {
                        o(t, e);
                      },
                      n,
                    );
                }
                (r[t] = a), 0 == --i && e(r);
              } catch (t) {
                n(t);
              }
            }
            for (var s = 0; s < r.length; s++) o(s, r[s]);
          });
        }),
        (l.allSettled = function (t) {
          return new this(function (e, n) {
            if (!t || void 0 === t.length)
              return n(
                new TypeError(
                  typeof t +
                    " " +
                    t +
                    " is not iterable(cannot read property Symbol(Symbol.iterator))",
                ),
              );
            var r = Array.prototype.slice.call(t);
            if (0 === r.length) return e([]);
            var i = r.length;
            function o(t, n) {
              if (n && ("object" == typeof n || "function" == typeof n)) {
                var a = n.then;
                if ("function" == typeof a)
                  return void a.call(
                    n,
                    function (e) {
                      o(t, e);
                    },
                    function (n) {
                      (r[t] = { status: "rejected", reason: n }),
                        0 == --i && e(r);
                    },
                  );
              }
              (r[t] = { status: "fulfilled", value: n }), 0 == --i && e(r);
            }
            for (var a = 0; a < r.length; a++) o(a, r[a]);
          });
        }),
        (l.resolve = function (t) {
          return t && "object" == typeof t && t.constructor === l
            ? t
            : new l(function (e) {
                e(t);
              });
        }),
        (l.reject = function (t) {
          return new l(function (e, n) {
            n(t);
          });
        }),
        (l.race = function (t) {
          return new l(function (e, n) {
            if (!a(t)) return n(new TypeError("Promise.race accepts an array"));
            for (var r = 0, i = t.length; r < i; r++)
              l.resolve(t[r]).then(e, n);
          });
        }),
        (l._immediateFn =
          ("function" == typeof setImmediate &&
            function (t) {
              setImmediate(t);
            }) ||
          function (t) {
            o(t, 0);
          }),
        (l._unhandledRejectionFn = function (t) {
          "undefined" != typeof console &&
            console &&
            console.warn("Possible Unhandled Promise Rejection:", t);
        });
      const m = l;
      var _ = n(418);
      if (
        ("undefined" == typeof globalThis &&
          ("undefined" != typeof self
            ? (self.globalThis = self)
            : "undefined" != typeof global && (global.globalThis = global)),
        globalThis.Promise || (globalThis.Promise = m),
        Object.assign || (Object.assign = _),
        (Date.now && Date.prototype.getTime) ||
          (Date.now = function () {
            return new Date().getTime();
          }),
        !globalThis.performance || !globalThis.performance.now)
      ) {
        var g = Date.now();
        globalThis.performance || (globalThis.performance = {}),
          (globalThis.performance.now = function () {
            return Date.now() - g;
          });
      }
      for (
        var v,
          y,
          E,
          T,
          b,
          x,
          S,
          M,
          A,
          R,
          w,
          P,
          I,
          O,
          C,
          N,
          L,
          D,
          U,
          F,
          B = Date.now(),
          G = ["ms", "moz", "webkit", "o"],
          k = 0;
        k < G.length && !globalThis.requestAnimationFrame;
        ++k
      ) {
        var H = G[k];
        (globalThis.requestAnimationFrame =
          globalThis[H + "RequestAnimationFrame"]),
          (globalThis.cancelAnimationFrame =
            globalThis[H + "CancelAnimationFrame"] ||
            globalThis[H + "CancelRequestAnimationFrame"]);
      }
      globalThis.requestAnimationFrame ||
        (globalThis.requestAnimationFrame = function (t) {
          if ("function" != typeof t)
            throw new TypeError(t + "is not a function");
          var e = Date.now(),
            n = 16 + B - e;
          return (
            n < 0 && (n = 0),
            (B = e),
            globalThis.self.setTimeout(function () {
              (B = Date.now()), t(performance.now());
            }, n)
          );
        }),
        globalThis.cancelAnimationFrame ||
          (globalThis.cancelAnimationFrame = function (t) {
            return clearTimeout(t);
          }),
        Math.sign ||
          (Math.sign = function (t) {
            return 0 === (t = Number(t)) || isNaN(t) ? t : t > 0 ? 1 : -1;
          }),
        Number.isInteger ||
          (Number.isInteger = function (t) {
            return "number" == typeof t && isFinite(t) && Math.floor(t) === t;
          }),
        globalThis.ArrayBuffer || (globalThis.ArrayBuffer = Array),
        globalThis.Float32Array || (globalThis.Float32Array = Array),
        globalThis.Uint32Array || (globalThis.Uint32Array = Array),
        globalThis.Uint16Array || (globalThis.Uint16Array = Array),
        globalThis.Uint8Array || (globalThis.Uint8Array = Array),
        globalThis.Int32Array || (globalThis.Int32Array = Array),
        (function (t) {
          (t[(t.WEBGL_LEGACY = 0)] = "WEBGL_LEGACY"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.WEBGL2 = 2)] = "WEBGL2");
        })(v || (v = {})),
        (function (t) {
          (t[(t.UNKNOWN = 0)] = "UNKNOWN"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.CANVAS = 2)] = "CANVAS");
        })(y || (y = {})),
        (function (t) {
          (t[(t.COLOR = 16384)] = "COLOR"),
            (t[(t.DEPTH = 256)] = "DEPTH"),
            (t[(t.STENCIL = 1024)] = "STENCIL");
        })(E || (E = {})),
        (function (t) {
          (t[(t.NORMAL = 0)] = "NORMAL"),
            (t[(t.ADD = 1)] = "ADD"),
            (t[(t.MULTIPLY = 2)] = "MULTIPLY"),
            (t[(t.SCREEN = 3)] = "SCREEN"),
            (t[(t.OVERLAY = 4)] = "OVERLAY"),
            (t[(t.DARKEN = 5)] = "DARKEN"),
            (t[(t.LIGHTEN = 6)] = "LIGHTEN"),
            (t[(t.COLOR_DODGE = 7)] = "COLOR_DODGE"),
            (t[(t.COLOR_BURN = 8)] = "COLOR_BURN"),
            (t[(t.HARD_LIGHT = 9)] = "HARD_LIGHT"),
            (t[(t.SOFT_LIGHT = 10)] = "SOFT_LIGHT"),
            (t[(t.DIFFERENCE = 11)] = "DIFFERENCE"),
            (t[(t.EXCLUSION = 12)] = "EXCLUSION"),
            (t[(t.HUE = 13)] = "HUE"),
            (t[(t.SATURATION = 14)] = "SATURATION"),
            (t[(t.COLOR = 15)] = "COLOR"),
            (t[(t.LUMINOSITY = 16)] = "LUMINOSITY"),
            (t[(t.NORMAL_NPM = 17)] = "NORMAL_NPM"),
            (t[(t.ADD_NPM = 18)] = "ADD_NPM"),
            (t[(t.SCREEN_NPM = 19)] = "SCREEN_NPM"),
            (t[(t.NONE = 20)] = "NONE"),
            (t[(t.SRC_OVER = 0)] = "SRC_OVER"),
            (t[(t.SRC_IN = 21)] = "SRC_IN"),
            (t[(t.SRC_OUT = 22)] = "SRC_OUT"),
            (t[(t.SRC_ATOP = 23)] = "SRC_ATOP"),
            (t[(t.DST_OVER = 24)] = "DST_OVER"),
            (t[(t.DST_IN = 25)] = "DST_IN"),
            (t[(t.DST_OUT = 26)] = "DST_OUT"),
            (t[(t.DST_ATOP = 27)] = "DST_ATOP"),
            (t[(t.ERASE = 26)] = "ERASE"),
            (t[(t.SUBTRACT = 28)] = "SUBTRACT"),
            (t[(t.XOR = 29)] = "XOR");
        })(T || (T = {})),
        (function (t) {
          (t[(t.POINTS = 0)] = "POINTS"),
            (t[(t.LINES = 1)] = "LINES"),
            (t[(t.LINE_LOOP = 2)] = "LINE_LOOP"),
            (t[(t.LINE_STRIP = 3)] = "LINE_STRIP"),
            (t[(t.TRIANGLES = 4)] = "TRIANGLES"),
            (t[(t.TRIANGLE_STRIP = 5)] = "TRIANGLE_STRIP"),
            (t[(t.TRIANGLE_FAN = 6)] = "TRIANGLE_FAN");
        })(b || (b = {})),
        (function (t) {
          (t[(t.RGBA = 6408)] = "RGBA"),
            (t[(t.RGB = 6407)] = "RGB"),
            (t[(t.RG = 33319)] = "RG"),
            (t[(t.RED = 6403)] = "RED"),
            (t[(t.RGBA_INTEGER = 36249)] = "RGBA_INTEGER"),
            (t[(t.RGB_INTEGER = 36248)] = "RGB_INTEGER"),
            (t[(t.RG_INTEGER = 33320)] = "RG_INTEGER"),
            (t[(t.RED_INTEGER = 36244)] = "RED_INTEGER"),
            (t[(t.ALPHA = 6406)] = "ALPHA"),
            (t[(t.LUMINANCE = 6409)] = "LUMINANCE"),
            (t[(t.LUMINANCE_ALPHA = 6410)] = "LUMINANCE_ALPHA"),
            (t[(t.DEPTH_COMPONENT = 6402)] = "DEPTH_COMPONENT"),
            (t[(t.DEPTH_STENCIL = 34041)] = "DEPTH_STENCIL");
        })(x || (x = {})),
        (function (t) {
          (t[(t.TEXTURE_2D = 3553)] = "TEXTURE_2D"),
            (t[(t.TEXTURE_CUBE_MAP = 34067)] = "TEXTURE_CUBE_MAP"),
            (t[(t.TEXTURE_2D_ARRAY = 35866)] = "TEXTURE_2D_ARRAY"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069)] =
              "TEXTURE_CUBE_MAP_POSITIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Z"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Z");
        })(S || (S = {})),
        (function (t) {
          (t[(t.UNSIGNED_BYTE = 5121)] = "UNSIGNED_BYTE"),
            (t[(t.UNSIGNED_SHORT = 5123)] = "UNSIGNED_SHORT"),
            (t[(t.UNSIGNED_SHORT_5_6_5 = 33635)] = "UNSIGNED_SHORT_5_6_5"),
            (t[(t.UNSIGNED_SHORT_4_4_4_4 = 32819)] = "UNSIGNED_SHORT_4_4_4_4"),
            (t[(t.UNSIGNED_SHORT_5_5_5_1 = 32820)] = "UNSIGNED_SHORT_5_5_5_1"),
            (t[(t.UNSIGNED_INT = 5125)] = "UNSIGNED_INT"),
            (t[(t.UNSIGNED_INT_10F_11F_11F_REV = 35899)] =
              "UNSIGNED_INT_10F_11F_11F_REV"),
            (t[(t.UNSIGNED_INT_2_10_10_10_REV = 33640)] =
              "UNSIGNED_INT_2_10_10_10_REV"),
            (t[(t.UNSIGNED_INT_24_8 = 34042)] = "UNSIGNED_INT_24_8"),
            (t[(t.UNSIGNED_INT_5_9_9_9_REV = 35902)] =
              "UNSIGNED_INT_5_9_9_9_REV"),
            (t[(t.BYTE = 5120)] = "BYTE"),
            (t[(t.SHORT = 5122)] = "SHORT"),
            (t[(t.INT = 5124)] = "INT"),
            (t[(t.FLOAT = 5126)] = "FLOAT"),
            (t[(t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269)] =
              "FLOAT_32_UNSIGNED_INT_24_8_REV"),
            (t[(t.HALF_FLOAT = 36193)] = "HALF_FLOAT");
        })(M || (M = {})),
        (function (t) {
          (t[(t.FLOAT = 0)] = "FLOAT"),
            (t[(t.INT = 1)] = "INT"),
            (t[(t.UINT = 2)] = "UINT");
        })(A || (A = {})),
        (function (t) {
          (t[(t.NEAREST = 0)] = "NEAREST"), (t[(t.LINEAR = 1)] = "LINEAR");
        })(R || (R = {})),
        (function (t) {
          (t[(t.CLAMP = 33071)] = "CLAMP"),
            (t[(t.REPEAT = 10497)] = "REPEAT"),
            (t[(t.MIRRORED_REPEAT = 33648)] = "MIRRORED_REPEAT");
        })(w || (w = {})),
        (function (t) {
          (t[(t.OFF = 0)] = "OFF"),
            (t[(t.POW2 = 1)] = "POW2"),
            (t[(t.ON = 2)] = "ON"),
            (t[(t.ON_MANUAL = 3)] = "ON_MANUAL");
        })(P || (P = {})),
        (function (t) {
          (t[(t.NPM = 0)] = "NPM"),
            (t[(t.UNPACK = 1)] = "UNPACK"),
            (t[(t.PMA = 2)] = "PMA"),
            (t[(t.NO_PREMULTIPLIED_ALPHA = 0)] = "NO_PREMULTIPLIED_ALPHA"),
            (t[(t.PREMULTIPLY_ON_UPLOAD = 1)] = "PREMULTIPLY_ON_UPLOAD"),
            (t[(t.PREMULTIPLY_ALPHA = 2)] = "PREMULTIPLY_ALPHA"),
            (t[(t.PREMULTIPLIED_ALPHA = 2)] = "PREMULTIPLIED_ALPHA");
        })(I || (I = {})),
        (function (t) {
          (t[(t.NO = 0)] = "NO"),
            (t[(t.YES = 1)] = "YES"),
            (t[(t.AUTO = 2)] = "AUTO"),
            (t[(t.BLEND = 0)] = "BLEND"),
            (t[(t.CLEAR = 1)] = "CLEAR"),
            (t[(t.BLIT = 2)] = "BLIT");
        })(O || (O = {})),
        (function (t) {
          (t[(t.AUTO = 0)] = "AUTO"), (t[(t.MANUAL = 1)] = "MANUAL");
        })(C || (C = {})),
        (function (t) {
          (t.LOW = "lowp"), (t.MEDIUM = "mediump"), (t.HIGH = "highp");
        })(N || (N = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.SCISSOR = 1)] = "SCISSOR"),
            (t[(t.STENCIL = 2)] = "STENCIL"),
            (t[(t.SPRITE = 3)] = "SPRITE"),
            (t[(t.COLOR = 4)] = "COLOR");
        })(L || (L = {})),
        (function (t) {
          (t[(t.RED = 1)] = "RED"),
            (t[(t.GREEN = 2)] = "GREEN"),
            (t[(t.BLUE = 4)] = "BLUE"),
            (t[(t.ALPHA = 8)] = "ALPHA");
        })(D || (D = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.LOW = 2)] = "LOW"),
            (t[(t.MEDIUM = 4)] = "MEDIUM"),
            (t[(t.HIGH = 8)] = "HIGH");
        })(U || (U = {})),
        (function (t) {
          (t[(t.ELEMENT_ARRAY_BUFFER = 34963)] = "ELEMENT_ARRAY_BUFFER"),
            (t[(t.ARRAY_BUFFER = 34962)] = "ARRAY_BUFFER"),
            (t[(t.UNIFORM_BUFFER = 35345)] = "UNIFORM_BUFFER");
        })(F || (F = {}));
      var z,
        V,
        X,
        W,
        j,
        Y,
        q,
        K,
        Z,
        Q,
        $,
        J,
        tt,
        et,
        nt,
        rt,
        it,
        ot,
        at,
        st,
        lt = {
          createCanvas: function (t, e) {
            var n = document.createElement("canvas");
            return (n.width = t), (n.height = e), n;
          },
          getWebGLRenderingContext: function () {
            return WebGLRenderingContext;
          },
          getNavigator: function () {
            return navigator;
          },
          getBaseUrl: function () {
            var t;
            return null !== (t = document.baseURI) && void 0 !== t
              ? t
              : window.location.href;
          },
          fetch: function (t, e) {
            return fetch(t, e);
          },
        },
        ut = /iPhone/i,
        ht = /iPod/i,
        ct = /iPad/i,
        dt = /\biOS-universal(?:.+)Mac\b/i,
        ft = /\bAndroid(?:.+)Mobile\b/i,
        pt = /Android/i,
        mt = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,
        _t = /Silk/i,
        gt = /Windows Phone/i,
        vt = /\bWindows(?:.+)ARM\b/i,
        yt = /BlackBerry/i,
        Et = /BB10/i,
        Tt = /Opera Mini/i,
        bt = /\b(CriOS|Chrome)(?:.+)Mobile/i,
        xt = /Mobile(?:.+)Firefox\b/i,
        St = function (t) {
          return (
            void 0 !== t &&
            "MacIntel" === t.platform &&
            "number" == typeof t.maxTouchPoints &&
            t.maxTouchPoints > 1 &&
            "undefined" == typeof MSStream
          );
        },
        Mt = (function (t) {
          var e = { userAgent: "", platform: "", maxTouchPoints: 0 };
          t || "undefined" == typeof navigator
            ? "string" == typeof t
              ? (e.userAgent = t)
              : t &&
                t.userAgent &&
                (e = {
                  userAgent: t.userAgent,
                  platform: t.platform,
                  maxTouchPoints: t.maxTouchPoints || 0,
                })
            : (e = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                maxTouchPoints: navigator.maxTouchPoints || 0,
              });
          var n = e.userAgent,
            r = n.split("[FBAN");
          void 0 !== r[1] && (n = r[0]),
            void 0 !== (r = n.split("Twitter"))[1] && (n = r[0]);
          var i = (function (t) {
              return function (e) {
                return e.test(t);
              };
            })(n),
            o = {
              apple: {
                phone: i(ut) && !i(gt),
                ipod: i(ht),
                tablet: !i(ut) && (i(ct) || St(e)) && !i(gt),
                universal: i(dt),
                device: (i(ut) || i(ht) || i(ct) || i(dt) || St(e)) && !i(gt),
              },
              amazon: {
                phone: i(mt),
                tablet: !i(mt) && i(_t),
                device: i(mt) || i(_t),
              },
              android: {
                phone: (!i(gt) && i(mt)) || (!i(gt) && i(ft)),
                tablet: !i(gt) && !i(mt) && !i(ft) && (i(_t) || i(pt)),
                device:
                  (!i(gt) && (i(mt) || i(_t) || i(ft) || i(pt))) ||
                  i(/\bokhttp\b/i),
              },
              windows: { phone: i(gt), tablet: i(vt), device: i(gt) || i(vt) },
              other: {
                blackberry: i(yt),
                blackberry10: i(Et),
                opera: i(Tt),
                firefox: i(xt),
                chrome: i(bt),
                device: i(yt) || i(Et) || i(Tt) || i(xt) || i(bt),
              },
              any: !1,
              phone: !1,
              tablet: !1,
            };
          return (
            (o.any =
              o.apple.device ||
              o.android.device ||
              o.windows.device ||
              o.other.device),
            (o.phone = o.apple.phone || o.android.phone || o.windows.phone),
            (o.tablet = o.apple.tablet || o.android.tablet || o.windows.tablet),
            o
          );
        })(globalThis.navigator),
        At = {
          ADAPTER: lt,
          MIPMAP_TEXTURES: P.POW2,
          ANISOTROPIC_LEVEL: 0,
          RESOLUTION: 1,
          FILTER_RESOLUTION: 1,
          FILTER_MULTISAMPLE: U.NONE,
          SPRITE_MAX_TEXTURES: (function (t) {
            var e,
              n = !0;
            (Mt.tablet || Mt.phone) &&
              (Mt.apple.device &&
                (e = navigator.userAgent.match(/OS (\d+)_(\d+)?/)) &&
                parseInt(e[1], 10) < 11 &&
                (n = !1),
              Mt.android.device &&
                (e = navigator.userAgent.match(/Android\s([0-9.]*)/)) &&
                parseInt(e[1], 10) < 7 &&
                (n = !1));
            return n ? 32 : 4;
          })(),
          SPRITE_BATCH_SIZE: 4096,
          RENDER_OPTIONS: {
            view: null,
            antialias: !1,
            autoDensity: !1,
            backgroundColor: 0,
            backgroundAlpha: 1,
            useContextAlpha: !0,
            clearBeforeRender: !0,
            preserveDrawingBuffer: !1,
            width: 800,
            height: 600,
            legacy: !1,
          },
          GC_MODE: C.AUTO,
          GC_MAX_IDLE: 3600,
          GC_MAX_CHECK_COUNT: 600,
          WRAP_MODE: w.CLAMP,
          SCALE_MODE: R.LINEAR,
          PRECISION_VERTEX: N.HIGH,
          PRECISION_FRAGMENT: Mt.apple.device ? N.HIGH : N.MEDIUM,
          CAN_UPLOAD_SAME_BUFFER: !Mt.apple.device,
          CREATE_IMAGE_BITMAP: !1,
          ROUND_PIXELS: !1,
        },
        Rt = n(729),
        wt = n(187),
        Pt = n(575);
      !(function (t) {
        (t[(t.WEBGL_LEGACY = 0)] = "WEBGL_LEGACY"),
          (t[(t.WEBGL = 1)] = "WEBGL"),
          (t[(t.WEBGL2 = 2)] = "WEBGL2");
      })(z || (z = {})),
        (function (t) {
          (t[(t.UNKNOWN = 0)] = "UNKNOWN"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.CANVAS = 2)] = "CANVAS");
        })(V || (V = {})),
        (function (t) {
          (t[(t.COLOR = 16384)] = "COLOR"),
            (t[(t.DEPTH = 256)] = "DEPTH"),
            (t[(t.STENCIL = 1024)] = "STENCIL");
        })(X || (X = {})),
        (function (t) {
          (t[(t.NORMAL = 0)] = "NORMAL"),
            (t[(t.ADD = 1)] = "ADD"),
            (t[(t.MULTIPLY = 2)] = "MULTIPLY"),
            (t[(t.SCREEN = 3)] = "SCREEN"),
            (t[(t.OVERLAY = 4)] = "OVERLAY"),
            (t[(t.DARKEN = 5)] = "DARKEN"),
            (t[(t.LIGHTEN = 6)] = "LIGHTEN"),
            (t[(t.COLOR_DODGE = 7)] = "COLOR_DODGE"),
            (t[(t.COLOR_BURN = 8)] = "COLOR_BURN"),
            (t[(t.HARD_LIGHT = 9)] = "HARD_LIGHT"),
            (t[(t.SOFT_LIGHT = 10)] = "SOFT_LIGHT"),
            (t[(t.DIFFERENCE = 11)] = "DIFFERENCE"),
            (t[(t.EXCLUSION = 12)] = "EXCLUSION"),
            (t[(t.HUE = 13)] = "HUE"),
            (t[(t.SATURATION = 14)] = "SATURATION"),
            (t[(t.COLOR = 15)] = "COLOR"),
            (t[(t.LUMINOSITY = 16)] = "LUMINOSITY"),
            (t[(t.NORMAL_NPM = 17)] = "NORMAL_NPM"),
            (t[(t.ADD_NPM = 18)] = "ADD_NPM"),
            (t[(t.SCREEN_NPM = 19)] = "SCREEN_NPM"),
            (t[(t.NONE = 20)] = "NONE"),
            (t[(t.SRC_OVER = 0)] = "SRC_OVER"),
            (t[(t.SRC_IN = 21)] = "SRC_IN"),
            (t[(t.SRC_OUT = 22)] = "SRC_OUT"),
            (t[(t.SRC_ATOP = 23)] = "SRC_ATOP"),
            (t[(t.DST_OVER = 24)] = "DST_OVER"),
            (t[(t.DST_IN = 25)] = "DST_IN"),
            (t[(t.DST_OUT = 26)] = "DST_OUT"),
            (t[(t.DST_ATOP = 27)] = "DST_ATOP"),
            (t[(t.ERASE = 26)] = "ERASE"),
            (t[(t.SUBTRACT = 28)] = "SUBTRACT"),
            (t[(t.XOR = 29)] = "XOR");
        })(W || (W = {})),
        (function (t) {
          (t[(t.POINTS = 0)] = "POINTS"),
            (t[(t.LINES = 1)] = "LINES"),
            (t[(t.LINE_LOOP = 2)] = "LINE_LOOP"),
            (t[(t.LINE_STRIP = 3)] = "LINE_STRIP"),
            (t[(t.TRIANGLES = 4)] = "TRIANGLES"),
            (t[(t.TRIANGLE_STRIP = 5)] = "TRIANGLE_STRIP"),
            (t[(t.TRIANGLE_FAN = 6)] = "TRIANGLE_FAN");
        })(j || (j = {})),
        (function (t) {
          (t[(t.RGBA = 6408)] = "RGBA"),
            (t[(t.RGB = 6407)] = "RGB"),
            (t[(t.RG = 33319)] = "RG"),
            (t[(t.RED = 6403)] = "RED"),
            (t[(t.RGBA_INTEGER = 36249)] = "RGBA_INTEGER"),
            (t[(t.RGB_INTEGER = 36248)] = "RGB_INTEGER"),
            (t[(t.RG_INTEGER = 33320)] = "RG_INTEGER"),
            (t[(t.RED_INTEGER = 36244)] = "RED_INTEGER"),
            (t[(t.ALPHA = 6406)] = "ALPHA"),
            (t[(t.LUMINANCE = 6409)] = "LUMINANCE"),
            (t[(t.LUMINANCE_ALPHA = 6410)] = "LUMINANCE_ALPHA"),
            (t[(t.DEPTH_COMPONENT = 6402)] = "DEPTH_COMPONENT"),
            (t[(t.DEPTH_STENCIL = 34041)] = "DEPTH_STENCIL");
        })(Y || (Y = {})),
        (function (t) {
          (t[(t.TEXTURE_2D = 3553)] = "TEXTURE_2D"),
            (t[(t.TEXTURE_CUBE_MAP = 34067)] = "TEXTURE_CUBE_MAP"),
            (t[(t.TEXTURE_2D_ARRAY = 35866)] = "TEXTURE_2D_ARRAY"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069)] =
              "TEXTURE_CUBE_MAP_POSITIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Z"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Z");
        })(q || (q = {})),
        (function (t) {
          (t[(t.UNSIGNED_BYTE = 5121)] = "UNSIGNED_BYTE"),
            (t[(t.UNSIGNED_SHORT = 5123)] = "UNSIGNED_SHORT"),
            (t[(t.UNSIGNED_SHORT_5_6_5 = 33635)] = "UNSIGNED_SHORT_5_6_5"),
            (t[(t.UNSIGNED_SHORT_4_4_4_4 = 32819)] = "UNSIGNED_SHORT_4_4_4_4"),
            (t[(t.UNSIGNED_SHORT_5_5_5_1 = 32820)] = "UNSIGNED_SHORT_5_5_5_1"),
            (t[(t.UNSIGNED_INT = 5125)] = "UNSIGNED_INT"),
            (t[(t.UNSIGNED_INT_10F_11F_11F_REV = 35899)] =
              "UNSIGNED_INT_10F_11F_11F_REV"),
            (t[(t.UNSIGNED_INT_2_10_10_10_REV = 33640)] =
              "UNSIGNED_INT_2_10_10_10_REV"),
            (t[(t.UNSIGNED_INT_24_8 = 34042)] = "UNSIGNED_INT_24_8"),
            (t[(t.UNSIGNED_INT_5_9_9_9_REV = 35902)] =
              "UNSIGNED_INT_5_9_9_9_REV"),
            (t[(t.BYTE = 5120)] = "BYTE"),
            (t[(t.SHORT = 5122)] = "SHORT"),
            (t[(t.INT = 5124)] = "INT"),
            (t[(t.FLOAT = 5126)] = "FLOAT"),
            (t[(t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269)] =
              "FLOAT_32_UNSIGNED_INT_24_8_REV"),
            (t[(t.HALF_FLOAT = 36193)] = "HALF_FLOAT");
        })(K || (K = {})),
        (function (t) {
          (t[(t.FLOAT = 0)] = "FLOAT"),
            (t[(t.INT = 1)] = "INT"),
            (t[(t.UINT = 2)] = "UINT");
        })(Z || (Z = {})),
        (function (t) {
          (t[(t.NEAREST = 0)] = "NEAREST"), (t[(t.LINEAR = 1)] = "LINEAR");
        })(Q || (Q = {})),
        (function (t) {
          (t[(t.CLAMP = 33071)] = "CLAMP"),
            (t[(t.REPEAT = 10497)] = "REPEAT"),
            (t[(t.MIRRORED_REPEAT = 33648)] = "MIRRORED_REPEAT");
        })($ || ($ = {})),
        (function (t) {
          (t[(t.OFF = 0)] = "OFF"),
            (t[(t.POW2 = 1)] = "POW2"),
            (t[(t.ON = 2)] = "ON"),
            (t[(t.ON_MANUAL = 3)] = "ON_MANUAL");
        })(J || (J = {})),
        (function (t) {
          (t[(t.NPM = 0)] = "NPM"),
            (t[(t.UNPACK = 1)] = "UNPACK"),
            (t[(t.PMA = 2)] = "PMA"),
            (t[(t.NO_PREMULTIPLIED_ALPHA = 0)] = "NO_PREMULTIPLIED_ALPHA"),
            (t[(t.PREMULTIPLY_ON_UPLOAD = 1)] = "PREMULTIPLY_ON_UPLOAD"),
            (t[(t.PREMULTIPLY_ALPHA = 2)] = "PREMULTIPLY_ALPHA"),
            (t[(t.PREMULTIPLIED_ALPHA = 2)] = "PREMULTIPLIED_ALPHA");
        })(tt || (tt = {})),
        (function (t) {
          (t[(t.NO = 0)] = "NO"),
            (t[(t.YES = 1)] = "YES"),
            (t[(t.AUTO = 2)] = "AUTO"),
            (t[(t.BLEND = 0)] = "BLEND"),
            (t[(t.CLEAR = 1)] = "CLEAR"),
            (t[(t.BLIT = 2)] = "BLIT");
        })(et || (et = {})),
        (function (t) {
          (t[(t.AUTO = 0)] = "AUTO"), (t[(t.MANUAL = 1)] = "MANUAL");
        })(nt || (nt = {})),
        (function (t) {
          (t.LOW = "lowp"), (t.MEDIUM = "mediump"), (t.HIGH = "highp");
        })(rt || (rt = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.SCISSOR = 1)] = "SCISSOR"),
            (t[(t.STENCIL = 2)] = "STENCIL"),
            (t[(t.SPRITE = 3)] = "SPRITE"),
            (t[(t.COLOR = 4)] = "COLOR");
        })(it || (it = {})),
        (function (t) {
          (t[(t.RED = 1)] = "RED"),
            (t[(t.GREEN = 2)] = "GREEN"),
            (t[(t.BLUE = 4)] = "BLUE"),
            (t[(t.ALPHA = 8)] = "ALPHA");
        })(ot || (ot = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.LOW = 2)] = "LOW"),
            (t[(t.MEDIUM = 4)] = "MEDIUM"),
            (t[(t.HIGH = 8)] = "HIGH");
        })(at || (at = {})),
        (function (t) {
          (t[(t.ELEMENT_ARRAY_BUFFER = 34963)] = "ELEMENT_ARRAY_BUFFER"),
            (t[(t.ARRAY_BUFFER = 34962)] = "ARRAY_BUFFER"),
            (t[(t.UNIFORM_BUFFER = 35345)] = "UNIFORM_BUFFER");
        })(st || (st = {}));
      var It = { parse: Pt.Qc, format: Pt.WU, resolve: Pt.DB };
      (At.RETINA_PREFIX = /@([0-9\.]+)x/),
        (At.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1);
      var Ot,
        Ct = !1,
        Nt = {
          aliceblue: "#f0f8ff",
          antiquewhite: "#faebd7",
          aqua: "#00ffff",
          aquamarine: "#7fffd4",
          azure: "#f0ffff",
          beige: "#f5f5dc",
          bisque: "#ffe4c4",
          black: "#000000",
          blanchedalmond: "#ffebcd",
          blue: "#0000ff",
          blueviolet: "#8a2be2",
          brown: "#a52a2a",
          burlywood: "#deb887",
          cadetblue: "#5f9ea0",
          chartreuse: "#7fff00",
          chocolate: "#d2691e",
          coral: "#ff7f50",
          cornflowerblue: "#6495ed",
          cornsilk: "#fff8dc",
          crimson: "#dc143c",
          cyan: "#00ffff",
          darkblue: "#00008b",
          darkcyan: "#008b8b",
          darkgoldenrod: "#b8860b",
          darkgray: "#a9a9a9",
          darkgreen: "#006400",
          darkgrey: "#a9a9a9",
          darkkhaki: "#bdb76b",
          darkmagenta: "#8b008b",
          darkolivegreen: "#556b2f",
          darkorange: "#ff8c00",
          darkorchid: "#9932cc",
          darkred: "#8b0000",
          darksalmon: "#e9967a",
          darkseagreen: "#8fbc8f",
          darkslateblue: "#483d8b",
          darkslategray: "#2f4f4f",
          darkslategrey: "#2f4f4f",
          darkturquoise: "#00ced1",
          darkviolet: "#9400d3",
          deeppink: "#ff1493",
          deepskyblue: "#00bfff",
          dimgray: "#696969",
          dimgrey: "#696969",
          dodgerblue: "#1e90ff",
          firebrick: "#b22222",
          floralwhite: "#fffaf0",
          forestgreen: "#228b22",
          fuchsia: "#ff00ff",
          gainsboro: "#dcdcdc",
          ghostwhite: "#f8f8ff",
          goldenrod: "#daa520",
          gold: "#ffd700",
          gray: "#808080",
          green: "#008000",
          greenyellow: "#adff2f",
          grey: "#808080",
          honeydew: "#f0fff0",
          hotpink: "#ff69b4",
          indianred: "#cd5c5c",
          indigo: "#4b0082",
          ivory: "#fffff0",
          khaki: "#f0e68c",
          lavenderblush: "#fff0f5",
          lavender: "#e6e6fa",
          lawngreen: "#7cfc00",
          lemonchiffon: "#fffacd",
          lightblue: "#add8e6",
          lightcoral: "#f08080",
          lightcyan: "#e0ffff",
          lightgoldenrodyellow: "#fafad2",
          lightgray: "#d3d3d3",
          lightgreen: "#90ee90",
          lightgrey: "#d3d3d3",
          lightpink: "#ffb6c1",
          lightsalmon: "#ffa07a",
          lightseagreen: "#20b2aa",
          lightskyblue: "#87cefa",
          lightslategray: "#778899",
          lightslategrey: "#778899",
          lightsteelblue: "#b0c4de",
          lightyellow: "#ffffe0",
          lime: "#00ff00",
          limegreen: "#32cd32",
          linen: "#faf0e6",
          magenta: "#ff00ff",
          maroon: "#800000",
          mediumaquamarine: "#66cdaa",
          mediumblue: "#0000cd",
          mediumorchid: "#ba55d3",
          mediumpurple: "#9370db",
          mediumseagreen: "#3cb371",
          mediumslateblue: "#7b68ee",
          mediumspringgreen: "#00fa9a",
          mediumturquoise: "#48d1cc",
          mediumvioletred: "#c71585",
          midnightblue: "#191970",
          mintcream: "#f5fffa",
          mistyrose: "#ffe4e1",
          moccasin: "#ffe4b5",
          navajowhite: "#ffdead",
          navy: "#000080",
          oldlace: "#fdf5e6",
          olive: "#808000",
          olivedrab: "#6b8e23",
          orange: "#ffa500",
          orangered: "#ff4500",
          orchid: "#da70d6",
          palegoldenrod: "#eee8aa",
          palegreen: "#98fb98",
          paleturquoise: "#afeeee",
          palevioletred: "#db7093",
          papayawhip: "#ffefd5",
          peachpuff: "#ffdab9",
          peru: "#cd853f",
          pink: "#ffc0cb",
          plum: "#dda0dd",
          powderblue: "#b0e0e6",
          purple: "#800080",
          rebeccapurple: "#663399",
          red: "#ff0000",
          rosybrown: "#bc8f8f",
          royalblue: "#4169e1",
          saddlebrown: "#8b4513",
          salmon: "#fa8072",
          sandybrown: "#f4a460",
          seagreen: "#2e8b57",
          seashell: "#fff5ee",
          sienna: "#a0522d",
          silver: "#c0c0c0",
          skyblue: "#87ceeb",
          slateblue: "#6a5acd",
          slategray: "#708090",
          slategrey: "#708090",
          snow: "#fffafa",
          springgreen: "#00ff7f",
          steelblue: "#4682b4",
          tan: "#d2b48c",
          teal: "#008080",
          thistle: "#d8bfd8",
          tomato: "#ff6347",
          turquoise: "#40e0d0",
          violet: "#ee82ee",
          wheat: "#f5deb3",
          white: "#ffffff",
          whitesmoke: "#f5f5f5",
          yellow: "#ffff00",
          yellowgreen: "#9acd32",
        };
      function Lt(t, e) {
        return (
          void 0 === e && (e = []),
          (e[0] = ((t >> 16) & 255) / 255),
          (e[1] = ((t >> 8) & 255) / 255),
          (e[2] = (255 & t) / 255),
          e
        );
      }
      function Dt(t) {
        var e = t.toString(16);
        return "#" + ("000000".substring(0, 6 - e.length) + e);
      }
      function Ut(t) {
        return (
          "string" == typeof t &&
            "#" === (t = Nt[t.toLowerCase()] || t)[0] &&
            (t = t.slice(1)),
          parseInt(t, 16)
        );
      }
      var Ft = (function () {
        for (var t = [], e = [], n = 0; n < 32; n++) (t[n] = n), (e[n] = n);
        (t[W.NORMAL_NPM] = W.NORMAL),
          (t[W.ADD_NPM] = W.ADD),
          (t[W.SCREEN_NPM] = W.SCREEN),
          (e[W.NORMAL] = W.NORMAL_NPM),
          (e[W.ADD] = W.ADD_NPM),
          (e[W.SCREEN] = W.SCREEN_NPM);
        var r = [];
        return r.push(e), r.push(t), r;
      })();
      function Bt(t, e) {
        return Ft[e ? 1 : 0][t];
      }
      function Gt(t, e) {
        if (1 === e) return ((255 * e) << 24) + t;
        if (0 === e) return 0;
        var n = (t >> 16) & 255,
          r = (t >> 8) & 255,
          i = 255 & t;
        return (
          ((255 * e) << 24) +
          ((n = (n * e + 0.5) | 0) << 16) +
          ((r = (r * e + 0.5) | 0) << 8) +
          ((i * e + 0.5) | 0)
        );
      }
      function kt(t, e, n, r) {
        return (
          ((n = n || new Float32Array(4))[0] = ((t >> 16) & 255) / 255),
          (n[1] = ((t >> 8) & 255) / 255),
          (n[2] = (255 & t) / 255),
          (r || void 0 === r) && ((n[0] *= e), (n[1] *= e), (n[2] *= e)),
          (n[3] = e),
          n
        );
      }
      function Ht(t) {
        if (4 === t.BYTES_PER_ELEMENT)
          return t instanceof Float32Array
            ? "Float32Array"
            : t instanceof Uint32Array
              ? "Uint32Array"
              : "Int32Array";
        if (2 === t.BYTES_PER_ELEMENT) {
          if (t instanceof Uint16Array) return "Uint16Array";
        } else if (1 === t.BYTES_PER_ELEMENT && t instanceof Uint8Array)
          return "Uint8Array";
        return null;
      }
      function zt(t) {
        return (
          (t += 0 === t ? 1 : 0),
          --t,
          (t |= t >>> 1),
          (t |= t >>> 2),
          (t |= t >>> 4),
          (t |= t >>> 8),
          1 + (t |= t >>> 16)
        );
      }
      function Vt(t) {
        return !(t & (t - 1) || !t);
      }
      function Xt(t) {
        var e = (t > 65535 ? 1 : 0) << 4,
          n = ((t >>>= e) > 255 ? 1 : 0) << 3;
        return (
          (e |= n),
          (e |= n = ((t >>>= n) > 15 ? 1 : 0) << 2),
          (e |= n = ((t >>>= n) > 3 ? 1 : 0) << 1) | ((t >>>= n) >> 1)
        );
      }
      function Wt(t, e, n) {
        var r,
          i = t.length;
        if (!(e >= i || 0 === n)) {
          var o = i - (n = e + n > i ? i - e : n);
          for (r = e; r < o; ++r) t[r] = t[r + n];
          t.length = o;
        }
      }
      function jt(t) {
        return 0 === t ? 0 : t < 0 ? -1 : 1;
      }
      Float32Array, Uint32Array, Int32Array, Uint8Array;
      var Yt = 0;
      function qt() {
        return ++Yt;
      }
      var Kt = {};
      function Zt(t, e, n) {
        if ((void 0 === n && (n = 3), !Kt[e])) {
          var r = new Error().stack;
          void 0 === r
            ? console.warn(
                "PixiJS Deprecation Warning: ",
                e + "\nDeprecated since v" + t,
              )
            : ((r = r.split("\n").splice(n).join("\n")),
              console.groupCollapsed
                ? (console.groupCollapsed(
                    "%cPixiJS Deprecation Warning: %c%s",
                    "color:#614108;background:#fffbe6",
                    "font-weight:normal;color:#614108;background:#fffbe6",
                    e + "\nDeprecated since v" + t,
                  ),
                  console.warn(r),
                  console.groupEnd())
                : (console.warn(
                    "PixiJS Deprecation Warning: ",
                    e + "\nDeprecated since v" + t,
                  ),
                  console.warn(r))),
            (Kt[e] = !0);
        }
      }
      var Qt,
        $t = {},
        Jt = Object.create(null),
        te = Object.create(null),
        ee = (function () {
          function t(t, e, n) {
            (this.canvas = At.ADAPTER.createCanvas()),
              (this.context = this.canvas.getContext("2d")),
              (this.resolution = n || At.RESOLUTION),
              this.resize(t, e);
          }
          return (
            (t.prototype.clear = function () {
              this.context.setTransform(1, 0, 0, 1, 0, 0),
                this.context.clearRect(
                  0,
                  0,
                  this.canvas.width,
                  this.canvas.height,
                );
            }),
            (t.prototype.resize = function (t, e) {
              (this.canvas.width = Math.round(t * this.resolution)),
                (this.canvas.height = Math.round(e * this.resolution));
            }),
            (t.prototype.destroy = function () {
              (this.context = null), (this.canvas = null);
            }),
            Object.defineProperty(t.prototype, "width", {
              get: function () {
                return this.canvas.width;
              },
              set: function (t) {
                this.canvas.width = Math.round(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "height", {
              get: function () {
                return this.canvas.height;
              },
              set: function (t) {
                this.canvas.height = Math.round(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })();
      function ne(t, e) {
        var n = At.RETINA_PREFIX.exec(t);
        return n ? parseFloat(n[1]) : void 0 !== e ? e : 1;
      }
      var re,
        ie = 2 * Math.PI,
        oe = 180 / Math.PI,
        ae = Math.PI / 180;
      !(function (t) {
        (t[(t.POLY = 0)] = "POLY"),
          (t[(t.RECT = 1)] = "RECT"),
          (t[(t.CIRC = 2)] = "CIRC"),
          (t[(t.ELIP = 3)] = "ELIP"),
          (t[(t.RREC = 4)] = "RREC");
      })(re || (re = {}));
      var se = (function () {
          function t(t, e) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              (this.x = 0),
              (this.y = 0),
              (this.x = t),
              (this.y = e);
          }
          return (
            (t.prototype.clone = function () {
              return new t(this.x, this.y);
            }),
            (t.prototype.copyFrom = function (t) {
              return this.set(t.x, t.y), this;
            }),
            (t.prototype.copyTo = function (t) {
              return t.set(this.x, this.y), t;
            }),
            (t.prototype.equals = function (t) {
              return t.x === this.x && t.y === this.y;
            }),
            (t.prototype.set = function (t, e) {
              return (
                void 0 === t && (t = 0),
                void 0 === e && (e = t),
                (this.x = t),
                (this.y = e),
                this
              );
            }),
            (t.prototype.toString = function () {
              return "[@pixi/math:Point x=" + this.x + " y=" + this.y + "]";
            }),
            t
          );
        })(),
        le = [new se(), new se(), new se(), new se()],
        ue = (function () {
          function t(t, e, n, r) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              void 0 === n && (n = 0),
              void 0 === r && (r = 0),
              (this.x = Number(t)),
              (this.y = Number(e)),
              (this.width = Number(n)),
              (this.height = Number(r)),
              (this.type = re.RECT);
          }
          return (
            Object.defineProperty(t.prototype, "left", {
              get: function () {
                return this.x;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "right", {
              get: function () {
                return this.x + this.width;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "top", {
              get: function () {
                return this.y;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "bottom", {
              get: function () {
                return this.y + this.height;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "EMPTY", {
              get: function () {
                return new t(0, 0, 0, 0);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.clone = function () {
              return new t(this.x, this.y, this.width, this.height);
            }),
            (t.prototype.copyFrom = function (t) {
              return (
                (this.x = t.x),
                (this.y = t.y),
                (this.width = t.width),
                (this.height = t.height),
                this
              );
            }),
            (t.prototype.copyTo = function (t) {
              return (
                (t.x = this.x),
                (t.y = this.y),
                (t.width = this.width),
                (t.height = this.height),
                t
              );
            }),
            (t.prototype.contains = function (t, e) {
              return (
                !(this.width <= 0 || this.height <= 0) &&
                t >= this.x &&
                t < this.x + this.width &&
                e >= this.y &&
                e < this.y + this.height
              );
            }),
            (t.prototype.intersects = function (t, e) {
              if (!e) {
                var n = this.x < t.x ? t.x : this.x;
                if ((this.right > t.right ? t.right : this.right) <= n)
                  return !1;
                var r = this.y < t.y ? t.y : this.y;
                return (this.bottom > t.bottom ? t.bottom : this.bottom) > r;
              }
              var i = this.left,
                o = this.right,
                a = this.top,
                s = this.bottom;
              if (o <= i || s <= a) return !1;
              var l = le[0].set(t.left, t.top),
                u = le[1].set(t.left, t.bottom),
                h = le[2].set(t.right, t.top),
                c = le[3].set(t.right, t.bottom);
              if (h.x <= l.x || u.y <= l.y) return !1;
              var d = Math.sign(e.a * e.d - e.b * e.c);
              if (0 === d) return !1;
              if (
                (e.apply(l, l),
                e.apply(u, u),
                e.apply(h, h),
                e.apply(c, c),
                Math.max(l.x, u.x, h.x, c.x) <= i ||
                  Math.min(l.x, u.x, h.x, c.x) >= o ||
                  Math.max(l.y, u.y, h.y, c.y) <= a ||
                  Math.min(l.y, u.y, h.y, c.y) >= s)
              )
                return !1;
              var f = d * (u.y - l.y),
                p = d * (l.x - u.x),
                m = f * i + p * a,
                _ = f * o + p * a,
                g = f * i + p * s,
                v = f * o + p * s;
              if (
                Math.max(m, _, g, v) <= f * l.x + p * l.y ||
                Math.min(m, _, g, v) >= f * c.x + p * c.y
              )
                return !1;
              var y = d * (l.y - h.y),
                E = d * (h.x - l.x),
                T = y * i + E * a,
                b = y * o + E * a,
                x = y * i + E * s,
                S = y * o + E * s;
              return !(
                Math.max(T, b, x, S) <= y * l.x + E * l.y ||
                Math.min(T, b, x, S) >= y * c.x + E * c.y
              );
            }),
            (t.prototype.pad = function (t, e) {
              return (
                void 0 === t && (t = 0),
                void 0 === e && (e = t),
                (this.x -= t),
                (this.y -= e),
                (this.width += 2 * t),
                (this.height += 2 * e),
                this
              );
            }),
            (t.prototype.fit = function (t) {
              var e = Math.max(this.x, t.x),
                n = Math.min(this.x + this.width, t.x + t.width),
                r = Math.max(this.y, t.y),
                i = Math.min(this.y + this.height, t.y + t.height);
              return (
                (this.x = e),
                (this.width = Math.max(n - e, 0)),
                (this.y = r),
                (this.height = Math.max(i - r, 0)),
                this
              );
            }),
            (t.prototype.ceil = function (t, e) {
              void 0 === t && (t = 1), void 0 === e && (e = 0.001);
              var n = Math.ceil((this.x + this.width - e) * t) / t,
                r = Math.ceil((this.y + this.height - e) * t) / t;
              return (
                (this.x = Math.floor((this.x + e) * t) / t),
                (this.y = Math.floor((this.y + e) * t) / t),
                (this.width = n - this.x),
                (this.height = r - this.y),
                this
              );
            }),
            (t.prototype.enlarge = function (t) {
              var e = Math.min(this.x, t.x),
                n = Math.max(this.x + this.width, t.x + t.width),
                r = Math.min(this.y, t.y),
                i = Math.max(this.y + this.height, t.y + t.height);
              return (
                (this.x = e),
                (this.width = n - e),
                (this.y = r),
                (this.height = i - r),
                this
              );
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:Rectangle x=" +
                this.x +
                " y=" +
                this.y +
                " width=" +
                this.width +
                " height=" +
                this.height +
                "]"
              );
            }),
            t
          );
        })(),
        he = (function () {
          function t(t, e, n) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              void 0 === n && (n = 0),
              (this.x = t),
              (this.y = e),
              (this.radius = n),
              (this.type = re.CIRC);
          }
          return (
            (t.prototype.clone = function () {
              return new t(this.x, this.y, this.radius);
            }),
            (t.prototype.contains = function (t, e) {
              if (this.radius <= 0) return !1;
              var n = this.radius * this.radius,
                r = this.x - t,
                i = this.y - e;
              return (r *= r) + (i *= i) <= n;
            }),
            (t.prototype.getBounds = function () {
              return new ue(
                this.x - this.radius,
                this.y - this.radius,
                2 * this.radius,
                2 * this.radius,
              );
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:Circle x=" +
                this.x +
                " y=" +
                this.y +
                " radius=" +
                this.radius +
                "]"
              );
            }),
            t
          );
        })(),
        ce = (function () {
          function t(t, e, n, r) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              void 0 === n && (n = 0),
              void 0 === r && (r = 0),
              (this.x = t),
              (this.y = e),
              (this.width = n),
              (this.height = r),
              (this.type = re.ELIP);
          }
          return (
            (t.prototype.clone = function () {
              return new t(this.x, this.y, this.width, this.height);
            }),
            (t.prototype.contains = function (t, e) {
              if (this.width <= 0 || this.height <= 0) return !1;
              var n = (t - this.x) / this.width,
                r = (e - this.y) / this.height;
              return (n *= n) + (r *= r) <= 1;
            }),
            (t.prototype.getBounds = function () {
              return new ue(
                this.x - this.width,
                this.y - this.height,
                this.width,
                this.height,
              );
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:Ellipse x=" +
                this.x +
                " y=" +
                this.y +
                " width=" +
                this.width +
                " height=" +
                this.height +
                "]"
              );
            }),
            t
          );
        })(),
        de = (function () {
          function t() {
            for (var t = arguments, e = [], n = 0; n < arguments.length; n++)
              e[n] = t[n];
            var r = Array.isArray(e[0]) ? e[0] : e;
            if ("number" != typeof r[0]) {
              for (var i = [], o = 0, a = r.length; o < a; o++)
                i.push(r[o].x, r[o].y);
              r = i;
            }
            (this.points = r), (this.type = re.POLY), (this.closeStroke = !0);
          }
          return (
            (t.prototype.clone = function () {
              var e = new t(this.points.slice());
              return (e.closeStroke = this.closeStroke), e;
            }),
            (t.prototype.contains = function (t, e) {
              for (
                var n = !1, r = this.points.length / 2, i = 0, o = r - 1;
                i < r;
                o = i++
              ) {
                var a = this.points[2 * i],
                  s = this.points[2 * i + 1],
                  l = this.points[2 * o],
                  u = this.points[2 * o + 1];
                s > e != u > e &&
                  t < ((e - s) / (u - s)) * (l - a) + a &&
                  (n = !n);
              }
              return n;
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:PolygoncloseStroke=" +
                this.closeStroke +
                "points=" +
                this.points.reduce(function (t, e) {
                  return t + ", " + e;
                }, "") +
                "]"
              );
            }),
            t
          );
        })(),
        fe = (function () {
          function t(t, e, n, r, i) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              void 0 === n && (n = 0),
              void 0 === r && (r = 0),
              void 0 === i && (i = 20),
              (this.x = t),
              (this.y = e),
              (this.width = n),
              (this.height = r),
              (this.radius = i),
              (this.type = re.RREC);
          }
          return (
            (t.prototype.clone = function () {
              return new t(
                this.x,
                this.y,
                this.width,
                this.height,
                this.radius,
              );
            }),
            (t.prototype.contains = function (t, e) {
              if (this.width <= 0 || this.height <= 0) return !1;
              if (
                t >= this.x &&
                t <= this.x + this.width &&
                e >= this.y &&
                e <= this.y + this.height
              ) {
                var n = Math.max(
                  0,
                  Math.min(this.radius, Math.min(this.width, this.height) / 2),
                );
                if (
                  (e >= this.y + n && e <= this.y + this.height - n) ||
                  (t >= this.x + n && t <= this.x + this.width - n)
                )
                  return !0;
                var r = t - (this.x + n),
                  i = e - (this.y + n),
                  o = n * n;
                if (r * r + i * i <= o) return !0;
                if ((r = t - (this.x + this.width - n)) * r + i * i <= o)
                  return !0;
                if (r * r + (i = e - (this.y + this.height - n)) * i <= o)
                  return !0;
                if ((r = t - (this.x + n)) * r + i * i <= o) return !0;
              }
              return !1;
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:RoundedRectangle x=" +
                this.x +
                " y=" +
                this.y +
                "width=" +
                this.width +
                " height=" +
                this.height +
                " radius=" +
                this.radius +
                "]"
              );
            }),
            t
          );
        })(),
        pe = (function () {
          function t(t, e, n, r) {
            void 0 === n && (n = 0),
              void 0 === r && (r = 0),
              (this._x = n),
              (this._y = r),
              (this.cb = t),
              (this.scope = e);
          }
          return (
            (t.prototype.clone = function (e, n) {
              return (
                void 0 === e && (e = this.cb),
                void 0 === n && (n = this.scope),
                new t(e, n, this._x, this._y)
              );
            }),
            (t.prototype.set = function (t, e) {
              return (
                void 0 === t && (t = 0),
                void 0 === e && (e = t),
                (this._x === t && this._y === e) ||
                  ((this._x = t), (this._y = e), this.cb.call(this.scope)),
                this
              );
            }),
            (t.prototype.copyFrom = function (t) {
              return (
                (this._x === t.x && this._y === t.y) ||
                  ((this._x = t.x), (this._y = t.y), this.cb.call(this.scope)),
                this
              );
            }),
            (t.prototype.copyTo = function (t) {
              return t.set(this._x, this._y), t;
            }),
            (t.prototype.equals = function (t) {
              return t.x === this._x && t.y === this._y;
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:ObservablePoint x=0 y=0 scope=" + this.scope + "]"
              );
            }),
            Object.defineProperty(t.prototype, "x", {
              get: function () {
                return this._x;
              },
              set: function (t) {
                this._x !== t && ((this._x = t), this.cb.call(this.scope));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "y", {
              get: function () {
                return this._y;
              },
              set: function (t) {
                this._y !== t && ((this._y = t), this.cb.call(this.scope));
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        me = (function () {
          function t(t, e, n, r, i, o) {
            void 0 === t && (t = 1),
              void 0 === e && (e = 0),
              void 0 === n && (n = 0),
              void 0 === r && (r = 1),
              void 0 === i && (i = 0),
              void 0 === o && (o = 0),
              (this.array = null),
              (this.a = t),
              (this.b = e),
              (this.c = n),
              (this.d = r),
              (this.tx = i),
              (this.ty = o);
          }
          return (
            (t.prototype.fromArray = function (t) {
              (this.a = t[0]),
                (this.b = t[1]),
                (this.c = t[3]),
                (this.d = t[4]),
                (this.tx = t[2]),
                (this.ty = t[5]);
            }),
            (t.prototype.set = function (t, e, n, r, i, o) {
              return (
                (this.a = t),
                (this.b = e),
                (this.c = n),
                (this.d = r),
                (this.tx = i),
                (this.ty = o),
                this
              );
            }),
            (t.prototype.toArray = function (t, e) {
              this.array || (this.array = new Float32Array(9));
              var n = e || this.array;
              return (
                t
                  ? ((n[0] = this.a),
                    (n[1] = this.b),
                    (n[2] = 0),
                    (n[3] = this.c),
                    (n[4] = this.d),
                    (n[5] = 0),
                    (n[6] = this.tx),
                    (n[7] = this.ty),
                    (n[8] = 1))
                  : ((n[0] = this.a),
                    (n[1] = this.c),
                    (n[2] = this.tx),
                    (n[3] = this.b),
                    (n[4] = this.d),
                    (n[5] = this.ty),
                    (n[6] = 0),
                    (n[7] = 0),
                    (n[8] = 1)),
                n
              );
            }),
            (t.prototype.apply = function (t, e) {
              e = e || new se();
              var n = t.x,
                r = t.y;
              return (
                (e.x = this.a * n + this.c * r + this.tx),
                (e.y = this.b * n + this.d * r + this.ty),
                e
              );
            }),
            (t.prototype.applyInverse = function (t, e) {
              e = e || new se();
              var n = 1 / (this.a * this.d + this.c * -this.b),
                r = t.x,
                i = t.y;
              return (
                (e.x =
                  this.d * n * r +
                  -this.c * n * i +
                  (this.ty * this.c - this.tx * this.d) * n),
                (e.y =
                  this.a * n * i +
                  -this.b * n * r +
                  (-this.ty * this.a + this.tx * this.b) * n),
                e
              );
            }),
            (t.prototype.translate = function (t, e) {
              return (this.tx += t), (this.ty += e), this;
            }),
            (t.prototype.scale = function (t, e) {
              return (
                (this.a *= t),
                (this.d *= e),
                (this.c *= t),
                (this.b *= e),
                (this.tx *= t),
                (this.ty *= e),
                this
              );
            }),
            (t.prototype.rotate = function (t) {
              var e = Math.cos(t),
                n = Math.sin(t),
                r = this.a,
                i = this.c,
                o = this.tx;
              return (
                (this.a = r * e - this.b * n),
                (this.b = r * n + this.b * e),
                (this.c = i * e - this.d * n),
                (this.d = i * n + this.d * e),
                (this.tx = o * e - this.ty * n),
                (this.ty = o * n + this.ty * e),
                this
              );
            }),
            (t.prototype.append = function (t) {
              var e = this.a,
                n = this.b,
                r = this.c,
                i = this.d;
              return (
                (this.a = t.a * e + t.b * r),
                (this.b = t.a * n + t.b * i),
                (this.c = t.c * e + t.d * r),
                (this.d = t.c * n + t.d * i),
                (this.tx = t.tx * e + t.ty * r + this.tx),
                (this.ty = t.tx * n + t.ty * i + this.ty),
                this
              );
            }),
            (t.prototype.setTransform = function (t, e, n, r, i, o, a, s, l) {
              return (
                (this.a = Math.cos(a + l) * i),
                (this.b = Math.sin(a + l) * i),
                (this.c = -Math.sin(a - s) * o),
                (this.d = Math.cos(a - s) * o),
                (this.tx = t - (n * this.a + r * this.c)),
                (this.ty = e - (n * this.b + r * this.d)),
                this
              );
            }),
            (t.prototype.prepend = function (t) {
              var e = this.tx;
              if (1 !== t.a || 0 !== t.b || 0 !== t.c || 1 !== t.d) {
                var n = this.a,
                  r = this.c;
                (this.a = n * t.a + this.b * t.c),
                  (this.b = n * t.b + this.b * t.d),
                  (this.c = r * t.a + this.d * t.c),
                  (this.d = r * t.b + this.d * t.d);
              }
              return (
                (this.tx = e * t.a + this.ty * t.c + t.tx),
                (this.ty = e * t.b + this.ty * t.d + t.ty),
                this
              );
            }),
            (t.prototype.decompose = function (t) {
              var e = this.a,
                n = this.b,
                r = this.c,
                i = this.d,
                o = t.pivot,
                a = -Math.atan2(-r, i),
                s = Math.atan2(n, e),
                l = Math.abs(a + s);
              return (
                l < 1e-5 || Math.abs(ie - l) < 1e-5
                  ? ((t.rotation = s), (t.skew.x = t.skew.y = 0))
                  : ((t.rotation = 0), (t.skew.x = a), (t.skew.y = s)),
                (t.scale.x = Math.sqrt(e * e + n * n)),
                (t.scale.y = Math.sqrt(r * r + i * i)),
                (t.position.x = this.tx + (o.x * e + o.y * r)),
                (t.position.y = this.ty + (o.x * n + o.y * i)),
                t
              );
            }),
            (t.prototype.invert = function () {
              var t = this.a,
                e = this.b,
                n = this.c,
                r = this.d,
                i = this.tx,
                o = t * r - e * n;
              return (
                (this.a = r / o),
                (this.b = -e / o),
                (this.c = -n / o),
                (this.d = t / o),
                (this.tx = (n * this.ty - r * i) / o),
                (this.ty = -(t * this.ty - e * i) / o),
                this
              );
            }),
            (t.prototype.identity = function () {
              return (
                (this.a = 1),
                (this.b = 0),
                (this.c = 0),
                (this.d = 1),
                (this.tx = 0),
                (this.ty = 0),
                this
              );
            }),
            (t.prototype.clone = function () {
              var e = new t();
              return (
                (e.a = this.a),
                (e.b = this.b),
                (e.c = this.c),
                (e.d = this.d),
                (e.tx = this.tx),
                (e.ty = this.ty),
                e
              );
            }),
            (t.prototype.copyTo = function (t) {
              return (
                (t.a = this.a),
                (t.b = this.b),
                (t.c = this.c),
                (t.d = this.d),
                (t.tx = this.tx),
                (t.ty = this.ty),
                t
              );
            }),
            (t.prototype.copyFrom = function (t) {
              return (
                (this.a = t.a),
                (this.b = t.b),
                (this.c = t.c),
                (this.d = t.d),
                (this.tx = t.tx),
                (this.ty = t.ty),
                this
              );
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:Matrix a=" +
                this.a +
                " b=" +
                this.b +
                " c=" +
                this.c +
                " d=" +
                this.d +
                " tx=" +
                this.tx +
                " ty=" +
                this.ty +
                "]"
              );
            }),
            Object.defineProperty(t, "IDENTITY", {
              get: function () {
                return new t();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "TEMP_MATRIX", {
              get: function () {
                return new t();
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        _e = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1],
        ge = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1],
        ve = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1],
        ye = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1],
        Ee = [],
        Te = [],
        be = Math.sign;
      !(function () {
        for (var t = 0; t < 16; t++) {
          var e = [];
          Ee.push(e);
          for (var n = 0; n < 16; n++)
            for (
              var r = be(_e[t] * _e[n] + ve[t] * ge[n]),
                i = be(ge[t] * _e[n] + ye[t] * ge[n]),
                o = be(_e[t] * ve[n] + ve[t] * ye[n]),
                a = be(ge[t] * ve[n] + ye[t] * ye[n]),
                s = 0;
              s < 16;
              s++
            )
              if (_e[s] === r && ge[s] === i && ve[s] === o && ye[s] === a) {
                e.push(s);
                break;
              }
        }
        for (t = 0; t < 16; t++) {
          var l = new me();
          l.set(_e[t], ge[t], ve[t], ye[t], 0, 0), Te.push(l);
        }
      })();
      var xe = {
          E: 0,
          SE: 1,
          S: 2,
          SW: 3,
          W: 4,
          NW: 5,
          N: 6,
          NE: 7,
          MIRROR_VERTICAL: 8,
          MAIN_DIAGONAL: 10,
          MIRROR_HORIZONTAL: 12,
          REVERSE_DIAGONAL: 14,
          uX: function (t) {
            return _e[t];
          },
          uY: function (t) {
            return ge[t];
          },
          vX: function (t) {
            return ve[t];
          },
          vY: function (t) {
            return ye[t];
          },
          inv: function (t) {
            return 8 & t ? 15 & t : 7 & -t;
          },
          add: function (t, e) {
            return Ee[t][e];
          },
          sub: function (t, e) {
            return Ee[t][xe.inv(e)];
          },
          rotate180: function (t) {
            return 4 ^ t;
          },
          isVertical: function (t) {
            return 2 == (3 & t);
          },
          byDirection: function (t, e) {
            return 2 * Math.abs(t) <= Math.abs(e)
              ? e >= 0
                ? xe.S
                : xe.N
              : 2 * Math.abs(e) <= Math.abs(t)
                ? t > 0
                  ? xe.E
                  : xe.W
                : e > 0
                  ? t > 0
                    ? xe.SE
                    : xe.SW
                  : t > 0
                    ? xe.NE
                    : xe.NW;
          },
          matrixAppendRotationInv: function (t, e, n, r) {
            void 0 === n && (n = 0), void 0 === r && (r = 0);
            var i = Te[xe.inv(e)];
            (i.tx = n), (i.ty = r), t.append(i);
          },
        },
        Se = (function () {
          function t() {
            (this.worldTransform = new me()),
              (this.localTransform = new me()),
              (this.position = new pe(this.onChange, this, 0, 0)),
              (this.scale = new pe(this.onChange, this, 1, 1)),
              (this.pivot = new pe(this.onChange, this, 0, 0)),
              (this.skew = new pe(this.updateSkew, this, 0, 0)),
              (this._rotation = 0),
              (this._cx = 1),
              (this._sx = 0),
              (this._cy = 0),
              (this._sy = 1),
              (this._localID = 0),
              (this._currentLocalID = 0),
              (this._worldID = 0),
              (this._parentID = 0);
          }
          return (
            (t.prototype.onChange = function () {
              this._localID++;
            }),
            (t.prototype.updateSkew = function () {
              (this._cx = Math.cos(this._rotation + this.skew.y)),
                (this._sx = Math.sin(this._rotation + this.skew.y)),
                (this._cy = -Math.sin(this._rotation - this.skew.x)),
                (this._sy = Math.cos(this._rotation - this.skew.x)),
                this._localID++;
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:Transform position=(" +
                this.position.x +
                ", " +
                this.position.y +
                ") rotation=" +
                this.rotation +
                " scale=(" +
                this.scale.x +
                ", " +
                this.scale.y +
                ") skew=(" +
                this.skew.x +
                ", " +
                this.skew.y +
                ") ]"
              );
            }),
            (t.prototype.updateLocalTransform = function () {
              var t = this.localTransform;
              this._localID !== this._currentLocalID &&
                ((t.a = this._cx * this.scale.x),
                (t.b = this._sx * this.scale.x),
                (t.c = this._cy * this.scale.y),
                (t.d = this._sy * this.scale.y),
                (t.tx =
                  this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c)),
                (t.ty =
                  this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d)),
                (this._currentLocalID = this._localID),
                (this._parentID = -1));
            }),
            (t.prototype.updateTransform = function (t) {
              var e = this.localTransform;
              if (
                (this._localID !== this._currentLocalID &&
                  ((e.a = this._cx * this.scale.x),
                  (e.b = this._sx * this.scale.x),
                  (e.c = this._cy * this.scale.y),
                  (e.d = this._sy * this.scale.y),
                  (e.tx =
                    this.position.x -
                    (this.pivot.x * e.a + this.pivot.y * e.c)),
                  (e.ty =
                    this.position.y -
                    (this.pivot.x * e.b + this.pivot.y * e.d)),
                  (this._currentLocalID = this._localID),
                  (this._parentID = -1)),
                this._parentID !== t._worldID)
              ) {
                var n = t.worldTransform,
                  r = this.worldTransform;
                (r.a = e.a * n.a + e.b * n.c),
                  (r.b = e.a * n.b + e.b * n.d),
                  (r.c = e.c * n.a + e.d * n.c),
                  (r.d = e.c * n.b + e.d * n.d),
                  (r.tx = e.tx * n.a + e.ty * n.c + n.tx),
                  (r.ty = e.tx * n.b + e.ty * n.d + n.ty),
                  (this._parentID = t._worldID),
                  this._worldID++;
              }
            }),
            (t.prototype.setFromMatrix = function (t) {
              t.decompose(this), this._localID++;
            }),
            Object.defineProperty(t.prototype, "rotation", {
              get: function () {
                return this._rotation;
              },
              set: function (t) {
                this._rotation !== t &&
                  ((this._rotation = t), this.updateSkew());
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.IDENTITY = new t()),
            t
          );
        })();
      At.SORTABLE_CHILDREN = !1;
      var Me = (function () {
          function t() {
            (this.minX = 1 / 0),
              (this.minY = 1 / 0),
              (this.maxX = -1 / 0),
              (this.maxY = -1 / 0),
              (this.rect = null),
              (this.updateID = -1);
          }
          return (
            (t.prototype.isEmpty = function () {
              return this.minX > this.maxX || this.minY > this.maxY;
            }),
            (t.prototype.clear = function () {
              (this.minX = 1 / 0),
                (this.minY = 1 / 0),
                (this.maxX = -1 / 0),
                (this.maxY = -1 / 0);
            }),
            (t.prototype.getRectangle = function (t) {
              return this.minX > this.maxX || this.minY > this.maxY
                ? ue.EMPTY
                : (((t = t || new ue(0, 0, 1, 1)).x = this.minX),
                  (t.y = this.minY),
                  (t.width = this.maxX - this.minX),
                  (t.height = this.maxY - this.minY),
                  t);
            }),
            (t.prototype.addPoint = function (t) {
              (this.minX = Math.min(this.minX, t.x)),
                (this.maxX = Math.max(this.maxX, t.x)),
                (this.minY = Math.min(this.minY, t.y)),
                (this.maxY = Math.max(this.maxY, t.y));
            }),
            (t.prototype.addPointMatrix = function (t, e) {
              var n = t.a,
                r = t.b,
                i = t.c,
                o = t.d,
                a = t.tx,
                s = t.ty,
                l = n * e.x + i * e.y + a,
                u = r * e.x + o * e.y + s;
              (this.minX = Math.min(this.minX, l)),
                (this.maxX = Math.max(this.maxX, l)),
                (this.minY = Math.min(this.minY, u)),
                (this.maxY = Math.max(this.maxY, u));
            }),
            (t.prototype.addQuad = function (t) {
              var e = this.minX,
                n = this.minY,
                r = this.maxX,
                i = this.maxY,
                o = t[0],
                a = t[1];
              (e = o < e ? o : e),
                (n = a < n ? a : n),
                (r = o > r ? o : r),
                (i = a > i ? a : i),
                (e = (o = t[2]) < e ? o : e),
                (n = (a = t[3]) < n ? a : n),
                (r = o > r ? o : r),
                (i = a > i ? a : i),
                (e = (o = t[4]) < e ? o : e),
                (n = (a = t[5]) < n ? a : n),
                (r = o > r ? o : r),
                (i = a > i ? a : i),
                (e = (o = t[6]) < e ? o : e),
                (n = (a = t[7]) < n ? a : n),
                (r = o > r ? o : r),
                (i = a > i ? a : i),
                (this.minX = e),
                (this.minY = n),
                (this.maxX = r),
                (this.maxY = i);
            }),
            (t.prototype.addFrame = function (t, e, n, r, i) {
              this.addFrameMatrix(t.worldTransform, e, n, r, i);
            }),
            (t.prototype.addFrameMatrix = function (t, e, n, r, i) {
              var o = t.a,
                a = t.b,
                s = t.c,
                l = t.d,
                u = t.tx,
                h = t.ty,
                c = this.minX,
                d = this.minY,
                f = this.maxX,
                p = this.maxY,
                m = o * e + s * n + u,
                _ = a * e + l * n + h;
              (c = m < c ? m : c),
                (d = _ < d ? _ : d),
                (f = m > f ? m : f),
                (p = _ > p ? _ : p),
                (c = (m = o * r + s * n + u) < c ? m : c),
                (d = (_ = a * r + l * n + h) < d ? _ : d),
                (f = m > f ? m : f),
                (p = _ > p ? _ : p),
                (c = (m = o * e + s * i + u) < c ? m : c),
                (d = (_ = a * e + l * i + h) < d ? _ : d),
                (f = m > f ? m : f),
                (p = _ > p ? _ : p),
                (c = (m = o * r + s * i + u) < c ? m : c),
                (d = (_ = a * r + l * i + h) < d ? _ : d),
                (f = m > f ? m : f),
                (p = _ > p ? _ : p),
                (this.minX = c),
                (this.minY = d),
                (this.maxX = f),
                (this.maxY = p);
            }),
            (t.prototype.addVertexData = function (t, e, n) {
              for (
                var r = this.minX,
                  i = this.minY,
                  o = this.maxX,
                  a = this.maxY,
                  s = e;
                s < n;
                s += 2
              ) {
                var l = t[s],
                  u = t[s + 1];
                (r = l < r ? l : r),
                  (i = u < i ? u : i),
                  (o = l > o ? l : o),
                  (a = u > a ? u : a);
              }
              (this.minX = r),
                (this.minY = i),
                (this.maxX = o),
                (this.maxY = a);
            }),
            (t.prototype.addVertices = function (t, e, n, r) {
              this.addVerticesMatrix(t.worldTransform, e, n, r);
            }),
            (t.prototype.addVerticesMatrix = function (t, e, n, r, i, o) {
              void 0 === i && (i = 0), void 0 === o && (o = i);
              for (
                var a = t.a,
                  s = t.b,
                  l = t.c,
                  u = t.d,
                  h = t.tx,
                  c = t.ty,
                  d = this.minX,
                  f = this.minY,
                  p = this.maxX,
                  m = this.maxY,
                  _ = n;
                _ < r;
                _ += 2
              ) {
                var g = e[_],
                  v = e[_ + 1],
                  y = a * g + l * v + h,
                  E = u * v + s * g + c;
                (d = Math.min(d, y - i)),
                  (p = Math.max(p, y + i)),
                  (f = Math.min(f, E - o)),
                  (m = Math.max(m, E + o));
              }
              (this.minX = d),
                (this.minY = f),
                (this.maxX = p),
                (this.maxY = m);
            }),
            (t.prototype.addBounds = function (t) {
              var e = this.minX,
                n = this.minY,
                r = this.maxX,
                i = this.maxY;
              (this.minX = t.minX < e ? t.minX : e),
                (this.minY = t.minY < n ? t.minY : n),
                (this.maxX = t.maxX > r ? t.maxX : r),
                (this.maxY = t.maxY > i ? t.maxY : i);
            }),
            (t.prototype.addBoundsMask = function (t, e) {
              var n = t.minX > e.minX ? t.minX : e.minX,
                r = t.minY > e.minY ? t.minY : e.minY,
                i = t.maxX < e.maxX ? t.maxX : e.maxX,
                o = t.maxY < e.maxY ? t.maxY : e.maxY;
              if (n <= i && r <= o) {
                var a = this.minX,
                  s = this.minY,
                  l = this.maxX,
                  u = this.maxY;
                (this.minX = n < a ? n : a),
                  (this.minY = r < s ? r : s),
                  (this.maxX = i > l ? i : l),
                  (this.maxY = o > u ? o : u);
              }
            }),
            (t.prototype.addBoundsMatrix = function (t, e) {
              this.addFrameMatrix(e, t.minX, t.minY, t.maxX, t.maxY);
            }),
            (t.prototype.addBoundsArea = function (t, e) {
              var n = t.minX > e.x ? t.minX : e.x,
                r = t.minY > e.y ? t.minY : e.y,
                i = t.maxX < e.x + e.width ? t.maxX : e.x + e.width,
                o = t.maxY < e.y + e.height ? t.maxY : e.y + e.height;
              if (n <= i && r <= o) {
                var a = this.minX,
                  s = this.minY,
                  l = this.maxX,
                  u = this.maxY;
                (this.minX = n < a ? n : a),
                  (this.minY = r < s ? r : s),
                  (this.maxX = i > l ? i : l),
                  (this.maxY = o > u ? o : u);
              }
            }),
            (t.prototype.pad = function (t, e) {
              void 0 === t && (t = 0),
                void 0 === e && (e = t),
                this.isEmpty() ||
                  ((this.minX -= t),
                  (this.maxX += t),
                  (this.minY -= e),
                  (this.maxY += e));
            }),
            (t.prototype.addFramePad = function (t, e, n, r, i, o) {
              (t -= i),
                (e -= o),
                (n += i),
                (r += o),
                (this.minX = this.minX < t ? this.minX : t),
                (this.maxX = this.maxX > n ? this.maxX : n),
                (this.minY = this.minY < e ? this.minY : e),
                (this.maxY = this.maxY > r ? this.maxY : r);
            }),
            t
          );
        })(),
        Ae = function (t, e) {
          return (
            (Ae =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            Ae(t, e)
          );
        };
      function Re(t, e) {
        function n() {
          this.constructor = t;
        }
        Ae(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n()));
      }
      var we,
        Pe,
        Ie,
        Oe,
        Ce,
        Ne,
        Le,
        De,
        Ue,
        Fe,
        Be,
        Ge,
        ke,
        He,
        ze,
        Ve,
        Xe,
        We,
        je,
        Ye,
        qe = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e.tempDisplayObjectParent = null),
              (e.transform = new Se()),
              (e.alpha = 1),
              (e.visible = !0),
              (e.renderable = !0),
              (e.cullable = !1),
              (e.cullArea = null),
              (e.parent = null),
              (e.worldAlpha = 1),
              (e._lastSortedIndex = 0),
              (e._zIndex = 0),
              (e.filterArea = null),
              (e.filters = null),
              (e._enabledFilters = null),
              (e._bounds = new Me()),
              (e._localBounds = null),
              (e._boundsID = 0),
              (e._boundsRect = null),
              (e._localBoundsRect = null),
              (e._mask = null),
              (e._maskRefCount = 0),
              (e._destroyed = !1),
              (e.isSprite = !1),
              (e.isMask = !1),
              e
            );
          }
          return (
            Re(e, t),
            (e.mixin = function (t) {
              for (var n = Object.keys(t), r = 0; r < n.length; ++r) {
                var i = n[r];
                Object.defineProperty(
                  e.prototype,
                  i,
                  Object.getOwnPropertyDescriptor(t, i),
                );
              }
            }),
            Object.defineProperty(e.prototype, "destroyed", {
              get: function () {
                return this._destroyed;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype._recursivePostUpdateTransform = function () {
              this.parent
                ? (this.parent._recursivePostUpdateTransform(),
                  this.transform.updateTransform(this.parent.transform))
                : this.transform.updateTransform(
                    this._tempDisplayObjectParent.transform,
                  );
            }),
            (e.prototype.updateTransform = function () {
              this._boundsID++,
                this.transform.updateTransform(this.parent.transform),
                (this.worldAlpha = this.alpha * this.parent.worldAlpha);
            }),
            (e.prototype.getBounds = function (t, e) {
              return (
                t ||
                  (this.parent
                    ? (this._recursivePostUpdateTransform(),
                      this.updateTransform())
                    : ((this.parent = this._tempDisplayObjectParent),
                      this.updateTransform(),
                      (this.parent = null))),
                this._bounds.updateID !== this._boundsID &&
                  (this.calculateBounds(),
                  (this._bounds.updateID = this._boundsID)),
                e ||
                  (this._boundsRect || (this._boundsRect = new ue()),
                  (e = this._boundsRect)),
                this._bounds.getRectangle(e)
              );
            }),
            (e.prototype.getLocalBounds = function (t) {
              t ||
                (this._localBoundsRect || (this._localBoundsRect = new ue()),
                (t = this._localBoundsRect)),
                this._localBounds || (this._localBounds = new Me());
              var e = this.transform,
                n = this.parent;
              (this.parent = null),
                (this.transform = this._tempDisplayObjectParent.transform);
              var r = this._bounds,
                i = this._boundsID;
              this._bounds = this._localBounds;
              var o = this.getBounds(!1, t);
              return (
                (this.parent = n),
                (this.transform = e),
                (this._bounds = r),
                (this._bounds.updateID += this._boundsID - i),
                o
              );
            }),
            (e.prototype.toGlobal = function (t, e, n) {
              return (
                void 0 === n && (n = !1),
                n ||
                  (this._recursivePostUpdateTransform(),
                  this.parent
                    ? this.displayObjectUpdateTransform()
                    : ((this.parent = this._tempDisplayObjectParent),
                      this.displayObjectUpdateTransform(),
                      (this.parent = null))),
                this.worldTransform.apply(t, e)
              );
            }),
            (e.prototype.toLocal = function (t, e, n, r) {
              return (
                e && (t = e.toGlobal(t, n, r)),
                r ||
                  (this._recursivePostUpdateTransform(),
                  this.parent
                    ? this.displayObjectUpdateTransform()
                    : ((this.parent = this._tempDisplayObjectParent),
                      this.displayObjectUpdateTransform(),
                      (this.parent = null))),
                this.worldTransform.applyInverse(t, n)
              );
            }),
            (e.prototype.setParent = function (t) {
              if (!t || !t.addChild)
                throw new Error("setParent: Argument must be a Container");
              return t.addChild(this), t;
            }),
            (e.prototype.setTransform = function (t, e, n, r, i, o, a, s, l) {
              return (
                void 0 === t && (t = 0),
                void 0 === e && (e = 0),
                void 0 === n && (n = 1),
                void 0 === r && (r = 1),
                void 0 === i && (i = 0),
                void 0 === o && (o = 0),
                void 0 === a && (a = 0),
                void 0 === s && (s = 0),
                void 0 === l && (l = 0),
                (this.position.x = t),
                (this.position.y = e),
                (this.scale.x = n || 1),
                (this.scale.y = r || 1),
                (this.rotation = i),
                (this.skew.x = o),
                (this.skew.y = a),
                (this.pivot.x = s),
                (this.pivot.y = l),
                this
              );
            }),
            (e.prototype.destroy = function (t) {
              this.parent && this.parent.removeChild(this),
                (this._destroyed = !0),
                (this.transform = null),
                (this.parent = null),
                (this._bounds = null),
                (this.mask = null),
                (this.cullArea = null),
                (this.filters = null),
                (this.filterArea = null),
                (this.hitArea = null),
                (this.interactive = !1),
                (this.interactiveChildren = !1),
                this.emit("destroyed"),
                this.removeAllListeners();
            }),
            Object.defineProperty(e.prototype, "_tempDisplayObjectParent", {
              get: function () {
                return (
                  null === this.tempDisplayObjectParent &&
                    (this.tempDisplayObjectParent = new Ke()),
                  this.tempDisplayObjectParent
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.enableTempParent = function () {
              var t = this.parent;
              return (this.parent = this._tempDisplayObjectParent), t;
            }),
            (e.prototype.disableTempParent = function (t) {
              this.parent = t;
            }),
            Object.defineProperty(e.prototype, "x", {
              get: function () {
                return this.position.x;
              },
              set: function (t) {
                this.transform.position.x = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "y", {
              get: function () {
                return this.position.y;
              },
              set: function (t) {
                this.transform.position.y = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "worldTransform", {
              get: function () {
                return this.transform.worldTransform;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "localTransform", {
              get: function () {
                return this.transform.localTransform;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "position", {
              get: function () {
                return this.transform.position;
              },
              set: function (t) {
                this.transform.position.copyFrom(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "scale", {
              get: function () {
                return this.transform.scale;
              },
              set: function (t) {
                this.transform.scale.copyFrom(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "pivot", {
              get: function () {
                return this.transform.pivot;
              },
              set: function (t) {
                this.transform.pivot.copyFrom(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "skew", {
              get: function () {
                return this.transform.skew;
              },
              set: function (t) {
                this.transform.skew.copyFrom(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "rotation", {
              get: function () {
                return this.transform.rotation;
              },
              set: function (t) {
                this.transform.rotation = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "angle", {
              get: function () {
                return this.transform.rotation * oe;
              },
              set: function (t) {
                this.transform.rotation = t * ae;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "zIndex", {
              get: function () {
                return this._zIndex;
              },
              set: function (t) {
                (this._zIndex = t), this.parent && (this.parent.sortDirty = !0);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "worldVisible", {
              get: function () {
                var t = this;
                do {
                  if (!t.visible) return !1;
                  t = t.parent;
                } while (t);
                return !0;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "mask", {
              get: function () {
                return this._mask;
              },
              set: function (t) {
                var e;
                this._mask !== t &&
                  (this._mask &&
                    (e = this._mask.isMaskData
                      ? this._mask.maskObject
                      : this._mask) &&
                    (e._maskRefCount--,
                    0 === e._maskRefCount &&
                      ((e.renderable = !0), (e.isMask = !1))),
                  (this._mask = t),
                  this._mask &&
                    (e = this._mask.isMaskData
                      ? this._mask.maskObject
                      : this._mask) &&
                    (0 === e._maskRefCount &&
                      ((e.renderable = !1), (e.isMask = !0)),
                    e._maskRefCount++));
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Rt),
        Ke = (function (t) {
          function e() {
            var e = (null !== t && t.apply(this, arguments)) || this;
            return (e.sortDirty = null), e;
          }
          return Re(e, t), e;
        })(qe);
      function Ze(t, e) {
        return t.zIndex === e.zIndex
          ? t._lastSortedIndex - e._lastSortedIndex
          : t.zIndex - e.zIndex;
      }
      (qe.prototype.displayObjectUpdateTransform =
        qe.prototype.updateTransform),
        (function (t) {
          (t[(t.WEBGL_LEGACY = 0)] = "WEBGL_LEGACY"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.WEBGL2 = 2)] = "WEBGL2");
        })(we || (we = {})),
        (function (t) {
          (t[(t.UNKNOWN = 0)] = "UNKNOWN"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.CANVAS = 2)] = "CANVAS");
        })(Pe || (Pe = {})),
        (function (t) {
          (t[(t.COLOR = 16384)] = "COLOR"),
            (t[(t.DEPTH = 256)] = "DEPTH"),
            (t[(t.STENCIL = 1024)] = "STENCIL");
        })(Ie || (Ie = {})),
        (function (t) {
          (t[(t.NORMAL = 0)] = "NORMAL"),
            (t[(t.ADD = 1)] = "ADD"),
            (t[(t.MULTIPLY = 2)] = "MULTIPLY"),
            (t[(t.SCREEN = 3)] = "SCREEN"),
            (t[(t.OVERLAY = 4)] = "OVERLAY"),
            (t[(t.DARKEN = 5)] = "DARKEN"),
            (t[(t.LIGHTEN = 6)] = "LIGHTEN"),
            (t[(t.COLOR_DODGE = 7)] = "COLOR_DODGE"),
            (t[(t.COLOR_BURN = 8)] = "COLOR_BURN"),
            (t[(t.HARD_LIGHT = 9)] = "HARD_LIGHT"),
            (t[(t.SOFT_LIGHT = 10)] = "SOFT_LIGHT"),
            (t[(t.DIFFERENCE = 11)] = "DIFFERENCE"),
            (t[(t.EXCLUSION = 12)] = "EXCLUSION"),
            (t[(t.HUE = 13)] = "HUE"),
            (t[(t.SATURATION = 14)] = "SATURATION"),
            (t[(t.COLOR = 15)] = "COLOR"),
            (t[(t.LUMINOSITY = 16)] = "LUMINOSITY"),
            (t[(t.NORMAL_NPM = 17)] = "NORMAL_NPM"),
            (t[(t.ADD_NPM = 18)] = "ADD_NPM"),
            (t[(t.SCREEN_NPM = 19)] = "SCREEN_NPM"),
            (t[(t.NONE = 20)] = "NONE"),
            (t[(t.SRC_OVER = 0)] = "SRC_OVER"),
            (t[(t.SRC_IN = 21)] = "SRC_IN"),
            (t[(t.SRC_OUT = 22)] = "SRC_OUT"),
            (t[(t.SRC_ATOP = 23)] = "SRC_ATOP"),
            (t[(t.DST_OVER = 24)] = "DST_OVER"),
            (t[(t.DST_IN = 25)] = "DST_IN"),
            (t[(t.DST_OUT = 26)] = "DST_OUT"),
            (t[(t.DST_ATOP = 27)] = "DST_ATOP"),
            (t[(t.ERASE = 26)] = "ERASE"),
            (t[(t.SUBTRACT = 28)] = "SUBTRACT"),
            (t[(t.XOR = 29)] = "XOR");
        })(Oe || (Oe = {})),
        (function (t) {
          (t[(t.POINTS = 0)] = "POINTS"),
            (t[(t.LINES = 1)] = "LINES"),
            (t[(t.LINE_LOOP = 2)] = "LINE_LOOP"),
            (t[(t.LINE_STRIP = 3)] = "LINE_STRIP"),
            (t[(t.TRIANGLES = 4)] = "TRIANGLES"),
            (t[(t.TRIANGLE_STRIP = 5)] = "TRIANGLE_STRIP"),
            (t[(t.TRIANGLE_FAN = 6)] = "TRIANGLE_FAN");
        })(Ce || (Ce = {})),
        (function (t) {
          (t[(t.RGBA = 6408)] = "RGBA"),
            (t[(t.RGB = 6407)] = "RGB"),
            (t[(t.RG = 33319)] = "RG"),
            (t[(t.RED = 6403)] = "RED"),
            (t[(t.RGBA_INTEGER = 36249)] = "RGBA_INTEGER"),
            (t[(t.RGB_INTEGER = 36248)] = "RGB_INTEGER"),
            (t[(t.RG_INTEGER = 33320)] = "RG_INTEGER"),
            (t[(t.RED_INTEGER = 36244)] = "RED_INTEGER"),
            (t[(t.ALPHA = 6406)] = "ALPHA"),
            (t[(t.LUMINANCE = 6409)] = "LUMINANCE"),
            (t[(t.LUMINANCE_ALPHA = 6410)] = "LUMINANCE_ALPHA"),
            (t[(t.DEPTH_COMPONENT = 6402)] = "DEPTH_COMPONENT"),
            (t[(t.DEPTH_STENCIL = 34041)] = "DEPTH_STENCIL");
        })(Ne || (Ne = {})),
        (function (t) {
          (t[(t.TEXTURE_2D = 3553)] = "TEXTURE_2D"),
            (t[(t.TEXTURE_CUBE_MAP = 34067)] = "TEXTURE_CUBE_MAP"),
            (t[(t.TEXTURE_2D_ARRAY = 35866)] = "TEXTURE_2D_ARRAY"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069)] =
              "TEXTURE_CUBE_MAP_POSITIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Z"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Z");
        })(Le || (Le = {})),
        (function (t) {
          (t[(t.UNSIGNED_BYTE = 5121)] = "UNSIGNED_BYTE"),
            (t[(t.UNSIGNED_SHORT = 5123)] = "UNSIGNED_SHORT"),
            (t[(t.UNSIGNED_SHORT_5_6_5 = 33635)] = "UNSIGNED_SHORT_5_6_5"),
            (t[(t.UNSIGNED_SHORT_4_4_4_4 = 32819)] = "UNSIGNED_SHORT_4_4_4_4"),
            (t[(t.UNSIGNED_SHORT_5_5_5_1 = 32820)] = "UNSIGNED_SHORT_5_5_5_1"),
            (t[(t.UNSIGNED_INT = 5125)] = "UNSIGNED_INT"),
            (t[(t.UNSIGNED_INT_10F_11F_11F_REV = 35899)] =
              "UNSIGNED_INT_10F_11F_11F_REV"),
            (t[(t.UNSIGNED_INT_2_10_10_10_REV = 33640)] =
              "UNSIGNED_INT_2_10_10_10_REV"),
            (t[(t.UNSIGNED_INT_24_8 = 34042)] = "UNSIGNED_INT_24_8"),
            (t[(t.UNSIGNED_INT_5_9_9_9_REV = 35902)] =
              "UNSIGNED_INT_5_9_9_9_REV"),
            (t[(t.BYTE = 5120)] = "BYTE"),
            (t[(t.SHORT = 5122)] = "SHORT"),
            (t[(t.INT = 5124)] = "INT"),
            (t[(t.FLOAT = 5126)] = "FLOAT"),
            (t[(t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269)] =
              "FLOAT_32_UNSIGNED_INT_24_8_REV"),
            (t[(t.HALF_FLOAT = 36193)] = "HALF_FLOAT");
        })(De || (De = {})),
        (function (t) {
          (t[(t.FLOAT = 0)] = "FLOAT"),
            (t[(t.INT = 1)] = "INT"),
            (t[(t.UINT = 2)] = "UINT");
        })(Ue || (Ue = {})),
        (function (t) {
          (t[(t.NEAREST = 0)] = "NEAREST"), (t[(t.LINEAR = 1)] = "LINEAR");
        })(Fe || (Fe = {})),
        (function (t) {
          (t[(t.CLAMP = 33071)] = "CLAMP"),
            (t[(t.REPEAT = 10497)] = "REPEAT"),
            (t[(t.MIRRORED_REPEAT = 33648)] = "MIRRORED_REPEAT");
        })(Be || (Be = {})),
        (function (t) {
          (t[(t.OFF = 0)] = "OFF"),
            (t[(t.POW2 = 1)] = "POW2"),
            (t[(t.ON = 2)] = "ON"),
            (t[(t.ON_MANUAL = 3)] = "ON_MANUAL");
        })(Ge || (Ge = {})),
        (function (t) {
          (t[(t.NPM = 0)] = "NPM"),
            (t[(t.UNPACK = 1)] = "UNPACK"),
            (t[(t.PMA = 2)] = "PMA"),
            (t[(t.NO_PREMULTIPLIED_ALPHA = 0)] = "NO_PREMULTIPLIED_ALPHA"),
            (t[(t.PREMULTIPLY_ON_UPLOAD = 1)] = "PREMULTIPLY_ON_UPLOAD"),
            (t[(t.PREMULTIPLY_ALPHA = 2)] = "PREMULTIPLY_ALPHA"),
            (t[(t.PREMULTIPLIED_ALPHA = 2)] = "PREMULTIPLIED_ALPHA");
        })(ke || (ke = {})),
        (function (t) {
          (t[(t.NO = 0)] = "NO"),
            (t[(t.YES = 1)] = "YES"),
            (t[(t.AUTO = 2)] = "AUTO"),
            (t[(t.BLEND = 0)] = "BLEND"),
            (t[(t.CLEAR = 1)] = "CLEAR"),
            (t[(t.BLIT = 2)] = "BLIT");
        })(He || (He = {})),
        (function (t) {
          (t[(t.AUTO = 0)] = "AUTO"), (t[(t.MANUAL = 1)] = "MANUAL");
        })(ze || (ze = {})),
        (function (t) {
          (t.LOW = "lowp"), (t.MEDIUM = "mediump"), (t.HIGH = "highp");
        })(Ve || (Ve = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.SCISSOR = 1)] = "SCISSOR"),
            (t[(t.STENCIL = 2)] = "STENCIL"),
            (t[(t.SPRITE = 3)] = "SPRITE"),
            (t[(t.COLOR = 4)] = "COLOR");
        })(Xe || (Xe = {})),
        (function (t) {
          (t[(t.RED = 1)] = "RED"),
            (t[(t.GREEN = 2)] = "GREEN"),
            (t[(t.BLUE = 4)] = "BLUE"),
            (t[(t.ALPHA = 8)] = "ALPHA");
        })(We || (We = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.LOW = 2)] = "LOW"),
            (t[(t.MEDIUM = 4)] = "MEDIUM"),
            (t[(t.HIGH = 8)] = "HIGH");
        })(je || (je = {})),
        (function (t) {
          (t[(t.ELEMENT_ARRAY_BUFFER = 34963)] = "ELEMENT_ARRAY_BUFFER"),
            (t[(t.ARRAY_BUFFER = 34962)] = "ARRAY_BUFFER"),
            (t[(t.UNIFORM_BUFFER = 35345)] = "UNIFORM_BUFFER");
        })(Ye || (Ye = {}));
      var Qe = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e.children = []),
            (e.sortableChildren = At.SORTABLE_CHILDREN),
            (e.sortDirty = !1),
            e
          );
        }
        return (
          Re(e, t),
          (e.prototype.onChildrenChange = function (t) {}),
          (e.prototype.addChild = function () {
            for (var t = arguments, e = [], n = 0; n < arguments.length; n++)
              e[n] = t[n];
            if (e.length > 1)
              for (var r = 0; r < e.length; r++) this.addChild(e[r]);
            else {
              var i = e[0];
              i.parent && i.parent.removeChild(i),
                (i.parent = this),
                (this.sortDirty = !0),
                (i.transform._parentID = -1),
                this.children.push(i),
                this._boundsID++,
                this.onChildrenChange(this.children.length - 1),
                this.emit("childAdded", i, this, this.children.length - 1),
                i.emit("added", this);
            }
            return e[0];
          }),
          (e.prototype.addChildAt = function (t, e) {
            if (e < 0 || e > this.children.length)
              throw new Error(
                t +
                  "addChildAt: The index " +
                  e +
                  " supplied is out of bounds " +
                  this.children.length,
              );
            return (
              t.parent && t.parent.removeChild(t),
              (t.parent = this),
              (this.sortDirty = !0),
              (t.transform._parentID = -1),
              this.children.splice(e, 0, t),
              this._boundsID++,
              this.onChildrenChange(e),
              t.emit("added", this),
              this.emit("childAdded", t, this, e),
              t
            );
          }),
          (e.prototype.swapChildren = function (t, e) {
            if (t !== e) {
              var n = this.getChildIndex(t),
                r = this.getChildIndex(e);
              (this.children[n] = e),
                (this.children[r] = t),
                this.onChildrenChange(n < r ? n : r);
            }
          }),
          (e.prototype.getChildIndex = function (t) {
            var e = this.children.indexOf(t);
            if (-1 === e)
              throw new Error(
                "The supplied DisplayObject must be a child of the caller",
              );
            return e;
          }),
          (e.prototype.setChildIndex = function (t, e) {
            if (e < 0 || e >= this.children.length)
              throw new Error(
                "The index " +
                  e +
                  " supplied is out of bounds " +
                  this.children.length,
              );
            var n = this.getChildIndex(t);
            Wt(this.children, n, 1),
              this.children.splice(e, 0, t),
              this.onChildrenChange(e);
          }),
          (e.prototype.getChildAt = function (t) {
            if (t < 0 || t >= this.children.length)
              throw new Error("getChildAt: Index (" + t + ") does not exist.");
            return this.children[t];
          }),
          (e.prototype.removeChild = function () {
            for (var t = arguments, e = [], n = 0; n < arguments.length; n++)
              e[n] = t[n];
            if (e.length > 1)
              for (var r = 0; r < e.length; r++) this.removeChild(e[r]);
            else {
              var i = e[0],
                o = this.children.indexOf(i);
              if (-1 === o) return null;
              (i.parent = null),
                (i.transform._parentID = -1),
                Wt(this.children, o, 1),
                this._boundsID++,
                this.onChildrenChange(o),
                i.emit("removed", this),
                this.emit("childRemoved", i, this, o);
            }
            return e[0];
          }),
          (e.prototype.removeChildAt = function (t) {
            var e = this.getChildAt(t);
            return (
              (e.parent = null),
              (e.transform._parentID = -1),
              Wt(this.children, t, 1),
              this._boundsID++,
              this.onChildrenChange(t),
              e.emit("removed", this),
              this.emit("childRemoved", e, this, t),
              e
            );
          }),
          (e.prototype.removeChildren = function (t, e) {
            void 0 === t && (t = 0), void 0 === e && (e = this.children.length);
            var n,
              r = t,
              i = e - r;
            if (i > 0 && i <= e) {
              n = this.children.splice(r, i);
              for (var o = 0; o < n.length; ++o)
                (n[o].parent = null),
                  n[o].transform && (n[o].transform._parentID = -1);
              for (
                this._boundsID++, this.onChildrenChange(t), o = 0;
                o < n.length;
                ++o
              )
                n[o].emit("removed", this),
                  this.emit("childRemoved", n[o], this, o);
              return n;
            }
            if (0 === i && 0 === this.children.length) return [];
            throw new RangeError(
              "removeChildren: numeric values are outside the acceptable range.",
            );
          }),
          (e.prototype.sortChildren = function () {
            for (var t = !1, e = 0, n = this.children.length; e < n; ++e) {
              var r = this.children[e];
              (r._lastSortedIndex = e), t || 0 === r.zIndex || (t = !0);
            }
            t && this.children.length > 1 && this.children.sort(Ze),
              (this.sortDirty = !1);
          }),
          (e.prototype.updateTransform = function () {
            this.sortableChildren && this.sortDirty && this.sortChildren(),
              this._boundsID++,
              this.transform.updateTransform(this.parent.transform),
              (this.worldAlpha = this.alpha * this.parent.worldAlpha);
            for (var t = 0, e = this.children.length; t < e; ++t) {
              var n = this.children[t];
              n.visible && n.updateTransform();
            }
          }),
          (e.prototype.calculateBounds = function () {
            this._bounds.clear(), this._calculateBounds();
            for (var t = 0; t < this.children.length; t++) {
              var e = this.children[t];
              if (e.visible && e.renderable)
                if ((e.calculateBounds(), e._mask)) {
                  var n = e._mask.isMaskData ? e._mask.maskObject : e._mask;
                  n
                    ? (n.calculateBounds(),
                      this._bounds.addBoundsMask(e._bounds, n._bounds))
                    : this._bounds.addBounds(e._bounds);
                } else
                  e.filterArea
                    ? this._bounds.addBoundsArea(e._bounds, e.filterArea)
                    : this._bounds.addBounds(e._bounds);
            }
            this._bounds.updateID = this._boundsID;
          }),
          (e.prototype.getLocalBounds = function (e, n) {
            void 0 === n && (n = !1);
            var r = t.prototype.getLocalBounds.call(this, e);
            if (!n)
              for (var i = 0, o = this.children.length; i < o; ++i) {
                var a = this.children[i];
                a.visible && a.updateTransform();
              }
            return r;
          }),
          (e.prototype._calculateBounds = function () {}),
          (e.prototype._renderWithCulling = function (t) {
            var n = t.renderTexture.sourceFrame;
            if (n.width > 0 && n.height > 0) {
              var r, i;
              if (
                (this.cullArea
                  ? ((r = this.cullArea), (i = this.worldTransform))
                  : this._render !== e.prototype._render &&
                    (r = this.getBounds(!0)),
                r && n.intersects(r, i))
              )
                this._render(t);
              else if (this.cullArea) return;
              for (var o = 0, a = this.children.length; o < a; ++o) {
                var s = this.children[o],
                  l = s.cullable;
                (s.cullable = l || !this.cullArea),
                  s.render(t),
                  (s.cullable = l);
              }
            }
          }),
          (e.prototype.render = function (t) {
            if (this.visible && !(this.worldAlpha <= 0) && this.renderable)
              if (this._mask || (this.filters && this.filters.length))
                this.renderAdvanced(t);
              else if (this.cullable) this._renderWithCulling(t);
              else {
                this._render(t);
                for (var e = 0, n = this.children.length; e < n; ++e)
                  this.children[e].render(t);
              }
          }),
          (e.prototype.renderAdvanced = function (t) {
            var e = this.filters,
              n = this._mask;
            if (e) {
              this._enabledFilters || (this._enabledFilters = []),
                (this._enabledFilters.length = 0);
              for (var r = 0; r < e.length; r++)
                e[r].enabled && this._enabledFilters.push(e[r]);
            }
            var i =
              (e && this._enabledFilters && this._enabledFilters.length) ||
              (n &&
                (!n.isMaskData ||
                  (n.enabled && (n.autoDetect || n.type !== Xe.NONE))));
            if (
              (i && t.batch.flush(),
              e &&
                this._enabledFilters &&
                this._enabledFilters.length &&
                t.filter.push(this, this._enabledFilters),
              n && t.mask.push(this, this._mask),
              this.cullable)
            )
              this._renderWithCulling(t);
            else {
              this._render(t), (r = 0);
              for (var o = this.children.length; r < o; ++r)
                this.children[r].render(t);
            }
            i && t.batch.flush(),
              n && t.mask.pop(this),
              e &&
                this._enabledFilters &&
                this._enabledFilters.length &&
                t.filter.pop();
          }),
          (e.prototype._render = function (t) {}),
          (e.prototype.destroy = function (e) {
            t.prototype.destroy.call(this), (this.sortDirty = !1);
            var n = "boolean" == typeof e ? e : e && e.children,
              r = this.removeChildren(0, this.children.length);
            if (n) for (var i = 0; i < r.length; ++i) r[i].destroy(e);
          }),
          Object.defineProperty(e.prototype, "width", {
            get: function () {
              return this.scale.x * this.getLocalBounds().width;
            },
            set: function (t) {
              var e = this.getLocalBounds().width;
              (this.scale.x = 0 !== e ? t / e : 1), (this._width = t);
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "height", {
            get: function () {
              return this.scale.y * this.getLocalBounds().height;
            },
            set: function (t) {
              var e = this.getLocalBounds().height;
              (this.scale.y = 0 !== e ? t / e : 1), (this._height = t);
            },
            enumerable: !1,
            configurable: !0,
          }),
          e
        );
      })(qe);
      Qe.prototype.containerUpdateTransform = Qe.prototype.updateTransform;
      var $e,
        Je = function () {
          return (
            (Je =
              Object.assign ||
              function (t) {
                for (
                  var e, n = arguments, r = 1, i = arguments.length;
                  r < i;
                  r++
                )
                  for (var o in (e = n[r]))
                    Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
                return t;
              }),
            Je.apply(this, arguments)
          );
        };
      !(function (t) {
        (t.Application = "application"),
          (t.RendererPlugin = "renderer-webgl-plugin"),
          (t.CanvasRendererPlugin = "renderer-canvas-plugin"),
          (t.Loader = "loader"),
          (t.LoadParser = "load-parser"),
          (t.ResolveParser = "resolve-parser"),
          (t.CacheParser = "cache-parser"),
          (t.DetectionParser = "detection-parser");
      })($e || ($e = {}));
      var tn,
        en = function (t) {
          if ("function" == typeof t || ("object" == typeof t && t.extension)) {
            if (!t.extension)
              throw new Error("Extension class must have an extension object");
            var e =
              "object" != typeof t.extension
                ? { type: t.extension }
                : t.extension;
            t = Je(Je({}, e), { ref: t });
          }
          if ("object" != typeof t) throw new Error("Invalid extension type");
          return (
            "string" == typeof (t = Je({}, t)).type && (t.type = [t.type]), t
          );
        },
        nn = {
          _addHandlers: null,
          _removeHandlers: null,
          _queue: {},
          remove: function () {
            for (
              var t = arguments, e = this, n = [], r = 0;
              r < arguments.length;
              r++
            )
              n[r] = t[r];
            return (
              n.map(en).forEach(function (t) {
                t.type.forEach(function (n) {
                  var r, i;
                  return null === (i = (r = e._removeHandlers)[n]) ||
                    void 0 === i
                    ? void 0
                    : i.call(r, t);
                });
              }),
              this
            );
          },
          add: function () {
            for (
              var t = arguments, e = this, n = [], r = 0;
              r < arguments.length;
              r++
            )
              n[r] = t[r];
            return (
              n.map(en).forEach(function (t) {
                t.type.forEach(function (n) {
                  var r = e._addHandlers,
                    i = e._queue;
                  r[n] ? r[n](t) : ((i[n] = i[n] || []), i[n].push(t));
                });
              }),
              this
            );
          },
          handle: function (t, e, n) {
            var r = (this._addHandlers = this._addHandlers || {}),
              i = (this._removeHandlers = this._removeHandlers || {});
            if (r[t] || i[t])
              throw new Error("Extension type " + t + " already has a handler");
            (r[t] = e), (i[t] = n);
            var o = this._queue;
            return (
              o[t] &&
                (o[t].forEach(function (t) {
                  return e(t);
                }),
                delete o[t]),
              this
            );
          },
          handleByMap: function (t, e) {
            return this.handle(
              t,
              function (t) {
                e[t.name] = t.ref;
              },
              function (t) {
                delete e[t.name];
              },
            );
          },
          handleByList: function (t, e) {
            return this.handle(
              t,
              function (n) {
                var r, i;
                e.push(n.ref),
                  t === $e.Loader &&
                    (null === (i = (r = n.ref).add) ||
                      void 0 === i ||
                      i.call(r));
              },
              function (t) {
                var n = e.indexOf(t.ref);
                -1 !== n && e.splice(n, 1);
              },
            );
          },
        },
        rn = (function () {
          function t(t) {
            (this.items = []), (this._name = t), (this._aliasCount = 0);
          }
          return (
            (t.prototype.emit = function (t, e, n, r, i, o, a, s) {
              if (arguments.length > 8)
                throw new Error("max arguments reached");
              var l = this.name,
                u = this.items;
              this._aliasCount++;
              for (var h = 0, c = u.length; h < c; h++)
                u[h][l](t, e, n, r, i, o, a, s);
              return u === this.items && this._aliasCount--, this;
            }),
            (t.prototype.ensureNonAliasedItems = function () {
              this._aliasCount > 0 &&
                this.items.length > 1 &&
                ((this._aliasCount = 0), (this.items = this.items.slice(0)));
            }),
            (t.prototype.add = function (t) {
              return (
                t[this._name] &&
                  (this.ensureNonAliasedItems(),
                  this.remove(t),
                  this.items.push(t)),
                this
              );
            }),
            (t.prototype.remove = function (t) {
              var e = this.items.indexOf(t);
              return (
                -1 !== e &&
                  (this.ensureNonAliasedItems(), this.items.splice(e, 1)),
                this
              );
            }),
            (t.prototype.contains = function (t) {
              return -1 !== this.items.indexOf(t);
            }),
            (t.prototype.removeAll = function () {
              return (
                this.ensureNonAliasedItems(), (this.items.length = 0), this
              );
            }),
            (t.prototype.destroy = function () {
              this.removeAll(), (this.items = null), (this._name = null);
            }),
            Object.defineProperty(t.prototype, "empty", {
              get: function () {
                return 0 === this.items.length;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "name", {
              get: function () {
                return this._name;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })();
      Object.defineProperties(rn.prototype, {
        dispatch: { value: rn.prototype.emit },
        run: { value: rn.prototype.emit },
      }),
        (At.TARGET_FPMS = 0.06),
        (function (t) {
          (t[(t.INTERACTION = 50)] = "INTERACTION"),
            (t[(t.HIGH = 25)] = "HIGH"),
            (t[(t.NORMAL = 0)] = "NORMAL"),
            (t[(t.LOW = -25)] = "LOW"),
            (t[(t.UTILITY = -50)] = "UTILITY");
        })(tn || (tn = {}));
      var on = (function () {
          function t(t, e, n, r) {
            void 0 === e && (e = null),
              void 0 === n && (n = 0),
              void 0 === r && (r = !1),
              (this.next = null),
              (this.previous = null),
              (this._destroyed = !1),
              (this.fn = t),
              (this.context = e),
              (this.priority = n),
              (this.once = r);
          }
          return (
            (t.prototype.match = function (t, e) {
              return (
                void 0 === e && (e = null), this.fn === t && this.context === e
              );
            }),
            (t.prototype.emit = function (t) {
              this.fn &&
                (this.context ? this.fn.call(this.context, t) : this.fn(t));
              var e = this.next;
              return (
                this.once && this.destroy(!0),
                this._destroyed && (this.next = null),
                e
              );
            }),
            (t.prototype.connect = function (t) {
              (this.previous = t),
                t.next && (t.next.previous = this),
                (this.next = t.next),
                (t.next = this);
            }),
            (t.prototype.destroy = function (t) {
              void 0 === t && (t = !1),
                (this._destroyed = !0),
                (this.fn = null),
                (this.context = null),
                this.previous && (this.previous.next = this.next),
                this.next && (this.next.previous = this.previous);
              var e = this.next;
              return (this.next = t ? null : e), (this.previous = null), e;
            }),
            t
          );
        })(),
        an = (function () {
          function t() {
            var t = this;
            (this.autoStart = !1),
              (this.deltaTime = 1),
              (this.lastTime = -1),
              (this.speed = 1),
              (this.started = !1),
              (this._requestId = null),
              (this._maxElapsedMS = 100),
              (this._minElapsedMS = 0),
              (this._protected = !1),
              (this._lastFrame = -1),
              (this._head = new on(null, null, 1 / 0)),
              (this.deltaMS = 1 / At.TARGET_FPMS),
              (this.elapsedMS = 1 / At.TARGET_FPMS),
              (this._tick = function (e) {
                (t._requestId = null),
                  t.started &&
                    (t.update(e),
                    t.started &&
                      null === t._requestId &&
                      t._head.next &&
                      (t._requestId = requestAnimationFrame(t._tick)));
              });
          }
          return (
            (t.prototype._requestIfNeeded = function () {
              null === this._requestId &&
                this._head.next &&
                ((this.lastTime = performance.now()),
                (this._lastFrame = this.lastTime),
                (this._requestId = requestAnimationFrame(this._tick)));
            }),
            (t.prototype._cancelIfNeeded = function () {
              null !== this._requestId &&
                (cancelAnimationFrame(this._requestId),
                (this._requestId = null));
            }),
            (t.prototype._startIfPossible = function () {
              this.started
                ? this._requestIfNeeded()
                : this.autoStart && this.start();
            }),
            (t.prototype.add = function (t, e, n) {
              return (
                void 0 === n && (n = tn.NORMAL),
                this._addListener(new on(t, e, n))
              );
            }),
            (t.prototype.addOnce = function (t, e, n) {
              return (
                void 0 === n && (n = tn.NORMAL),
                this._addListener(new on(t, e, n, !0))
              );
            }),
            (t.prototype._addListener = function (t) {
              var e = this._head.next,
                n = this._head;
              if (e) {
                for (; e; ) {
                  if (t.priority > e.priority) {
                    t.connect(n);
                    break;
                  }
                  (n = e), (e = e.next);
                }
                t.previous || t.connect(n);
              } else t.connect(n);
              return this._startIfPossible(), this;
            }),
            (t.prototype.remove = function (t, e) {
              for (var n = this._head.next; n; )
                n = n.match(t, e) ? n.destroy() : n.next;
              return this._head.next || this._cancelIfNeeded(), this;
            }),
            Object.defineProperty(t.prototype, "count", {
              get: function () {
                if (!this._head) return 0;
                for (var t = 0, e = this._head; (e = e.next); ) t++;
                return t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.start = function () {
              this.started || ((this.started = !0), this._requestIfNeeded());
            }),
            (t.prototype.Parar = function () {
              this.started && ((this.started = !1), this._cancelIfNeeded());
            }),
            (t.prototype.destroy = function () {
              if (!this._protected) {
                this.Parar();
                for (var t = this._head.next; t; ) t = t.destroy(!0);
                this._head.destroy(), (this._head = null);
              }
            }),
            (t.prototype.update = function (t) {
              var e;
              if (
                (void 0 === t && (t = performance.now()), t > this.lastTime)
              ) {
                if (
                  ((e = this.elapsedMS = t - this.lastTime) >
                    this._maxElapsedMS && (e = this._maxElapsedMS),
                  (e *= this.speed),
                  this._minElapsedMS)
                ) {
                  var n = (t - this._lastFrame) | 0;
                  if (n < this._minElapsedMS) return;
                  this._lastFrame = t - (n % this._minElapsedMS);
                }
                (this.deltaMS = e),
                  (this.deltaTime = this.deltaMS * At.TARGET_FPMS);
                for (var r = this._head, i = r.next; i; )
                  i = i.emit(this.deltaTime);
                r.next || this._cancelIfNeeded();
              } else this.deltaTime = this.deltaMS = this.elapsedMS = 0;
              this.lastTime = t;
            }),
            Object.defineProperty(t.prototype, "FPS", {
              get: function () {
                return 1e3 / this.elapsedMS;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "minFPS", {
              get: function () {
                return 1e3 / this._maxElapsedMS;
              },
              set: function (t) {
                var e = Math.min(this.maxFPS, t),
                  n = Math.min(Math.max(0, e) / 1e3, At.TARGET_FPMS);
                this._maxElapsedMS = 1 / n;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "maxFPS", {
              get: function () {
                return this._minElapsedMS
                  ? Math.round(1e3 / this._minElapsedMS)
                  : 0;
              },
              set: function (t) {
                if (0 === t) this._minElapsedMS = 0;
                else {
                  var e = Math.max(this.minFPS, t);
                  this._minElapsedMS = 1 / (e / 1e3);
                }
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "shared", {
              get: function () {
                if (!t._shared) {
                  var e = (t._shared = new t());
                  (e.autoStart = !0), (e._protected = !0);
                }
                return t._shared;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "system", {
              get: function () {
                if (!t._system) {
                  var e = (t._system = new t());
                  (e.autoStart = !0), (e._protected = !0);
                }
                return t._system;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        sn = (function () {
          function t() {}
          return (
            (t.init = function (t) {
              var e = this;
              (t = Object.assign({ autoStart: !0, sharedTicker: !1 }, t)),
                Object.defineProperty(this, "ticker", {
                  set: function (t) {
                    this._ticker && this._ticker.remove(this.render, this),
                      (this._ticker = t),
                      t && t.add(this.render, this, tn.LOW);
                  },
                  get: function () {
                    return this._ticker;
                  },
                }),
                (this.Parar = function () {
                  e._ticker.Parar();
                }),
                (this.start = function () {
                  e._ticker.start();
                }),
                (this._ticker = null),
                (this.ticker = t.sharedTicker ? an.shared : new an()),
                t.autoStart && this.start();
            }),
            (t.destroy = function () {
              if (this._ticker) {
                var t = this._ticker;
                (this.ticker = null), t.destroy();
              }
            }),
            (t.extension = $e.Application),
            t
          );
        })();
      (At.PREFER_ENV = Mt.any ? z.WEBGL : z.WEBGL2),
        (At.STRICT_TEXTURE_CACHE = !1);
      var ln = [];
      function un(t, e) {
        if (!t) return null;
        var n = "";
        if ("string" == typeof t) {
          var r = /\.(\w{3,4})(?:$|\?|#)/i.exec(t);
          r && (n = r[1].toLowerCase());
        }
        for (var i = ln.length - 1; i >= 0; --i) {
          var o = ln[i];
          if (o.test && o.test(t, n)) return new o(t, e);
        }
        throw new Error("Unrecognized source type to auto-detect Resource");
      }
      var hn = function (t, e) {
        return (
          (hn =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
            }),
          hn(t, e)
        );
      };
      function cn(t, e) {
        function n() {
          this.constructor = t;
        }
        hn(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n()));
      }
      var dn = function () {
          return (
            (dn =
              Object.assign ||
              function (t) {
                for (
                  var e, n = arguments, r = 1, i = arguments.length;
                  r < i;
                  r++
                )
                  for (var o in (e = n[r]))
                    Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
                return t;
              }),
            dn.apply(this, arguments)
          );
        },
        fn = (function () {
          function t(t, e) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              (this._width = t),
              (this._height = e),
              (this.destroyed = !1),
              (this.internal = !1),
              (this.onResize = new rn("setRealSize")),
              (this.onUpdate = new rn("update")),
              (this.onError = new rn("onError"));
          }
          return (
            (t.prototype.bind = function (t) {
              this.onResize.add(t),
                this.onUpdate.add(t),
                this.onError.add(t),
                (this._width || this._height) &&
                  this.onResize.emit(this._width, this._height);
            }),
            (t.prototype.unbind = function (t) {
              this.onResize.remove(t),
                this.onUpdate.remove(t),
                this.onError.remove(t);
            }),
            (t.prototype.resize = function (t, e) {
              (t === this._width && e === this._height) ||
                ((this._width = t),
                (this._height = e),
                this.onResize.emit(t, e));
            }),
            Object.defineProperty(t.prototype, "valid", {
              get: function () {
                return !!this._width && !!this._height;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.update = function () {
              this.destroyed || this.onUpdate.emit();
            }),
            (t.prototype.load = function () {
              return Promise.resolve(this);
            }),
            Object.defineProperty(t.prototype, "width", {
              get: function () {
                return this._width;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "height", {
              get: function () {
                return this._height;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.style = function (t, e, n) {
              return !1;
            }),
            (t.prototype.dispose = function () {}),
            (t.prototype.destroy = function () {
              this.destroyed ||
                ((this.destroyed = !0),
                this.dispose(),
                this.onError.removeAll(),
                (this.onError = null),
                this.onResize.removeAll(),
                (this.onResize = null),
                this.onUpdate.removeAll(),
                (this.onUpdate = null));
            }),
            (t.test = function (t, e) {
              return !1;
            }),
            t
          );
        })(),
        pn = (function (t) {
          function e(e, n) {
            var r = this,
              i = n || {},
              o = i.width,
              a = i.height;
            if (!o || !a)
              throw new Error("BufferResource width or height invalid");
            return ((r = t.call(this, o, a) || this).data = e), r;
          }
          return (
            cn(e, t),
            (e.prototype.upload = function (t, e, n) {
              var r = t.gl;
              r.pixelStorei(
                r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                e.alphaMode === tt.UNPACK,
              );
              var i = e.realWidth,
                o = e.realHeight;
              return (
                n.width === i && n.height === o
                  ? r.texSubImage2D(
                      e.target,
                      0,
                      0,
                      0,
                      i,
                      o,
                      e.format,
                      n.type,
                      this.data,
                    )
                  : ((n.width = i),
                    (n.height = o),
                    r.texImage2D(
                      e.target,
                      0,
                      n.internalFormat,
                      i,
                      o,
                      0,
                      e.format,
                      n.type,
                      this.data,
                    )),
                !0
              );
            }),
            (e.prototype.dispose = function () {
              this.data = null;
            }),
            (e.test = function (t) {
              return (
                t instanceof Float32Array ||
                t instanceof Uint8Array ||
                t instanceof Uint32Array
              );
            }),
            e
          );
        })(fn),
        mn = { scaleMode: Q.NEAREST, format: Y.RGBA, alphaMode: tt.NPM },
        _n = (function (t) {
          function e(e, n) {
            void 0 === e && (e = null), void 0 === n && (n = null);
            var r = t.call(this) || this,
              i = (n = n || {}).alphaMode,
              o = n.mipmap,
              a = n.anisotropicLevel,
              s = n.scaleMode,
              l = n.width,
              u = n.height,
              h = n.wrapMode,
              c = n.format,
              d = n.type,
              f = n.target,
              p = n.resolution,
              m = n.resourceOptions;
            return (
              !e || e instanceof fn || ((e = un(e, m)).internal = !0),
              (r.resolution = p || At.RESOLUTION),
              (r.width = Math.round((l || 0) * r.resolution) / r.resolution),
              (r.height = Math.round((u || 0) * r.resolution) / r.resolution),
              (r._mipmap = void 0 !== o ? o : At.MIPMAP_TEXTURES),
              (r.anisotropicLevel = void 0 !== a ? a : At.ANISOTROPIC_LEVEL),
              (r._wrapMode = h || At.WRAP_MODE),
              (r._scaleMode = void 0 !== s ? s : At.SCALE_MODE),
              (r.format = c || Y.RGBA),
              (r.type = d || K.UNSIGNED_BYTE),
              (r.target = f || q.TEXTURE_2D),
              (r.alphaMode = void 0 !== i ? i : tt.UNPACK),
              (r.uid = qt()),
              (r.touched = 0),
              (r.isPowerOfTwo = !1),
              r._refreshPOT(),
              (r._glTextures = {}),
              (r.dirtyId = 0),
              (r.dirtyStyleId = 0),
              (r.cacheId = null),
              (r.valid = l > 0 && u > 0),
              (r.textureCacheIds = []),
              (r.destroyed = !1),
              (r.resource = null),
              (r._batchEnabled = 0),
              (r._batchLocation = 0),
              (r.parentTextureArray = null),
              r.setResource(e),
              r
            );
          }
          return (
            cn(e, t),
            Object.defineProperty(e.prototype, "realWidth", {
              get: function () {
                return Math.round(this.width * this.resolution);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "realHeight", {
              get: function () {
                return Math.round(this.height * this.resolution);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "mipmap", {
              get: function () {
                return this._mipmap;
              },
              set: function (t) {
                this._mipmap !== t && ((this._mipmap = t), this.dirtyStyleId++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "scaleMode", {
              get: function () {
                return this._scaleMode;
              },
              set: function (t) {
                this._scaleMode !== t &&
                  ((this._scaleMode = t), this.dirtyStyleId++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "wrapMode", {
              get: function () {
                return this._wrapMode;
              },
              set: function (t) {
                this._wrapMode !== t &&
                  ((this._wrapMode = t), this.dirtyStyleId++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.setStyle = function (t, e) {
              var n;
              return (
                void 0 !== t &&
                  t !== this.scaleMode &&
                  ((this.scaleMode = t), (n = !0)),
                void 0 !== e &&
                  e !== this.mipmap &&
                  ((this.mipmap = e), (n = !0)),
                n && this.dirtyStyleId++,
                this
              );
            }),
            (e.prototype.setSize = function (t, e, n) {
              return (
                (n = n || this.resolution), this.setRealSize(t * n, e * n, n)
              );
            }),
            (e.prototype.setRealSize = function (t, e, n) {
              return (
                (this.resolution = n || this.resolution),
                (this.width = Math.round(t) / this.resolution),
                (this.height = Math.round(e) / this.resolution),
                this._refreshPOT(),
                this.update(),
                this
              );
            }),
            (e.prototype._refreshPOT = function () {
              this.isPowerOfTwo = Vt(this.realWidth) && Vt(this.realHeight);
            }),
            (e.prototype.setResolution = function (t) {
              var e = this.resolution;
              return (
                e === t ||
                  ((this.resolution = t),
                  this.valid &&
                    ((this.width = Math.round(this.width * e) / t),
                    (this.height = Math.round(this.height * e) / t),
                    this.emit("update", this)),
                  this._refreshPOT()),
                this
              );
            }),
            (e.prototype.setResource = function (t) {
              if (this.resource === t) return this;
              if (this.resource)
                throw new Error("Resource can be set only once");
              return t.bind(this), (this.resource = t), this;
            }),
            (e.prototype.update = function () {
              this.valid
                ? (this.dirtyId++,
                  this.dirtyStyleId++,
                  this.emit("update", this))
                : this.width > 0 &&
                  this.height > 0 &&
                  ((this.valid = !0),
                  this.emit("loaded", this),
                  this.emit("update", this));
            }),
            (e.prototype.onError = function (t) {
              this.emit("error", this, t);
            }),
            (e.prototype.destroy = function () {
              this.resource &&
                (this.resource.unbind(this),
                this.resource.internal && this.resource.destroy(),
                (this.resource = null)),
                this.cacheId &&
                  (delete te[this.cacheId],
                  delete Jt[this.cacheId],
                  (this.cacheId = null)),
                this.dispose(),
                e.removeFromCache(this),
                (this.textureCacheIds = null),
                (this.destroyed = !0);
            }),
            (e.prototype.dispose = function () {
              this.emit("dispose", this);
            }),
            (e.prototype.castToBaseTexture = function () {
              return this;
            }),
            (e.from = function (t, n, r) {
              void 0 === r && (r = At.STRICT_TEXTURE_CACHE);
              var i = "string" == typeof t,
                o = null;
              if (i) o = t;
              else {
                if (!t._pixiId) {
                  var a = (n && n.pixiIdPrefix) || "pixiid";
                  t._pixiId = a + "_" + qt();
                }
                o = t._pixiId;
              }
              var s = te[o];
              if (i && r && !s)
                throw new Error(
                  'The cacheId "' + o + '" does not exist in BaseTextureCache.',
                );
              return (
                s || (((s = new e(t, n)).cacheId = o), e.addToCache(s, o)), s
              );
            }),
            (e.fromBuffer = function (t, n, r, i) {
              t = t || new Float32Array(n * r * 4);
              var o = new pn(t, { width: n, height: r }),
                a = t instanceof Float32Array ? K.FLOAT : K.UNSIGNED_BYTE;
              return new e(
                o,
                Object.assign(mn, i || { width: n, height: r, type: a }),
              );
            }),
            (e.addToCache = function (t, e) {
              e &&
                (-1 === t.textureCacheIds.indexOf(e) &&
                  t.textureCacheIds.push(e),
                te[e] &&
                  console.warn(
                    "BaseTexture added to the cache with an id [" +
                      e +
                      "] that already had an entry",
                  ),
                (te[e] = t));
            }),
            (e.removeFromCache = function (t) {
              if ("string" == typeof t) {
                var e = te[t];
                if (e) {
                  var n = e.textureCacheIds.indexOf(t);
                  return (
                    n > -1 && e.textureCacheIds.splice(n, 1), delete te[t], e
                  );
                }
              } else if (t && t.textureCacheIds) {
                for (var r = 0; r < t.textureCacheIds.length; ++r)
                  delete te[t.textureCacheIds[r]];
                return (t.textureCacheIds.length = 0), t;
              }
              return null;
            }),
            (e._globalBatch = 0),
            e
          );
        })(Rt),
        gn = (function (t) {
          function e(e, n) {
            var r = this,
              i = n || {},
              o = i.width,
              a = i.height;
            ((r = t.call(this, o, a) || this).items = []),
              (r.itemDirtyIds = []);
            for (var s = 0; s < e; s++) {
              var l = new _n();
              r.items.push(l), r.itemDirtyIds.push(-2);
            }
            return (r.length = e), (r._load = null), (r.baseTexture = null), r;
          }
          return (
            cn(e, t),
            (e.prototype.initFromArray = function (t, e) {
              for (var n = 0; n < this.length; n++)
                t[n] &&
                  (t[n].castToBaseTexture
                    ? this.addBaseTextureAt(t[n].castToBaseTexture(), n)
                    : t[n] instanceof fn
                      ? this.addResourceAt(t[n], n)
                      : this.addResourceAt(un(t[n], e), n));
            }),
            (e.prototype.dispose = function () {
              for (var t = 0, e = this.length; t < e; t++)
                this.items[t].destroy();
              (this.items = null),
                (this.itemDirtyIds = null),
                (this._load = null);
            }),
            (e.prototype.addResourceAt = function (t, e) {
              if (!this.items[e])
                throw new Error("Index " + e + " is out of bounds");
              return (
                t.valid && !this.valid && this.resize(t.width, t.height),
                this.items[e].setResource(t),
                this
              );
            }),
            (e.prototype.bind = function (e) {
              if (null !== this.baseTexture)
                throw new Error(
                  "Only one base texture per TextureArray is allowed",
                );
              t.prototype.bind.call(this, e);
              for (var n = 0; n < this.length; n++)
                (this.items[n].parentTextureArray = e),
                  this.items[n].on("update", e.update, e);
            }),
            (e.prototype.unbind = function (e) {
              t.prototype.unbind.call(this, e);
              for (var n = 0; n < this.length; n++)
                (this.items[n].parentTextureArray = null),
                  this.items[n].off("update", e.update, e);
            }),
            (e.prototype.load = function () {
              var t = this;
              if (this._load) return this._load;
              var e = this.items
                .map(function (t) {
                  return t.resource;
                })
                .filter(function (t) {
                  return t;
                })
                .map(function (t) {
                  return t.load();
                });
              return (
                (this._load = Promise.all(e).then(function () {
                  var e = t.items[0],
                    n = e.realWidth,
                    r = e.realHeight;
                  return t.resize(n, r), Promise.resolve(t);
                })),
                this._load
              );
            }),
            e
          );
        })(fn),
        vn = (function (t) {
          function e(e, n) {
            var r,
              i,
              o = this,
              a = n || {},
              s = a.width,
              l = a.height;
            return (
              Array.isArray(e) ? ((r = e), (i = e.length)) : (i = e),
              (o = t.call(this, i, { width: s, height: l }) || this),
              r && o.initFromArray(r, n),
              o
            );
          }
          return (
            cn(e, t),
            (e.prototype.addBaseTextureAt = function (t, e) {
              if (!t.resource)
                throw new Error("ArrayResource does not support RenderTexture");
              return this.addResourceAt(t.resource, e), this;
            }),
            (e.prototype.bind = function (e) {
              t.prototype.bind.call(this, e), (e.target = q.TEXTURE_2D_ARRAY);
            }),
            (e.prototype.upload = function (t, e, n) {
              var r = this,
                i = r.length,
                o = r.itemDirtyIds,
                a = r.items,
                s = t.gl;
              n.dirtyId < 0 &&
                s.texImage3D(
                  s.TEXTURE_2D_ARRAY,
                  0,
                  n.internalFormat,
                  this._width,
                  this._height,
                  i,
                  0,
                  e.format,
                  n.type,
                  null,
                );
              for (var l = 0; l < i; l++) {
                var u = a[l];
                o[l] < u.dirtyId &&
                  ((o[l] = u.dirtyId),
                  u.valid &&
                    s.texSubImage3D(
                      s.TEXTURE_2D_ARRAY,
                      0,
                      0,
                      0,
                      l,
                      u.resource.width,
                      u.resource.height,
                      1,
                      e.format,
                      n.type,
                      u.resource.source,
                    ));
              }
              return !0;
            }),
            e
          );
        })(gn),
        yn = (function (t) {
          function e(e) {
            var n = this,
              r = e,
              i = r.naturalWidth || r.videoWidth || r.width,
              o = r.naturalHeight || r.videoHeight || r.height;
            return (
              ((n = t.call(this, i, o) || this).source = e),
              (n.noSubImage = !1),
              n
            );
          }
          return (
            cn(e, t),
            (e.crossOrigin = function (t, e, n) {
              void 0 === n && 0 !== e.indexOf("data:")
                ? (t.crossOrigin = (function (t, e) {
                    if (
                      (void 0 === e && (e = globalThis.location),
                      0 === t.indexOf("data:"))
                    )
                      return "";
                    (e = e || globalThis.location),
                      Qt || (Qt = document.createElement("a")),
                      (Qt.href = t);
                    var n = It.parse(Qt.href),
                      r = (!n.port && "" === e.port) || n.port === e.port;
                    return n.hostname === e.hostname &&
                      r &&
                      n.protocol === e.protocol
                      ? ""
                      : "anonymous";
                  })(e))
                : !1 !== n &&
                  (t.crossOrigin = "string" == typeof n ? n : "anonymous");
            }),
            (e.prototype.upload = function (t, e, n, r) {
              var i = t.gl,
                o = e.realWidth,
                a = e.realHeight;
              if ((r = r || this.source) instanceof HTMLImageElement) {
                if (!r.complete || 0 === r.naturalWidth) return !1;
              } else if (r instanceof HTMLVideoElement && r.readyState <= 1)
                return !1;
              return (
                i.pixelStorei(
                  i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                  e.alphaMode === tt.UNPACK,
                ),
                this.noSubImage ||
                e.target !== i.TEXTURE_2D ||
                n.width !== o ||
                n.height !== a
                  ? ((n.width = o),
                    (n.height = a),
                    i.texImage2D(
                      e.target,
                      0,
                      n.internalFormat,
                      e.format,
                      n.type,
                      r,
                    ))
                  : i.texSubImage2D(i.TEXTURE_2D, 0, 0, 0, e.format, n.type, r),
                !0
              );
            }),
            (e.prototype.update = function () {
              if (!this.destroyed) {
                var e = this.source,
                  n = e.naturalWidth || e.videoWidth || e.width,
                  r = e.naturalHeight || e.videoHeight || e.height;
                this.resize(n, r), t.prototype.update.call(this);
              }
            }),
            (e.prototype.dispose = function () {
              this.source = null;
            }),
            e
          );
        })(fn),
        En = (function (t) {
          function e(e) {
            return t.call(this, e) || this;
          }
          return (
            cn(e, t),
            (e.test = function (t) {
              var e = globalThis.OffscreenCanvas;
              return (
                !!(e && t instanceof e) ||
                (globalThis.HTMLCanvasElement && t instanceof HTMLCanvasElement)
              );
            }),
            e
          );
        })(yn),
        Tn = (function (t) {
          function e(n, r) {
            var i = this,
              o = r || {},
              a = o.width,
              s = o.height,
              l = o.autoLoad,
              u = o.linkBaseTexture;
            if (n && n.length !== e.SIDES)
              throw new Error(
                "Invalid length. Got " + n.length + ", expected 6",
              );
            i = t.call(this, 6, { width: a, height: s }) || this;
            for (var h = 0; h < e.SIDES; h++)
              i.items[h].target = q.TEXTURE_CUBE_MAP_POSITIVE_X + h;
            return (
              (i.linkBaseTexture = !1 !== u),
              n && i.initFromArray(n, r),
              !1 !== l && i.load(),
              i
            );
          }
          return (
            cn(e, t),
            (e.prototype.bind = function (e) {
              t.prototype.bind.call(this, e), (e.target = q.TEXTURE_CUBE_MAP);
            }),
            (e.prototype.addBaseTextureAt = function (t, e, n) {
              if (!this.items[e])
                throw new Error("Index " + e + " is out of bounds");
              if (
                !this.linkBaseTexture ||
                t.parentTextureArray ||
                Object.keys(t._glTextures).length > 0
              ) {
                if (!t.resource)
                  throw new Error(
                    "CubeResource does not support copying of renderTexture.",
                  );
                this.addResourceAt(t.resource, e);
              } else
                (t.target = q.TEXTURE_CUBE_MAP_POSITIVE_X + e),
                  (t.parentTextureArray = this.baseTexture),
                  (this.items[e] = t);
              return (
                t.valid &&
                  !this.valid &&
                  this.resize(t.realWidth, t.realHeight),
                (this.items[e] = t),
                this
              );
            }),
            (e.prototype.upload = function (t, n, r) {
              for (var i = this.itemDirtyIds, o = 0; o < e.SIDES; o++) {
                var a = this.items[o];
                (i[o] < a.dirtyId || r.dirtyId < n.dirtyId) &&
                  (a.valid && a.resource
                    ? (a.resource.upload(t, a, r), (i[o] = a.dirtyId))
                    : i[o] < -1 &&
                      (t.gl.texImage2D(
                        a.target,
                        0,
                        r.internalFormat,
                        n.realWidth,
                        n.realHeight,
                        0,
                        n.format,
                        r.type,
                        null,
                      ),
                      (i[o] = -1)));
              }
              return !0;
            }),
            (e.test = function (t) {
              return Array.isArray(t) && t.length === e.SIDES;
            }),
            (e.SIDES = 6),
            e
          );
        })(gn),
        bn = (function (t) {
          function e(e, n) {
            var r = this;
            if (((n = n || {}), !(e instanceof HTMLImageElement))) {
              var i = new Image();
              yn.crossOrigin(i, e, n.crossorigin), (i.src = e), (e = i);
            }
            return (
              (r = t.call(this, e) || this),
              !e.complete &&
                r._width &&
                r._height &&
                ((r._width = 0), (r._height = 0)),
              (r.url = e.src),
              (r._process = null),
              (r.preserveBitmap = !1),
              (r.createBitmap =
                (void 0 !== n.createBitmap
                  ? n.createBitmap
                  : At.CREATE_IMAGE_BITMAP) && !!globalThis.createImageBitmap),
              (r.alphaMode =
                "number" == typeof n.alphaMode ? n.alphaMode : null),
              (r.bitmap = null),
              (r._load = null),
              !1 !== n.autoLoad && r.load(),
              r
            );
          }
          return (
            cn(e, t),
            (e.prototype.load = function (t) {
              var e = this;
              return (
                this._load ||
                  (void 0 !== t && (this.createBitmap = t),
                  (this._load = new Promise(function (t, n) {
                    var r = e.source;
                    e.url = r.src;
                    var i = function () {
                      e.destroyed ||
                        ((r.onload = null),
                        (r.onerror = null),
                        e.resize(r.width, r.height),
                        (e._load = null),
                        e.createBitmap ? t(e.process()) : t(e));
                    };
                    r.complete && r.src
                      ? i()
                      : ((r.onload = i),
                        (r.onerror = function (t) {
                          n(t), e.onError.emit(t);
                        }));
                  }))),
                this._load
              );
            }),
            (e.prototype.process = function () {
              var t = this,
                e = this.source;
              if (null !== this._process) return this._process;
              if (null !== this.bitmap || !globalThis.createImageBitmap)
                return Promise.resolve(this);
              var n = globalThis.createImageBitmap,
                r = !e.crossOrigin || "anonymous" === e.crossOrigin;
              return (
                (this._process = fetch(e.src, { mode: r ? "cors" : "no-cors" })
                  .then(function (t) {
                    return t.blob();
                  })
                  .then(function (r) {
                    return n(r, 0, 0, e.width, e.height, {
                      premultiplyAlpha:
                        t.alphaMode === tt.UNPACK ? "premultiply" : "none",
                    });
                  })
                  .then(function (e) {
                    return t.destroyed
                      ? Promise.reject()
                      : ((t.bitmap = e),
                        t.update(),
                        (t._process = null),
                        Promise.resolve(t));
                  })),
                this._process
              );
            }),
            (e.prototype.upload = function (e, n, r) {
              if (
                ("number" == typeof this.alphaMode &&
                  (n.alphaMode = this.alphaMode),
                !this.createBitmap)
              )
                return t.prototype.upload.call(this, e, n, r);
              if (!this.bitmap && (this.process(), !this.bitmap)) return !1;
              if (
                (t.prototype.upload.call(this, e, n, r, this.bitmap),
                !this.preserveBitmap)
              ) {
                var i = !0,
                  o = n._glTextures;
                for (var a in o) {
                  var s = o[a];
                  if (s !== r && s.dirtyId !== n.dirtyId) {
                    i = !1;
                    break;
                  }
                }
                i &&
                  (this.bitmap.close && this.bitmap.close(),
                  (this.bitmap = null));
              }
              return !0;
            }),
            (e.prototype.dispose = function () {
              (this.source.onload = null),
                (this.source.onerror = null),
                t.prototype.dispose.call(this),
                this.bitmap && (this.bitmap.close(), (this.bitmap = null)),
                (this._process = null),
                (this._load = null);
            }),
            (e.test = function (t) {
              return "string" == typeof t || t instanceof HTMLImageElement;
            }),
            e
          );
        })(yn),
        xn = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              (n = n || {}),
              ((r =
                t.call(this, document.createElement("canvas")) || this)._width =
                0),
              (r._height = 0),
              (r.svg = e),
              (r.scale = n.scale || 1),
              (r._overrideWidth = n.width),
              (r._overrideHeight = n.height),
              (r._resolve = null),
              (r._crossorigin = n.crossorigin),
              (r._load = null),
              !1 !== n.autoLoad && r.load(),
              r
            );
          }
          return (
            cn(e, t),
            (e.prototype.load = function () {
              var t = this;
              return (
                this._load ||
                  (this._load = new Promise(function (n) {
                    if (
                      ((t._resolve = function () {
                        t.resize(t.source.width, t.source.height), n(t);
                      }),
                      e.SVG_XML.test(t.svg.trim()))
                    ) {
                      if (!btoa)
                        throw new Error(
                          "Your browser doesn't support base64 conversions.",
                        );
                      t.svg =
                        "data:image/svg+xml;base64," +
                        btoa(unescape(encodeURIComponent(t.svg)));
                    }
                    t._loadSvg();
                  })),
                this._load
              );
            }),
            (e.prototype._loadSvg = function () {
              var t = this,
                e = new Image();
              yn.crossOrigin(e, this.svg, this._crossorigin),
                (e.src = this.svg),
                (e.onerror = function (n) {
                  t._resolve && ((e.onerror = null), t.onError.emit(n));
                }),
                (e.onload = function () {
                  if (t._resolve) {
                    var n = e.width,
                      r = e.height;
                    if (!n || !r)
                      throw new Error(
                        "The SVG image must have width and height defined (in pixels), canvas API needs them.",
                      );
                    var i = n * t.scale,
                      o = r * t.scale;
                    (t._overrideWidth || t._overrideHeight) &&
                      ((i = t._overrideWidth || (t._overrideHeight / r) * n),
                      (o = t._overrideHeight || (t._overrideWidth / n) * r)),
                      (i = Math.round(i)),
                      (o = Math.round(o));
                    var a = t.source;
                    (a.width = i),
                      (a.height = o),
                      (a._pixiId = "canvas_" + qt()),
                      a.getContext("2d").drawImage(e, 0, 0, n, r, 0, 0, i, o),
                      t._resolve(),
                      (t._resolve = null);
                  }
                });
            }),
            (e.getSize = function (t) {
              var n = e.SVG_SIZE.exec(t),
                r = {};
              return (
                n &&
                  ((r[n[1]] = Math.round(parseFloat(n[3]))),
                  (r[n[5]] = Math.round(parseFloat(n[7])))),
                r
              );
            }),
            (e.prototype.dispose = function () {
              t.prototype.dispose.call(this),
                (this._resolve = null),
                (this._crossorigin = null);
            }),
            (e.test = function (t, n) {
              return (
                "svg" === n ||
                ("string" == typeof t &&
                  /^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(
                    t,
                  )) ||
                ("string" == typeof t && e.SVG_XML.test(t))
              );
            }),
            (e.SVG_XML = /^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m),
            (e.SVG_SIZE =
              /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i),
            e
          );
        })(yn),
        Sn = (function (t) {
          function e(n, r) {
            var i = this;
            if (((r = r || {}), !(n instanceof HTMLVideoElement))) {
              var o = document.createElement("video");
              o.setAttribute("preload", "auto"),
                o.setAttribute("webkit-playsinline", ""),
                o.setAttribute("playsinline", ""),
                "string" == typeof n && (n = [n]);
              var a = n[0].src || n[0];
              yn.crossOrigin(o, a, r.crossorigin);
              for (var s = 0; s < n.length; ++s) {
                var l = document.createElement("source"),
                  u = n[s],
                  h = u.src,
                  c = u.mime,
                  d = (h = h || n[s]).split("?").shift().toLowerCase(),
                  f = d.slice(d.lastIndexOf(".") + 1);
                (c = c || e.MIME_TYPES[f] || "video/" + f),
                  (l.src = h),
                  (l.type = c),
                  o.appendChild(l);
              }
              n = o;
            }
            return (
              ((i = t.call(this, n) || this).noSubImage = !0),
              (i._autoUpdate = !0),
              (i._isConnectedToTicker = !1),
              (i._updateFPS = r.updateFPS || 0),
              (i._msToNextUpdate = 0),
              (i.autoPlay = !1 !== r.autoPlay),
              (i._load = null),
              (i._resolve = null),
              (i._onCanPlay = i._onCanPlay.bind(i)),
              (i._onError = i._onError.bind(i)),
              !1 !== r.autoLoad && i.load(),
              i
            );
          }
          return (
            cn(e, t),
            (e.prototype.update = function (e) {
              if (!this.destroyed) {
                var n = an.shared.elapsedMS * this.source.playbackRate;
                (this._msToNextUpdate = Math.floor(this._msToNextUpdate - n)),
                  (!this._updateFPS || this._msToNextUpdate <= 0) &&
                    (t.prototype.update.call(this),
                    (this._msToNextUpdate = this._updateFPS
                      ? Math.floor(1e3 / this._updateFPS)
                      : 0));
              }
            }),
            (e.prototype.load = function () {
              var t = this;
              if (this._load) return this._load;
              var e = this.source;
              return (
                (e.readyState === e.HAVE_ENOUGH_DATA ||
                  e.readyState === e.HAVE_FUTURE_DATA) &&
                  e.width &&
                  e.height &&
                  (e.complete = !0),
                e.addEventListener("play", this._onPlayStart.bind(this)),
                e.addEventListener("pause", this._onPlayStop.bind(this)),
                this._isSourceReady()
                  ? this._onCanPlay()
                  : (e.addEventListener("canplay", this._onCanPlay),
                    e.addEventListener("canplaythrough", this._onCanPlay),
                    e.addEventListener("error", this._onError, !0)),
                (this._load = new Promise(function (n) {
                  t.valid ? n(t) : ((t._resolve = n), e.load());
                })),
                this._load
              );
            }),
            (e.prototype._onError = function (t) {
              this.source.removeEventListener("error", this._onError, !0),
                this.onError.emit(t);
            }),
            (e.prototype._isSourcePlaying = function () {
              var t = this.source;
              return (
                t.currentTime > 0 &&
                !1 === t.paused &&
                !1 === t.ended &&
                t.readyState > 2
              );
            }),
            (e.prototype._isSourceReady = function () {
              var t = this.source;
              return 3 === t.readyState || 4 === t.readyState;
            }),
            (e.prototype._onPlayStart = function () {
              this.valid || this._onCanPlay(),
                this.autoUpdate &&
                  !this._isConnectedToTicker &&
                  (an.shared.add(this.update, this),
                  (this._isConnectedToTicker = !0));
            }),
            (e.prototype._onPlayStop = function () {
              this._isConnectedToTicker &&
                (an.shared.remove(this.update, this),
                (this._isConnectedToTicker = !1));
            }),
            (e.prototype._onCanPlay = function () {
              var t = this.source;
              t.removeEventListener("canplay", this._onCanPlay),
                t.removeEventListener("canplaythrough", this._onCanPlay);
              var e = this.valid;
              this.resize(t.videoWidth, t.videoHeight),
                !e &&
                  this._resolve &&
                  (this._resolve(this), (this._resolve = null)),
                this._isSourcePlaying()
                  ? this._onPlayStart()
                  : this.autoPlay && t.play();
            }),
            (e.prototype.dispose = function () {
              this._isConnectedToTicker &&
                (an.shared.remove(this.update, this),
                (this._isConnectedToTicker = !1));
              var e = this.source;
              e &&
                (e.removeEventListener("error", this._onError, !0),
                e.pause(),
                (e.src = ""),
                e.load()),
                t.prototype.dispose.call(this);
            }),
            Object.defineProperty(e.prototype, "autoUpdate", {
              get: function () {
                return this._autoUpdate;
              },
              set: function (t) {
                t !== this._autoUpdate &&
                  ((this._autoUpdate = t),
                  !this._autoUpdate && this._isConnectedToTicker
                    ? (an.shared.remove(this.update, this),
                      (this._isConnectedToTicker = !1))
                    : this._autoUpdate &&
                      !this._isConnectedToTicker &&
                      this._isSourcePlaying() &&
                      (an.shared.add(this.update, this),
                      (this._isConnectedToTicker = !0)));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "updateFPS", {
              get: function () {
                return this._updateFPS;
              },
              set: function (t) {
                t !== this._updateFPS && (this._updateFPS = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.test = function (t, n) {
              return (
                (globalThis.HTMLVideoElement &&
                  t instanceof HTMLVideoElement) ||
                e.TYPES.indexOf(n) > -1
              );
            }),
            (e.TYPES = [
              "mp4",
              "m4v",
              "webm",
              "ogg",
              "ogv",
              "h264",
              "avi",
              "mov",
            ]),
            (e.MIME_TYPES = {
              ogv: "video/ogg",
              mov: "video/quicktime",
              m4v: "video/mp4",
            }),
            e
          );
        })(yn),
        Mn = (function (t) {
          function e(e) {
            return t.call(this, e) || this;
          }
          return (
            cn(e, t),
            (e.test = function (t) {
              return (
                !!globalThis.createImageBitmap &&
                "undefined" != typeof ImageBitmap &&
                t instanceof ImageBitmap
              );
            }),
            e
          );
        })(yn);
      ln.push(bn, Mn, En, Sn, xn, pn, Tn, vn);
      var An = {
          __proto__: null,
          Resource: fn,
          BaseImageResource: yn,
          INSTALLED: ln,
          autoDetectResource: un,
          AbstractMultiResource: gn,
          ArrayResource: vn,
          BufferResource: pn,
          CanvasResource: En,
          CubeResource: Tn,
          ImageResource: bn,
          SVGResource: xn,
          VideoResource: Sn,
          ImageBitmapResource: Mn,
        },
        Rn = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            cn(e, t),
            (e.prototype.upload = function (t, e, n) {
              var r = t.gl;
              r.pixelStorei(
                r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                e.alphaMode === tt.UNPACK,
              );
              var i = e.realWidth,
                o = e.realHeight;
              return (
                n.width === i && n.height === o
                  ? r.texSubImage2D(
                      e.target,
                      0,
                      0,
                      0,
                      i,
                      o,
                      e.format,
                      n.type,
                      this.data,
                    )
                  : ((n.width = i),
                    (n.height = o),
                    r.texImage2D(
                      e.target,
                      0,
                      n.internalFormat,
                      i,
                      o,
                      0,
                      e.format,
                      n.type,
                      this.data,
                    )),
                !0
              );
            }),
            e
          );
        })(pn),
        wn = (function () {
          function t(t, e) {
            (this.width = Math.round(t || 100)),
              (this.height = Math.round(e || 100)),
              (this.stencil = !1),
              (this.depth = !1),
              (this.dirtyId = 0),
              (this.dirtyFormat = 0),
              (this.dirtySize = 0),
              (this.depthTexture = null),
              (this.colorTextures = []),
              (this.glFramebuffers = {}),
              (this.disposeRunner = new rn("disposeFramebuffer")),
              (this.multisample = at.NONE);
          }
          return (
            Object.defineProperty(t.prototype, "colorTexture", {
              get: function () {
                return this.colorTextures[0];
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.addColorTexture = function (t, e) {
              return (
                void 0 === t && (t = 0),
                (this.colorTextures[t] =
                  e ||
                  new _n(null, {
                    scaleMode: Q.NEAREST,
                    resolution: 1,
                    mipmap: J.OFF,
                    width: this.width,
                    height: this.height,
                  })),
                this.dirtyId++,
                this.dirtyFormat++,
                this
              );
            }),
            (t.prototype.addDepthTexture = function (t) {
              return (
                (this.depthTexture =
                  t ||
                  new _n(
                    new Rn(null, { width: this.width, height: this.height }),
                    {
                      scaleMode: Q.NEAREST,
                      resolution: 1,
                      width: this.width,
                      height: this.height,
                      mipmap: J.OFF,
                      format: Y.DEPTH_COMPONENT,
                      type: K.UNSIGNED_SHORT,
                    },
                  )),
                this.dirtyId++,
                this.dirtyFormat++,
                this
              );
            }),
            (t.prototype.enableDepth = function () {
              return (
                (this.depth = !0), this.dirtyId++, this.dirtyFormat++, this
              );
            }),
            (t.prototype.enableStencil = function () {
              return (
                (this.stencil = !0), this.dirtyId++, this.dirtyFormat++, this
              );
            }),
            (t.prototype.resize = function (t, e) {
              if (
                ((t = Math.round(t)),
                (e = Math.round(e)),
                t !== this.width || e !== this.height)
              ) {
                (this.width = t),
                  (this.height = e),
                  this.dirtyId++,
                  this.dirtySize++;
                for (var n = 0; n < this.colorTextures.length; n++) {
                  var r = this.colorTextures[n],
                    i = r.resolution;
                  r.setSize(t / i, e / i);
                }
                this.depthTexture &&
                  ((i = this.depthTexture.resolution),
                  this.depthTexture.setSize(t / i, e / i));
              }
            }),
            (t.prototype.dispose = function () {
              this.disposeRunner.emit(this, !1);
            }),
            (t.prototype.destroyDepthTexture = function () {
              this.depthTexture &&
                (this.depthTexture.destroy(),
                (this.depthTexture = null),
                ++this.dirtyId,
                ++this.dirtyFormat);
            }),
            t
          );
        })(),
        Pn = (function (t) {
          function e(e) {
            void 0 === e && (e = {});
            var n = this;
            return (
              "number" == typeof e &&
                (e = {
                  width: arguments[0],
                  height: arguments[1],
                  scaleMode: arguments[2],
                  resolution: arguments[3],
                }),
              (e.width = e.width || 100),
              (e.height = e.height || 100),
              (e.multisample =
                void 0 !== e.multisample ? e.multisample : at.NONE),
              ((n = t.call(this, null, e) || this).mipmap = J.OFF),
              (n.valid = !0),
              (n.clearColor = [0, 0, 0, 0]),
              (n.framebuffer = new wn(
                n.realWidth,
                n.realHeight,
              ).addColorTexture(0, n)),
              (n.framebuffer.multisample = e.multisample),
              (n.maskStack = []),
              (n.filterStack = [{}]),
              n
            );
          }
          return (
            cn(e, t),
            (e.prototype.resize = function (t, e) {
              this.framebuffer.resize(t * this.resolution, e * this.resolution),
                this.setRealSize(
                  this.framebuffer.width,
                  this.framebuffer.height,
                );
            }),
            (e.prototype.dispose = function () {
              this.framebuffer.dispose(), t.prototype.dispose.call(this);
            }),
            (e.prototype.destroy = function () {
              t.prototype.destroy.call(this),
                this.framebuffer.destroyDepthTexture(),
                (this.framebuffer = null);
            }),
            e
          );
        })(_n),
        In = (function () {
          function t() {
            (this.x0 = 0),
              (this.y0 = 0),
              (this.x1 = 1),
              (this.y1 = 0),
              (this.x2 = 1),
              (this.y2 = 1),
              (this.x3 = 0),
              (this.y3 = 1),
              (this.uvsFloat32 = new Float32Array(8));
          }
          return (
            (t.prototype.set = function (t, e, n) {
              var r = e.width,
                i = e.height;
              if (n) {
                var o = t.width / 2 / r,
                  a = t.height / 2 / i,
                  s = t.x / r + o,
                  l = t.y / i + a;
                (n = xe.add(n, xe.NW)),
                  (this.x0 = s + o * xe.uX(n)),
                  (this.y0 = l + a * xe.uY(n)),
                  (n = xe.add(n, 2)),
                  (this.x1 = s + o * xe.uX(n)),
                  (this.y1 = l + a * xe.uY(n)),
                  (n = xe.add(n, 2)),
                  (this.x2 = s + o * xe.uX(n)),
                  (this.y2 = l + a * xe.uY(n)),
                  (n = xe.add(n, 2)),
                  (this.x3 = s + o * xe.uX(n)),
                  (this.y3 = l + a * xe.uY(n));
              } else
                (this.x0 = t.x / r),
                  (this.y0 = t.y / i),
                  (this.x1 = (t.x + t.width) / r),
                  (this.y1 = t.y / i),
                  (this.x2 = (t.x + t.width) / r),
                  (this.y2 = (t.y + t.height) / i),
                  (this.x3 = t.x / r),
                  (this.y3 = (t.y + t.height) / i);
              (this.uvsFloat32[0] = this.x0),
                (this.uvsFloat32[1] = this.y0),
                (this.uvsFloat32[2] = this.x1),
                (this.uvsFloat32[3] = this.y1),
                (this.uvsFloat32[4] = this.x2),
                (this.uvsFloat32[5] = this.y2),
                (this.uvsFloat32[6] = this.x3),
                (this.uvsFloat32[7] = this.y3);
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/core:TextureUvs x0=" +
                this.x0 +
                " y0=" +
                this.y0 +
                " x1=" +
                this.x1 +
                " y1=" +
                this.y1 +
                " x2=" +
                this.x2 +
                " y2=" +
                this.y2 +
                " x3=" +
                this.x3 +
                " y3=" +
                this.y3 +
                "]"
              );
            }),
            t
          );
        })(),
        On = new In();
      function Cn(t) {
        (t.destroy = function () {}),
          (t.on = function () {}),
          (t.once = function () {}),
          (t.emit = function () {});
      }
      var Nn = (function (t) {
          function e(n, r, i, o, a, s) {
            var l = t.call(this) || this;
            if (
              ((l.noFrame = !1),
              r || ((l.noFrame = !0), (r = new ue(0, 0, 1, 1))),
              n instanceof e && (n = n.baseTexture),
              (l.baseTexture = n),
              (l._frame = r),
              (l.trim = o),
              (l.valid = !1),
              (l._uvs = On),
              (l.uvMatrix = null),
              (l.orig = i || r),
              (l._rotate = Number(a || 0)),
              !0 === a)
            )
              l._rotate = 2;
            else if (l._rotate % 2 != 0)
              throw new Error(
                "attempt to use diamond-shaped UVs. If you are sure, set rotation manually",
              );
            return (
              (l.defaultAnchor = s ? new se(s.x, s.y) : new se(0, 0)),
              (l._updateID = 0),
              (l.textureCacheIds = []),
              n.valid
                ? l.noFrame
                  ? n.valid && l.onBaseTextureUpdated(n)
                  : (l.frame = r)
                : n.once("loaded", l.onBaseTextureUpdated, l),
              l.noFrame && n.on("update", l.onBaseTextureUpdated, l),
              l
            );
          }
          return (
            cn(e, t),
            (e.prototype.update = function () {
              this.baseTexture.resource && this.baseTexture.resource.update();
            }),
            (e.prototype.onBaseTextureUpdated = function (t) {
              if (this.noFrame) {
                if (!this.baseTexture.valid) return;
                (this._frame.width = t.width),
                  (this._frame.height = t.height),
                  (this.valid = !0),
                  this.updateUvs();
              } else this.frame = this._frame;
              this.emit("update", this);
            }),
            (e.prototype.destroy = function (t) {
              if (this.baseTexture) {
                if (t) {
                  var n = this.baseTexture.resource;
                  n && n.url && Jt[n.url] && e.removeFromCache(n.url),
                    this.baseTexture.destroy();
                }
                this.baseTexture.off("loaded", this.onBaseTextureUpdated, this),
                  this.baseTexture.off(
                    "update",
                    this.onBaseTextureUpdated,
                    this,
                  ),
                  (this.baseTexture = null);
              }
              (this._frame = null),
                (this._uvs = null),
                (this.trim = null),
                (this.orig = null),
                (this.valid = !1),
                e.removeFromCache(this),
                (this.textureCacheIds = null);
            }),
            (e.prototype.clone = function () {
              var t = this._frame.clone(),
                n = this._frame === this.orig ? t : this.orig.clone(),
                r = new e(
                  this.baseTexture,
                  !this.noFrame && t,
                  n,
                  this.trim && this.trim.clone(),
                  this.rotate,
                  this.defaultAnchor,
                );
              return this.noFrame && (r._frame = t), r;
            }),
            (e.prototype.updateUvs = function () {
              this._uvs === On && (this._uvs = new In()),
                this._uvs.set(this._frame, this.baseTexture, this.rotate),
                this._updateID++;
            }),
            (e.from = function (t, n, r) {
              void 0 === n && (n = {}),
                void 0 === r && (r = At.STRICT_TEXTURE_CACHE);
              var i = "string" == typeof t,
                o = null;
              if (i) o = t;
              else if (t instanceof _n) {
                if (!t.cacheId) {
                  var a = (n && n.pixiIdPrefix) || "pixiid";
                  (t.cacheId = a + "-" + qt()), _n.addToCache(t, t.cacheId);
                }
                o = t.cacheId;
              } else
                t._pixiId ||
                  ((a = (n && n.pixiIdPrefix) || "pixiid"),
                  (t._pixiId = a + "_" + qt())),
                  (o = t._pixiId);
              var s = Jt[o];
              if (i && r && !s)
                throw new Error(
                  'The cacheId "' + o + '" does not exist in TextureCache.',
                );
              return (
                s || t instanceof _n
                  ? !s &&
                    t instanceof _n &&
                    ((s = new e(t)), e.addToCache(s, o))
                  : (n.resolution || (n.resolution = ne(t)),
                    ((s = new e(new _n(t, n))).baseTexture.cacheId = o),
                    _n.addToCache(s.baseTexture, o),
                    e.addToCache(s, o)),
                s
              );
            }),
            (e.fromURL = function (t, n) {
              var r = Object.assign(
                  { autoLoad: !1 },
                  null == n ? void 0 : n.resourceOptions,
                ),
                i = e.from(t, Object.assign({ resourceOptions: r }, n), !1),
                o = i.baseTexture.resource;
              return i.baseTexture.valid
                ? Promise.resolve(i)
                : o.load().then(function () {
                    return Promise.resolve(i);
                  });
            }),
            (e.fromBuffer = function (t, n, r, i) {
              return new e(_n.fromBuffer(t, n, r, i));
            }),
            (e.fromLoader = function (t, n, r, i) {
              var o = new _n(
                  t,
                  Object.assign(
                    { scaleMode: At.SCALE_MODE, resolution: ne(n) },
                    i,
                  ),
                ),
                a = o.resource;
              a instanceof bn && (a.url = n);
              var s = new e(o);
              return (
                r || (r = n),
                _n.addToCache(s.baseTexture, r),
                e.addToCache(s, r),
                r !== n &&
                  (_n.addToCache(s.baseTexture, n), e.addToCache(s, n)),
                s.baseTexture.valid
                  ? Promise.resolve(s)
                  : new Promise(function (t) {
                      s.baseTexture.once("loaded", function () {
                        return t(s);
                      });
                    })
              );
            }),
            (e.addToCache = function (t, e) {
              e &&
                (-1 === t.textureCacheIds.indexOf(e) &&
                  t.textureCacheIds.push(e),
                Jt[e] &&
                  console.warn(
                    "Texture added to the cache with an id [" +
                      e +
                      "] that already had an entry",
                  ),
                (Jt[e] = t));
            }),
            (e.removeFromCache = function (t) {
              if ("string" == typeof t) {
                var e = Jt[t];
                if (e) {
                  var n = e.textureCacheIds.indexOf(t);
                  return (
                    n > -1 && e.textureCacheIds.splice(n, 1), delete Jt[t], e
                  );
                }
              } else if (t && t.textureCacheIds) {
                for (var r = 0; r < t.textureCacheIds.length; ++r)
                  Jt[t.textureCacheIds[r]] === t &&
                    delete Jt[t.textureCacheIds[r]];
                return (t.textureCacheIds.length = 0), t;
              }
              return null;
            }),
            Object.defineProperty(e.prototype, "resolution", {
              get: function () {
                return this.baseTexture.resolution;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "frame", {
              get: function () {
                return this._frame;
              },
              set: function (t) {
                (this._frame = t), (this.noFrame = !1);
                var e = t.x,
                  n = t.y,
                  r = t.width,
                  i = t.height,
                  o = e + r > this.baseTexture.width,
                  a = n + i > this.baseTexture.height;
                if (o || a) {
                  var s = o && a ? "and" : "or",
                    l =
                      "X: " +
                      e +
                      " + " +
                      r +
                      " = " +
                      (e + r) +
                      " > " +
                      this.baseTexture.width,
                    u =
                      "Y: " +
                      n +
                      " + " +
                      i +
                      " = " +
                      (n + i) +
                      " > " +
                      this.baseTexture.height;
                  throw new Error(
                    "Texture Error: frame does not fit inside the base Texture dimensions: " +
                      l +
                      " " +
                      s +
                      " " +
                      u,
                  );
                }
                (this.valid = r && i && this.baseTexture.valid),
                  this.trim || this.rotate || (this.orig = t),
                  this.valid && this.updateUvs();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "rotate", {
              get: function () {
                return this._rotate;
              },
              set: function (t) {
                (this._rotate = t), this.valid && this.updateUvs();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "width", {
              get: function () {
                return this.orig.width;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "height", {
              get: function () {
                return this.orig.height;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.castToBaseTexture = function () {
              return this.baseTexture;
            }),
            Object.defineProperty(e, "EMPTY", {
              get: function () {
                return (
                  e._EMPTY ||
                    ((e._EMPTY = new e(new _n())),
                    Cn(e._EMPTY),
                    Cn(e._EMPTY.baseTexture)),
                  e._EMPTY
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e, "WHITE", {
              get: function () {
                if (!e._WHITE) {
                  var t = At.ADAPTER.createCanvas(16, 16),
                    n = t.getContext("2d");
                  (t.width = 16),
                    (t.height = 16),
                    (n.fillStyle = "white"),
                    n.fillRect(0, 0, 16, 16),
                    (e._WHITE = new e(_n.from(t))),
                    Cn(e._WHITE),
                    Cn(e._WHITE.baseTexture);
                }
                return e._WHITE;
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Rt),
        Ln = (function (t) {
          function e(e, n) {
            var r = t.call(this, e, n) || this;
            return (
              (r.valid = !0),
              (r.filterFrame = null),
              (r.filterPoolKey = null),
              r.updateUvs(),
              r
            );
          }
          return (
            cn(e, t),
            Object.defineProperty(e.prototype, "framebuffer", {
              get: function () {
                return this.baseTexture.framebuffer;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "multisample", {
              get: function () {
                return this.framebuffer.multisample;
              },
              set: function (t) {
                this.framebuffer.multisample = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.resize = function (t, e, n) {
              void 0 === n && (n = !0);
              var r = this.baseTexture.resolution,
                i = Math.round(t * r) / r,
                o = Math.round(e * r) / r;
              (this.valid = i > 0 && o > 0),
                (this._frame.width = this.orig.width = i),
                (this._frame.height = this.orig.height = o),
                n && this.baseTexture.resize(i, o),
                this.updateUvs();
            }),
            (e.prototype.setResolution = function (t) {
              var e = this.baseTexture;
              e.resolution !== t &&
                (e.setResolution(t), this.resize(e.width, e.height, !1));
            }),
            (e.create = function (t) {
              for (var n = arguments, r = [], i = 1; i < arguments.length; i++)
                r[i - 1] = n[i];
              return (
                "number" == typeof t &&
                  (Zt(
                    "6.0.0",
                    "Arguments (width, height, scaleMode, resolution) have been deprecated.",
                  ),
                  (t = {
                    width: t,
                    height: r[0],
                    scaleMode: r[1],
                    resolution: r[2],
                  })),
                new e(new Pn(t))
              );
            }),
            e
          );
        })(Nn),
        Dn = (function () {
          function t(t) {
            (this.texturePool = {}),
              (this.textureOptions = t || {}),
              (this.enableFullScreen = !1),
              (this._pixelsWidth = 0),
              (this._pixelsHeight = 0);
          }
          return (
            (t.prototype.createTexture = function (t, e, n) {
              void 0 === n && (n = at.NONE);
              var r = new Pn(
                Object.assign(
                  { width: t, height: e, resolution: 1, multisample: n },
                  this.textureOptions,
                ),
              );
              return new Ln(r);
            }),
            (t.prototype.getOptimalTexture = function (t, e, n, r) {
              var i;
              void 0 === n && (n = 1),
                void 0 === r && (r = at.NONE),
                (t = Math.ceil(t * n - 1e-6)),
                (e = Math.ceil(e * n - 1e-6)),
                this.enableFullScreen &&
                t === this._pixelsWidth &&
                e === this._pixelsHeight
                  ? (i = r > 1 ? -r : -1)
                  : ((i =
                      (((65535 & (t = zt(t))) << 16) |
                        (65535 & (e = zt(e)))) >>>
                      0),
                    r > 1 && (i += 4294967296 * r)),
                this.texturePool[i] || (this.texturePool[i] = []);
              var o = this.texturePool[i].pop();
              return (
                o || (o = this.createTexture(t, e, r)),
                (o.filterPoolKey = i),
                o.setResolution(n),
                o
              );
            }),
            (t.prototype.getFilterTexture = function (t, e, n) {
              var r = this.getOptimalTexture(
                t.width,
                t.height,
                e || t.resolution,
                n || at.NONE,
              );
              return (r.filterFrame = t.filterFrame), r;
            }),
            (t.prototype.returnTexture = function (t) {
              var e = t.filterPoolKey;
              (t.filterFrame = null), this.texturePool[e].push(t);
            }),
            (t.prototype.returnFilterTexture = function (t) {
              this.returnTexture(t);
            }),
            (t.prototype.clear = function (t) {
              if ((t = !1 !== t))
                for (var e in this.texturePool) {
                  var n = this.texturePool[e];
                  if (n) for (var r = 0; r < n.length; r++) n[r].destroy(!0);
                }
              this.texturePool = {};
            }),
            (t.prototype.setScreenSize = function (t) {
              if (
                t.width !== this._pixelsWidth ||
                t.height !== this._pixelsHeight
              ) {
                for (var e in ((this.enableFullScreen =
                  t.width > 0 && t.height > 0),
                this.texturePool))
                  if (Number(e) < 0) {
                    var n = this.texturePool[e];
                    if (n) for (var r = 0; r < n.length; r++) n[r].destroy(!0);
                    this.texturePool[e] = [];
                  }
                (this._pixelsWidth = t.width), (this._pixelsHeight = t.height);
              }
            }),
            (t.SCREEN_KEY = -1),
            t
          );
        })(),
        Un = (function () {
          function t(t, e, n, r, i, o, a) {
            void 0 === e && (e = 0),
              void 0 === n && (n = !1),
              void 0 === r && (r = K.FLOAT),
              (this.buffer = t),
              (this.size = e),
              (this.normalized = n),
              (this.type = r),
              (this.stride = i),
              (this.start = o),
              (this.instance = a);
          }
          return (
            (t.prototype.destroy = function () {
              this.buffer = null;
            }),
            (t.from = function (e, n, r, i, o) {
              return new t(e, n, r, i, o);
            }),
            t
          );
        })(),
        Fn = 0,
        Bn = (function () {
          function t(t, e, n) {
            void 0 === e && (e = !0),
              void 0 === n && (n = !1),
              (this.data = t || new Float32Array(1)),
              (this._glBuffers = {}),
              (this._updateID = 0),
              (this.index = n),
              (this.static = e),
              (this.id = Fn++),
              (this.disposeRunner = new rn("disposeBuffer"));
          }
          return (
            (t.prototype.update = function (t) {
              t instanceof Array && (t = new Float32Array(t)),
                (this.data = t || this.data),
                this._updateID++;
            }),
            (t.prototype.dispose = function () {
              this.disposeRunner.emit(this, !1);
            }),
            (t.prototype.destroy = function () {
              this.dispose(), (this.data = null);
            }),
            Object.defineProperty(t.prototype, "index", {
              get: function () {
                return this.type === st.ELEMENT_ARRAY_BUFFER;
              },
              set: function (t) {
                this.type = t ? st.ELEMENT_ARRAY_BUFFER : st.ARRAY_BUFFER;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.from = function (e) {
              return e instanceof Array && (e = new Float32Array(e)), new t(e);
            }),
            t
          );
        })(),
        Gn = { Float32Array, Uint32Array, Int32Array, Uint8Array },
        kn = { 5126: 4, 5123: 2, 5121: 1 },
        Hn = 0,
        zn = { Float32Array, Uint32Array, Int32Array, Uint8Array, Uint16Array },
        Vn = (function () {
          function t(t, e) {
            void 0 === t && (t = []),
              void 0 === e && (e = {}),
              (this.buffers = t),
              (this.indexBuffer = null),
              (this.attributes = e),
              (this.glVertexArrayObjects = {}),
              (this.id = Hn++),
              (this.instanced = !1),
              (this.instanceCount = 1),
              (this.disposeRunner = new rn("disposeGeometry")),
              (this.refCount = 0);
          }
          return (
            (t.prototype.addAttribute = function (t, e, n, r, i, o, a, s) {
              if (
                (void 0 === n && (n = 0),
                void 0 === r && (r = !1),
                void 0 === s && (s = !1),
                !e)
              )
                throw new Error(
                  "You must pass a buffer when creating an attribute",
                );
              e instanceof Bn ||
                (e instanceof Array && (e = new Float32Array(e)),
                (e = new Bn(e)));
              var l = t.split("|");
              if (l.length > 1) {
                for (var u = 0; u < l.length; u++)
                  this.addAttribute(l[u], e, n, r, i);
                return this;
              }
              var h = this.buffers.indexOf(e);
              return (
                -1 === h &&
                  (this.buffers.push(e), (h = this.buffers.length - 1)),
                (this.attributes[t] = new Un(h, n, r, i, o, a, s)),
                (this.instanced = this.instanced || s),
                this
              );
            }),
            (t.prototype.getAttribute = function (t) {
              return this.attributes[t];
            }),
            (t.prototype.getBuffer = function (t) {
              return this.buffers[this.getAttribute(t).buffer];
            }),
            (t.prototype.addIndex = function (t) {
              return (
                t instanceof Bn ||
                  (t instanceof Array && (t = new Uint16Array(t)),
                  (t = new Bn(t))),
                (t.type = st.ELEMENT_ARRAY_BUFFER),
                (this.indexBuffer = t),
                -1 === this.buffers.indexOf(t) && this.buffers.push(t),
                this
              );
            }),
            (t.prototype.getIndex = function () {
              return this.indexBuffer;
            }),
            (t.prototype.interleave = function () {
              if (
                1 === this.buffers.length ||
                (2 === this.buffers.length && this.indexBuffer)
              )
                return this;
              var t,
                e = [],
                n = [],
                r = new Bn();
              for (t in this.attributes) {
                var i = this.attributes[t],
                  o = this.buffers[i.buffer];
                e.push(o.data),
                  n.push((i.size * kn[i.type]) / 4),
                  (i.buffer = 0);
              }
              for (
                r.data = (function (t, e) {
                  for (var n = 0, r = 0, i = {}, o = 0; o < t.length; o++)
                    (r += e[o]), (n += t[o].length);
                  var a = new ArrayBuffer(4 * n),
                    s = null,
                    l = 0;
                  for (o = 0; o < t.length; o++) {
                    var u = e[o],
                      h = t[o],
                      c = Ht(h);
                    i[c] || (i[c] = new Gn[c](a)), (s = i[c]);
                    for (var d = 0; d < h.length; d++)
                      s[((d / u) | 0) * r + l + (d % u)] = h[d];
                    l += u;
                  }
                  return new Float32Array(a);
                })(e, n),
                  t = 0;
                t < this.buffers.length;
                t++
              )
                this.buffers[t] !== this.indexBuffer &&
                  this.buffers[t].destroy();
              return (
                (this.buffers = [r]),
                this.indexBuffer && this.buffers.push(this.indexBuffer),
                this
              );
            }),
            (t.prototype.getSize = function () {
              for (var t in this.attributes) {
                var e = this.attributes[t];
                return (
                  this.buffers[e.buffer].data.length / (e.stride / 4 || e.size)
                );
              }
              return 0;
            }),
            (t.prototype.dispose = function () {
              this.disposeRunner.emit(this, !1);
            }),
            (t.prototype.destroy = function () {
              this.dispose(),
                (this.buffers = null),
                (this.indexBuffer = null),
                (this.attributes = null);
            }),
            (t.prototype.clone = function () {
              for (var e = new t(), n = 0; n < this.buffers.length; n++)
                e.buffers[n] = new Bn(this.buffers[n].data.slice(0));
              for (var n in this.attributes) {
                var r = this.attributes[n];
                e.attributes[n] = new Un(
                  r.buffer,
                  r.size,
                  r.normalized,
                  r.type,
                  r.stride,
                  r.start,
                  r.instance,
                );
              }
              return (
                this.indexBuffer &&
                  ((e.indexBuffer =
                    e.buffers[this.buffers.indexOf(this.indexBuffer)]),
                  (e.indexBuffer.type = st.ELEMENT_ARRAY_BUFFER)),
                e
              );
            }),
            (t.merge = function (e) {
              for (
                var n, r = new t(), i = [], o = [], a = [], s = 0;
                s < e.length;
                s++
              ) {
                n = e[s];
                for (var l = 0; l < n.buffers.length; l++)
                  (o[l] = o[l] || 0),
                    (o[l] += n.buffers[l].data.length),
                    (a[l] = 0);
              }
              for (s = 0; s < n.buffers.length; s++)
                (i[s] = new zn[Ht(n.buffers[s].data)](o[s])),
                  (r.buffers[s] = new Bn(i[s]));
              for (s = 0; s < e.length; s++)
                for (n = e[s], l = 0; l < n.buffers.length; l++)
                  i[l].set(n.buffers[l].data, a[l]),
                    (a[l] += n.buffers[l].data.length);
              if (((r.attributes = n.attributes), n.indexBuffer)) {
                (r.indexBuffer = r.buffers[n.buffers.indexOf(n.indexBuffer)]),
                  (r.indexBuffer.type = st.ELEMENT_ARRAY_BUFFER);
                var u = 0,
                  h = 0,
                  c = 0,
                  d = 0;
                for (s = 0; s < n.buffers.length; s++)
                  if (n.buffers[s] !== n.indexBuffer) {
                    d = s;
                    break;
                  }
                for (var s in n.attributes) {
                  var f = n.attributes[s];
                  (0 | f.buffer) === d && (h += (f.size * kn[f.type]) / 4);
                }
                for (s = 0; s < e.length; s++) {
                  var p = e[s].indexBuffer.data;
                  for (l = 0; l < p.length; l++) r.indexBuffer.data[l + c] += u;
                  (u += e[s].buffers[d].data.length / h), (c += p.length);
                }
              }
              return r;
            }),
            t
          );
        })(),
        Xn = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              e
                .addAttribute(
                  "aVertexPosition",
                  new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),
                )
                .addIndex([0, 1, 3, 2]),
              e
            );
          }
          return cn(e, t), e;
        })(Vn),
        Wn = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e.vertices = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1])),
              (e.uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])),
              (e.vertexBuffer = new Bn(e.vertices)),
              (e.uvBuffer = new Bn(e.uvs)),
              e
                .addAttribute("aVertexPosition", e.vertexBuffer)
                .addAttribute("aTextureCoord", e.uvBuffer)
                .addIndex([0, 1, 2, 0, 2, 3]),
              e
            );
          }
          return (
            cn(e, t),
            (e.prototype.map = function (t, e) {
              var n = 0,
                r = 0;
              return (
                (this.uvs[0] = n),
                (this.uvs[1] = r),
                (this.uvs[2] = n + e.width / t.width),
                (this.uvs[3] = r),
                (this.uvs[4] = n + e.width / t.width),
                (this.uvs[5] = r + e.height / t.height),
                (this.uvs[6] = n),
                (this.uvs[7] = r + e.height / t.height),
                (n = e.x),
                (r = e.y),
                (this.vertices[0] = n),
                (this.vertices[1] = r),
                (this.vertices[2] = n + e.width),
                (this.vertices[3] = r),
                (this.vertices[4] = n + e.width),
                (this.vertices[5] = r + e.height),
                (this.vertices[6] = n),
                (this.vertices[7] = r + e.height),
                this.invalidate(),
                this
              );
            }),
            (e.prototype.invalidate = function () {
              return (
                this.vertexBuffer._updateID++, this.uvBuffer._updateID++, this
              );
            }),
            e
          );
        })(Vn),
        jn = 0,
        Yn = (function () {
          function t(t, e, n) {
            (this.group = !0),
              (this.syncUniforms = {}),
              (this.dirtyId = 0),
              (this.id = jn++),
              (this.static = !!e),
              (this.ubo = !!n),
              t instanceof Bn
                ? ((this.buffer = t),
                  (this.buffer.type = st.UNIFORM_BUFFER),
                  (this.autoManage = !1),
                  (this.ubo = !0))
                : ((this.uniforms = t),
                  this.ubo &&
                    ((this.buffer = new Bn(new Float32Array(1))),
                    (this.buffer.type = st.UNIFORM_BUFFER),
                    (this.autoManage = !0)));
          }
          return (
            (t.prototype.update = function () {
              this.dirtyId++,
                !this.autoManage && this.buffer && this.buffer.update();
            }),
            (t.prototype.add = function (e, n, r) {
              if (this.ubo)
                throw new Error(
                  "[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them",
                );
              this.uniforms[e] = new t(n, r);
            }),
            (t.from = function (e, n, r) {
              return new t(e, n, r);
            }),
            (t.uboFrom = function (e, n) {
              return new t(e, null == n || n, !0);
            }),
            t
          );
        })(),
        qn = (function () {
          function t() {
            (this.renderTexture = null),
              (this.target = null),
              (this.legacy = !1),
              (this.resolution = 1),
              (this.multisample = at.NONE),
              (this.sourceFrame = new ue()),
              (this.destinationFrame = new ue()),
              (this.bindingSourceFrame = new ue()),
              (this.bindingDestinationFrame = new ue()),
              (this.filters = []),
              (this.transform = null);
          }
          return (
            (t.prototype.clear = function () {
              (this.target = null),
                (this.filters = null),
                (this.renderTexture = null);
            }),
            t
          );
        })(),
        Kn = [new se(), new se(), new se(), new se()],
        Zn = new me(),
        Qn = (function () {
          function t(t) {
            (this.renderer = t),
              (this.defaultFilterStack = [{}]),
              (this.texturePool = new Dn()),
              this.texturePool.setScreenSize(t.view),
              (this.statePool = []),
              (this.quad = new Xn()),
              (this.quadUv = new Wn()),
              (this.tempRect = new ue()),
              (this.activeState = {}),
              (this.globalUniforms = new Yn(
                {
                  outputFrame: new ue(),
                  inputSize: new Float32Array(4),
                  inputPixel: new Float32Array(4),
                  inputClamp: new Float32Array(4),
                  resolution: 1,
                  filterArea: new Float32Array(4),
                  filterClamp: new Float32Array(4),
                },
                !0,
              )),
              (this.forceClear = !1),
              (this.useMaxPadding = !1);
          }
          return (
            (t.prototype.push = function (t, e) {
              for (
                var n,
                  r,
                  i = this.renderer,
                  o = this.defaultFilterStack,
                  a = this.statePool.pop() || new qn(),
                  s = this.renderer.renderTexture,
                  l = e[0].resolution,
                  u = e[0].multisample,
                  h = e[0].padding,
                  c = e[0].autoFit,
                  d = null === (n = e[0].legacy) || void 0 === n || n,
                  f = 1;
                f < e.length;
                f++
              ) {
                var p = e[f];
                (l = Math.min(l, p.resolution)),
                  (u = Math.min(u, p.multisample)),
                  (h = this.useMaxPadding
                    ? Math.max(h, p.padding)
                    : h + p.padding),
                  (c = c && p.autoFit),
                  (d = d || null === (r = p.legacy) || void 0 === r || r);
              }
              1 === o.length &&
                (this.defaultFilterStack[0].renderTexture = s.current),
                o.push(a),
                (a.resolution = l),
                (a.multisample = u),
                (a.legacy = d),
                (a.target = t),
                a.sourceFrame.copyFrom(t.filterArea || t.getBounds(!0)),
                a.sourceFrame.pad(h);
              var m = this.tempRect.copyFrom(s.sourceFrame);
              i.projection.transform &&
                this.transformAABB(
                  Zn.copyFrom(i.projection.transform).invert(),
                  m,
                ),
                c
                  ? (a.sourceFrame.fit(m),
                    (a.sourceFrame.width <= 0 || a.sourceFrame.height <= 0) &&
                      ((a.sourceFrame.width = 0), (a.sourceFrame.height = 0)))
                  : a.sourceFrame.intersects(m) ||
                    ((a.sourceFrame.width = 0), (a.sourceFrame.height = 0)),
                this.roundFrame(
                  a.sourceFrame,
                  s.current ? s.current.resolution : i.resolution,
                  s.sourceFrame,
                  s.destinationFrame,
                  i.projection.transform,
                ),
                (a.renderTexture = this.getOptimalFilterTexture(
                  a.sourceFrame.width,
                  a.sourceFrame.height,
                  l,
                  u,
                )),
                (a.filters = e),
                (a.destinationFrame.width = a.renderTexture.width),
                (a.destinationFrame.height = a.renderTexture.height);
              var _ = this.tempRect;
              (_.x = 0),
                (_.y = 0),
                (_.width = a.sourceFrame.width),
                (_.height = a.sourceFrame.height),
                (a.renderTexture.filterFrame = a.sourceFrame),
                a.bindingSourceFrame.copyFrom(s.sourceFrame),
                a.bindingDestinationFrame.copyFrom(s.destinationFrame),
                (a.transform = i.projection.transform),
                (i.projection.transform = null),
                s.bind(a.renderTexture, a.sourceFrame, _),
                i.framebuffer.clear(0, 0, 0, 0);
            }),
            (t.prototype.pop = function () {
              var t = this.defaultFilterStack,
                e = t.pop(),
                n = e.filters;
              this.activeState = e;
              var r = this.globalUniforms.uniforms;
              (r.outputFrame = e.sourceFrame), (r.resolution = e.resolution);
              var i = r.inputSize,
                o = r.inputPixel,
                a = r.inputClamp;
              if (
                ((i[0] = e.destinationFrame.width),
                (i[1] = e.destinationFrame.height),
                (i[2] = 1 / i[0]),
                (i[3] = 1 / i[1]),
                (o[0] = Math.round(i[0] * e.resolution)),
                (o[1] = Math.round(i[1] * e.resolution)),
                (o[2] = 1 / o[0]),
                (o[3] = 1 / o[1]),
                (a[0] = 0.5 * o[2]),
                (a[1] = 0.5 * o[3]),
                (a[2] = e.sourceFrame.width * i[2] - 0.5 * o[2]),
                (a[3] = e.sourceFrame.height * i[3] - 0.5 * o[3]),
                e.legacy)
              ) {
                var s = r.filterArea;
                (s[0] = e.destinationFrame.width),
                  (s[1] = e.destinationFrame.height),
                  (s[2] = e.sourceFrame.x),
                  (s[3] = e.sourceFrame.y),
                  (r.filterClamp = r.inputClamp);
              }
              this.globalUniforms.update();
              var l = t[t.length - 1];
              if ((this.renderer.framebuffer.blit(), 1 === n.length))
                n[0].apply(this, e.renderTexture, l.renderTexture, et.BLEND, e),
                  this.returnFilterTexture(e.renderTexture);
              else {
                var u = e.renderTexture,
                  h = this.getOptimalFilterTexture(
                    u.width,
                    u.height,
                    e.resolution,
                  );
                h.filterFrame = u.filterFrame;
                var c = 0;
                for (c = 0; c < n.length - 1; ++c) {
                  1 === c &&
                    e.multisample > 1 &&
                    ((h = this.getOptimalFilterTexture(
                      u.width,
                      u.height,
                      e.resolution,
                    )).filterFrame = u.filterFrame),
                    n[c].apply(this, u, h, et.CLEAR, e);
                  var d = u;
                  (u = h), (h = d);
                }
                n[c].apply(this, u, l.renderTexture, et.BLEND, e),
                  c > 1 &&
                    e.multisample > 1 &&
                    this.returnFilterTexture(e.renderTexture),
                  this.returnFilterTexture(u),
                  this.returnFilterTexture(h);
              }
              e.clear(), this.statePool.push(e);
            }),
            (t.prototype.bindAndClear = function (t, e) {
              void 0 === e && (e = et.CLEAR);
              var n = this.renderer,
                r = n.renderTexture,
                i = n.state;
              if (
                (t ===
                this.defaultFilterStack[this.defaultFilterStack.length - 1]
                  .renderTexture
                  ? (this.renderer.projection.transform =
                      this.activeState.transform)
                  : (this.renderer.projection.transform = null),
                t && t.filterFrame)
              ) {
                var o = this.tempRect;
                (o.x = 0),
                  (o.y = 0),
                  (o.width = t.filterFrame.width),
                  (o.height = t.filterFrame.height),
                  r.bind(t, t.filterFrame, o);
              } else
                t !==
                this.defaultFilterStack[this.defaultFilterStack.length - 1]
                  .renderTexture
                  ? r.bind(t)
                  : this.renderer.renderTexture.bind(
                      t,
                      this.activeState.bindingSourceFrame,
                      this.activeState.bindingDestinationFrame,
                    );
              var a = 1 & i.stateId || this.forceClear;
              (e === et.CLEAR || (e === et.BLIT && a)) &&
                this.renderer.framebuffer.clear(0, 0, 0, 0);
            }),
            (t.prototype.applyFilter = function (t, e, n, r) {
              var i = this.renderer;
              i.state.set(t.state),
                this.bindAndClear(n, r),
                (t.uniforms.uSampler = e),
                (t.uniforms.filterGlobals = this.globalUniforms),
                i.shader.bind(t),
                (t.legacy = !!t.program.attributeData.aTextureCoord),
                t.legacy
                  ? (this.quadUv.map(e._frame, e.filterFrame),
                    i.geometry.bind(this.quadUv),
                    i.geometry.draw(j.TRIANGLES))
                  : (i.geometry.bind(this.quad),
                    i.geometry.draw(j.TRIANGLE_STRIP));
            }),
            (t.prototype.calculateSpriteMatrix = function (t, e) {
              var n = this.activeState,
                r = n.sourceFrame,
                i = n.destinationFrame,
                o = e._texture.orig,
                a = t.set(i.width, 0, 0, i.height, r.x, r.y),
                s = e.worldTransform.copyTo(me.TEMP_MATRIX);
              return (
                s.invert(),
                a.prepend(s),
                a.scale(1 / o.width, 1 / o.height),
                a.translate(e.anchor.x, e.anchor.y),
                a
              );
            }),
            (t.prototype.destroy = function () {
              (this.renderer = null), this.texturePool.clear(!1);
            }),
            (t.prototype.getOptimalFilterTexture = function (t, e, n, r) {
              return (
                void 0 === n && (n = 1),
                void 0 === r && (r = at.NONE),
                this.texturePool.getOptimalTexture(t, e, n, r)
              );
            }),
            (t.prototype.getFilterTexture = function (t, e, n) {
              if ("number" == typeof t) {
                var r = t;
                (t = e), (e = r);
              }
              t = t || this.activeState.renderTexture;
              var i = this.texturePool.getOptimalTexture(
                t.width,
                t.height,
                e || t.resolution,
                n || at.NONE,
              );
              return (i.filterFrame = t.filterFrame), i;
            }),
            (t.prototype.returnFilterTexture = function (t) {
              this.texturePool.returnTexture(t);
            }),
            (t.prototype.emptyPool = function () {
              this.texturePool.clear(!0);
            }),
            (t.prototype.resize = function () {
              this.texturePool.setScreenSize(this.renderer.view);
            }),
            (t.prototype.transformAABB = function (t, e) {
              var n = Kn[0],
                r = Kn[1],
                i = Kn[2],
                o = Kn[3];
              n.set(e.left, e.top),
                r.set(e.left, e.bottom),
                i.set(e.right, e.top),
                o.set(e.right, e.bottom),
                t.apply(n, n),
                t.apply(r, r),
                t.apply(i, i),
                t.apply(o, o);
              var a = Math.min(n.x, r.x, i.x, o.x),
                s = Math.min(n.y, r.y, i.y, o.y),
                l = Math.max(n.x, r.x, i.x, o.x),
                u = Math.max(n.y, r.y, i.y, o.y);
              (e.x = a), (e.y = s), (e.width = l - a), (e.height = u - s);
            }),
            (t.prototype.roundFrame = function (t, e, n, r, i) {
              if (
                !(
                  t.width <= 0 ||
                  t.height <= 0 ||
                  n.width <= 0 ||
                  n.height <= 0
                )
              ) {
                if (i) {
                  var o = i.a,
                    a = i.b,
                    s = i.c,
                    l = i.d;
                  if (
                    (Math.abs(a) > 1e-4 || Math.abs(s) > 1e-4) &&
                    (Math.abs(o) > 1e-4 || Math.abs(l) > 1e-4)
                  )
                    return;
                }
                (i = i ? Zn.copyFrom(i) : Zn.identity())
                  .translate(-n.x, -n.y)
                  .scale(r.width / n.width, r.height / n.height)
                  .translate(r.x, r.y),
                  this.transformAABB(i, t),
                  t.ceil(e),
                  this.transformAABB(i.invert(), t);
              }
            }),
            t
          );
        })(),
        $n = (function () {
          function t(t) {
            this.renderer = t;
          }
          return (
            (t.prototype.flush = function () {}),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            (t.prototype.start = function () {}),
            (t.prototype.Parar = function () {
              this.flush();
            }),
            (t.prototype.render = function (t) {}),
            t
          );
        })(),
        Jn = (function () {
          function t(t) {
            (this.renderer = t),
              (this.emptyRenderer = new $n(t)),
              (this.currentRenderer = this.emptyRenderer);
          }
          return (
            (t.prototype.setObjectRenderer = function (t) {
              this.currentRenderer !== t &&
                (this.currentRenderer.Parar(),
                (this.currentRenderer = t),
                this.currentRenderer.start());
            }),
            (t.prototype.flush = function () {
              this.setObjectRenderer(this.emptyRenderer);
            }),
            (t.prototype.reset = function () {
              this.setObjectRenderer(this.emptyRenderer);
            }),
            (t.prototype.copyBoundTextures = function (t, e) {
              for (
                var n = this.renderer.texture.boundTextures, r = e - 1;
                r >= 0;
                --r
              )
                (t[r] = n[r] || null), t[r] && (t[r]._batchLocation = r);
            }),
            (t.prototype.boundArray = function (t, e, n, r) {
              for (
                var i = t.elements, o = t.ids, a = t.count, s = 0, l = 0;
                l < a;
                l++
              ) {
                var u = i[l],
                  h = u._batchLocation;
                if (h >= 0 && h < r && e[h] === u) o[l] = h;
                else
                  for (; s < r; ) {
                    var c = e[s];
                    if (!c || c._batchEnabled !== n || c._batchLocation !== s) {
                      (o[l] = s), (u._batchLocation = s), (e[s] = u);
                      break;
                    }
                    s++;
                  }
              }
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        tr = 0,
        er = (function () {
          function t(t) {
            (this.renderer = t),
              (this.webGLVersion = 1),
              (this.extensions = {}),
              (this.supports = { uint32Indices: !1 }),
              (this.handleContextLost = this.handleContextLost.bind(this)),
              (this.handleContextRestored =
                this.handleContextRestored.bind(this)),
              t.view.addEventListener(
                "webglcontextlost",
                this.handleContextLost,
                !1,
              ),
              t.view.addEventListener(
                "webglcontextrestored",
                this.handleContextRestored,
                !1,
              );
          }
          return (
            Object.defineProperty(t.prototype, "isLost", {
              get: function () {
                return !this.gl || this.gl.isContextLost();
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.contextChange = function (t) {
              (this.gl = t),
                (this.renderer.gl = t),
                (this.renderer.CONTEXT_UID = tr++),
                t.isContextLost() &&
                  t.getExtension("WEBGL_lose_context") &&
                  t.getExtension("WEBGL_lose_context").restoreContext();
            }),
            (t.prototype.initFromContext = function (t) {
              (this.gl = t),
                this.validateContext(t),
                (this.renderer.gl = t),
                (this.renderer.CONTEXT_UID = tr++),
                this.renderer.runners.contextChange.emit(t);
            }),
            (t.prototype.initFromOptions = function (t) {
              var e = this.createContext(this.renderer.view, t);
              this.initFromContext(e);
            }),
            (t.prototype.createContext = function (t, e) {
              var n;
              if (
                (At.PREFER_ENV >= z.WEBGL2 && (n = t.getContext("webgl2", e)),
                n)
              )
                this.webGLVersion = 2;
              else if (
                ((this.webGLVersion = 1),
                !(n =
                  t.getContext("webgl", e) ||
                  t.getContext("experimental-webgl", e)))
              )
                throw new Error(
                  "This browser does not support WebGL. Try using the canvas renderer",
                );
              return (this.gl = n), this.getExtensions(), this.gl;
            }),
            (t.prototype.getExtensions = function () {
              var t = this.gl,
                e = {
                  anisotropicFiltering: t.getExtension(
                    "EXT_texture_filter_anisotropic",
                  ),
                  floatTextureLinear: t.getExtension(
                    "OES_texture_float_linear",
                  ),
                  s3tc: t.getExtension("WEBGL_compressed_texture_s3tc"),
                  s3tc_sRGB: t.getExtension(
                    "WEBGL_compressed_texture_s3tc_srgb",
                  ),
                  etc: t.getExtension("WEBGL_compressed_texture_etc"),
                  etc1: t.getExtension("WEBGL_compressed_texture_etc1"),
                  pvrtc:
                    t.getExtension("WEBGL_compressed_texture_pvrtc") ||
                    t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
                  atc: t.getExtension("WEBGL_compressed_texture_atc"),
                  astc: t.getExtension("WEBGL_compressed_texture_astc"),
                };
              1 === this.webGLVersion
                ? Object.assign(this.extensions, e, {
                    drawBuffers: t.getExtension("WEBGL_draw_buffers"),
                    depthTexture: t.getExtension("WEBGL_depth_texture"),
                    loseContext: t.getExtension("WEBGL_lose_context"),
                    vertexArrayObject:
                      t.getExtension("OES_vertex_array_object") ||
                      t.getExtension("MOZ_OES_vertex_array_object") ||
                      t.getExtension("WEBKIT_OES_vertex_array_object"),
                    uint32ElementIndex: t.getExtension(
                      "OES_element_index_uint",
                    ),
                    floatTexture: t.getExtension("OES_texture_float"),
                    floatTextureLinear: t.getExtension(
                      "OES_texture_float_linear",
                    ),
                    textureHalfFloat: t.getExtension("OES_texture_half_float"),
                    textureHalfFloatLinear: t.getExtension(
                      "OES_texture_half_float_linear",
                    ),
                  })
                : 2 === this.webGLVersion &&
                  Object.assign(this.extensions, e, {
                    colorBufferFloat: t.getExtension("EXT_color_buffer_float"),
                  });
            }),
            (t.prototype.handleContextLost = function (t) {
              t.preventDefault();
            }),
            (t.prototype.handleContextRestored = function () {
              this.renderer.runners.contextChange.emit(this.gl);
            }),
            (t.prototype.destroy = function () {
              var t = this.renderer.view;
              (this.renderer = null),
                t.removeEventListener(
                  "webglcontextlost",
                  this.handleContextLost,
                ),
                t.removeEventListener(
                  "webglcontextrestored",
                  this.handleContextRestored,
                ),
                this.gl.useProgram(null),
                this.extensions.loseContext &&
                  this.extensions.loseContext.loseContext();
            }),
            (t.prototype.postrender = function () {
              this.renderer.renderingToScreen && this.gl.flush();
            }),
            (t.prototype.validateContext = function (t) {
              var e = t.getContextAttributes(),
                n =
                  "WebGL2RenderingContext" in globalThis &&
                  t instanceof globalThis.WebGL2RenderingContext;
              n && (this.webGLVersion = 2),
                e &&
                  !e.stencil &&
                  console.warn(
                    "Provided WebGL context does not have a stencil buffer, masks may not render correctly",
                  );
              var r = n || !!t.getExtension("OES_element_index_uint");
              (this.supports.uint32Indices = r),
                r ||
                  console.warn(
                    "Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly",
                  );
            }),
            t
          );
        })(),
        nr = function (t) {
          (this.framebuffer = t),
            (this.stencil = null),
            (this.dirtyId = -1),
            (this.dirtyFormat = -1),
            (this.dirtySize = -1),
            (this.multisample = at.NONE),
            (this.msaaBuffer = null),
            (this.blitFramebuffer = null),
            (this.mipLevel = 0);
        },
        rr = new ue(),
        ir = (function () {
          function t(t) {
            (this.renderer = t),
              (this.managedFramebuffers = []),
              (this.unknownFramebuffer = new wn(10, 10)),
              (this.msaaSamples = null);
          }
          return (
            (t.prototype.contextChange = function () {
              var t = (this.gl = this.renderer.gl);
              if (
                ((this.CONTEXT_UID = this.renderer.CONTEXT_UID),
                (this.current = this.unknownFramebuffer),
                (this.viewport = new ue()),
                (this.hasMRT = !0),
                (this.writeDepthTexture = !0),
                this.disposeAll(!0),
                1 === this.renderer.context.webGLVersion)
              ) {
                var e = this.renderer.context.extensions.drawBuffers,
                  n = this.renderer.context.extensions.depthTexture;
                At.PREFER_ENV === z.WEBGL_LEGACY && ((e = null), (n = null)),
                  e
                    ? (t.drawBuffers = function (t) {
                        return e.drawBuffersWEBGL(t);
                      })
                    : ((this.hasMRT = !1), (t.drawBuffers = function () {})),
                  n || (this.writeDepthTexture = !1);
              } else
                this.msaaSamples = t.getInternalformatParameter(
                  t.RENDERBUFFER,
                  t.RGBA8,
                  t.SAMPLES,
                );
            }),
            (t.prototype.bind = function (t, e, n) {
              void 0 === n && (n = 0);
              var r = this.gl;
              if (t) {
                var i =
                  t.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(t);
                this.current !== t &&
                  ((this.current = t),
                  r.bindFramebuffer(r.FRAMEBUFFER, i.framebuffer)),
                  i.mipLevel !== n &&
                    (t.dirtyId++, t.dirtyFormat++, (i.mipLevel = n)),
                  i.dirtyId !== t.dirtyId &&
                    ((i.dirtyId = t.dirtyId),
                    i.dirtyFormat !== t.dirtyFormat
                      ? ((i.dirtyFormat = t.dirtyFormat),
                        (i.dirtySize = t.dirtySize),
                        this.updateFramebuffer(t, n))
                      : i.dirtySize !== t.dirtySize &&
                        ((i.dirtySize = t.dirtySize),
                        this.resizeFramebuffer(t)));
                for (var o = 0; o < t.colorTextures.length; o++) {
                  var a = t.colorTextures[o];
                  this.renderer.texture.unbind(a.parentTextureArray || a);
                }
                if (
                  (t.depthTexture &&
                    this.renderer.texture.unbind(t.depthTexture),
                  e)
                ) {
                  var s = e.width >> n,
                    l = e.height >> n,
                    u = s / e.width;
                  this.setViewport(e.x * u, e.y * u, s, l);
                } else
                  (s = t.width >> n),
                    (l = t.height >> n),
                    this.setViewport(0, 0, s, l);
              } else
                this.current &&
                  ((this.current = null),
                  r.bindFramebuffer(r.FRAMEBUFFER, null)),
                  e
                    ? this.setViewport(e.x, e.y, e.width, e.height)
                    : this.setViewport(
                        0,
                        0,
                        this.renderer.width,
                        this.renderer.height,
                      );
            }),
            (t.prototype.setViewport = function (t, e, n, r) {
              var i = this.viewport;
              (t = Math.round(t)),
                (e = Math.round(e)),
                (n = Math.round(n)),
                (r = Math.round(r)),
                (i.width === n && i.height === r && i.x === t && i.y === e) ||
                  ((i.x = t),
                  (i.y = e),
                  (i.width = n),
                  (i.height = r),
                  this.gl.viewport(t, e, n, r));
            }),
            Object.defineProperty(t.prototype, "size", {
              get: function () {
                return this.current
                  ? {
                      x: 0,
                      y: 0,
                      width: this.current.width,
                      height: this.current.height,
                    }
                  : {
                      x: 0,
                      y: 0,
                      width: this.renderer.width,
                      height: this.renderer.height,
                    };
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.clear = function (t, e, n, r, i) {
              void 0 === i && (i = X.COLOR | X.DEPTH);
              var o = this.gl;
              o.clearColor(t, e, n, r), o.clear(i);
            }),
            (t.prototype.initFramebuffer = function (t) {
              var e = this.gl,
                n = new nr(e.createFramebuffer());
              return (
                (n.multisample = this.detectSamples(t.multisample)),
                (t.glFramebuffers[this.CONTEXT_UID] = n),
                this.managedFramebuffers.push(t),
                t.disposeRunner.add(this),
                n
              );
            }),
            (t.prototype.resizeFramebuffer = function (t) {
              var e = this.gl,
                n = t.glFramebuffers[this.CONTEXT_UID];
              n.msaaBuffer &&
                (e.bindRenderbuffer(e.RENDERBUFFER, n.msaaBuffer),
                e.renderbufferStorageMultisample(
                  e.RENDERBUFFER,
                  n.multisample,
                  e.RGBA8,
                  t.width,
                  t.height,
                )),
                n.stencil &&
                  (e.bindRenderbuffer(e.RENDERBUFFER, n.stencil),
                  n.msaaBuffer
                    ? e.renderbufferStorageMultisample(
                        e.RENDERBUFFER,
                        n.multisample,
                        e.DEPTH24_STENCIL8,
                        t.width,
                        t.height,
                      )
                    : e.renderbufferStorage(
                        e.RENDERBUFFER,
                        e.DEPTH_STENCIL,
                        t.width,
                        t.height,
                      ));
              var r = t.colorTextures,
                i = r.length;
              e.drawBuffers || (i = Math.min(i, 1));
              for (var o = 0; o < i; o++) {
                var a = r[o],
                  s = a.parentTextureArray || a;
                this.renderer.texture.bind(s, 0);
              }
              t.depthTexture &&
                this.writeDepthTexture &&
                this.renderer.texture.bind(t.depthTexture, 0);
            }),
            (t.prototype.updateFramebuffer = function (t, e) {
              var n = this.gl,
                r = t.glFramebuffers[this.CONTEXT_UID],
                i = t.colorTextures,
                o = i.length;
              n.drawBuffers || (o = Math.min(o, 1)),
                r.multisample > 1 && this.canMultisampleFramebuffer(t)
                  ? ((r.msaaBuffer = r.msaaBuffer || n.createRenderbuffer()),
                    n.bindRenderbuffer(n.RENDERBUFFER, r.msaaBuffer),
                    n.renderbufferStorageMultisample(
                      n.RENDERBUFFER,
                      r.multisample,
                      n.RGBA8,
                      t.width,
                      t.height,
                    ),
                    n.framebufferRenderbuffer(
                      n.FRAMEBUFFER,
                      n.COLOR_ATTACHMENT0,
                      n.RENDERBUFFER,
                      r.msaaBuffer,
                    ))
                  : r.msaaBuffer &&
                    (n.deleteRenderbuffer(r.msaaBuffer),
                    (r.msaaBuffer = null),
                    r.blitFramebuffer &&
                      (r.blitFramebuffer.dispose(),
                      (r.blitFramebuffer = null)));
              for (var a = [], s = 0; s < o; s++) {
                var l = i[s],
                  u = l.parentTextureArray || l;
                this.renderer.texture.bind(u, 0),
                  (0 === s && r.msaaBuffer) ||
                    (n.framebufferTexture2D(
                      n.FRAMEBUFFER,
                      n.COLOR_ATTACHMENT0 + s,
                      l.target,
                      u._glTextures[this.CONTEXT_UID].texture,
                      e,
                    ),
                    a.push(n.COLOR_ATTACHMENT0 + s));
              }
              if (
                (a.length > 1 && n.drawBuffers(a),
                t.depthTexture && this.writeDepthTexture)
              ) {
                var h = t.depthTexture;
                this.renderer.texture.bind(h, 0),
                  n.framebufferTexture2D(
                    n.FRAMEBUFFER,
                    n.DEPTH_ATTACHMENT,
                    n.TEXTURE_2D,
                    h._glTextures[this.CONTEXT_UID].texture,
                    e,
                  );
              }
              (!t.stencil && !t.depth) ||
              (t.depthTexture && this.writeDepthTexture)
                ? r.stencil &&
                  (n.deleteRenderbuffer(r.stencil), (r.stencil = null))
                : ((r.stencil = r.stencil || n.createRenderbuffer()),
                  n.bindRenderbuffer(n.RENDERBUFFER, r.stencil),
                  r.msaaBuffer
                    ? n.renderbufferStorageMultisample(
                        n.RENDERBUFFER,
                        r.multisample,
                        n.DEPTH24_STENCIL8,
                        t.width,
                        t.height,
                      )
                    : n.renderbufferStorage(
                        n.RENDERBUFFER,
                        n.DEPTH_STENCIL,
                        t.width,
                        t.height,
                      ),
                  n.framebufferRenderbuffer(
                    n.FRAMEBUFFER,
                    n.DEPTH_STENCIL_ATTACHMENT,
                    n.RENDERBUFFER,
                    r.stencil,
                  ));
            }),
            (t.prototype.canMultisampleFramebuffer = function (t) {
              return (
                1 !== this.renderer.context.webGLVersion &&
                t.colorTextures.length <= 1 &&
                !t.depthTexture
              );
            }),
            (t.prototype.detectSamples = function (t) {
              var e = this.msaaSamples,
                n = at.NONE;
              if (t <= 1 || null === e) return n;
              for (var r = 0; r < e.length; r++)
                if (e[r] <= t) {
                  n = e[r];
                  break;
                }
              return 1 === n && (n = at.NONE), n;
            }),
            (t.prototype.blit = function (t, e, n) {
              var r = this,
                i = r.current,
                o = r.renderer,
                a = r.gl,
                s = r.CONTEXT_UID;
              if (2 === o.context.webGLVersion && i) {
                var l = i.glFramebuffers[s];
                if (l) {
                  if (!t) {
                    if (!l.msaaBuffer) return;
                    var u = i.colorTextures[0];
                    if (!u) return;
                    l.blitFramebuffer ||
                      ((l.blitFramebuffer = new wn(i.width, i.height)),
                      l.blitFramebuffer.addColorTexture(0, u)),
                      (t = l.blitFramebuffer).colorTextures[0] !== u &&
                        ((t.colorTextures[0] = u),
                        t.dirtyId++,
                        t.dirtyFormat++),
                      (t.width === i.width && t.height === i.height) ||
                        ((t.width = i.width),
                        (t.height = i.height),
                        t.dirtyId++,
                        t.dirtySize++);
                  }
                  e || (((e = rr).width = i.width), (e.height = i.height)),
                    n || (n = e);
                  var h = e.width === n.width && e.height === n.height;
                  this.bind(t),
                    a.bindFramebuffer(a.READ_FRAMEBUFFER, l.framebuffer),
                    a.blitFramebuffer(
                      e.left,
                      e.top,
                      e.right,
                      e.bottom,
                      n.left,
                      n.top,
                      n.right,
                      n.bottom,
                      a.COLOR_BUFFER_BIT,
                      h ? a.NEAREST : a.LINEAR,
                    );
                }
              }
            }),
            (t.prototype.disposeFramebuffer = function (t, e) {
              var n = t.glFramebuffers[this.CONTEXT_UID],
                r = this.gl;
              if (n) {
                delete t.glFramebuffers[this.CONTEXT_UID];
                var i = this.managedFramebuffers.indexOf(t);
                i >= 0 && this.managedFramebuffers.splice(i, 1),
                  t.disposeRunner.remove(this),
                  e ||
                    (r.deleteFramebuffer(n.framebuffer),
                    n.msaaBuffer && r.deleteRenderbuffer(n.msaaBuffer),
                    n.stencil && r.deleteRenderbuffer(n.stencil)),
                  n.blitFramebuffer && n.blitFramebuffer.dispose();
              }
            }),
            (t.prototype.disposeAll = function (t) {
              var e = this.managedFramebuffers;
              this.managedFramebuffers = [];
              for (var n = 0; n < e.length; n++)
                this.disposeFramebuffer(e[n], t);
            }),
            (t.prototype.forceStencil = function () {
              var t = this.current;
              if (t) {
                var e = t.glFramebuffers[this.CONTEXT_UID];
                if (e && !e.stencil) {
                  t.stencil = !0;
                  var n = t.width,
                    r = t.height,
                    i = this.gl,
                    o = i.createRenderbuffer();
                  i.bindRenderbuffer(i.RENDERBUFFER, o),
                    e.msaaBuffer
                      ? i.renderbufferStorageMultisample(
                          i.RENDERBUFFER,
                          e.multisample,
                          i.DEPTH24_STENCIL8,
                          n,
                          r,
                        )
                      : i.renderbufferStorage(
                          i.RENDERBUFFER,
                          i.DEPTH_STENCIL,
                          n,
                          r,
                        ),
                    (e.stencil = o),
                    i.framebufferRenderbuffer(
                      i.FRAMEBUFFER,
                      i.DEPTH_STENCIL_ATTACHMENT,
                      i.RENDERBUFFER,
                      o,
                    );
                }
              }
            }),
            (t.prototype.reset = function () {
              (this.current = this.unknownFramebuffer),
                (this.viewport = new ue());
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        or = { 5126: 4, 5123: 2, 5121: 1 },
        ar = (function () {
          function t(t) {
            (this.renderer = t),
              (this._activeGeometry = null),
              (this._activeVao = null),
              (this.hasVao = !0),
              (this.hasInstance = !0),
              (this.canUseUInt32ElementIndex = !1),
              (this.managedGeometries = {});
          }
          return (
            (t.prototype.contextChange = function () {
              this.disposeAll(!0);
              var t = (this.gl = this.renderer.gl),
                e = this.renderer.context;
              if (
                ((this.CONTEXT_UID = this.renderer.CONTEXT_UID),
                2 !== e.webGLVersion)
              ) {
                var n = this.renderer.context.extensions.vertexArrayObject;
                At.PREFER_ENV === z.WEBGL_LEGACY && (n = null),
                  n
                    ? ((t.createVertexArray = function () {
                        return n.createVertexArrayOES();
                      }),
                      (t.bindVertexArray = function (t) {
                        return n.bindVertexArrayOES(t);
                      }),
                      (t.deleteVertexArray = function (t) {
                        return n.deleteVertexArrayOES(t);
                      }))
                    : ((this.hasVao = !1),
                      (t.createVertexArray = function () {
                        return null;
                      }),
                      (t.bindVertexArray = function () {
                        return null;
                      }),
                      (t.deleteVertexArray = function () {
                        return null;
                      }));
              }
              if (2 !== e.webGLVersion) {
                var r = t.getExtension("ANGLE_instanced_arrays");
                r
                  ? ((t.vertexAttribDivisor = function (t, e) {
                      return r.vertexAttribDivisorANGLE(t, e);
                    }),
                    (t.drawElementsInstanced = function (t, e, n, i, o) {
                      return r.drawElementsInstancedANGLE(t, e, n, i, o);
                    }),
                    (t.drawArraysInstanced = function (t, e, n, i) {
                      return r.drawArraysInstancedANGLE(t, e, n, i);
                    }))
                  : (this.hasInstance = !1);
              }
              this.canUseUInt32ElementIndex =
                2 === e.webGLVersion || !!e.extensions.uint32ElementIndex;
            }),
            (t.prototype.bind = function (t, e) {
              e = e || this.renderer.shader.shader;
              var n = this.gl,
                r = t.glVertexArrayObjects[this.CONTEXT_UID],
                i = !1;
              r ||
                ((this.managedGeometries[t.id] = t),
                t.disposeRunner.add(this),
                (t.glVertexArrayObjects[this.CONTEXT_UID] = r = {}),
                (i = !0));
              var o = r[e.program.id] || this.initGeometryVao(t, e, i);
              (this._activeGeometry = t),
                this._activeVao !== o &&
                  ((this._activeVao = o),
                  this.hasVao
                    ? n.bindVertexArray(o)
                    : this.activateVao(t, e.program)),
                this.updateBuffers();
            }),
            (t.prototype.reset = function () {
              this.unbind();
            }),
            (t.prototype.updateBuffers = function () {
              for (
                var t = this._activeGeometry, e = this.renderer.buffer, n = 0;
                n < t.buffers.length;
                n++
              ) {
                var r = t.buffers[n];
                e.update(r);
              }
            }),
            (t.prototype.checkCompatibility = function (t, e) {
              var n = t.attributes,
                r = e.attributeData;
              for (var i in r)
                if (!n[i])
                  throw new Error(
                    'shader and geometry incompatible, geometry missing the "' +
                      i +
                      '" attribute',
                  );
            }),
            (t.prototype.getSignature = function (t, e) {
              var n = t.attributes,
                r = e.attributeData,
                i = ["g", t.id];
              for (var o in n) r[o] && i.push(o, r[o].location);
              return i.join("-");
            }),
            (t.prototype.initGeometryVao = function (t, e, n) {
              void 0 === n && (n = !0);
              var r = this.gl,
                i = this.CONTEXT_UID,
                o = this.renderer.buffer,
                a = e.program;
              a.glPrograms[i] || this.renderer.shader.generateProgram(e),
                this.checkCompatibility(t, a);
              var s = this.getSignature(t, a),
                l = t.glVertexArrayObjects[this.CONTEXT_UID],
                u = l[s];
              if (u) return (l[a.id] = u), u;
              var h = t.buffers,
                c = t.attributes,
                d = {},
                f = {};
              for (var p in h) (d[p] = 0), (f[p] = 0);
              for (var p in c)
                !c[p].size && a.attributeData[p]
                  ? (c[p].size = a.attributeData[p].size)
                  : c[p].size ||
                    console.warn(
                      "PIXI Geometry attribute '" +
                        p +
                        "' size cannot be determined (likely the bound shader does not have the attribute)",
                    ),
                  (d[c[p].buffer] += c[p].size * or[c[p].type]);
              for (var p in c) {
                var m = c[p],
                  _ = m.size;
                void 0 === m.stride &&
                  (d[m.buffer] === _ * or[m.type]
                    ? (m.stride = 0)
                    : (m.stride = d[m.buffer])),
                  void 0 === m.start &&
                    ((m.start = f[m.buffer]), (f[m.buffer] += _ * or[m.type]));
              }
              (u = r.createVertexArray()), r.bindVertexArray(u);
              for (var g = 0; g < h.length; g++) {
                var v = h[g];
                o.bind(v), n && v._glBuffers[i].refCount++;
              }
              return (
                this.activateVao(t, a),
                (this._activeVao = u),
                (l[a.id] = u),
                (l[s] = u),
                u
              );
            }),
            (t.prototype.disposeGeometry = function (t, e) {
              var n;
              if (this.managedGeometries[t.id]) {
                delete this.managedGeometries[t.id];
                var r = t.glVertexArrayObjects[this.CONTEXT_UID],
                  i = this.gl,
                  o = t.buffers,
                  a =
                    null === (n = this.renderer) || void 0 === n
                      ? void 0
                      : n.buffer;
                if ((t.disposeRunner.remove(this), r)) {
                  if (a)
                    for (var s = 0; s < o.length; s++) {
                      var l = o[s]._glBuffers[this.CONTEXT_UID];
                      l &&
                        (l.refCount--,
                        0 !== l.refCount || e || a.dispose(o[s], e));
                    }
                  if (!e)
                    for (var u in r)
                      if ("g" === u[0]) {
                        var h = r[u];
                        this._activeVao === h && this.unbind(),
                          i.deleteVertexArray(h);
                      }
                  delete t.glVertexArrayObjects[this.CONTEXT_UID];
                }
              }
            }),
            (t.prototype.disposeAll = function (t) {
              for (
                var e = Object.keys(this.managedGeometries), n = 0;
                n < e.length;
                n++
              )
                this.disposeGeometry(this.managedGeometries[e[n]], t);
            }),
            (t.prototype.activateVao = function (t, e) {
              var n = this.gl,
                r = this.CONTEXT_UID,
                i = this.renderer.buffer,
                o = t.buffers,
                a = t.attributes;
              t.indexBuffer && i.bind(t.indexBuffer);
              var s = null;
              for (var l in a) {
                var u = a[l],
                  h = o[u.buffer],
                  c = h._glBuffers[r];
                if (e.attributeData[l]) {
                  s !== c && (i.bind(h), (s = c));
                  var d = e.attributeData[l].location;
                  if (
                    (n.enableVertexAttribArray(d),
                    n.vertexAttribPointer(
                      d,
                      u.size,
                      u.type || n.FLOAT,
                      u.normalized,
                      u.stride,
                      u.start,
                    ),
                    u.instance)
                  ) {
                    if (!this.hasInstance)
                      throw new Error(
                        "geometry error, GPU Instancing is not supported on this device",
                      );
                    n.vertexAttribDivisor(d, 1);
                  }
                }
              }
            }),
            (t.prototype.draw = function (t, e, n, r) {
              var i = this.gl,
                o = this._activeGeometry;
              if (o.indexBuffer) {
                var a = o.indexBuffer.data.BYTES_PER_ELEMENT,
                  s = 2 === a ? i.UNSIGNED_SHORT : i.UNSIGNED_INT;
                2 === a || (4 === a && this.canUseUInt32ElementIndex)
                  ? o.instanced
                    ? i.drawElementsInstanced(
                        t,
                        e || o.indexBuffer.data.length,
                        s,
                        (n || 0) * a,
                        r || 1,
                      )
                    : i.drawElements(
                        t,
                        e || o.indexBuffer.data.length,
                        s,
                        (n || 0) * a,
                      )
                  : console.warn("unsupported index buffer type: uint32");
              } else
                o.instanced
                  ? i.drawArraysInstanced(t, n, e || o.getSize(), r || 1)
                  : i.drawArrays(t, n, e || o.getSize());
              return this;
            }),
            (t.prototype.unbind = function () {
              this.gl.bindVertexArray(null),
                (this._activeVao = null),
                (this._activeGeometry = null);
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        sr = (function () {
          function t(t) {
            void 0 === t && (t = null),
              (this.type = it.NONE),
              (this.autoDetect = !0),
              (this.maskObject = t || null),
              (this.pooled = !1),
              (this.isMaskData = !0),
              (this.resolution = null),
              (this.multisample = At.FILTER_MULTISAMPLE),
              (this.enabled = !0),
              (this.colorMask = 15),
              (this._filters = null),
              (this._stencilCounter = 0),
              (this._scissorCounter = 0),
              (this._scissorRect = null),
              (this._scissorRectLocal = null),
              (this._colorMask = 15),
              (this._target = null);
          }
          return (
            Object.defineProperty(t.prototype, "filter", {
              get: function () {
                return this._filters ? this._filters[0] : null;
              },
              set: function (t) {
                t
                  ? this._filters
                    ? (this._filters[0] = t)
                    : (this._filters = [t])
                  : (this._filters = null);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.reset = function () {
              this.pooled &&
                ((this.maskObject = null),
                (this.type = it.NONE),
                (this.autoDetect = !0)),
                (this._target = null),
                (this._scissorRectLocal = null);
            }),
            (t.prototype.copyCountersOrReset = function (t) {
              t
                ? ((this._stencilCounter = t._stencilCounter),
                  (this._scissorCounter = t._scissorCounter),
                  (this._scissorRect = t._scissorRect))
                : ((this._stencilCounter = 0),
                  (this._scissorCounter = 0),
                  (this._scissorRect = null));
            }),
            t
          );
        })();
      function lr(t, e, n) {
        var r = t.createShader(e);
        return t.shaderSource(r, n), t.compileShader(r), r;
      }
      function ur(t, e) {
        var n = t
            .getShaderSource(e)
            .split("\n")
            .map(function (t, e) {
              return e + ": " + t;
            }),
          r = t.getShaderInfoLog(e),
          i = r.split("\n"),
          o = {},
          a = i
            .map(function (t) {
              return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/, "$1"));
            })
            .filter(function (t) {
              return !(!t || o[t] || ((o[t] = !0), 0));
            }),
          s = [""];
        a.forEach(function (t) {
          (n[t - 1] = "%c" + n[t - 1] + "%c"),
            s.push(
              "background: #FF0000; color:#FFFFFF; font-size: 10px",
              "font-size: 10px",
            );
        });
        var l = n.join("\n");
        (s[0] = l),
          console.error(r),
          console.groupCollapsed("click to view full shader code"),
          console.warn.apply(console, s),
          console.groupEnd();
      }
      function hr(t) {
        for (var e = new Array(t), n = 0; n < e.length; n++) e[n] = !1;
        return e;
      }
      function cr(t, e) {
        switch (t) {
          case "float":
          case "int":
          case "uint":
          case "sampler2D":
          case "sampler2DArray":
            return 0;
          case "vec2":
            return new Float32Array(2 * e);
          case "vec3":
            return new Float32Array(3 * e);
          case "vec4":
            return new Float32Array(4 * e);
          case "ivec2":
            return new Int32Array(2 * e);
          case "ivec3":
            return new Int32Array(3 * e);
          case "ivec4":
            return new Int32Array(4 * e);
          case "uvec2":
            return new Uint32Array(2 * e);
          case "uvec3":
            return new Uint32Array(3 * e);
          case "uvec4":
            return new Uint32Array(4 * e);
          case "bool":
            return !1;
          case "bvec2":
            return hr(2 * e);
          case "bvec3":
            return hr(3 * e);
          case "bvec4":
            return hr(4 * e);
          case "mat2":
            return new Float32Array([1, 0, 0, 1]);
          case "mat3":
            return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
          case "mat4":
            return new Float32Array([
              1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1,
            ]);
        }
        return null;
      }
      var dr,
        fr = {},
        pr = fr;
      function mr(t, e, n) {
        if ("precision" !== t.substring(0, 9)) {
          var r = e;
          return (
            e === rt.HIGH && n !== rt.HIGH && (r = rt.MEDIUM),
            "precision " + r + " float;\n" + t
          );
        }
        return n !== rt.HIGH && "precision highp" === t.substring(0, 15)
          ? t.replace("precision highp", "precision mediump")
          : t;
      }
      var _r = {
        float: 1,
        vec2: 2,
        vec3: 3,
        vec4: 4,
        int: 1,
        ivec2: 2,
        ivec3: 3,
        ivec4: 4,
        uint: 1,
        uvec2: 2,
        uvec3: 3,
        uvec4: 4,
        bool: 1,
        bvec2: 2,
        bvec3: 3,
        bvec4: 4,
        mat2: 4,
        mat3: 9,
        mat4: 16,
        sampler2D: 1,
      };
      function gr(t) {
        return _r[t];
      }
      var vr = null,
        yr = {
          FLOAT: "float",
          FLOAT_VEC2: "vec2",
          FLOAT_VEC3: "vec3",
          FLOAT_VEC4: "vec4",
          INT: "int",
          INT_VEC2: "ivec2",
          INT_VEC3: "ivec3",
          INT_VEC4: "ivec4",
          UNSIGNED_INT: "uint",
          UNSIGNED_INT_VEC2: "uvec2",
          UNSIGNED_INT_VEC3: "uvec3",
          UNSIGNED_INT_VEC4: "uvec4",
          BOOL: "bool",
          BOOL_VEC2: "bvec2",
          BOOL_VEC3: "bvec3",
          BOOL_VEC4: "bvec4",
          FLOAT_MAT2: "mat2",
          FLOAT_MAT3: "mat3",
          FLOAT_MAT4: "mat4",
          SAMPLER_2D: "sampler2D",
          INT_SAMPLER_2D: "sampler2D",
          UNSIGNED_INT_SAMPLER_2D: "sampler2D",
          SAMPLER_CUBE: "samplerCube",
          INT_SAMPLER_CUBE: "samplerCube",
          UNSIGNED_INT_SAMPLER_CUBE: "samplerCube",
          SAMPLER_2D_ARRAY: "sampler2DArray",
          INT_SAMPLER_2D_ARRAY: "sampler2DArray",
          UNSIGNED_INT_SAMPLER_2D_ARRAY: "sampler2DArray",
        };
      function Er(t, e) {
        if (!vr) {
          var n = Object.keys(yr);
          vr = {};
          for (var r = 0; r < n.length; ++r) {
            var i = n[r];
            vr[t[i]] = yr[i];
          }
        }
        return vr[e];
      }
      var Tr,
        br = [
          {
            test: function (t) {
              return "float" === t.type && 1 === t.size;
            },
            code: function (t) {
              return (
                '\n            if(uv["' +
                t +
                '"] !== ud["' +
                t +
                '"].value)\n            {\n                ud["' +
                t +
                '"].value = uv["' +
                t +
                '"]\n                gl.uniform1f(ud["' +
                t +
                '"].location, uv["' +
                t +
                '"])\n            }\n            '
              );
            },
          },
          {
            test: function (t) {
              return (
                ("sampler2D" === t.type ||
                  "samplerCube" === t.type ||
                  "sampler2DArray" === t.type) &&
                1 === t.size &&
                !t.isArray
              );
            },
            code: function (t) {
              return (
                't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["' +
                t +
                '"], t);\n\n            if(ud["' +
                t +
                '"].value !== t)\n            {\n                ud["' +
                t +
                '"].value = t;\n                gl.uniform1i(ud["' +
                t +
                '"].location, t);\n; // eslint-disable-line max-len\n            }'
              );
            },
          },
          {
            test: function (t, e) {
              return "mat3" === t.type && 1 === t.size && void 0 !== e.a;
            },
            code: function (t) {
              return (
                '\n            gl.uniformMatrix3fv(ud["' +
                t +
                '"].location, false, uv["' +
                t +
                '"].toArray(true));\n            '
              );
            },
            codeUbo: function (t) {
              return (
                "\n                var " +
                t +
                "_matrix = uv." +
                t +
                ".toArray(true);\n\n                data[offset] = " +
                t +
                "_matrix[0];\n                data[offset+1] = " +
                t +
                "_matrix[1];\n                data[offset+2] = " +
                t +
                "_matrix[2];\n        \n                data[offset + 4] = " +
                t +
                "_matrix[3];\n                data[offset + 5] = " +
                t +
                "_matrix[4];\n                data[offset + 6] = " +
                t +
                "_matrix[5];\n        \n                data[offset + 8] = " +
                t +
                "_matrix[6];\n                data[offset + 9] = " +
                t +
                "_matrix[7];\n                data[offset + 10] = " +
                t +
                "_matrix[8];\n            "
              );
            },
          },
          {
            test: function (t, e) {
              return "vec2" === t.type && 1 === t.size && void 0 !== e.x;
            },
            code: function (t) {
              return (
                '\n                cv = ud["' +
                t +
                '"].value;\n                v = uv["' +
                t +
                '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["' +
                t +
                '"].location, v.x, v.y);\n                }'
              );
            },
            codeUbo: function (t) {
              return (
                "\n                v = uv." +
                t +
                ";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "
              );
            },
          },
          {
            test: function (t) {
              return "vec2" === t.type && 1 === t.size;
            },
            code: function (t) {
              return (
                '\n                cv = ud["' +
                t +
                '"].value;\n                v = uv["' +
                t +
                '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["' +
                t +
                '"].location, v[0], v[1]);\n                }\n            '
              );
            },
          },
          {
            test: function (t, e) {
              return "vec4" === t.type && 1 === t.size && void 0 !== e.width;
            },
            code: function (t) {
              return (
                '\n                cv = ud["' +
                t +
                '"].value;\n                v = uv["' +
                t +
                '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["' +
                t +
                '"].location, v.x, v.y, v.width, v.height)\n                }'
              );
            },
            codeUbo: function (t) {
              return (
                "\n                    v = uv." +
                t +
                ";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "
              );
            },
          },
          {
            test: function (t) {
              return "vec4" === t.type && 1 === t.size;
            },
            code: function (t) {
              return (
                '\n                cv = ud["' +
                t +
                '"].value;\n                v = uv["' +
                t +
                '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["' +
                t +
                '"].location, v[0], v[1], v[2], v[3])\n                }'
              );
            },
          },
        ],
        xr = {
          float:
            "\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",
          vec2: "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",
          vec3: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",
          vec4: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",
          int: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
          ivec2:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",
          ivec3:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",
          ivec4:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",
          uint: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",
          uvec2:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",
          uvec3:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",
          uvec4:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",
          bool: "\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",
          bvec2:
            "\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",
          bvec3:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",
          bvec4:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",
          mat2: "gl.uniformMatrix2fv(location, false, v)",
          mat3: "gl.uniformMatrix3fv(location, false, v)",
          mat4: "gl.uniformMatrix4fv(location, false, v)",
          sampler2D: "gl.uniform1i(location, v)",
          samplerCube: "gl.uniform1i(location, v)",
          sampler2DArray: "gl.uniform1i(location, v)",
        },
        Sr = {
          float: "gl.uniform1fv(location, v)",
          vec2: "gl.uniform2fv(location, v)",
          vec3: "gl.uniform3fv(location, v)",
          vec4: "gl.uniform4fv(location, v)",
          mat4: "gl.uniformMatrix4fv(location, false, v)",
          mat3: "gl.uniformMatrix3fv(location, false, v)",
          mat2: "gl.uniformMatrix2fv(location, false, v)",
          int: "gl.uniform1iv(location, v)",
          ivec2: "gl.uniform2iv(location, v)",
          ivec3: "gl.uniform3iv(location, v)",
          ivec4: "gl.uniform4iv(location, v)",
          uint: "gl.uniform1uiv(location, v)",
          uvec2: "gl.uniform2uiv(location, v)",
          uvec3: "gl.uniform3uiv(location, v)",
          uvec4: "gl.uniform4uiv(location, v)",
          bool: "gl.uniform1iv(location, v)",
          bvec2: "gl.uniform2iv(location, v)",
          bvec3: "gl.uniform3iv(location, v)",
          bvec4: "gl.uniform4iv(location, v)",
          sampler2D: "gl.uniform1iv(location, v)",
          samplerCube: "gl.uniform1iv(location, v)",
          sampler2DArray: "gl.uniform1iv(location, v)",
        },
        Mr = [
          "precision mediump float;",
          "void main(void){",
          "float test = 0.1;",
          "%forloop%",
          "gl_FragColor = vec4(0.0);",
          "}",
        ].join("\n");
      function Ar(t) {
        for (var e = "", n = 0; n < t; ++n)
          n > 0 && (e += "\nelse "),
            n < t - 1 && (e += "if(test == " + n + ".0){}");
        return e;
      }
      var Rr = 0,
        wr = {},
        Pr = (function () {
          function t(e, n, r) {
            void 0 === r && (r = "pixi-shader"),
              (this.id = Rr++),
              (this.vertexSrc = e || t.defaultVertexSrc),
              (this.fragmentSrc = n || t.defaultFragmentSrc),
              (this.vertexSrc = this.vertexSrc.trim()),
              (this.fragmentSrc = this.fragmentSrc.trim()),
              "#version" !== this.vertexSrc.substring(0, 8) &&
                ((r = r.replace(/\s+/g, "-")),
                wr[r] ? (wr[r]++, (r += "-" + wr[r])) : (wr[r] = 1),
                (this.vertexSrc =
                  "#define SHADER_NAME " + r + "\n" + this.vertexSrc),
                (this.fragmentSrc =
                  "#define SHADER_NAME " + r + "\n" + this.fragmentSrc),
                (this.vertexSrc = mr(
                  this.vertexSrc,
                  At.PRECISION_VERTEX,
                  rt.HIGH,
                )),
                (this.fragmentSrc = mr(
                  this.fragmentSrc,
                  At.PRECISION_FRAGMENT,
                  (function () {
                    if (!dr) {
                      dr = rt.MEDIUM;
                      var t = (function () {
                        if (pr === fr || (pr && pr.isContextLost())) {
                          var t = At.ADAPTER.createCanvas(),
                            e = void 0;
                          At.PREFER_ENV >= z.WEBGL2 &&
                            (e = t.getContext("webgl2", {})),
                            e ||
                              ((e =
                                t.getContext("webgl", {}) ||
                                t.getContext("experimental-webgl", {}))
                                ? e.getExtension("WEBGL_draw_buffers")
                                : (e = null)),
                            (pr = e);
                        }
                        return pr;
                      })();
                      if (t && t.getShaderPrecisionFormat) {
                        var e = t.getShaderPrecisionFormat(
                          t.FRAGMENT_SHADER,
                          t.HIGH_FLOAT,
                        );
                        dr = e.precision ? rt.HIGH : rt.MEDIUM;
                      }
                    }
                    return dr;
                  })(),
                ))),
              (this.glPrograms = {}),
              (this.syncUniforms = null);
          }
          return (
            Object.defineProperty(t, "defaultVertexSrc", {
              get: function () {
                return "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n";
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "defaultFragmentSrc", {
              get: function () {
                return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}";
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.from = function (e, n, r) {
              var i = e + n,
                o = $t[i];
              return o || ($t[i] = o = new t(e, n, r)), o;
            }),
            t
          );
        })(),
        Ir = (function () {
          function t(t, e) {
            (this.uniformBindCount = 0),
              (this.program = t),
              (this.uniformGroup = e
                ? e instanceof Yn
                  ? e
                  : new Yn(e)
                : new Yn({}));
          }
          return (
            (t.prototype.checkUniformExists = function (t, e) {
              if (e.uniforms[t]) return !0;
              for (var n in e.uniforms) {
                var r = e.uniforms[n];
                if (r.group && this.checkUniformExists(t, r)) return !0;
              }
              return !1;
            }),
            (t.prototype.destroy = function () {
              this.uniformGroup = null;
            }),
            Object.defineProperty(t.prototype, "uniforms", {
              get: function () {
                return this.uniformGroup.uniforms;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.from = function (e, n, r) {
              return new t(Pr.from(e, n), r);
            }),
            t
          );
        })(),
        Or = (function () {
          function t() {
            (this.data = 0),
              (this.blendMode = W.NORMAL),
              (this.polygonOffset = 0),
              (this.blend = !0),
              (this.depthMask = !0);
          }
          return (
            Object.defineProperty(t.prototype, "blend", {
              get: function () {
                return !!(1 & this.data);
              },
              set: function (t) {
                !!(1 & this.data) !== t && (this.data ^= 1);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "offsets", {
              get: function () {
                return !!(2 & this.data);
              },
              set: function (t) {
                !!(2 & this.data) !== t && (this.data ^= 2);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "culling", {
              get: function () {
                return !!(4 & this.data);
              },
              set: function (t) {
                !!(4 & this.data) !== t && (this.data ^= 4);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "depthTest", {
              get: function () {
                return !!(8 & this.data);
              },
              set: function (t) {
                !!(8 & this.data) !== t && (this.data ^= 8);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "depthMask", {
              get: function () {
                return !!(32 & this.data);
              },
              set: function (t) {
                !!(32 & this.data) !== t && (this.data ^= 32);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "clockwiseFrontFace", {
              get: function () {
                return !!(16 & this.data);
              },
              set: function (t) {
                !!(16 & this.data) !== t && (this.data ^= 16);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "blendMode", {
              get: function () {
                return this._blendMode;
              },
              set: function (t) {
                (this.blend = t !== W.NONE), (this._blendMode = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "polygonOffset", {
              get: function () {
                return this._polygonOffset;
              },
              set: function (t) {
                (this.offsets = !!t), (this._polygonOffset = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/core:State blendMode=" +
                this.blendMode +
                " clockwiseFrontFace=" +
                this.clockwiseFrontFace +
                " culling=" +
                this.culling +
                " depthMask=" +
                this.depthMask +
                " polygonOffset=" +
                this.polygonOffset +
                "]"
              );
            }),
            (t.for2d = function () {
              var e = new t();
              return (e.depthTest = !1), (e.blend = !0), e;
            }),
            t
          );
        })(),
        Cr = (function (t) {
          function e(n, r, i) {
            var o = this,
              a = Pr.from(n || e.defaultVertexSrc, r || e.defaultFragmentSrc);
            return (
              ((o = t.call(this, a, i) || this).padding = 0),
              (o.resolution = At.FILTER_RESOLUTION),
              (o.multisample = At.FILTER_MULTISAMPLE),
              (o.enabled = !0),
              (o.autoFit = !0),
              (o.state = new Or()),
              o
            );
          }
          return (
            cn(e, t),
            (e.prototype.apply = function (t, e, n, r, i) {
              t.applyFilter(this, e, n, r);
            }),
            Object.defineProperty(e.prototype, "blendMode", {
              get: function () {
                return this.state.blendMode;
              },
              set: function (t) {
                this.state.blendMode = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "resolution", {
              get: function () {
                return this._resolution;
              },
              set: function (t) {
                this._resolution = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e, "defaultVertexSrc", {
              get: function () {
                return "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e, "defaultFragmentSrc", {
              get: function () {
                return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n";
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Ir),
        Nr = new me(),
        Lr = (function () {
          function t(t, e) {
            (this._texture = t),
              (this.mapCoord = new me()),
              (this.uClampFrame = new Float32Array(4)),
              (this.uClampOffset = new Float32Array(2)),
              (this._textureID = -1),
              (this._updateID = 0),
              (this.clampOffset = 0),
              (this.clampMargin = void 0 === e ? 0.5 : e),
              (this.isSimple = !1);
          }
          return (
            Object.defineProperty(t.prototype, "texture", {
              get: function () {
                return this._texture;
              },
              set: function (t) {
                (this._texture = t), (this._textureID = -1);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.multiplyUvs = function (t, e) {
              void 0 === e && (e = t);
              for (var n = this.mapCoord, r = 0; r < t.length; r += 2) {
                var i = t[r],
                  o = t[r + 1];
                (e[r] = i * n.a + o * n.c + n.tx),
                  (e[r + 1] = i * n.b + o * n.d + n.ty);
              }
              return e;
            }),
            (t.prototype.update = function (t) {
              var e = this._texture;
              if (!e || !e.valid) return !1;
              if (!t && this._textureID === e._updateID) return !1;
              (this._textureID = e._updateID), this._updateID++;
              var n = e._uvs;
              this.mapCoord.set(
                n.x1 - n.x0,
                n.y1 - n.y0,
                n.x3 - n.x0,
                n.y3 - n.y0,
                n.x0,
                n.y0,
              );
              var r = e.orig,
                i = e.trim;
              i &&
                (Nr.set(
                  r.width / i.width,
                  0,
                  0,
                  r.height / i.height,
                  -i.x / i.width,
                  -i.y / i.height,
                ),
                this.mapCoord.append(Nr));
              var o = e.baseTexture,
                a = this.uClampFrame,
                s = this.clampMargin / o.resolution,
                l = this.clampOffset;
              return (
                (a[0] = (e._frame.x + s + l) / o.width),
                (a[1] = (e._frame.y + s + l) / o.height),
                (a[2] = (e._frame.x + e._frame.width - s + l) / o.width),
                (a[3] = (e._frame.y + e._frame.height - s + l) / o.height),
                (this.uClampOffset[0] = l / o.realWidth),
                (this.uClampOffset[1] = l / o.realHeight),
                (this.isSimple =
                  e._frame.width === o.width &&
                  e._frame.height === o.height &&
                  0 === e.rotate),
                !0
              );
            }),
            t
          );
        })(),
        Dr = (function (t) {
          function e(e, n, r) {
            var i = this,
              o = null;
            return (
              "string" != typeof e &&
                void 0 === n &&
                void 0 === r &&
                ((o = e), (e = void 0), (n = void 0), (r = void 0)),
              ((i =
                t.call(
                  this,
                  e ||
                    "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",
                  n ||
                    "varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",
                  r,
                ) || this).maskSprite = o),
              (i.maskMatrix = new me()),
              i
            );
          }
          return (
            cn(e, t),
            Object.defineProperty(e.prototype, "maskSprite", {
              get: function () {
                return this._maskSprite;
              },
              set: function (t) {
                (this._maskSprite = t),
                  this._maskSprite && (this._maskSprite.renderable = !1);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.apply = function (t, e, n, r) {
              var i = this._maskSprite,
                o = i._texture;
              o.valid &&
                (o.uvMatrix || (o.uvMatrix = new Lr(o, 0)),
                o.uvMatrix.update(),
                (this.uniforms.npmAlpha = o.baseTexture.alphaMode ? 0 : 1),
                (this.uniforms.mask = o),
                (this.uniforms.otherMatrix = t
                  .calculateSpriteMatrix(this.maskMatrix, i)
                  .prepend(o.uvMatrix.mapCoord)),
                (this.uniforms.alpha = i.worldAlpha),
                (this.uniforms.maskClamp = o.uvMatrix.uClampFrame),
                t.applyFilter(this, e, n, r));
            }),
            e
          );
        })(Cr),
        Ur = (function () {
          function t(t) {
            (this.renderer = t),
              (this.enableScissor = !0),
              (this.alphaMaskPool = []),
              (this.maskDataPool = []),
              (this.maskStack = []),
              (this.alphaMaskIndex = 0);
          }
          return (
            (t.prototype.setMaskStack = function (t) {
              (this.maskStack = t),
                this.renderer.scissor.setMaskStack(t),
                this.renderer.stencil.setMaskStack(t);
            }),
            (t.prototype.push = function (t, e) {
              var n = e;
              if (!n.isMaskData) {
                var r = this.maskDataPool.pop() || new sr();
                (r.pooled = !0), (r.maskObject = e), (n = r);
              }
              var i =
                0 !== this.maskStack.length
                  ? this.maskStack[this.maskStack.length - 1]
                  : null;
              if (
                (n.copyCountersOrReset(i),
                (n._colorMask = i ? i._colorMask : 15),
                n.autoDetect && this.detect(n),
                (n._target = t),
                n.type !== it.SPRITE && this.maskStack.push(n),
                n.enabled)
              )
                switch (n.type) {
                  case it.SCISSOR:
                    this.renderer.scissor.push(n);
                    break;
                  case it.STENCIL:
                    this.renderer.stencil.push(n);
                    break;
                  case it.SPRITE:
                    n.copyCountersOrReset(null), this.pushSpriteMask(n);
                    break;
                  case it.COLOR:
                    this.pushColorMask(n);
                }
              n.type === it.SPRITE && this.maskStack.push(n);
            }),
            (t.prototype.pop = function (t) {
              var e = this.maskStack.pop();
              if (e && e._target === t) {
                if (e.enabled)
                  switch (e.type) {
                    case it.SCISSOR:
                      this.renderer.scissor.pop(e);
                      break;
                    case it.STENCIL:
                      this.renderer.stencil.pop(e.maskObject);
                      break;
                    case it.SPRITE:
                      this.popSpriteMask(e);
                      break;
                    case it.COLOR:
                      this.popColorMask(e);
                  }
                if (
                  (e.reset(),
                  e.pooled && this.maskDataPool.push(e),
                  0 !== this.maskStack.length)
                ) {
                  var n = this.maskStack[this.maskStack.length - 1];
                  n.type === it.SPRITE &&
                    n._filters &&
                    (n._filters[0].maskSprite = n.maskObject);
                }
              }
            }),
            (t.prototype.detect = function (t) {
              var e = t.maskObject;
              e
                ? e.isSprite
                  ? (t.type = it.SPRITE)
                  : this.enableScissor && this.renderer.scissor.testScissor(t)
                    ? (t.type = it.SCISSOR)
                    : (t.type = it.STENCIL)
                : (t.type = it.COLOR);
            }),
            (t.prototype.pushSpriteMask = function (t) {
              var e,
                n,
                r = t.maskObject,
                i = t._target,
                o = t._filters;
              o ||
                (o = this.alphaMaskPool[this.alphaMaskIndex]) ||
                (o = this.alphaMaskPool[this.alphaMaskIndex] = [new Dr()]);
              var a,
                s,
                l = this.renderer,
                u = l.renderTexture;
              if (u.current) {
                var h = u.current;
                (a = t.resolution || h.resolution),
                  (s =
                    null !== (e = t.multisample) && void 0 !== e
                      ? e
                      : h.multisample);
              } else
                (a = t.resolution || l.resolution),
                  (s =
                    null !== (n = t.multisample) && void 0 !== n
                      ? n
                      : l.multisample);
              (o[0].resolution = a),
                (o[0].multisample = s),
                (o[0].maskSprite = r);
              var c = i.filterArea;
              (i.filterArea = r.getBounds(!0)),
                l.filter.push(i, o),
                (i.filterArea = c),
                t._filters || this.alphaMaskIndex++;
            }),
            (t.prototype.popSpriteMask = function (t) {
              this.renderer.filter.pop(),
                t._filters
                  ? (t._filters[0].maskSprite = null)
                  : (this.alphaMaskIndex--,
                    (this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite =
                      null));
            }),
            (t.prototype.pushColorMask = function (t) {
              var e = t._colorMask,
                n = (t._colorMask = e & t.colorMask);
              n !== e &&
                this.renderer.gl.colorMask(
                  0 != (1 & n),
                  0 != (2 & n),
                  0 != (4 & n),
                  0 != (8 & n),
                );
            }),
            (t.prototype.popColorMask = function (t) {
              var e = t._colorMask,
                n =
                  this.maskStack.length > 0
                    ? this.maskStack[this.maskStack.length - 1]._colorMask
                    : 15;
              n !== e &&
                this.renderer.gl.colorMask(
                  0 != (1 & n),
                  0 != (2 & n),
                  0 != (4 & n),
                  0 != (8 & n),
                );
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        Fr = (function () {
          function t(t) {
            (this.renderer = t), (this.maskStack = []), (this.glConst = 0);
          }
          return (
            (t.prototype.getStackLength = function () {
              return this.maskStack.length;
            }),
            (t.prototype.setMaskStack = function (t) {
              var e = this.renderer.gl,
                n = this.getStackLength();
              this.maskStack = t;
              var r = this.getStackLength();
              r !== n &&
                (0 === r
                  ? e.disable(this.glConst)
                  : (e.enable(this.glConst), this._useCurrent()));
            }),
            (t.prototype._useCurrent = function () {}),
            (t.prototype.destroy = function () {
              (this.renderer = null), (this.maskStack = null);
            }),
            t
          );
        })(),
        Br = new me(),
        Gr = [],
        kr = (function (t) {
          function e(e) {
            var n = t.call(this, e) || this;
            return (
              (n.glConst = At.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST),
              n
            );
          }
          return (
            cn(e, t),
            (e.prototype.getStackLength = function () {
              var t = this.maskStack[this.maskStack.length - 1];
              return t ? t._scissorCounter : 0;
            }),
            (e.prototype.calcScissorRect = function (t) {
              var e;
              if (!t._scissorRectLocal) {
                var n = t._scissorRect,
                  r = t.maskObject,
                  i = this.renderer,
                  o = i.renderTexture,
                  a = r.getBounds(
                    !0,
                    null !== (e = Gr.pop()) && void 0 !== e ? e : new ue(),
                  );
                this.roundFrameToPixels(
                  a,
                  o.current ? o.current.resolution : i.resolution,
                  o.sourceFrame,
                  o.destinationFrame,
                  i.projection.transform,
                ),
                  n && a.fit(n),
                  (t._scissorRectLocal = a);
              }
            }),
            (e.isMatrixRotated = function (t) {
              if (!t) return !1;
              var e = t.a,
                n = t.b,
                r = t.c,
                i = t.d;
              return (
                (Math.abs(n) > 1e-4 || Math.abs(r) > 1e-4) &&
                (Math.abs(e) > 1e-4 || Math.abs(i) > 1e-4)
              );
            }),
            (e.prototype.testScissor = function (t) {
              var n = t.maskObject;
              if (!n.isFastRect || !n.isFastRect()) return !1;
              if (e.isMatrixRotated(n.worldTransform)) return !1;
              if (e.isMatrixRotated(this.renderer.projection.transform))
                return !1;
              this.calcScissorRect(t);
              var r = t._scissorRectLocal;
              return r.width > 0 && r.height > 0;
            }),
            (e.prototype.roundFrameToPixels = function (t, n, r, i, o) {
              e.isMatrixRotated(o) ||
                ((o = o ? Br.copyFrom(o) : Br.identity())
                  .translate(-r.x, -r.y)
                  .scale(i.width / r.width, i.height / r.height)
                  .translate(i.x, i.y),
                this.renderer.filter.transformAABB(o, t),
                t.fit(i),
                (t.x = Math.round(t.x * n)),
                (t.y = Math.round(t.y * n)),
                (t.width = Math.round(t.width * n)),
                (t.height = Math.round(t.height * n)));
            }),
            (e.prototype.push = function (t) {
              t._scissorRectLocal || this.calcScissorRect(t);
              var e = this.renderer.gl;
              t._scissorRect || e.enable(e.SCISSOR_TEST),
                t._scissorCounter++,
                (t._scissorRect = t._scissorRectLocal),
                this._useCurrent();
            }),
            (e.prototype.pop = function (t) {
              var e = this.renderer.gl;
              t && Gr.push(t._scissorRectLocal),
                this.getStackLength() > 0
                  ? this._useCurrent()
                  : e.disable(e.SCISSOR_TEST);
            }),
            (e.prototype._useCurrent = function () {
              var t,
                e = this.maskStack[this.maskStack.length - 1]._scissorRect;
              (t = this.renderer.renderTexture.current
                ? e.y
                : this.renderer.height - e.height - e.y),
                this.renderer.gl.scissor(e.x, t, e.width, e.height);
            }),
            e
          );
        })(Fr),
        Hr = (function (t) {
          function e(e) {
            var n = t.call(this, e) || this;
            return (
              (n.glConst = At.ADAPTER.getWebGLRenderingContext().STENCIL_TEST),
              n
            );
          }
          return (
            cn(e, t),
            (e.prototype.getStackLength = function () {
              var t = this.maskStack[this.maskStack.length - 1];
              return t ? t._stencilCounter : 0;
            }),
            (e.prototype.push = function (t) {
              var e = t.maskObject,
                n = this.renderer.gl,
                r = t._stencilCounter;
              0 === r &&
                (this.renderer.framebuffer.forceStencil(),
                n.clearStencil(0),
                n.clear(n.STENCIL_BUFFER_BIT),
                n.enable(n.STENCIL_TEST)),
                t._stencilCounter++;
              var i = t._colorMask;
              0 !== i && ((t._colorMask = 0), n.colorMask(!1, !1, !1, !1)),
                n.stencilFunc(n.EQUAL, r, 4294967295),
                n.stencilOp(n.KEEP, n.KEEP, n.INCR),
                (e.renderable = !0),
                e.render(this.renderer),
                this.renderer.batch.flush(),
                (e.renderable = !1),
                0 !== i &&
                  ((t._colorMask = i),
                  n.colorMask(
                    0 != (1 & i),
                    0 != (2 & i),
                    0 != (4 & i),
                    0 != (8 & i),
                  )),
                this._useCurrent();
            }),
            (e.prototype.pop = function (t) {
              var e = this.renderer.gl;
              if (0 === this.getStackLength()) e.disable(e.STENCIL_TEST);
              else {
                var n =
                    0 !== this.maskStack.length
                      ? this.maskStack[this.maskStack.length - 1]
                      : null,
                  r = n ? n._colorMask : 15;
                0 !== r && ((n._colorMask = 0), e.colorMask(!1, !1, !1, !1)),
                  e.stencilOp(e.KEEP, e.KEEP, e.DECR),
                  (t.renderable = !0),
                  t.render(this.renderer),
                  this.renderer.batch.flush(),
                  (t.renderable = !1),
                  0 !== r &&
                    ((n._colorMask = r),
                    e.colorMask(
                      0 != (1 & r),
                      0 != (2 & r),
                      0 != (4 & r),
                      0 != (8 & r),
                    )),
                  this._useCurrent();
              }
            }),
            (e.prototype._useCurrent = function () {
              var t = this.renderer.gl;
              t.stencilFunc(t.EQUAL, this.getStackLength(), 4294967295),
                t.stencilOp(t.KEEP, t.KEEP, t.KEEP);
            }),
            e
          );
        })(Fr),
        zr = (function () {
          function t(t) {
            (this.renderer = t),
              (this.destinationFrame = null),
              (this.sourceFrame = null),
              (this.defaultFrame = null),
              (this.projectionMatrix = new me()),
              (this.transform = null);
          }
          return (
            (t.prototype.update = function (t, e, n, r) {
              (this.destinationFrame =
                t || this.destinationFrame || this.defaultFrame),
                (this.sourceFrame = e || this.sourceFrame || t),
                this.calculateProjection(
                  this.destinationFrame,
                  this.sourceFrame,
                  n,
                  r,
                ),
                this.transform && this.projectionMatrix.append(this.transform);
              var i = this.renderer;
              (i.globalUniforms.uniforms.projectionMatrix =
                this.projectionMatrix),
                i.globalUniforms.update(),
                i.shader.shader &&
                  i.shader.syncUniformGroup(i.shader.shader.uniforms.globals);
            }),
            (t.prototype.calculateProjection = function (t, e, n, r) {
              var i = this.projectionMatrix,
                o = r ? -1 : 1;
              i.identity(),
                (i.a = (1 / e.width) * 2),
                (i.d = o * ((1 / e.height) * 2)),
                (i.tx = -1 - e.x * i.a),
                (i.ty = -o - e.y * i.d);
            }),
            (t.prototype.setTransform = function (t) {}),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        Vr = new ue(),
        Xr = new ue(),
        Wr = (function () {
          function t(t) {
            (this.renderer = t),
              (this.clearColor = t._backgroundColorRgba),
              (this.defaultMaskStack = []),
              (this.current = null),
              (this.sourceFrame = new ue()),
              (this.destinationFrame = new ue()),
              (this.viewportFrame = new ue());
          }
          return (
            (t.prototype.bind = function (t, e, n) {
              void 0 === t && (t = null);
              var r,
                i,
                o,
                a = this.renderer;
              (this.current = t),
                t
                  ? ((o = (r = t.baseTexture).resolution),
                    e ||
                      ((Vr.width = t.frame.width),
                      (Vr.height = t.frame.height),
                      (e = Vr)),
                    n ||
                      ((Xr.x = t.frame.x),
                      (Xr.y = t.frame.y),
                      (Xr.width = e.width),
                      (Xr.height = e.height),
                      (n = Xr)),
                    (i = r.framebuffer))
                  : ((o = a.resolution),
                    e ||
                      ((Vr.width = a.screen.width),
                      (Vr.height = a.screen.height),
                      (e = Vr)),
                    n || (((n = Vr).width = e.width), (n.height = e.height)));
              var s = this.viewportFrame;
              (s.x = n.x * o),
                (s.y = n.y * o),
                (s.width = n.width * o),
                (s.height = n.height * o),
                t || (s.y = a.view.height - (s.y + s.height)),
                s.ceil(),
                this.renderer.framebuffer.bind(i, s),
                this.renderer.projection.update(n, e, o, !i),
                t
                  ? this.renderer.mask.setMaskStack(r.maskStack)
                  : this.renderer.mask.setMaskStack(this.defaultMaskStack),
                this.sourceFrame.copyFrom(e),
                this.destinationFrame.copyFrom(n);
            }),
            (t.prototype.clear = function (t, e) {
              t = this.current
                ? t || this.current.baseTexture.clearColor
                : t || this.clearColor;
              var n = this.destinationFrame,
                r = this.current
                  ? this.current.baseTexture
                  : this.renderer.screen,
                i = n.width !== r.width || n.height !== r.height;
              if (i) {
                var o = this.viewportFrame,
                  a = o.x,
                  s = o.y,
                  l = o.width,
                  u = o.height;
                (a = Math.round(a)),
                  (s = Math.round(s)),
                  (l = Math.round(l)),
                  (u = Math.round(u)),
                  this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),
                  this.renderer.gl.scissor(a, s, l, u);
              }
              this.renderer.framebuffer.clear(t[0], t[1], t[2], t[3], e),
                i && this.renderer.scissor.pop();
            }),
            (t.prototype.resize = function () {
              this.bind(null);
            }),
            (t.prototype.reset = function () {
              this.bind(null);
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })();
      function jr(t, e, n, r, i) {
        n.buffer.update(i);
      }
      var Yr = {
          float: "\n        data[offset] = v;\n    ",
          vec2: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",
          vec3: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",
          vec4: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",
          mat2: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",
          mat3: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",
          mat4: "\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    ",
        },
        qr = {
          float: 4,
          vec2: 8,
          vec3: 12,
          vec4: 16,
          int: 4,
          ivec2: 8,
          ivec3: 12,
          ivec4: 16,
          uint: 4,
          uvec2: 8,
          uvec3: 12,
          uvec4: 16,
          bool: 4,
          bvec2: 8,
          bvec3: 12,
          bvec4: 16,
          mat2: 32,
          mat3: 48,
          mat4: 64,
        };
      var Kr = (function () {
        function t(t, e) {
          (this.program = t),
            (this.uniformData = e),
            (this.uniformGroups = {}),
            (this.uniformDirtyGroups = {}),
            (this.uniformBufferBindings = {});
        }
        return (
          (t.prototype.destroy = function () {
            (this.uniformData = null),
              (this.uniformGroups = null),
              (this.uniformDirtyGroups = null),
              (this.uniformBufferBindings = null),
              (this.program = null);
          }),
          t
        );
      })();
      var Zr = 0,
        Qr = { textureCount: 0, uboCount: 0 },
        $r = (function () {
          function t(t) {
            (this.destroyed = !1),
              (this.renderer = t),
              this.systemCheck(),
              (this.gl = null),
              (this.shader = null),
              (this.program = null),
              (this.cache = {}),
              (this._uboCache = {}),
              (this.id = Zr++);
          }
          return (
            (t.prototype.systemCheck = function () {
              if (
                !(function () {
                  if ("boolean" == typeof Tr) return Tr;
                  try {
                    var t = new Function(
                      "param1",
                      "param2",
                      "param3",
                      "return param1[param2] === param3;",
                    );
                    Tr = !0 === t({ a: "b" }, "a", "b");
                  } catch (t) {
                    Tr = !1;
                  }
                  return Tr;
                })()
              )
                throw new Error(
                  "Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.",
                );
            }),
            (t.prototype.contextChange = function (t) {
              (this.gl = t), this.reset();
            }),
            (t.prototype.bind = function (t, e) {
              t.uniforms.globals = this.renderer.globalUniforms;
              var n = t.program,
                r =
                  n.glPrograms[this.renderer.CONTEXT_UID] ||
                  this.generateProgram(t);
              return (
                (this.shader = t),
                this.program !== n &&
                  ((this.program = n), this.gl.useProgram(r.program)),
                e ||
                  ((Qr.textureCount = 0),
                  (Qr.uboCount = 0),
                  this.syncUniformGroup(t.uniformGroup, Qr)),
                r
              );
            }),
            (t.prototype.setUniforms = function (t) {
              var e = this.shader.program,
                n = e.glPrograms[this.renderer.CONTEXT_UID];
              e.syncUniforms(n.uniformData, t, this.renderer);
            }),
            (t.prototype.syncUniformGroup = function (t, e) {
              var n = this.getGlProgram();
              (t.static && t.dirtyId === n.uniformDirtyGroups[t.id]) ||
                ((n.uniformDirtyGroups[t.id] = t.dirtyId),
                this.syncUniforms(t, n, e));
            }),
            (t.prototype.syncUniforms = function (t, e, n) {
              (
                t.syncUniforms[this.shader.program.id] ||
                this.createSyncGroups(t)
              )(e.uniformData, t.uniforms, this.renderer, n);
            }),
            (t.prototype.createSyncGroups = function (t) {
              var e = this.getSignature(
                t,
                this.shader.program.uniformData,
                "u",
              );
              return (
                this.cache[e] ||
                  (this.cache[e] = (function (t, e) {
                    var n,
                      r = [
                        "\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    ",
                      ];
                    for (var i in t.uniforms) {
                      var o = e[i];
                      if (o) {
                        for (
                          var a = t.uniforms[i], s = !1, l = 0;
                          l < br.length;
                          l++
                        )
                          if (br[l].test(o, a)) {
                            r.push(br[l].code(i, a)), (s = !0);
                            break;
                          }
                        if (!s) {
                          var u = (1 === o.size ? xr : Sr)[o.type].replace(
                            "location",
                            'ud["' + i + '"].location',
                          );
                          r.push(
                            '\n            cu = ud["' +
                              i +
                              '"];\n            cv = cu.value;\n            v = uv["' +
                              i +
                              '"];\n            ' +
                              u +
                              ";",
                          );
                        }
                      } else
                        (null === (n = t.uniforms[i]) || void 0 === n
                          ? void 0
                          : n.group) &&
                          (t.uniforms[i].ubo
                            ? r.push(
                                "\n                        renderer.shader.syncUniformBufferGroup(uv." +
                                  i +
                                  ", '" +
                                  i +
                                  "');\n                    ",
                              )
                            : r.push(
                                "\n                        renderer.shader.syncUniformGroup(uv." +
                                  i +
                                  ", syncData);\n                    ",
                              ));
                    }
                    return new Function(
                      "ud",
                      "uv",
                      "renderer",
                      "syncData",
                      r.join("\n"),
                    );
                  })(t, this.shader.program.uniformData)),
                (t.syncUniforms[this.shader.program.id] = this.cache[e]),
                t.syncUniforms[this.shader.program.id]
              );
            }),
            (t.prototype.syncUniformBufferGroup = function (t, e) {
              var n = this.getGlProgram();
              if (!t.static || 0 !== t.dirtyId || !n.uniformGroups[t.id]) {
                t.dirtyId = 0;
                var r =
                  n.uniformGroups[t.id] || this.createSyncBufferGroup(t, n, e);
                t.buffer.update(),
                  r(n.uniformData, t.uniforms, this.renderer, Qr, t.buffer);
              }
              this.renderer.buffer.bindBufferBase(
                t.buffer,
                n.uniformBufferBindings[e],
              );
            }),
            (t.prototype.createSyncBufferGroup = function (t, e, n) {
              var r = this.renderer.gl;
              this.renderer.buffer.bind(t.buffer);
              var i = this.gl.getUniformBlockIndex(e.program, n);
              (e.uniformBufferBindings[n] = this.shader.uniformBindCount),
                r.uniformBlockBinding(
                  e.program,
                  i,
                  this.shader.uniformBindCount,
                ),
                this.shader.uniformBindCount++;
              var o = this.getSignature(
                  t,
                  this.shader.program.uniformData,
                  "ubo",
                ),
                a = this._uboCache[o];
              if (
                (a ||
                  (a = this._uboCache[o] =
                    (function (t, e) {
                      if (!t.autoManage) return { size: 0, syncFunc: jr };
                      for (
                        var n = (function (t, e) {
                            var n = [];
                            for (var r in t) e[r] && n.push(e[r]);
                            return (
                              n.sort(function (t, e) {
                                return t.index - e.index;
                              }),
                              n
                            );
                          })(t.uniforms, e),
                          r = (function (t) {
                            for (
                              var e = t.map(function (t) {
                                  return {
                                    data: t,
                                    offset: 0,
                                    dataLen: 0,
                                    dirty: 0,
                                  };
                                }),
                                n = 0,
                                r = 0,
                                i = 0,
                                o = 0;
                              o < e.length;
                              o++
                            ) {
                              var a = e[o];
                              if (
                                ((n = qr[a.data.type]),
                                a.data.size > 1 &&
                                  (n = Math.max(n, 16) * a.data.size),
                                (a.dataLen = n),
                                r % n != 0 && r < 16)
                              ) {
                                var s = (r % n) % 16;
                                (r += s), (i += s);
                              }
                              r + n > 16
                                ? ((i = 16 * Math.ceil(i / 16)),
                                  (a.offset = i),
                                  (i += n),
                                  (r = n))
                                : ((a.offset = i), (r += n), (i += n));
                            }
                            return {
                              uboElements: e,
                              size: (i = 16 * Math.ceil(i / 16)),
                            };
                          })(n),
                          i = r.uboElements,
                          o = r.size,
                          a = [
                            "\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    ",
                          ],
                          s = 0;
                        s < i.length;
                        s++
                      ) {
                        for (
                          var l = i[s],
                            u = t.uniforms[l.data.name],
                            h = l.data.name,
                            c = !1,
                            d = 0;
                          d < br.length;
                          d++
                        ) {
                          var f = br[d];
                          if (f.codeUbo && f.test(l.data, u)) {
                            a.push(
                              "offset = " + l.offset / 4 + ";",
                              br[d].codeUbo(l.data.name, u),
                            ),
                              (c = !0);
                            break;
                          }
                        }
                        if (!c)
                          if (l.data.size > 1) {
                            var p = gr(l.data.type),
                              m = Math.max(qr[l.data.type] / 16, 1),
                              _ = p / m,
                              g = (4 - (_ % 4)) % 4;
                            a.push(
                              "\n                cv = ud." +
                                h +
                                ".value;\n                v = uv." +
                                h +
                                ";\n                offset = " +
                                l.offset / 4 +
                                ";\n\n                t = 0;\n\n                for(var i=0; i < " +
                                l.data.size * m +
                                "; i++)\n                {\n                    for(var j = 0; j < " +
                                _ +
                                "; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += " +
                                g +
                                ";\n                }\n\n                ",
                            );
                          } else {
                            var v = Yr[l.data.type];
                            a.push(
                              "\n                cv = ud." +
                                h +
                                ".value;\n                v = uv." +
                                h +
                                ";\n                offset = " +
                                l.offset / 4 +
                                ";\n                " +
                                v +
                                ";\n                ",
                            );
                          }
                      }
                      return (
                        a.push(
                          "\n       renderer.buffer.update(buffer);\n    ",
                        ),
                        {
                          size: o,
                          syncFunc: new Function(
                            "ud",
                            "uv",
                            "renderer",
                            "syncData",
                            "buffer",
                            a.join("\n"),
                          ),
                        }
                      );
                    })(t, this.shader.program.uniformData)),
                t.autoManage)
              ) {
                var s = new Float32Array(a.size / 4);
                t.buffer.update(s);
              }
              return (
                (e.uniformGroups[t.id] = a.syncFunc), e.uniformGroups[t.id]
              );
            }),
            (t.prototype.getSignature = function (t, e, n) {
              var r = t.uniforms,
                i = [n + "-"];
              for (var o in r) i.push(o), e[o] && i.push(e[o].type);
              return i.join("-");
            }),
            (t.prototype.getGlProgram = function () {
              return this.shader
                ? this.shader.program.glPrograms[this.renderer.CONTEXT_UID]
                : null;
            }),
            (t.prototype.generateProgram = function (t) {
              var e = this.gl,
                n = t.program,
                r = (function (t, e) {
                  var n = lr(t, t.VERTEX_SHADER, e.vertexSrc),
                    r = lr(t, t.FRAGMENT_SHADER, e.fragmentSrc),
                    i = t.createProgram();
                  if (
                    (t.attachShader(i, n),
                    t.attachShader(i, r),
                    t.linkProgram(i),
                    t.getProgramParameter(i, t.LINK_STATUS) ||
                      (function (t, e, n, r) {
                        t.getProgramParameter(e, t.LINK_STATUS) ||
                          (t.getShaderParameter(n, t.COMPILE_STATUS) ||
                            ur(t, n),
                          t.getShaderParameter(r, t.COMPILE_STATUS) || ur(t, r),
                          console.error(
                            "PixiJS Error: Could not initialize shader.",
                          ),
                          "" !== t.getProgramInfoLog(e) &&
                            console.warn(
                              "PixiJS Warning: gl.getProgramInfoLog()",
                              t.getProgramInfoLog(e),
                            ));
                      })(t, i, n, r),
                    (e.attributeData = (function (t, e) {
                      for (
                        var n = {},
                          r = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES),
                          i = 0;
                        i < r;
                        i++
                      ) {
                        var o = e.getActiveAttrib(t, i);
                        if (0 !== o.name.indexOf("gl_")) {
                          var a = Er(e, o.type),
                            s = {
                              type: a,
                              name: o.name,
                              size: gr(a),
                              location: e.getAttribLocation(t, o.name),
                            };
                          n[o.name] = s;
                        }
                      }
                      return n;
                    })(i, t)),
                    (e.uniformData = (function (t, e) {
                      for (
                        var n = {},
                          r = e.getProgramParameter(t, e.ACTIVE_UNIFORMS),
                          i = 0;
                        i < r;
                        i++
                      ) {
                        var o = e.getActiveUniform(t, i),
                          a = o.name.replace(/\[.*?\]$/, ""),
                          s = !!o.name.match(/\[.*?\]$/),
                          l = Er(e, o.type);
                        n[a] = {
                          name: a,
                          index: i,
                          type: l,
                          size: o.size,
                          isArray: s,
                          value: cr(l, o.size),
                        };
                      }
                      return n;
                    })(i, t)),
                    !/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(
                      e.vertexSrc,
                    ))
                  ) {
                    var o = Object.keys(e.attributeData);
                    o.sort(function (t, e) {
                      return t > e ? 1 : -1;
                    });
                    for (var a = 0; a < o.length; a++)
                      (e.attributeData[o[a]].location = a),
                        t.bindAttribLocation(i, a, o[a]);
                    t.linkProgram(i);
                  }
                  t.deleteShader(n), t.deleteShader(r);
                  var s = {};
                  for (var a in e.uniformData) {
                    var l = e.uniformData[a];
                    s[a] = {
                      location: t.getUniformLocation(i, a),
                      value: cr(l.type, l.size),
                    };
                  }
                  return new Kr(i, s);
                })(e, n);
              return (n.glPrograms[this.renderer.CONTEXT_UID] = r), r;
            }),
            (t.prototype.reset = function () {
              (this.program = null), (this.shader = null);
            }),
            (t.prototype.destroy = function () {
              (this.renderer = null), (this.destroyed = !0);
            }),
            t
          );
        })(),
        Jr = (function () {
          function t() {
            (this.gl = null),
              (this.stateId = 0),
              (this.polygonOffset = 0),
              (this.blendMode = W.NONE),
              (this._blendEq = !1),
              (this.map = []),
              (this.map[0] = this.setBlend),
              (this.map[1] = this.setOffset),
              (this.map[2] = this.setCullFace),
              (this.map[3] = this.setDepthTest),
              (this.map[4] = this.setFrontFace),
              (this.map[5] = this.setDepthMask),
              (this.checks = []),
              (this.defaultState = new Or()),
              (this.defaultState.blend = !0);
          }
          return (
            (t.prototype.contextChange = function (t) {
              (this.gl = t),
                (this.blendModes = (function (t, e) {
                  return (
                    void 0 === e && (e = []),
                    (e[W.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.ADD] = [t.ONE, t.ONE]),
                    (e[W.MULTIPLY] = [
                      t.DST_COLOR,
                      t.ONE_MINUS_SRC_ALPHA,
                      t.ONE,
                      t.ONE_MINUS_SRC_ALPHA,
                    ]),
                    (e[W.SCREEN] = [
                      t.ONE,
                      t.ONE_MINUS_SRC_COLOR,
                      t.ONE,
                      t.ONE_MINUS_SRC_ALPHA,
                    ]),
                    (e[W.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.NONE] = [0, 0]),
                    (e[W.NORMAL_NPM] = [
                      t.SRC_ALPHA,
                      t.ONE_MINUS_SRC_ALPHA,
                      t.ONE,
                      t.ONE_MINUS_SRC_ALPHA,
                    ]),
                    (e[W.ADD_NPM] = [t.SRC_ALPHA, t.ONE, t.ONE, t.ONE]),
                    (e[W.SCREEN_NPM] = [
                      t.SRC_ALPHA,
                      t.ONE_MINUS_SRC_COLOR,
                      t.ONE,
                      t.ONE_MINUS_SRC_ALPHA,
                    ]),
                    (e[W.SRC_IN] = [t.DST_ALPHA, t.ZERO]),
                    (e[W.SRC_OUT] = [t.ONE_MINUS_DST_ALPHA, t.ZERO]),
                    (e[W.SRC_ATOP] = [t.DST_ALPHA, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.DST_OVER] = [t.ONE_MINUS_DST_ALPHA, t.ONE]),
                    (e[W.DST_IN] = [t.ZERO, t.SRC_ALPHA]),
                    (e[W.DST_OUT] = [t.ZERO, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.DST_ATOP] = [t.ONE_MINUS_DST_ALPHA, t.SRC_ALPHA]),
                    (e[W.XOR] = [t.ONE_MINUS_DST_ALPHA, t.ONE_MINUS_SRC_ALPHA]),
                    (e[W.SUBTRACT] = [
                      t.ONE,
                      t.ONE,
                      t.ONE,
                      t.ONE,
                      t.FUNC_REVERSE_SUBTRACT,
                      t.FUNC_ADD,
                    ]),
                    e
                  );
                })(t)),
                this.set(this.defaultState),
                this.reset();
            }),
            (t.prototype.set = function (t) {
              if (((t = t || this.defaultState), this.stateId !== t.data)) {
                for (var e = this.stateId ^ t.data, n = 0; e; )
                  1 & e && this.map[n].call(this, !!(t.data & (1 << n))),
                    (e >>= 1),
                    n++;
                this.stateId = t.data;
              }
              for (n = 0; n < this.checks.length; n++) this.checks[n](this, t);
            }),
            (t.prototype.forceState = function (t) {
              t = t || this.defaultState;
              for (var e = 0; e < this.map.length; e++)
                this.map[e].call(this, !!(t.data & (1 << e)));
              for (e = 0; e < this.checks.length; e++) this.checks[e](this, t);
              this.stateId = t.data;
            }),
            (t.prototype.setBlend = function (e) {
              this.updateCheck(t.checkBlendMode, e),
                this.gl[e ? "enable" : "disable"](this.gl.BLEND);
            }),
            (t.prototype.setOffset = function (e) {
              this.updateCheck(t.checkPolygonOffset, e),
                this.gl[e ? "enable" : "disable"](this.gl.POLYGON_OFFSET_FILL);
            }),
            (t.prototype.setDepthTest = function (t) {
              this.gl[t ? "enable" : "disable"](this.gl.DEPTH_TEST);
            }),
            (t.prototype.setDepthMask = function (t) {
              this.gl.depthMask(t);
            }),
            (t.prototype.setCullFace = function (t) {
              this.gl[t ? "enable" : "disable"](this.gl.CULL_FACE);
            }),
            (t.prototype.setFrontFace = function (t) {
              this.gl.frontFace(this.gl[t ? "CW" : "CCW"]);
            }),
            (t.prototype.setBlendMode = function (t) {
              if (t !== this.blendMode) {
                this.blendMode = t;
                var e = this.blendModes[t],
                  n = this.gl;
                2 === e.length
                  ? n.blendFunc(e[0], e[1])
                  : n.blendFuncSeparate(e[0], e[1], e[2], e[3]),
                  6 === e.length
                    ? ((this._blendEq = !0),
                      n.blendEquationSeparate(e[4], e[5]))
                    : this._blendEq &&
                      ((this._blendEq = !1),
                      n.blendEquationSeparate(n.FUNC_ADD, n.FUNC_ADD));
              }
            }),
            (t.prototype.setPolygonOffset = function (t, e) {
              this.gl.polygonOffset(t, e);
            }),
            (t.prototype.reset = function () {
              this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1),
                this.forceState(this.defaultState),
                (this._blendEq = !0),
                (this.blendMode = -1),
                this.setBlendMode(0);
            }),
            (t.prototype.updateCheck = function (t, e) {
              var n = this.checks.indexOf(t);
              e && -1 === n
                ? this.checks.push(t)
                : e || -1 === n || this.checks.splice(n, 1);
            }),
            (t.checkBlendMode = function (t, e) {
              t.setBlendMode(e.blendMode);
            }),
            (t.checkPolygonOffset = function (t, e) {
              t.setPolygonOffset(1, e.polygonOffset);
            }),
            (t.prototype.destroy = function () {
              this.gl = null;
            }),
            t
          );
        })(),
        ti = (function () {
          function t(t) {
            (this.renderer = t),
              (this.count = 0),
              (this.checkCount = 0),
              (this.maxIdle = At.GC_MAX_IDLE),
              (this.checkCountMax = At.GC_MAX_CHECK_COUNT),
              (this.mode = At.GC_MODE);
          }
          return (
            (t.prototype.postrender = function () {
              this.renderer.renderingToScreen &&
                (this.count++,
                this.mode !== nt.MANUAL &&
                  (this.checkCount++,
                  this.checkCount > this.checkCountMax &&
                    ((this.checkCount = 0), this.run())));
            }),
            (t.prototype.run = function () {
              for (
                var t = this.renderer.texture,
                  e = t.managedTextures,
                  n = !1,
                  r = 0;
                r < e.length;
                r++
              ) {
                var i = e[r];
                !i.framebuffer &&
                  this.count - i.touched > this.maxIdle &&
                  (t.destroyTexture(i, !0), (e[r] = null), (n = !0));
              }
              if (n) {
                var o = 0;
                for (r = 0; r < e.length; r++) null !== e[r] && (e[o++] = e[r]);
                e.length = o;
              }
            }),
            (t.prototype.unload = function (t) {
              var e = this.renderer.texture,
                n = t._texture;
              n && !n.framebuffer && e.destroyTexture(n);
              for (var r = t.children.length - 1; r >= 0; r--)
                this.unload(t.children[r]);
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        ei = function (t) {
          (this.texture = t),
            (this.width = -1),
            (this.height = -1),
            (this.dirtyId = -1),
            (this.dirtyStyleId = -1),
            (this.mipmap = !1),
            (this.wrapMode = 33071),
            (this.type = K.UNSIGNED_BYTE),
            (this.internalFormat = Y.RGBA),
            (this.samplerType = 0);
        },
        ni = (function () {
          function t(t) {
            (this.renderer = t),
              (this.boundTextures = []),
              (this.currentLocation = -1),
              (this.managedTextures = []),
              (this._unknownBoundTextures = !1),
              (this.unknownTexture = new _n()),
              (this.hasIntegerTextures = !1);
          }
          return (
            (t.prototype.contextChange = function () {
              var t = (this.gl = this.renderer.gl);
              (this.CONTEXT_UID = this.renderer.CONTEXT_UID),
                (this.webGLVersion = this.renderer.context.webGLVersion),
                (this.internalFormats = (function (t) {
                  var e,
                    n,
                    r,
                    i,
                    o,
                    a,
                    s,
                    l,
                    u,
                    h,
                    c,
                    d,
                    f,
                    p,
                    m,
                    _,
                    g,
                    v,
                    y,
                    E,
                    T,
                    b,
                    x;
                  return (
                    "WebGL2RenderingContext" in globalThis &&
                    t instanceof globalThis.WebGL2RenderingContext
                      ? (((e = {})[K.UNSIGNED_BYTE] =
                          (((n = {})[Y.RGBA] = t.RGBA8),
                          (n[Y.RGB] = t.RGB8),
                          (n[Y.RG] = t.RG8),
                          (n[Y.RED] = t.R8),
                          (n[Y.RGBA_INTEGER] = t.RGBA8UI),
                          (n[Y.RGB_INTEGER] = t.RGB8UI),
                          (n[Y.RG_INTEGER] = t.RG8UI),
                          (n[Y.RED_INTEGER] = t.R8UI),
                          (n[Y.ALPHA] = t.ALPHA),
                          (n[Y.LUMINANCE] = t.LUMINANCE),
                          (n[Y.LUMINANCE_ALPHA] = t.LUMINANCE_ALPHA),
                          n)),
                        (e[K.BYTE] =
                          (((r = {})[Y.RGBA] = t.RGBA8_SNORM),
                          (r[Y.RGB] = t.RGB8_SNORM),
                          (r[Y.RG] = t.RG8_SNORM),
                          (r[Y.RED] = t.R8_SNORM),
                          (r[Y.RGBA_INTEGER] = t.RGBA8I),
                          (r[Y.RGB_INTEGER] = t.RGB8I),
                          (r[Y.RG_INTEGER] = t.RG8I),
                          (r[Y.RED_INTEGER] = t.R8I),
                          r)),
                        (e[K.UNSIGNED_SHORT] =
                          (((i = {})[Y.RGBA_INTEGER] = t.RGBA16UI),
                          (i[Y.RGB_INTEGER] = t.RGB16UI),
                          (i[Y.RG_INTEGER] = t.RG16UI),
                          (i[Y.RED_INTEGER] = t.R16UI),
                          (i[Y.DEPTH_COMPONENT] = t.DEPTH_COMPONENT16),
                          i)),
                        (e[K.SHORT] =
                          (((o = {})[Y.RGBA_INTEGER] = t.RGBA16I),
                          (o[Y.RGB_INTEGER] = t.RGB16I),
                          (o[Y.RG_INTEGER] = t.RG16I),
                          (o[Y.RED_INTEGER] = t.R16I),
                          o)),
                        (e[K.UNSIGNED_INT] =
                          (((a = {})[Y.RGBA_INTEGER] = t.RGBA32UI),
                          (a[Y.RGB_INTEGER] = t.RGB32UI),
                          (a[Y.RG_INTEGER] = t.RG32UI),
                          (a[Y.RED_INTEGER] = t.R32UI),
                          (a[Y.DEPTH_COMPONENT] = t.DEPTH_COMPONENT24),
                          a)),
                        (e[K.INT] =
                          (((s = {})[Y.RGBA_INTEGER] = t.RGBA32I),
                          (s[Y.RGB_INTEGER] = t.RGB32I),
                          (s[Y.RG_INTEGER] = t.RG32I),
                          (s[Y.RED_INTEGER] = t.R32I),
                          s)),
                        (e[K.FLOAT] =
                          (((l = {})[Y.RGBA] = t.RGBA32F),
                          (l[Y.RGB] = t.RGB32F),
                          (l[Y.RG] = t.RG32F),
                          (l[Y.RED] = t.R32F),
                          (l[Y.DEPTH_COMPONENT] = t.DEPTH_COMPONENT32F),
                          l)),
                        (e[K.HALF_FLOAT] =
                          (((u = {})[Y.RGBA] = t.RGBA16F),
                          (u[Y.RGB] = t.RGB16F),
                          (u[Y.RG] = t.RG16F),
                          (u[Y.RED] = t.R16F),
                          u)),
                        (e[K.UNSIGNED_SHORT_5_6_5] =
                          (((h = {})[Y.RGB] = t.RGB565), h)),
                        (e[K.UNSIGNED_SHORT_4_4_4_4] =
                          (((c = {})[Y.RGBA] = t.RGBA4), c)),
                        (e[K.UNSIGNED_SHORT_5_5_5_1] =
                          (((d = {})[Y.RGBA] = t.RGB5_A1), d)),
                        (e[K.UNSIGNED_INT_2_10_10_10_REV] =
                          (((f = {})[Y.RGBA] = t.RGB10_A2),
                          (f[Y.RGBA_INTEGER] = t.RGB10_A2UI),
                          f)),
                        (e[K.UNSIGNED_INT_10F_11F_11F_REV] =
                          (((p = {})[Y.RGB] = t.R11F_G11F_B10F), p)),
                        (e[K.UNSIGNED_INT_5_9_9_9_REV] =
                          (((m = {})[Y.RGB] = t.RGB9_E5), m)),
                        (e[K.UNSIGNED_INT_24_8] =
                          (((_ = {})[Y.DEPTH_STENCIL] = t.DEPTH24_STENCIL8),
                          _)),
                        (e[K.FLOAT_32_UNSIGNED_INT_24_8_REV] =
                          (((g = {})[Y.DEPTH_STENCIL] = t.DEPTH32F_STENCIL8),
                          g)),
                        (x = e))
                      : (((v = {})[K.UNSIGNED_BYTE] =
                          (((y = {})[Y.RGBA] = t.RGBA),
                          (y[Y.RGB] = t.RGB),
                          (y[Y.ALPHA] = t.ALPHA),
                          (y[Y.LUMINANCE] = t.LUMINANCE),
                          (y[Y.LUMINANCE_ALPHA] = t.LUMINANCE_ALPHA),
                          y)),
                        (v[K.UNSIGNED_SHORT_5_6_5] =
                          (((E = {})[Y.RGB] = t.RGB), E)),
                        (v[K.UNSIGNED_SHORT_4_4_4_4] =
                          (((T = {})[Y.RGBA] = t.RGBA), T)),
                        (v[K.UNSIGNED_SHORT_5_5_5_1] =
                          (((b = {})[Y.RGBA] = t.RGBA), b)),
                        (x = v)),
                    x
                  );
                })(t));
              var e = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);
              this.boundTextures.length = e;
              for (var n = 0; n < e; n++) this.boundTextures[n] = null;
              this.emptyTextures = {};
              var r = new ei(t.createTexture());
              for (
                t.bindTexture(t.TEXTURE_2D, r.texture),
                  t.texImage2D(
                    t.TEXTURE_2D,
                    0,
                    t.RGBA,
                    1,
                    1,
                    0,
                    t.RGBA,
                    t.UNSIGNED_BYTE,
                    new Uint8Array(4),
                  ),
                  this.emptyTextures[t.TEXTURE_2D] = r,
                  this.emptyTextures[t.TEXTURE_CUBE_MAP] = new ei(
                    t.createTexture(),
                  ),
                  t.bindTexture(
                    t.TEXTURE_CUBE_MAP,
                    this.emptyTextures[t.TEXTURE_CUBE_MAP].texture,
                  ),
                  n = 0;
                n < 6;
                n++
              )
                t.texImage2D(
                  t.TEXTURE_CUBE_MAP_POSITIVE_X + n,
                  0,
                  t.RGBA,
                  1,
                  1,
                  0,
                  t.RGBA,
                  t.UNSIGNED_BYTE,
                  null,
                );
              for (
                t.texParameteri(
                  t.TEXTURE_CUBE_MAP,
                  t.TEXTURE_MAG_FILTER,
                  t.LINEAR,
                ),
                  t.texParameteri(
                    t.TEXTURE_CUBE_MAP,
                    t.TEXTURE_MIN_FILTER,
                    t.LINEAR,
                  ),
                  n = 0;
                n < this.boundTextures.length;
                n++
              )
                this.bind(null, n);
            }),
            (t.prototype.bind = function (t, e) {
              void 0 === e && (e = 0);
              var n = this.gl;
              if (
                (t = null == t ? void 0 : t.castToBaseTexture()) &&
                t.valid &&
                !t.parentTextureArray
              ) {
                t.touched = this.renderer.textureGC.count;
                var r = t._glTextures[this.CONTEXT_UID] || this.initTexture(t);
                this.boundTextures[e] !== t &&
                  (this.currentLocation !== e &&
                    ((this.currentLocation = e),
                    n.activeTexture(n.TEXTURE0 + e)),
                  n.bindTexture(t.target, r.texture)),
                  r.dirtyId !== t.dirtyId &&
                    (this.currentLocation !== e &&
                      ((this.currentLocation = e),
                      n.activeTexture(n.TEXTURE0 + e)),
                    this.updateTexture(t)),
                  (this.boundTextures[e] = t);
              } else
                this.currentLocation !== e &&
                  ((this.currentLocation = e), n.activeTexture(n.TEXTURE0 + e)),
                  n.bindTexture(
                    n.TEXTURE_2D,
                    this.emptyTextures[n.TEXTURE_2D].texture,
                  ),
                  (this.boundTextures[e] = null);
            }),
            (t.prototype.reset = function () {
              (this._unknownBoundTextures = !0),
                (this.hasIntegerTextures = !1),
                (this.currentLocation = -1);
              for (var t = 0; t < this.boundTextures.length; t++)
                this.boundTextures[t] = this.unknownTexture;
            }),
            (t.prototype.unbind = function (t) {
              var e = this.gl,
                n = this.boundTextures;
              if (this._unknownBoundTextures) {
                this._unknownBoundTextures = !1;
                for (var r = 0; r < n.length; r++)
                  n[r] === this.unknownTexture && this.bind(null, r);
              }
              for (r = 0; r < n.length; r++)
                n[r] === t &&
                  (this.currentLocation !== r &&
                    (e.activeTexture(e.TEXTURE0 + r),
                    (this.currentLocation = r)),
                  e.bindTexture(t.target, this.emptyTextures[t.target].texture),
                  (n[r] = null));
            }),
            (t.prototype.ensureSamplerType = function (t) {
              var e = this,
                n = e.boundTextures,
                r = e.hasIntegerTextures,
                i = e.CONTEXT_UID;
              if (r)
                for (var o = t - 1; o >= 0; --o) {
                  var a = n[o];
                  a &&
                    a._glTextures[i].samplerType !== Z.FLOAT &&
                    this.renderer.texture.unbind(a);
                }
            }),
            (t.prototype.initTexture = function (t) {
              var e = new ei(this.gl.createTexture());
              return (
                (e.dirtyId = -1),
                (t._glTextures[this.CONTEXT_UID] = e),
                this.managedTextures.push(t),
                t.on("dispose", this.destroyTexture, this),
                e
              );
            }),
            (t.prototype.initTextureType = function (t, e) {
              var n, r;
              (e.internalFormat =
                null !==
                  (r =
                    null === (n = this.internalFormats[t.type]) || void 0 === n
                      ? void 0
                      : n[t.format]) && void 0 !== r
                  ? r
                  : t.format),
                2 === this.webGLVersion && t.type === K.HALF_FLOAT
                  ? (e.type = this.gl.HALF_FLOAT)
                  : (e.type = t.type);
            }),
            (t.prototype.updateTexture = function (t) {
              var e = t._glTextures[this.CONTEXT_UID];
              if (e) {
                var n = this.renderer;
                if (
                  (this.initTextureType(t, e),
                  t.resource && t.resource.upload(n, t, e))
                )
                  e.samplerType !== Z.FLOAT && (this.hasIntegerTextures = !0);
                else {
                  var r = t.realWidth,
                    i = t.realHeight,
                    o = n.gl;
                  (e.width !== r || e.height !== i || e.dirtyId < 0) &&
                    ((e.width = r),
                    (e.height = i),
                    o.texImage2D(
                      t.target,
                      0,
                      e.internalFormat,
                      r,
                      i,
                      0,
                      t.format,
                      e.type,
                      null,
                    ));
                }
                t.dirtyStyleId !== e.dirtyStyleId && this.updateTextureStyle(t),
                  (e.dirtyId = t.dirtyId);
              }
            }),
            (t.prototype.destroyTexture = function (t, e) {
              var n = this.gl;
              if (
                (t = t.castToBaseTexture())._glTextures[this.CONTEXT_UID] &&
                (this.unbind(t),
                n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),
                t.off("dispose", this.destroyTexture, this),
                delete t._glTextures[this.CONTEXT_UID],
                !e)
              ) {
                var r = this.managedTextures.indexOf(t);
                -1 !== r && Wt(this.managedTextures, r, 1);
              }
            }),
            (t.prototype.updateTextureStyle = function (t) {
              var e = t._glTextures[this.CONTEXT_UID];
              e &&
                ((t.mipmap !== J.POW2 && 2 === this.webGLVersion) ||
                t.isPowerOfTwo
                  ? (e.mipmap = t.mipmap >= 1)
                  : (e.mipmap = !1),
                2 === this.webGLVersion || t.isPowerOfTwo
                  ? (e.wrapMode = t.wrapMode)
                  : (e.wrapMode = $.CLAMP),
                (t.resource && t.resource.style(this.renderer, t, e)) ||
                  this.setStyle(t, e),
                (e.dirtyStyleId = t.dirtyStyleId));
            }),
            (t.prototype.setStyle = function (t, e) {
              var n = this.gl;
              if (
                (e.mipmap &&
                  t.mipmap !== J.ON_MANUAL &&
                  n.generateMipmap(t.target),
                n.texParameteri(t.target, n.TEXTURE_WRAP_S, e.wrapMode),
                n.texParameteri(t.target, n.TEXTURE_WRAP_T, e.wrapMode),
                e.mipmap)
              ) {
                n.texParameteri(
                  t.target,
                  n.TEXTURE_MIN_FILTER,
                  t.scaleMode === Q.LINEAR
                    ? n.LINEAR_MIPMAP_LINEAR
                    : n.NEAREST_MIPMAP_NEAREST,
                );
                var r = this.renderer.context.extensions.anisotropicFiltering;
                if (r && t.anisotropicLevel > 0 && t.scaleMode === Q.LINEAR) {
                  var i = Math.min(
                    t.anisotropicLevel,
                    n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT),
                  );
                  n.texParameterf(t.target, r.TEXTURE_MAX_ANISOTROPY_EXT, i);
                }
              } else
                n.texParameteri(
                  t.target,
                  n.TEXTURE_MIN_FILTER,
                  t.scaleMode === Q.LINEAR ? n.LINEAR : n.NEAREST,
                );
              n.texParameteri(
                t.target,
                n.TEXTURE_MAG_FILTER,
                t.scaleMode === Q.LINEAR ? n.LINEAR : n.NEAREST,
              );
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        ri = {
          __proto__: null,
          FilterSystem: Qn,
          BatchSystem: Jn,
          ContextSystem: er,
          FramebufferSystem: ir,
          GeometrySystem: ar,
          MaskSystem: Ur,
          ScissorSystem: kr,
          StencilSystem: Hr,
          ProjectionSystem: zr,
          RenderTextureSystem: Wr,
          ShaderSystem: $r,
          StateSystem: Jr,
          TextureGCSystem: ti,
          TextureSystem: ni,
        },
        ii = new me(),
        oi = (function (t) {
          function e(e, n) {
            void 0 === e && (e = V.UNKNOWN);
            var r = t.call(this) || this;
            return (
              (n = Object.assign({}, At.RENDER_OPTIONS, n)),
              (r.options = n),
              (r.type = e),
              (r.screen = new ue(0, 0, n.width, n.height)),
              (r.view = n.view || At.ADAPTER.createCanvas()),
              (r.resolution = n.resolution || At.RESOLUTION),
              (r.useContextAlpha = n.useContextAlpha),
              (r.autoDensity = !!n.autoDensity),
              (r.preserveDrawingBuffer = n.preserveDrawingBuffer),
              (r.clearBeforeRender = n.clearBeforeRender),
              (r._backgroundColor = 0),
              (r._backgroundColorRgba = [0, 0, 0, 1]),
              (r._backgroundColorString = "#000000"),
              (r.backgroundColor = n.backgroundColor || r._backgroundColor),
              (r.backgroundAlpha = n.backgroundAlpha),
              void 0 !== n.transparent &&
                (Zt(
                  "6.0.0",
                  "Option transparent is deprecated, please use backgroundAlpha instead.",
                ),
                (r.useContextAlpha = n.transparent),
                (r.backgroundAlpha = n.transparent ? 0 : 1)),
              (r._lastObjectRendered = null),
              (r.plugins = {}),
              r
            );
          }
          return (
            cn(e, t),
            (e.prototype.initPlugins = function (t) {
              for (var e in t) this.plugins[e] = new t[e](this);
            }),
            Object.defineProperty(e.prototype, "width", {
              get: function () {
                return this.view.width;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "height", {
              get: function () {
                return this.view.height;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.resize = function (t, e) {
              (this.view.width = Math.round(t * this.resolution)),
                (this.view.height = Math.round(e * this.resolution));
              var n = this.view.width / this.resolution,
                r = this.view.height / this.resolution;
              (this.screen.width = n),
                (this.screen.height = r),
                this.autoDensity &&
                  ((this.view.style.width = n + "px"),
                  (this.view.style.height = r + "px")),
                this.emit("resize", n, r);
            }),
            (e.prototype.generateTexture = function (t, e, n, r) {
              void 0 === e && (e = {}),
                "number" == typeof e &&
                  (Zt(
                    "6.1.0",
                    "generateTexture options (scaleMode, resolution, region) are now object options.",
                  ),
                  (e = { scaleMode: e, resolution: n, region: r }));
              var i = e.region,
                o = (function (t, e) {
                  var n = {};
                  for (var r in t)
                    Object.prototype.hasOwnProperty.call(t, r) &&
                      e.indexOf(r) < 0 &&
                      (n[r] = t[r]);
                  if (
                    null != t &&
                    "function" == typeof Object.getOwnPropertySymbols
                  ) {
                    var i = 0;
                    for (r = Object.getOwnPropertySymbols(t); i < r.length; i++)
                      e.indexOf(r[i]) < 0 &&
                        Object.prototype.propertyIsEnumerable.call(t, r[i]) &&
                        (n[r[i]] = t[r[i]]);
                  }
                  return n;
                })(e, ["region"]);
              0 === (r = i || t.getLocalBounds(null, !0)).width &&
                (r.width = 1),
                0 === r.height && (r.height = 1);
              var a = Ln.create(dn({ width: r.width, height: r.height }, o));
              return (
                (ii.tx = -r.x),
                (ii.ty = -r.y),
                this.render(t, {
                  renderTexture: a,
                  clear: !1,
                  transform: ii,
                  skipUpdateTransform: !!t.parent,
                }),
                a
              );
            }),
            (e.prototype.destroy = function (t) {
              for (var e in this.plugins)
                this.plugins[e].destroy(), (this.plugins[e] = null);
              t &&
                this.view.parentNode &&
                this.view.parentNode.removeChild(this.view);
              var n = this;
              (n.plugins = null),
                (n.type = V.UNKNOWN),
                (n.view = null),
                (n.screen = null),
                (n._tempDisplayObjectParent = null),
                (n.options = null),
                (this._backgroundColorRgba = null),
                (this._backgroundColorString = null),
                (this._lastObjectRendered = null);
            }),
            Object.defineProperty(e.prototype, "backgroundColor", {
              get: function () {
                return this._backgroundColor;
              },
              set: function (t) {
                (this._backgroundColor = t),
                  (this._backgroundColorString = Dt(t)),
                  Lt(t, this._backgroundColorRgba);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "backgroundAlpha", {
              get: function () {
                return this._backgroundColorRgba[3];
              },
              set: function (t) {
                this._backgroundColorRgba[3] = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Rt),
        ai = function (t) {
          (this.buffer = t || null),
            (this.updateID = -1),
            (this.byteLength = -1),
            (this.refCount = 0);
        },
        si = (function () {
          function t(t) {
            (this.renderer = t),
              (this.managedBuffers = {}),
              (this.boundBufferBases = {});
          }
          return (
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            (t.prototype.contextChange = function () {
              this.disposeAll(!0),
                (this.gl = this.renderer.gl),
                (this.CONTEXT_UID = this.renderer.CONTEXT_UID);
            }),
            (t.prototype.bind = function (t) {
              var e = this.gl,
                n = this.CONTEXT_UID,
                r = t._glBuffers[n] || this.createGLBuffer(t);
              e.bindBuffer(t.type, r.buffer);
            }),
            (t.prototype.bindBufferBase = function (t, e) {
              var n = this.gl,
                r = this.CONTEXT_UID;
              if (this.boundBufferBases[e] !== t) {
                var i = t._glBuffers[r] || this.createGLBuffer(t);
                (this.boundBufferBases[e] = t),
                  n.bindBufferBase(n.UNIFORM_BUFFER, e, i.buffer);
              }
            }),
            (t.prototype.bindBufferRange = function (t, e, n) {
              var r = this.gl,
                i = this.CONTEXT_UID;
              n = n || 0;
              var o = t._glBuffers[i] || this.createGLBuffer(t);
              r.bindBufferRange(
                r.UNIFORM_BUFFER,
                e || 0,
                o.buffer,
                256 * n,
                256,
              );
            }),
            (t.prototype.update = function (t) {
              var e = this.gl,
                n = this.CONTEXT_UID,
                r = t._glBuffers[n];
              if (t._updateID !== r.updateID)
                if (
                  ((r.updateID = t._updateID),
                  e.bindBuffer(t.type, r.buffer),
                  r.byteLength >= t.data.byteLength)
                )
                  e.bufferSubData(t.type, 0, t.data);
                else {
                  var i = t.static ? e.STATIC_DRAW : e.DYNAMIC_DRAW;
                  (r.byteLength = t.data.byteLength),
                    e.bufferData(t.type, t.data, i);
                }
            }),
            (t.prototype.dispose = function (t, e) {
              if (this.managedBuffers[t.id]) {
                delete this.managedBuffers[t.id];
                var n = t._glBuffers[this.CONTEXT_UID],
                  r = this.gl;
                t.disposeRunner.remove(this),
                  n &&
                    (e || r.deleteBuffer(n.buffer),
                    delete t._glBuffers[this.CONTEXT_UID]);
              }
            }),
            (t.prototype.disposeAll = function (t) {
              for (
                var e = Object.keys(this.managedBuffers), n = 0;
                n < e.length;
                n++
              )
                this.dispose(this.managedBuffers[e[n]], t);
            }),
            (t.prototype.createGLBuffer = function (t) {
              var e = this.CONTEXT_UID,
                n = this.gl;
              return (
                (t._glBuffers[e] = new ai(n.createBuffer())),
                (this.managedBuffers[t.id] = t),
                t.disposeRunner.add(this),
                t._glBuffers[e]
              );
            }),
            t
          );
        })(),
        li = (function (t) {
          function e(n) {
            var r = t.call(this, V.WEBGL, n) || this;
            return (
              (n = r.options),
              (r.gl = null),
              (r.CONTEXT_UID = 0),
              (r.runners = {
                destroy: new rn("destroy"),
                contextChange: new rn("contextChange"),
                reset: new rn("reset"),
                update: new rn("update"),
                postrender: new rn("postrender"),
                prerender: new rn("prerender"),
                resize: new rn("resize"),
              }),
              r.runners.contextChange.add(r),
              (r.globalUniforms = new Yn({ projectionMatrix: new me() }, !0)),
              r
                .addSystem(Ur, "mask")
                .addSystem(er, "context")
                .addSystem(Jr, "state")
                .addSystem($r, "shader")
                .addSystem(ni, "texture")
                .addSystem(si, "buffer")
                .addSystem(ar, "geometry")
                .addSystem(ir, "framebuffer")
                .addSystem(kr, "scissor")
                .addSystem(Hr, "stencil")
                .addSystem(zr, "projection")
                .addSystem(ti, "textureGC")
                .addSystem(Qn, "filter")
                .addSystem(Wr, "renderTexture")
                .addSystem(Jn, "batch"),
              r.initPlugins(e.__plugins),
              (r.multisample = void 0),
              n.context
                ? r.context.initFromContext(n.context)
                : r.context.initFromOptions({
                    alpha: !!r.useContextAlpha,
                    antialias: n.antialias,
                    premultipliedAlpha:
                      r.useContextAlpha &&
                      "notMultiplied" !== r.useContextAlpha,
                    stencil: !0,
                    preserveDrawingBuffer: n.preserveDrawingBuffer,
                    powerPreference: r.options.powerPreference,
                  }),
              (r.renderingToScreen = !0),
              (function (t) {
                var e;
                if (!Ct) {
                  if (
                    At.ADAPTER.getNavigator()
                      .userAgent.toLowerCase()
                      .indexOf("chrome") > -1
                  ) {
                    var n = [
                      "\n %c %c %c PixiJS 6.5.1 - ✰ " +
                        t +
                        " ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n",
                      "background: #ff66a5; padding:5px 0;",
                      "background: #ff66a5; padding:5px 0;",
                      "color: #ff66a5; background: #030307; padding:5px 0;",
                      "background: #ff66a5; padding:5px 0;",
                      "background: #ffc3dc; padding:5px 0;",
                      "background: #ff66a5; padding:5px 0;",
                      "color: #ff2424; background: #fff; padding:5px 0;",
                      "color: #ff2424; background: #fff; padding:5px 0;",
                      "color: #ff2424; background: #fff; padding:5px 0;",
                    ];
                    (e = globalThis.console).log.apply(e, n);
                  } else
                    globalThis.console &&
                      globalThis.console.log(
                        "PixiJS 6.5.1 - " + t + " - http://www.pixijs.com/",
                      );
                  Ct = !0;
                }
              })(2 === r.context.webGLVersion ? "WebGL 2" : "WebGL 1"),
              r.resize(r.options.width, r.options.height),
              r
            );
          }
          return (
            cn(e, t),
            (e.create = function (t) {
              if (
                (void 0 === Ot &&
                  (Ot = (function () {
                    var t = {
                      stencil: !0,
                      failIfMajorPerformanceCaveat:
                        At.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT,
                    };
                    try {
                      if (!At.ADAPTER.getWebGLRenderingContext()) return !1;
                      var e = At.ADAPTER.createCanvas(),
                        n =
                          e.getContext("webgl", t) ||
                          e.getContext("experimental-webgl", t),
                        r = !(!n || !n.getContextAttributes().stencil);
                      if (n) {
                        var i = n.getExtension("WEBGL_lose_context");
                        i && i.loseContext();
                      }
                      return (n = null), r;
                    } catch (t) {
                      return !1;
                    }
                  })()),
                Ot)
              )
                return new e(t);
              throw new Error(
                'WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.',
              );
            }),
            (e.prototype.contextChange = function () {
              var t,
                e = this.gl;
              if (1 === this.context.webGLVersion) {
                var n = e.getParameter(e.FRAMEBUFFER_BINDING);
                e.bindFramebuffer(e.FRAMEBUFFER, null),
                  (t = e.getParameter(e.SAMPLES)),
                  e.bindFramebuffer(e.FRAMEBUFFER, n);
              } else
                (n = e.getParameter(e.DRAW_FRAMEBUFFER_BINDING)),
                  e.bindFramebuffer(e.DRAW_FRAMEBUFFER, null),
                  (t = e.getParameter(e.SAMPLES)),
                  e.bindFramebuffer(e.DRAW_FRAMEBUFFER, n);
              t >= at.HIGH
                ? (this.multisample = at.HIGH)
                : t >= at.MEDIUM
                  ? (this.multisample = at.MEDIUM)
                  : t >= at.LOW
                    ? (this.multisample = at.LOW)
                    : (this.multisample = at.NONE);
            }),
            (e.prototype.addSystem = function (t, e) {
              var n = new t(this);
              if (this[e])
                throw new Error(
                  'Whoops! The name "' + e + '" is already in use',
                );
              for (var r in ((this[e] = n), this.runners))
                this.runners[r].add(n);
              return this;
            }),
            (e.prototype.render = function (t, e) {
              var n, r, i, o;
              if (
                (e &&
                  (e instanceof Ln
                    ? (Zt(
                        "6.0.0",
                        "Renderer#render arguments changed, use options instead.",
                      ),
                      (n = e),
                      (r = arguments[2]),
                      (i = arguments[3]),
                      (o = arguments[4]))
                    : ((n = e.renderTexture),
                      (r = e.clear),
                      (i = e.transform),
                      (o = e.skipUpdateTransform))),
                (this.renderingToScreen = !n),
                this.runners.prerender.emit(),
                this.emit("prerender"),
                (this.projection.transform = i),
                !this.context.isLost)
              ) {
                if ((n || (this._lastObjectRendered = t), !o)) {
                  var a = t.enableTempParent();
                  t.updateTransform(), t.disableTempParent(a);
                }
                this.renderTexture.bind(n),
                  this.batch.currentRenderer.start(),
                  (void 0 !== r ? r : this.clearBeforeRender) &&
                    this.renderTexture.clear(),
                  t.render(this),
                  this.batch.currentRenderer.flush(),
                  n && n.baseTexture.update(),
                  this.runners.postrender.emit(),
                  (this.projection.transform = null),
                  this.emit("postrender");
              }
            }),
            (e.prototype.generateTexture = function (e, n, r, i) {
              void 0 === n && (n = {});
              var o = t.prototype.generateTexture.call(this, e, n, r, i);
              return this.framebuffer.blit(), o;
            }),
            (e.prototype.resize = function (e, n) {
              t.prototype.resize.call(this, e, n),
                this.runners.resize.emit(this.screen.height, this.screen.width);
            }),
            (e.prototype.reset = function () {
              return this.runners.reset.emit(), this;
            }),
            (e.prototype.clear = function () {
              this.renderTexture.bind(), this.renderTexture.clear();
            }),
            (e.prototype.destroy = function (e) {
              for (var n in (this.runners.destroy.emit(), this.runners))
                this.runners[n].destroy();
              t.prototype.destroy.call(this, e), (this.gl = null);
            }),
            Object.defineProperty(e.prototype, "extract", {
              get: function () {
                return (
                  Zt(
                    "6.0.0",
                    "Renderer#extract has been deprecated, please use Renderer#plugins.extract instead.",
                  ),
                  this.plugins.extract
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.registerPlugin = function (t, e) {
              Zt(
                "6.5.0",
                "Renderer.registerPlugin() has been deprecated, please use extensions.add() instead.",
              ),
                nn.add({ name: t, type: $e.RendererPlugin, ref: e });
            }),
            (e.__plugins = {}),
            e
          );
        })(oi);
      nn.handleByMap($e.RendererPlugin, li.__plugins);
      var ui =
          "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",
        hi = function () {
          (this.texArray = null),
            (this.blend = 0),
            (this.type = j.TRIANGLES),
            (this.start = 0),
            (this.size = 0),
            (this.data = null);
        },
        ci = (function () {
          function t() {
            (this.elements = []), (this.ids = []), (this.count = 0);
          }
          return (
            (t.prototype.clear = function () {
              for (var t = 0; t < this.count; t++) this.elements[t] = null;
              this.count = 0;
            }),
            t
          );
        })(),
        di = (function () {
          function t(t) {
            "number" == typeof t
              ? (this.rawBinaryData = new ArrayBuffer(t))
              : t instanceof Uint8Array
                ? (this.rawBinaryData = t.buffer)
                : (this.rawBinaryData = t),
              (this.uint32View = new Uint32Array(this.rawBinaryData)),
              (this.float32View = new Float32Array(this.rawBinaryData));
          }
          return (
            Object.defineProperty(t.prototype, "int8View", {
              get: function () {
                return (
                  this._int8View ||
                    (this._int8View = new Int8Array(this.rawBinaryData)),
                  this._int8View
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "uint8View", {
              get: function () {
                return (
                  this._uint8View ||
                    (this._uint8View = new Uint8Array(this.rawBinaryData)),
                  this._uint8View
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "int16View", {
              get: function () {
                return (
                  this._int16View ||
                    (this._int16View = new Int16Array(this.rawBinaryData)),
                  this._int16View
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "uint16View", {
              get: function () {
                return (
                  this._uint16View ||
                    (this._uint16View = new Uint16Array(this.rawBinaryData)),
                  this._uint16View
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "int32View", {
              get: function () {
                return (
                  this._int32View ||
                    (this._int32View = new Int32Array(this.rawBinaryData)),
                  this._int32View
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.view = function (t) {
              return this[t + "View"];
            }),
            (t.prototype.destroy = function () {
              (this.rawBinaryData = null),
                (this._int8View = null),
                (this._uint8View = null),
                (this._int16View = null),
                (this._uint16View = null),
                (this._int32View = null),
                (this.uint32View = null),
                (this.float32View = null);
            }),
            (t.sizeOf = function (t) {
              switch (t) {
                case "int8":
                case "uint8":
                  return 1;
                case "int16":
                case "uint16":
                  return 2;
                case "int32":
                case "uint32":
                case "float32":
                  return 4;
                default:
                  throw new Error(t + " isn't a valid view type");
              }
            }),
            t
          );
        })(),
        fi = (function (t) {
          function e(e) {
            var n = t.call(this, e) || this;
            return (
              (n.shaderGenerator = null),
              (n.geometryClass = null),
              (n.vertexSize = null),
              (n.state = Or.for2d()),
              (n.size = 4 * At.SPRITE_BATCH_SIZE),
              (n._vertexCount = 0),
              (n._indexCount = 0),
              (n._bufferedElements = []),
              (n._bufferedTextures = []),
              (n._bufferSize = 0),
              (n._shader = null),
              (n._packedGeometries = []),
              (n._packedGeometryPoolSize = 2),
              (n._flushId = 0),
              (n._aBuffers = {}),
              (n._iBuffers = {}),
              (n.MAX_TEXTURES = 1),
              n.renderer.on("prerender", n.onPrerender, n),
              e.runners.contextChange.add(n),
              (n._dcIndex = 0),
              (n._aIndex = 0),
              (n._iIndex = 0),
              (n._attributeBuffer = null),
              (n._indexBuffer = null),
              (n._tempBoundTextures = []),
              n
            );
          }
          return (
            cn(e, t),
            (e.prototype.contextChange = function () {
              var t = this.renderer.gl;
              At.PREFER_ENV === z.WEBGL_LEGACY
                ? (this.MAX_TEXTURES = 1)
                : ((this.MAX_TEXTURES = Math.min(
                    t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),
                    At.SPRITE_MAX_TEXTURES,
                  )),
                  (this.MAX_TEXTURES = (function (t, e) {
                    if (0 === t)
                      throw new Error(
                        "Invalid value of `0` passed to `checkMaxIfStatementsInShader`",
                      );
                    for (var n = e.createShader(e.FRAGMENT_SHADER); ; ) {
                      var r = Mr.replace(/%forloop%/gi, Ar(t));
                      if (
                        (e.shaderSource(n, r),
                        e.compileShader(n),
                        e.getShaderParameter(n, e.COMPILE_STATUS))
                      )
                        break;
                      t = (t / 2) | 0;
                    }
                    return t;
                  })(this.MAX_TEXTURES, t))),
                (this._shader = this.shaderGenerator.generateShader(
                  this.MAX_TEXTURES,
                ));
              for (var e = 0; e < this._packedGeometryPoolSize; e++)
                this._packedGeometries[e] = new this.geometryClass();
              this.initFlushBuffers();
            }),
            (e.prototype.initFlushBuffers = function () {
              for (
                var t = e._drawCallPool,
                  n = e._textureArrayPool,
                  r = this.size / 4,
                  i = Math.floor(r / this.MAX_TEXTURES) + 1;
                t.length < r;

              )
                t.push(new hi());
              for (; n.length < i; ) n.push(new ci());
              for (var o = 0; o < this.MAX_TEXTURES; o++)
                this._tempBoundTextures[o] = null;
            }),
            (e.prototype.onPrerender = function () {
              this._flushId = 0;
            }),
            (e.prototype.render = function (t) {
              t._texture.valid &&
                (this._vertexCount + t.vertexData.length / 2 > this.size &&
                  this.flush(),
                (this._vertexCount += t.vertexData.length / 2),
                (this._indexCount += t.indices.length),
                (this._bufferedTextures[this._bufferSize] =
                  t._texture.baseTexture),
                (this._bufferedElements[this._bufferSize++] = t));
            }),
            (e.prototype.buildTexturesAndDrawCalls = function () {
              var t = this._bufferedTextures,
                n = this.MAX_TEXTURES,
                r = e._textureArrayPool,
                i = this.renderer.batch,
                o = this._tempBoundTextures,
                a = this.renderer.textureGC.count,
                s = ++_n._globalBatch,
                l = 0,
                u = r[0],
                h = 0;
              i.copyBoundTextures(o, n);
              for (var c = 0; c < this._bufferSize; ++c) {
                var d = t[c];
                (t[c] = null),
                  d._batchEnabled !== s &&
                    (u.count >= n &&
                      (i.boundArray(u, o, s, n),
                      this.buildDrawCalls(u, h, c),
                      (h = c),
                      (u = r[++l]),
                      ++s),
                    (d._batchEnabled = s),
                    (d.touched = a),
                    (u.elements[u.count++] = d));
              }
              for (
                u.count > 0 &&
                  (i.boundArray(u, o, s, n),
                  this.buildDrawCalls(u, h, this._bufferSize),
                  ++l,
                  ++s),
                  c = 0;
                c < o.length;
                c++
              )
                o[c] = null;
              _n._globalBatch = s;
            }),
            (e.prototype.buildDrawCalls = function (t, n, r) {
              var i = this,
                o = i._bufferedElements,
                a = i._attributeBuffer,
                s = i._indexBuffer,
                l = i.vertexSize,
                u = e._drawCallPool,
                h = this._dcIndex,
                c = this._aIndex,
                d = this._iIndex,
                f = u[h];
              (f.start = this._iIndex), (f.texArray = t);
              for (var p = n; p < r; ++p) {
                var m = o[p],
                  _ = m._texture.baseTexture,
                  g = Ft[_.alphaMode ? 1 : 0][m.blendMode];
                (o[p] = null),
                  n < p &&
                    f.blend !== g &&
                    ((f.size = d - f.start),
                    (n = p),
                    ((f = u[++h]).texArray = t),
                    (f.start = d)),
                  this.packInterleavedGeometry(m, a, s, c, d),
                  (c += (m.vertexData.length / 2) * l),
                  (d += m.indices.length),
                  (f.blend = g);
              }
              n < r && ((f.size = d - f.start), ++h),
                (this._dcIndex = h),
                (this._aIndex = c),
                (this._iIndex = d);
            }),
            (e.prototype.bindAndClearTexArray = function (t) {
              for (var e = this.renderer.texture, n = 0; n < t.count; n++)
                e.bind(t.elements[n], t.ids[n]), (t.elements[n] = null);
              t.count = 0;
            }),
            (e.prototype.updateGeometry = function () {
              var t = this,
                e = t._packedGeometries,
                n = t._attributeBuffer,
                r = t._indexBuffer;
              At.CAN_UPLOAD_SAME_BUFFER
                ? (e[this._flushId]._buffer.update(n.rawBinaryData),
                  e[this._flushId]._indexBuffer.update(r),
                  this.renderer.geometry.updateBuffers())
                : (this._packedGeometryPoolSize <= this._flushId &&
                    (this._packedGeometryPoolSize++,
                    (e[this._flushId] = new this.geometryClass())),
                  e[this._flushId]._buffer.update(n.rawBinaryData),
                  e[this._flushId]._indexBuffer.update(r),
                  this.renderer.geometry.bind(e[this._flushId]),
                  this.renderer.geometry.updateBuffers(),
                  this._flushId++);
            }),
            (e.prototype.drawBatches = function () {
              for (
                var t = this._dcIndex,
                  n = this.renderer,
                  r = n.gl,
                  i = n.state,
                  o = e._drawCallPool,
                  a = null,
                  s = 0;
                s < t;
                s++
              ) {
                var l = o[s],
                  u = l.texArray,
                  h = l.type,
                  c = l.size,
                  d = l.start,
                  f = l.blend;
                a !== u && ((a = u), this.bindAndClearTexArray(u)),
                  (this.state.blendMode = f),
                  i.set(this.state),
                  r.drawElements(h, c, r.UNSIGNED_SHORT, 2 * d);
              }
            }),
            (e.prototype.flush = function () {
              0 !== this._vertexCount &&
                ((this._attributeBuffer = this.getAttributeBuffer(
                  this._vertexCount,
                )),
                (this._indexBuffer = this.getIndexBuffer(this._indexCount)),
                (this._aIndex = 0),
                (this._iIndex = 0),
                (this._dcIndex = 0),
                this.buildTexturesAndDrawCalls(),
                this.updateGeometry(),
                this.drawBatches(),
                (this._bufferSize = 0),
                (this._vertexCount = 0),
                (this._indexCount = 0));
            }),
            (e.prototype.start = function () {
              this.renderer.state.set(this.state),
                this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),
                this.renderer.shader.bind(this._shader),
                At.CAN_UPLOAD_SAME_BUFFER &&
                  this.renderer.geometry.bind(
                    this._packedGeometries[this._flushId],
                  );
            }),
            (e.prototype.Parar = function () {
              this.flush();
            }),
            (e.prototype.destroy = function () {
              for (var e = 0; e < this._packedGeometryPoolSize; e++)
                this._packedGeometries[e] &&
                  this._packedGeometries[e].destroy();
              this.renderer.off("prerender", this.onPrerender, this),
                (this._aBuffers = null),
                (this._iBuffers = null),
                (this._packedGeometries = null),
                (this._attributeBuffer = null),
                (this._indexBuffer = null),
                this._shader && (this._shader.destroy(), (this._shader = null)),
                t.prototype.destroy.call(this);
            }),
            (e.prototype.getAttributeBuffer = function (t) {
              var e = zt(Math.ceil(t / 8)),
                n = Xt(e),
                r = 8 * e;
              this._aBuffers.length <= n && (this._iBuffers.length = n + 1);
              var i = this._aBuffers[r];
              return (
                i || (this._aBuffers[r] = i = new di(r * this.vertexSize * 4)),
                i
              );
            }),
            (e.prototype.getIndexBuffer = function (t) {
              var e = zt(Math.ceil(t / 12)),
                n = Xt(e),
                r = 12 * e;
              this._iBuffers.length <= n && (this._iBuffers.length = n + 1);
              var i = this._iBuffers[n];
              return i || (this._iBuffers[n] = i = new Uint16Array(r)), i;
            }),
            (e.prototype.packInterleavedGeometry = function (t, e, n, r, i) {
              for (
                var o = e.uint32View,
                  a = e.float32View,
                  s = r / this.vertexSize,
                  l = t.uvs,
                  u = t.indices,
                  h = t.vertexData,
                  c = t._texture.baseTexture._batchLocation,
                  d = Math.min(t.worldAlpha, 1),
                  f =
                    d < 1 && t._texture.baseTexture.alphaMode
                      ? Gt(t._tintRGB, d)
                      : t._tintRGB + ((255 * d) << 24),
                  p = 0;
                p < h.length;
                p += 2
              )
                (a[r++] = h[p]),
                  (a[r++] = h[p + 1]),
                  (a[r++] = l[p]),
                  (a[r++] = l[p + 1]),
                  (o[r++] = f),
                  (a[r++] = c);
              for (p = 0; p < u.length; p++) n[i++] = s + u[p];
            }),
            (e._drawCallPool = []),
            (e._textureArrayPool = []),
            e
          );
        })($n),
        pi = (function () {
          function t(t, e) {
            if (
              ((this.vertexSrc = t),
              (this.fragTemplate = e),
              (this.programCache = {}),
              (this.defaultGroupCache = {}),
              e.indexOf("%count%") < 0)
            )
              throw new Error('Fragment template must contain "%count%".');
            if (e.indexOf("%forloop%") < 0)
              throw new Error('Fragment template must contain "%forloop%".');
          }
          return (
            (t.prototype.generateShader = function (t) {
              if (!this.programCache[t]) {
                for (var e = new Int32Array(t), n = 0; n < t; n++) e[n] = n;
                this.defaultGroupCache[t] = Yn.from({ uSamplers: e }, !0);
                var r = this.fragTemplate;
                (r = (r = r.replace(/%count%/gi, "" + t)).replace(
                  /%forloop%/gi,
                  this.generateSampleSrc(t),
                )),
                  (this.programCache[t] = new Pr(this.vertexSrc, r));
              }
              var i = {
                tint: new Float32Array([1, 1, 1, 1]),
                translationMatrix: new me(),
                default: this.defaultGroupCache[t],
              };
              return new Ir(this.programCache[t], i);
            }),
            (t.prototype.generateSampleSrc = function (t) {
              var e = "";
              (e += "\n"), (e += "\n");
              for (var n = 0; n < t; n++)
                n > 0 && (e += "\nelse "),
                  n < t - 1 && (e += "if(vTextureId < " + n + ".5)"),
                  (e += "\n{"),
                  (e +=
                    "\n\tcolor = texture2D(uSamplers[" +
                    n +
                    "], vTextureCoord);"),
                  (e += "\n}");
              return (e += "\n") + "\n";
            }),
            t
          );
        })(),
        mi = (function (t) {
          function e(e) {
            void 0 === e && (e = !1);
            var n = t.call(this) || this;
            return (
              (n._buffer = new Bn(null, e, !1)),
              (n._indexBuffer = new Bn(null, e, !0)),
              n
                .addAttribute("aVertexPosition", n._buffer, 2, !1, K.FLOAT)
                .addAttribute("aTextureCoord", n._buffer, 2, !1, K.FLOAT)
                .addAttribute("aColor", n._buffer, 4, !0, K.UNSIGNED_BYTE)
                .addAttribute("aTextureId", n._buffer, 1, !0, K.FLOAT)
                .addIndex(n._indexBuffer),
              n
            );
          }
          return cn(e, t), e;
        })(Vn),
        _i =
          "precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",
        gi =
          "varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",
        vi = (function () {
          function t() {}
          return (
            (t.create = function (t) {
              var e = Object.assign(
                  {
                    vertex: _i,
                    fragment: gi,
                    geometryClass: mi,
                    vertexSize: 6,
                  },
                  t,
                ),
                n = e.vertex,
                r = e.fragment,
                i = e.vertexSize,
                o = e.geometryClass;
              return (function (t) {
                function e(e) {
                  var a = t.call(this, e) || this;
                  return (
                    (a.shaderGenerator = new pi(n, r)),
                    (a.geometryClass = o),
                    (a.vertexSize = i),
                    a
                  );
                }
                return cn(e, t), e;
              })(fi);
            }),
            Object.defineProperty(t, "defaultVertexSrc", {
              get: function () {
                return _i;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "defaultFragmentTemplate", {
              get: function () {
                return gi;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        yi = vi.create();
      Object.assign(yi, {
        extension: { name: "batch", type: $e.RendererPlugin },
      });
      var Ei = {},
        Ti = function (t) {
          Object.defineProperty(Ei, t, {
            get: function () {
              return (
                Zt("6.0.0", "PIXI.systems." + t + " has moved to PIXI." + t),
                An[t]
              );
            },
          });
        };
      for (var bi in An) Ti(bi);
      var xi = {},
        Si = function (t) {
          Object.defineProperty(xi, t, {
            get: function () {
              return (
                Zt("6.0.0", "PIXI.resources." + t + " has moved to PIXI." + t),
                ri[t]
              );
            },
          });
        };
      for (var bi in ri) Si(bi);
      qe.mixin({
        accessible: !1,
        accessibleTitle: null,
        accessibleHint: null,
        tabIndex: 0,
        _accessibleActive: !1,
        _accessibleDiv: null,
        accessibleType: "button",
        accessiblePointerEvents: "auto",
        accessibleChildren: !0,
        renderId: -1,
      });
      var Mi = 100,
        Ai = (function () {
          function t(t) {
            (this.debug = !1),
              (this._isActive = !1),
              (this._isMobileAccessibility = !1),
              (this.pool = []),
              (this.renderId = 0),
              (this.children = []),
              (this.androidUpdateCount = 0),
              (this.androidUpdateFrequency = 500),
              (this._hookDiv = null),
              (Mt.tablet || Mt.phone) && this.createTouchHook();
            var e = document.createElement("div");
            (e.style.width = Mi + "px"),
              (e.style.height = Mi + "px"),
              (e.style.position = "absolute"),
              (e.style.top = "0px"),
              (e.style.left = "0px"),
              (e.style.zIndex = (2).toString()),
              (this.div = e),
              (this.renderer = t),
              (this._onKeyDown = this._onKeyDown.bind(this)),
              (this._onMouseMove = this._onMouseMove.bind(this)),
              globalThis.addEventListener("keydown", this._onKeyDown, !1);
          }
          return (
            Object.defineProperty(t.prototype, "isActive", {
              get: function () {
                return this._isActive;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "isMobileAccessibility", {
              get: function () {
                return this._isMobileAccessibility;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.createTouchHook = function () {
              var t = this,
                e = document.createElement("button");
              (e.style.width = "1px"),
                (e.style.height = "1px"),
                (e.style.position = "absolute"),
                (e.style.top = "-1000px"),
                (e.style.left = "-1000px"),
                (e.style.zIndex = (2).toString()),
                (e.style.backgroundColor = "#FF0000"),
                (e.title = "select to enable accessibility for this content"),
                e.addEventListener("focus", function () {
                  (t._isMobileAccessibility = !0),
                    t.activate(),
                    t.destroyTouchHook();
                }),
                document.body.appendChild(e),
                (this._hookDiv = e);
            }),
            (t.prototype.destroyTouchHook = function () {
              this._hookDiv &&
                (document.body.removeChild(this._hookDiv),
                (this._hookDiv = null));
            }),
            (t.prototype.activate = function () {
              var t;
              this._isActive ||
                ((this._isActive = !0),
                globalThis.document.addEventListener(
                  "mousemove",
                  this._onMouseMove,
                  !0,
                ),
                globalThis.removeEventListener("keydown", this._onKeyDown, !1),
                this.renderer.on("postrender", this.update, this),
                null === (t = this.renderer.view.parentNode) ||
                  void 0 === t ||
                  t.appendChild(this.div));
            }),
            (t.prototype.deactivate = function () {
              var t;
              this._isActive &&
                !this._isMobileAccessibility &&
                ((this._isActive = !1),
                globalThis.document.removeEventListener(
                  "mousemove",
                  this._onMouseMove,
                  !0,
                ),
                globalThis.addEventListener("keydown", this._onKeyDown, !1),
                this.renderer.off("postrender", this.update),
                null === (t = this.div.parentNode) ||
                  void 0 === t ||
                  t.removeChild(this.div));
            }),
            (t.prototype.updateAccessibleObjects = function (t) {
              if (t.visible && t.accessibleChildren) {
                t.accessible &&
                  t.interactive &&
                  (t._accessibleActive || this.addChild(t),
                  (t.renderId = this.renderId));
                var e = t.children;
                if (e)
                  for (var n = 0; n < e.length; n++)
                    this.updateAccessibleObjects(e[n]);
              }
            }),
            (t.prototype.update = function () {
              var t = performance.now();
              if (
                !(Mt.android.device && t < this.androidUpdateCount) &&
                ((this.androidUpdateCount = t + this.androidUpdateFrequency),
                this.renderer.renderingToScreen)
              ) {
                this.renderer._lastObjectRendered &&
                  this.updateAccessibleObjects(
                    this.renderer._lastObjectRendered,
                  );
                var e = this.renderer.view.getBoundingClientRect(),
                  n = e.left,
                  r = e.top,
                  i = e.width,
                  o = e.height,
                  a = this.renderer,
                  s = a.width,
                  l = a.height,
                  u = a.resolution,
                  h = (i / s) * u,
                  c = (o / l) * u,
                  d = this.div;
                (d.style.left = n + "px"),
                  (d.style.top = r + "px"),
                  (d.style.width = s + "px"),
                  (d.style.height = l + "px");
                for (var f = 0; f < this.children.length; f++) {
                  var p = this.children[f];
                  if (p.renderId !== this.renderId)
                    (p._accessibleActive = !1),
                      Wt(this.children, f, 1),
                      this.div.removeChild(p._accessibleDiv),
                      this.pool.push(p._accessibleDiv),
                      (p._accessibleDiv = null),
                      f--;
                  else {
                    d = p._accessibleDiv;
                    var m = p.hitArea,
                      _ = p.worldTransform;
                    p.hitArea
                      ? ((d.style.left = (_.tx + m.x * _.a) * h + "px"),
                        (d.style.top = (_.ty + m.y * _.d) * c + "px"),
                        (d.style.width = m.width * _.a * h + "px"),
                        (d.style.height = m.height * _.d * c + "px"))
                      : ((m = p.getBounds()),
                        this.capHitArea(m),
                        (d.style.left = m.x * h + "px"),
                        (d.style.top = m.y * c + "px"),
                        (d.style.width = m.width * h + "px"),
                        (d.style.height = m.height * c + "px"),
                        d.title !== p.accessibleTitle &&
                          null !== p.accessibleTitle &&
                          (d.title = p.accessibleTitle),
                        d.getAttribute("aria-label") !== p.accessibleHint &&
                          null !== p.accessibleHint &&
                          d.setAttribute("aria-label", p.accessibleHint)),
                      (p.accessibleTitle === d.title &&
                        p.tabIndex === d.tabIndex) ||
                        ((d.title = p.accessibleTitle),
                        (d.tabIndex = p.tabIndex),
                        this.debug && this.updateDebugHTML(d));
                  }
                }
                this.renderId++;
              }
            }),
            (t.prototype.updateDebugHTML = function (t) {
              t.innerHTML =
                "type: " +
                t.type +
                "</br> title : " +
                t.title +
                "</br> tabIndex: " +
                t.tabIndex;
            }),
            (t.prototype.capHitArea = function (t) {
              t.x < 0 && ((t.width += t.x), (t.x = 0)),
                t.y < 0 && ((t.height += t.y), (t.y = 0));
              var e = this.renderer,
                n = e.width,
                r = e.height;
              t.x + t.width > n && (t.width = n - t.x),
                t.y + t.height > r && (t.height = r - t.y);
            }),
            (t.prototype.addChild = function (t) {
              var e = this.pool.pop();
              e ||
                (((e = document.createElement("button")).style.width =
                  Mi + "px"),
                (e.style.height = Mi + "px"),
                (e.style.backgroundColor = this.debug
                  ? "rgba(255,255,255,0.5)"
                  : "transparent"),
                (e.style.position = "absolute"),
                (e.style.zIndex = (2).toString()),
                (e.style.borderStyle = "none"),
                navigator.userAgent.toLowerCase().indexOf("chrome") > -1
                  ? e.setAttribute("aria-live", "off")
                  : e.setAttribute("aria-live", "polite"),
                navigator.userAgent.match(/rv:.*Gecko\//)
                  ? e.setAttribute("aria-relevant", "additions")
                  : e.setAttribute("aria-relevant", "text"),
                e.addEventListener("click", this._onClick.bind(this)),
                e.addEventListener("focus", this._onFocus.bind(this)),
                e.addEventListener("focusout", this._onFocusOut.bind(this))),
                (e.style.pointerEvents = t.accessiblePointerEvents),
                (e.type = t.accessibleType),
                t.accessibleTitle && null !== t.accessibleTitle
                  ? (e.title = t.accessibleTitle)
                  : (t.accessibleHint && null !== t.accessibleHint) ||
                    (e.title = "displayObject " + t.tabIndex),
                t.accessibleHint &&
                  null !== t.accessibleHint &&
                  e.setAttribute("aria-label", t.accessibleHint),
                this.debug && this.updateDebugHTML(e),
                (t._accessibleActive = !0),
                (t._accessibleDiv = e),
                (e.displayObject = t),
                this.children.push(t),
                this.div.appendChild(t._accessibleDiv),
                (t._accessibleDiv.tabIndex = t.tabIndex);
            }),
            (t.prototype._onClick = function (t) {
              var e = this.renderer.plugins.interaction,
                n = t.target.displayObject,
                r = e.eventData;
              e.dispatchEvent(n, "click", r),
                e.dispatchEvent(n, "pointertap", r),
                e.dispatchEvent(n, "tap", r);
            }),
            (t.prototype._onFocus = function (t) {
              t.target.getAttribute("aria-live") ||
                t.target.setAttribute("aria-live", "assertive");
              var e = this.renderer.plugins.interaction,
                n = t.target.displayObject,
                r = e.eventData;
              e.dispatchEvent(n, "mouseover", r);
            }),
            (t.prototype._onFocusOut = function (t) {
              t.target.getAttribute("aria-live") ||
                t.target.setAttribute("aria-live", "polite");
              var e = this.renderer.plugins.interaction,
                n = t.target.displayObject,
                r = e.eventData;
              e.dispatchEvent(n, "mouseout", r);
            }),
            (t.prototype._onKeyDown = function (t) {
              9 === t.keyCode && this.activate();
            }),
            (t.prototype._onMouseMove = function (t) {
              (0 === t.movementX && 0 === t.movementY) || this.deactivate();
            }),
            (t.prototype.destroy = function () {
              this.destroyTouchHook(),
                (this.div = null),
                globalThis.document.removeEventListener(
                  "mousemove",
                  this._onMouseMove,
                  !0,
                ),
                globalThis.removeEventListener("keydown", this._onKeyDown),
                (this.pool = null),
                (this.children = null),
                (this.renderer = null);
            }),
            (t.extension = {
              name: "accessibility",
              type: [$e.RendererPlugin, $e.CanvasRendererPlugin],
            }),
            t
          );
        })(),
        Ri = (function () {
          function t() {
            (this.pressure = 0),
              (this.rotationAngle = 0),
              (this.twist = 0),
              (this.tangentialPressure = 0),
              (this.global = new se()),
              (this.target = null),
              (this.originalEvent = null),
              (this.identifier = null),
              (this.isPrimary = !1),
              (this.button = 0),
              (this.buttons = 0),
              (this.width = 0),
              (this.height = 0),
              (this.tiltX = 0),
              (this.tiltY = 0),
              (this.pointerType = null),
              (this.pressure = 0),
              (this.rotationAngle = 0),
              (this.twist = 0),
              (this.tangentialPressure = 0);
          }
          return (
            Object.defineProperty(t.prototype, "pointerId", {
              get: function () {
                return this.identifier;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.getLocalPosition = function (t, e, n) {
              return t.worldTransform.applyInverse(n || this.global, e);
            }),
            (t.prototype.copyEvent = function (t) {
              "isPrimary" in t && t.isPrimary && (this.isPrimary = !0),
                (this.button = "button" in t && t.button);
              var e = "buttons" in t && t.buttons;
              (this.buttons = Number.isInteger(e)
                ? e
                : "which" in t && t.which),
                (this.width = "width" in t && t.width),
                (this.height = "height" in t && t.height),
                (this.tiltX = "tiltX" in t && t.tiltX),
                (this.tiltY = "tiltY" in t && t.tiltY),
                (this.pointerType = "pointerType" in t && t.pointerType),
                (this.pressure = "pressure" in t && t.pressure),
                (this.rotationAngle = "rotationAngle" in t && t.rotationAngle),
                (this.twist = ("twist" in t && t.twist) || 0),
                (this.tangentialPressure =
                  ("tangentialPressure" in t && t.tangentialPressure) || 0);
            }),
            (t.prototype.reset = function () {
              this.isPrimary = !1;
            }),
            t
          );
        })(),
        wi = function (t, e) {
          return (
            (wi =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            wi(t, e)
          );
        },
        Pi = (function () {
          function t() {
            (this.stopped = !1),
              (this.stopsPropagatingAt = null),
              (this.stopPropagationHint = !1),
              (this.target = null),
              (this.currentTarget = null),
              (this.type = null),
              (this.data = null);
          }
          return (
            (t.prototype.stopPropagation = function () {
              (this.stopped = !0),
                (this.stopPropagationHint = !0),
                (this.stopsPropagatingAt = this.currentTarget);
            }),
            (t.prototype.reset = function () {
              (this.stopped = !1),
                (this.stopsPropagatingAt = null),
                (this.stopPropagationHint = !1),
                (this.currentTarget = null),
                (this.target = null);
            }),
            t
          );
        })(),
        Ii = (function () {
          function t(e) {
            (this._pointerId = e), (this._flags = t.FLAGS.NONE);
          }
          return (
            (t.prototype._doSet = function (t, e) {
              this._flags = e ? this._flags | t : this._flags & ~t;
            }),
            Object.defineProperty(t.prototype, "pointerId", {
              get: function () {
                return this._pointerId;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "flags", {
              get: function () {
                return this._flags;
              },
              set: function (t) {
                this._flags = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "none", {
              get: function () {
                return this._flags === t.FLAGS.NONE;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "over", {
              get: function () {
                return 0 != (this._flags & t.FLAGS.OVER);
              },
              set: function (e) {
                this._doSet(t.FLAGS.OVER, e);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "rightDown", {
              get: function () {
                return 0 != (this._flags & t.FLAGS.RIGHT_DOWN);
              },
              set: function (e) {
                this._doSet(t.FLAGS.RIGHT_DOWN, e);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "leftDown", {
              get: function () {
                return 0 != (this._flags & t.FLAGS.LEFT_DOWN);
              },
              set: function (e) {
                this._doSet(t.FLAGS.LEFT_DOWN, e);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.FLAGS = Object.freeze({
              NONE: 0,
              OVER: 1,
              LEFT_DOWN: 2,
              RIGHT_DOWN: 4,
            })),
            t
          );
        })(),
        Oi = (function () {
          function t() {
            this._tempPoint = new se();
          }
          return (
            (t.prototype.recursiveFindHit = function (t, e, n, r, i) {
              var o;
              if (!e || !e.visible) return !1;
              var a = t.data.global,
                s = !1,
                l = (i = e.interactive || i),
                u = !0;
              if (e.hitArea)
                r &&
                  (e.worldTransform.applyInverse(a, this._tempPoint),
                  e.hitArea.contains(this._tempPoint.x, this._tempPoint.y)
                    ? (s = !0)
                    : ((r = !1), (u = !1))),
                  (l = !1);
              else if (e._mask && r) {
                var h = e._mask.isMaskData ? e._mask.maskObject : e._mask;
                h &&
                  !(null === (o = h.containsPoint) || void 0 === o
                    ? void 0
                    : o.call(h, a)) &&
                  (r = !1);
              }
              if (u && e.interactiveChildren && e.children)
                for (var c = e.children, d = c.length - 1; d >= 0; d--) {
                  var f = c[d],
                    p = this.recursiveFindHit(t, f, n, r, l);
                  if (p) {
                    if (!f.parent) continue;
                    (l = !1), p && (t.target && (r = !1), (s = !0));
                  }
                }
              return (
                i &&
                  (r &&
                    !t.target &&
                    !e.hitArea &&
                    e.containsPoint &&
                    e.containsPoint(a) &&
                    (s = !0),
                  e.interactive &&
                    (s && !t.target && (t.target = e), n && n(t, e, !!s))),
                s
              );
            }),
            (t.prototype.findHit = function (t, e, n, r) {
              this.recursiveFindHit(t, e, n, r, !1);
            }),
            t
          );
        })(),
        Ci = {
          interactive: !1,
          interactiveChildren: !0,
          hitArea: null,
          get buttonMode() {
            return "pointer" === this.cursor;
          },
          set buttonMode(t) {
            t
              ? (this.cursor = "pointer")
              : "pointer" === this.cursor && (this.cursor = null);
          },
          cursor: null,
          get trackedPointers() {
            return (
              void 0 === this._trackedPointers && (this._trackedPointers = {}),
              this._trackedPointers
            );
          },
          _trackedPointers: void 0,
        };
      qe.mixin(Ci);
      var Ni = { target: null, data: { global: null } },
        Li = (function (t) {
          function e(e, n) {
            var r = t.call(this) || this;
            return (
              (n = n || {}),
              (r.renderer = e),
              (r.autoPreventDefault =
                void 0 === n.autoPreventDefault || n.autoPreventDefault),
              (r.interactionFrequency = n.interactionFrequency || 10),
              (r.mouse = new Ri()),
              (r.mouse.identifier = 1),
              r.mouse.global.set(-999999),
              (r.activeInteractionData = {}),
              (r.activeInteractionData[1] = r.mouse),
              (r.interactionDataPool = []),
              (r.eventData = new Pi()),
              (r.interactionDOMElement = null),
              (r.moveWhenInside = !1),
              (r.eventsAdded = !1),
              (r.tickerAdded = !1),
              (r.mouseOverRenderer = !("PointerEvent" in globalThis)),
              (r.supportsTouchEvents = "ontouchstart" in globalThis),
              (r.supportsPointerEvents = !!globalThis.PointerEvent),
              (r.onPointerUp = r.onPointerUp.bind(r)),
              (r.processPointerUp = r.processPointerUp.bind(r)),
              (r.onPointerCancel = r.onPointerCancel.bind(r)),
              (r.processPointerCancel = r.processPointerCancel.bind(r)),
              (r.onPointerDown = r.onPointerDown.bind(r)),
              (r.processPointerDown = r.processPointerDown.bind(r)),
              (r.onPointerMove = r.onPointerMove.bind(r)),
              (r.processPointerMove = r.processPointerMove.bind(r)),
              (r.onPointerOut = r.onPointerOut.bind(r)),
              (r.processPointerOverOut = r.processPointerOverOut.bind(r)),
              (r.onPointerOver = r.onPointerOver.bind(r)),
              (r.cursorStyles = { default: "inherit", pointer: "pointer" }),
              (r.currentCursorMode = null),
              (r.cursor = null),
              (r.resolution = 1),
              (r.delayedEvents = []),
              (r.search = new Oi()),
              (r._tempDisplayObject = new Ke()),
              (r._eventListenerOptions = { capture: !0, passive: !1 }),
              (r._useSystemTicker =
                void 0 === n.useSystemTicker || n.useSystemTicker),
              r.setTargetElement(r.renderer.view, r.renderer.resolution),
              r
            );
          }
          return (
            (function (t, e) {
              function n() {
                this.constructor = t;
              }
              wi(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((n.prototype = e.prototype), new n()));
            })(e, t),
            Object.defineProperty(e.prototype, "useSystemTicker", {
              get: function () {
                return this._useSystemTicker;
              },
              set: function (t) {
                (this._useSystemTicker = t),
                  t ? this.addTickerListener() : this.removeTickerListener();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "lastObjectRendered", {
              get: function () {
                return (
                  this.renderer._lastObjectRendered || this._tempDisplayObject
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.hitTest = function (t, e) {
              return (
                (Ni.target = null),
                (Ni.data.global = t),
                e || (e = this.lastObjectRendered),
                this.processInteractive(Ni, e, null, !0),
                Ni.target
              );
            }),
            (e.prototype.setTargetElement = function (t, e) {
              void 0 === e && (e = 1),
                this.removeTickerListener(),
                this.removeEvents(),
                (this.interactionDOMElement = t),
                (this.resolution = e),
                this.addEvents(),
                this.addTickerListener();
            }),
            (e.prototype.addTickerListener = function () {
              !this.tickerAdded &&
                this.interactionDOMElement &&
                this._useSystemTicker &&
                (an.system.add(this.tickerUpdate, this, tn.INTERACTION),
                (this.tickerAdded = !0));
            }),
            (e.prototype.removeTickerListener = function () {
              this.tickerAdded &&
                (an.system.remove(this.tickerUpdate, this),
                (this.tickerAdded = !1));
            }),
            (e.prototype.addEvents = function () {
              if (!this.eventsAdded && this.interactionDOMElement) {
                var t = this.interactionDOMElement.style;
                globalThis.navigator.msPointerEnabled
                  ? ((t.msContentZooming = "none"), (t.msTouchAction = "none"))
                  : this.supportsPointerEvents && (t.touchAction = "none"),
                  this.supportsPointerEvents
                    ? (globalThis.document.addEventListener(
                        "pointermove",
                        this.onPointerMove,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.addEventListener(
                        "pointerdown",
                        this.onPointerDown,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.addEventListener(
                        "pointerleave",
                        this.onPointerOut,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.addEventListener(
                        "pointerover",
                        this.onPointerOver,
                        this._eventListenerOptions,
                      ),
                      globalThis.addEventListener(
                        "pointercancel",
                        this.onPointerCancel,
                        this._eventListenerOptions,
                      ),
                      globalThis.addEventListener(
                        "pointerup",
                        this.onPointerUp,
                        this._eventListenerOptions,
                      ))
                    : (globalThis.document.addEventListener(
                        "mousemove",
                        this.onPointerMove,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.addEventListener(
                        "mousedown",
                        this.onPointerDown,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.addEventListener(
                        "mouseout",
                        this.onPointerOut,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.addEventListener(
                        "mouseover",
                        this.onPointerOver,
                        this._eventListenerOptions,
                      ),
                      globalThis.addEventListener(
                        "mouseup",
                        this.onPointerUp,
                        this._eventListenerOptions,
                      )),
                  this.supportsTouchEvents &&
                    (this.interactionDOMElement.addEventListener(
                      "touchstart",
                      this.onPointerDown,
                      this._eventListenerOptions,
                    ),
                    this.interactionDOMElement.addEventListener(
                      "touchcancel",
                      this.onPointerCancel,
                      this._eventListenerOptions,
                    ),
                    this.interactionDOMElement.addEventListener(
                      "touchend",
                      this.onPointerUp,
                      this._eventListenerOptions,
                    ),
                    this.interactionDOMElement.addEventListener(
                      "touchmove",
                      this.onPointerMove,
                      this._eventListenerOptions,
                    )),
                  (this.eventsAdded = !0);
              }
            }),
            (e.prototype.removeEvents = function () {
              if (this.eventsAdded && this.interactionDOMElement) {
                var t = this.interactionDOMElement.style;
                globalThis.navigator.msPointerEnabled
                  ? ((t.msContentZooming = ""), (t.msTouchAction = ""))
                  : this.supportsPointerEvents && (t.touchAction = ""),
                  this.supportsPointerEvents
                    ? (globalThis.document.removeEventListener(
                        "pointermove",
                        this.onPointerMove,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "pointerdown",
                        this.onPointerDown,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "pointerleave",
                        this.onPointerOut,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "pointerover",
                        this.onPointerOver,
                        this._eventListenerOptions,
                      ),
                      globalThis.removeEventListener(
                        "pointercancel",
                        this.onPointerCancel,
                        this._eventListenerOptions,
                      ),
                      globalThis.removeEventListener(
                        "pointerup",
                        this.onPointerUp,
                        this._eventListenerOptions,
                      ))
                    : (globalThis.document.removeEventListener(
                        "mousemove",
                        this.onPointerMove,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "mousedown",
                        this.onPointerDown,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "mouseout",
                        this.onPointerOut,
                        this._eventListenerOptions,
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "mouseover",
                        this.onPointerOver,
                        this._eventListenerOptions,
                      ),
                      globalThis.removeEventListener(
                        "mouseup",
                        this.onPointerUp,
                        this._eventListenerOptions,
                      )),
                  this.supportsTouchEvents &&
                    (this.interactionDOMElement.removeEventListener(
                      "touchstart",
                      this.onPointerDown,
                      this._eventListenerOptions,
                    ),
                    this.interactionDOMElement.removeEventListener(
                      "touchcancel",
                      this.onPointerCancel,
                      this._eventListenerOptions,
                    ),
                    this.interactionDOMElement.removeEventListener(
                      "touchend",
                      this.onPointerUp,
                      this._eventListenerOptions,
                    ),
                    this.interactionDOMElement.removeEventListener(
                      "touchmove",
                      this.onPointerMove,
                      this._eventListenerOptions,
                    )),
                  (this.interactionDOMElement = null),
                  (this.eventsAdded = !1);
              }
            }),
            (e.prototype.tickerUpdate = function (t) {
              (this._deltaTime += t),
                this._deltaTime < this.interactionFrequency ||
                  ((this._deltaTime = 0), this.update());
            }),
            (e.prototype.update = function () {
              if (this.interactionDOMElement)
                if (this._didMove) this._didMove = !1;
                else {
                  for (var t in ((this.cursor = null),
                  this.activeInteractionData))
                    if (this.activeInteractionData.hasOwnProperty(t)) {
                      var e = this.activeInteractionData[t];
                      if (e.originalEvent && "touch" !== e.pointerType) {
                        var n = this.configureInteractionEventForDOMEvent(
                          this.eventData,
                          e.originalEvent,
                          e,
                        );
                        this.processInteractive(
                          n,
                          this.lastObjectRendered,
                          this.processPointerOverOut,
                          !0,
                        );
                      }
                    }
                  this.setCursorMode(this.cursor);
                }
            }),
            (e.prototype.setCursorMode = function (t) {
              t = t || "default";
              var e = !0;
              if (
                (globalThis.OffscreenCanvas &&
                  this.interactionDOMElement instanceof OffscreenCanvas &&
                  (e = !1),
                this.currentCursorMode !== t)
              ) {
                this.currentCursorMode = t;
                var n = this.cursorStyles[t];
                if (n)
                  switch (typeof n) {
                    case "string":
                      e && (this.interactionDOMElement.style.cursor = n);
                      break;
                    case "function":
                      n(t);
                      break;
                    case "object":
                      e && Object.assign(this.interactionDOMElement.style, n);
                  }
                else
                  e &&
                    "string" == typeof t &&
                    !Object.prototype.hasOwnProperty.call(
                      this.cursorStyles,
                      t,
                    ) &&
                    (this.interactionDOMElement.style.cursor = t);
              }
            }),
            (e.prototype.dispatchEvent = function (t, e, n) {
              (n.stopPropagationHint && t !== n.stopsPropagatingAt) ||
                ((n.currentTarget = t),
                (n.type = e),
                t.emit(e, n),
                t[e] && t[e](n));
            }),
            (e.prototype.delayDispatchEvent = function (t, e, n) {
              this.delayedEvents.push({
                displayObject: t,
                eventString: e,
                eventData: n,
              });
            }),
            (e.prototype.mapPositionToPoint = function (t, e, n) {
              var r;
              r = this.interactionDOMElement.parentElement
                ? this.interactionDOMElement.getBoundingClientRect()
                : {
                    x: 0,
                    y: 0,
                    width: this.interactionDOMElement.width,
                    height: this.interactionDOMElement.height,
                    left: 0,
                    top: 0,
                  };
              var i = 1 / this.resolution;
              (t.x =
                (e - r.left) *
                (this.interactionDOMElement.width / r.width) *
                i),
                (t.y =
                  (n - r.top) *
                  (this.interactionDOMElement.height / r.height) *
                  i);
            }),
            (e.prototype.processInteractive = function (t, e, n, r) {
              var i = this.search.findHit(t, e, n, r),
                o = this.delayedEvents;
              if (!o.length) return i;
              t.stopPropagationHint = !1;
              var a = o.length;
              this.delayedEvents = [];
              for (var s = 0; s < a; s++) {
                var l = o[s],
                  u = l.displayObject,
                  h = l.eventString,
                  c = l.eventData;
                c.stopsPropagatingAt === u && (c.stopPropagationHint = !0),
                  this.dispatchEvent(u, h, c);
              }
              return i;
            }),
            (e.prototype.onPointerDown = function (t) {
              if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
                var e = this.normalizeToPointerData(t);
                this.autoPreventDefault &&
                  e[0].isNormalized &&
                  (t.cancelable || !("cancelable" in t)) &&
                  t.preventDefault();
                for (var n = e.length, r = 0; r < n; r++) {
                  var i = e[r],
                    o = this.getInteractionDataForPointerId(i),
                    a = this.configureInteractionEventForDOMEvent(
                      this.eventData,
                      i,
                      o,
                    );
                  if (
                    ((a.data.originalEvent = t),
                    this.processInteractive(
                      a,
                      this.lastObjectRendered,
                      this.processPointerDown,
                      !0,
                    ),
                    this.emit("pointerdown", a),
                    "touch" === i.pointerType)
                  )
                    this.emit("touchstart", a);
                  else if (
                    "mouse" === i.pointerType ||
                    "pen" === i.pointerType
                  ) {
                    var s = 2 === i.button;
                    this.emit(s ? "rightdown" : "mousedown", this.eventData);
                  }
                }
              }
            }),
            (e.prototype.processPointerDown = function (t, e, n) {
              var r = t.data,
                i = t.data.identifier;
              if (n)
                if (
                  (e.trackedPointers[i] || (e.trackedPointers[i] = new Ii(i)),
                  this.dispatchEvent(e, "pointerdown", t),
                  "touch" === r.pointerType)
                )
                  this.dispatchEvent(e, "touchstart", t);
                else if ("mouse" === r.pointerType || "pen" === r.pointerType) {
                  var o = 2 === r.button;
                  o
                    ? (e.trackedPointers[i].rightDown = !0)
                    : (e.trackedPointers[i].leftDown = !0),
                    this.dispatchEvent(e, o ? "rightdown" : "mousedown", t);
                }
            }),
            (e.prototype.onPointerComplete = function (t, e, n) {
              var r = this.normalizeToPointerData(t),
                i = r.length,
                o = t.target;
              t.composedPath &&
                t.composedPath().length > 0 &&
                (o = t.composedPath()[0]);
              for (
                var a = o !== this.interactionDOMElement ? "outside" : "",
                  s = 0;
                s < i;
                s++
              ) {
                var l = r[s],
                  u = this.getInteractionDataForPointerId(l),
                  h = this.configureInteractionEventForDOMEvent(
                    this.eventData,
                    l,
                    u,
                  );
                if (
                  ((h.data.originalEvent = t),
                  this.processInteractive(
                    h,
                    this.lastObjectRendered,
                    n,
                    e || !a,
                  ),
                  this.emit(e ? "pointercancel" : "pointerup" + a, h),
                  "mouse" === l.pointerType || "pen" === l.pointerType)
                ) {
                  var c = 2 === l.button;
                  this.emit(c ? "rightup" + a : "mouseup" + a, h);
                } else
                  "touch" === l.pointerType &&
                    (this.emit(e ? "touchcancel" : "touchend" + a, h),
                    this.releaseInteractionDataForPointerId(l.pointerId));
              }
            }),
            (e.prototype.onPointerCancel = function (t) {
              (this.supportsTouchEvents && "touch" === t.pointerType) ||
                this.onPointerComplete(t, !0, this.processPointerCancel);
            }),
            (e.prototype.processPointerCancel = function (t, e) {
              var n = t.data,
                r = t.data.identifier;
              void 0 !== e.trackedPointers[r] &&
                (delete e.trackedPointers[r],
                this.dispatchEvent(e, "pointercancel", t),
                "touch" === n.pointerType &&
                  this.dispatchEvent(e, "touchcancel", t));
            }),
            (e.prototype.onPointerUp = function (t) {
              (this.supportsTouchEvents && "touch" === t.pointerType) ||
                this.onPointerComplete(t, !1, this.processPointerUp);
            }),
            (e.prototype.processPointerUp = function (t, e, n) {
              var r = t.data,
                i = t.data.identifier,
                o = e.trackedPointers[i],
                a = "touch" === r.pointerType,
                s = "mouse" === r.pointerType || "pen" === r.pointerType,
                l = !1;
              if (s) {
                var u = 2 === r.button,
                  h = Ii.FLAGS,
                  c = u ? h.RIGHT_DOWN : h.LEFT_DOWN,
                  d = void 0 !== o && o.flags & c;
                n
                  ? (this.dispatchEvent(e, u ? "rightup" : "mouseup", t),
                    d &&
                      (this.dispatchEvent(e, u ? "rightclick" : "click", t),
                      (l = !0)))
                  : d &&
                    this.dispatchEvent(
                      e,
                      u ? "rightupoutside" : "mouseupoutside",
                      t,
                    ),
                  o && (u ? (o.rightDown = !1) : (o.leftDown = !1));
              }
              n
                ? (this.dispatchEvent(e, "pointerup", t),
                  a && this.dispatchEvent(e, "touchend", t),
                  o &&
                    ((s && !l) || this.dispatchEvent(e, "pointertap", t),
                    a && (this.dispatchEvent(e, "tap", t), (o.over = !1))))
                : o &&
                  (this.dispatchEvent(e, "pointerupoutside", t),
                  a && this.dispatchEvent(e, "touchendoutside", t)),
                o && o.none && delete e.trackedPointers[i];
            }),
            (e.prototype.onPointerMove = function (t) {
              if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
                var e = this.normalizeToPointerData(t);
                ("mouse" !== e[0].pointerType && "pen" !== e[0].pointerType) ||
                  ((this._didMove = !0), (this.cursor = null));
                for (var n = e.length, r = 0; r < n; r++) {
                  var i = e[r],
                    o = this.getInteractionDataForPointerId(i),
                    a = this.configureInteractionEventForDOMEvent(
                      this.eventData,
                      i,
                      o,
                    );
                  (a.data.originalEvent = t),
                    this.processInteractive(
                      a,
                      this.lastObjectRendered,
                      this.processPointerMove,
                      !0,
                    ),
                    this.emit("pointermove", a),
                    "touch" === i.pointerType && this.emit("touchmove", a),
                    ("mouse" !== i.pointerType && "pen" !== i.pointerType) ||
                      this.emit("mousemove", a);
                }
                "mouse" === e[0].pointerType && this.setCursorMode(this.cursor);
              }
            }),
            (e.prototype.processPointerMove = function (t, e, n) {
              var r = t.data,
                i = "touch" === r.pointerType,
                o = "mouse" === r.pointerType || "pen" === r.pointerType;
              o && this.processPointerOverOut(t, e, n),
                (this.moveWhenInside && !n) ||
                  (this.dispatchEvent(e, "pointermove", t),
                  i && this.dispatchEvent(e, "touchmove", t),
                  o && this.dispatchEvent(e, "mousemove", t));
            }),
            (e.prototype.onPointerOut = function (t) {
              if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
                var e = this.normalizeToPointerData(t)[0];
                "mouse" === e.pointerType &&
                  ((this.mouseOverRenderer = !1), this.setCursorMode(null));
                var n = this.getInteractionDataForPointerId(e),
                  r = this.configureInteractionEventForDOMEvent(
                    this.eventData,
                    e,
                    n,
                  );
                (r.data.originalEvent = e),
                  this.processInteractive(
                    r,
                    this.lastObjectRendered,
                    this.processPointerOverOut,
                    !1,
                  ),
                  this.emit("pointerout", r),
                  "mouse" === e.pointerType || "pen" === e.pointerType
                    ? this.emit("mouseout", r)
                    : this.releaseInteractionDataForPointerId(n.identifier);
              }
            }),
            (e.prototype.processPointerOverOut = function (t, e, n) {
              var r = t.data,
                i = t.data.identifier,
                o = "mouse" === r.pointerType || "pen" === r.pointerType,
                a = e.trackedPointers[i];
              n && !a && (a = e.trackedPointers[i] = new Ii(i)),
                void 0 !== a &&
                  (n && this.mouseOverRenderer
                    ? (a.over ||
                        ((a.over = !0),
                        this.delayDispatchEvent(e, "pointerover", t),
                        o && this.delayDispatchEvent(e, "mouseover", t)),
                      o && null === this.cursor && (this.cursor = e.cursor))
                    : a.over &&
                      ((a.over = !1),
                      this.dispatchEvent(e, "pointerout", this.eventData),
                      o && this.dispatchEvent(e, "mouseout", t),
                      a.none && delete e.trackedPointers[i]));
            }),
            (e.prototype.onPointerOver = function (t) {
              var e = this.normalizeToPointerData(t)[0],
                n = this.getInteractionDataForPointerId(e),
                r = this.configureInteractionEventForDOMEvent(
                  this.eventData,
                  e,
                  n,
                );
              (r.data.originalEvent = e),
                "mouse" === e.pointerType && (this.mouseOverRenderer = !0),
                this.emit("pointerover", r),
                ("mouse" !== e.pointerType && "pen" !== e.pointerType) ||
                  this.emit("mouseover", r);
            }),
            (e.prototype.getInteractionDataForPointerId = function (t) {
              var e,
                n = t.pointerId;
              return (
                1 === n || "mouse" === t.pointerType
                  ? (e = this.mouse)
                  : this.activeInteractionData[n]
                    ? (e = this.activeInteractionData[n])
                    : (((e =
                        this.interactionDataPool.pop() || new Ri()).identifier =
                        n),
                      (this.activeInteractionData[n] = e)),
                e.copyEvent(t),
                e
              );
            }),
            (e.prototype.releaseInteractionDataForPointerId = function (t) {
              var e = this.activeInteractionData[t];
              e &&
                (delete this.activeInteractionData[t],
                e.reset(),
                this.interactionDataPool.push(e));
            }),
            (e.prototype.configureInteractionEventForDOMEvent = function (
              t,
              e,
              n,
            ) {
              return (
                (t.data = n),
                this.mapPositionToPoint(n.global, e.clientX, e.clientY),
                "touch" === e.pointerType &&
                  ((e.globalX = n.global.x), (e.globalY = n.global.y)),
                (n.originalEvent = e),
                t.reset(),
                t
              );
            }),
            (e.prototype.normalizeToPointerData = function (t) {
              var e = [];
              if (this.supportsTouchEvents && t instanceof TouchEvent)
                for (var n = 0, r = t.changedTouches.length; n < r; n++) {
                  var i = t.changedTouches[n];
                  void 0 === i.button && (i.button = t.touches.length ? 1 : 0),
                    void 0 === i.buttons &&
                      (i.buttons = t.touches.length ? 1 : 0),
                    void 0 === i.isPrimary &&
                      (i.isPrimary =
                        1 === t.touches.length && "touchstart" === t.type),
                    void 0 === i.width && (i.width = i.radiusX || 1),
                    void 0 === i.height && (i.height = i.radiusY || 1),
                    void 0 === i.tiltX && (i.tiltX = 0),
                    void 0 === i.tiltY && (i.tiltY = 0),
                    void 0 === i.pointerType && (i.pointerType = "touch"),
                    void 0 === i.pointerId && (i.pointerId = i.identifier || 0),
                    void 0 === i.pressure && (i.pressure = i.force || 0.5),
                    void 0 === i.twist && (i.twist = 0),
                    void 0 === i.tangentialPressure &&
                      (i.tangentialPressure = 0),
                    void 0 === i.layerX && (i.layerX = i.offsetX = i.clientX),
                    void 0 === i.layerY && (i.layerY = i.offsetY = i.clientY),
                    (i.isNormalized = !0),
                    e.push(i);
                }
              else if (
                !globalThis.MouseEvent ||
                (t instanceof MouseEvent &&
                  !(
                    this.supportsPointerEvents &&
                    t instanceof globalThis.PointerEvent
                  ))
              ) {
                var o = t;
                void 0 === o.isPrimary && (o.isPrimary = !0),
                  void 0 === o.width && (o.width = 1),
                  void 0 === o.height && (o.height = 1),
                  void 0 === o.tiltX && (o.tiltX = 0),
                  void 0 === o.tiltY && (o.tiltY = 0),
                  void 0 === o.pointerType && (o.pointerType = "mouse"),
                  void 0 === o.pointerId && (o.pointerId = 1),
                  void 0 === o.pressure && (o.pressure = 0.5),
                  void 0 === o.twist && (o.twist = 0),
                  void 0 === o.tangentialPressure && (o.tangentialPressure = 0),
                  (o.isNormalized = !0),
                  e.push(o);
              } else e.push(t);
              return e;
            }),
            (e.prototype.destroy = function () {
              this.removeEvents(),
                this.removeTickerListener(),
                this.removeAllListeners(),
                (this.renderer = null),
                (this.mouse = null),
                (this.eventData = null),
                (this.interactionDOMElement = null),
                (this.onPointerDown = null),
                (this.processPointerDown = null),
                (this.onPointerUp = null),
                (this.processPointerUp = null),
                (this.onPointerCancel = null),
                (this.processPointerCancel = null),
                (this.onPointerMove = null),
                (this.processPointerMove = null),
                (this.onPointerOut = null),
                (this.processPointerOverOut = null),
                (this.onPointerOver = null),
                (this.search = null);
            }),
            (e.extension = {
              name: "interaction",
              type: [$e.RendererPlugin, $e.CanvasRendererPlugin],
            }),
            e
          );
        })(Rt),
        Di = new ue(),
        Ui = (function () {
          function t(t) {
            this.renderer = t;
          }
          return (
            (t.prototype.image = function (t, e, n) {
              var r = new Image();
              return (r.src = this.base64(t, e, n)), r;
            }),
            (t.prototype.base64 = function (t, e, n) {
              return this.canvas(t).toDataURL(e, n);
            }),
            (t.prototype.canvas = function (e, n) {
              var r,
                i,
                o = this.renderer,
                a = !1,
                s = !1;
              e &&
                (e instanceof Ln
                  ? (i = e)
                  : ((i = this.renderer.generateTexture(e)), (s = !0))),
                i
                  ? ((r = i.baseTexture.resolution),
                    (n = null != n ? n : i.frame),
                    (a = !1),
                    o.renderTexture.bind(i))
                  : ((r = o.resolution),
                    n || (((n = Di).width = o.width), (n.height = o.height)),
                    (a = !0),
                    o.renderTexture.bind(null));
              var l = Math.round(n.width * r),
                u = Math.round(n.height * r),
                h = new ee(l, u, 1),
                c = new Uint8Array(4 * l * u),
                d = o.gl;
              d.readPixels(
                Math.round(n.x * r),
                Math.round(n.y * r),
                l,
                u,
                d.RGBA,
                d.UNSIGNED_BYTE,
                c,
              );
              var f = h.context.getImageData(0, 0, l, u);
              if (
                (t.arrayPostDivide(c, f.data),
                h.context.putImageData(f, 0, 0),
                a)
              ) {
                var p = new ee(h.width, h.height, 1);
                p.context.scale(1, -1),
                  p.context.drawImage(h.canvas, 0, -u),
                  h.destroy(),
                  (h = p);
              }
              return s && i.destroy(!0), h.canvas;
            }),
            (t.prototype.pixels = function (e, n) {
              var r,
                i,
                o = this.renderer,
                a = !1;
              e &&
                (e instanceof Ln
                  ? (i = e)
                  : ((i = this.renderer.generateTexture(e)), (a = !0))),
                i
                  ? ((r = i.baseTexture.resolution),
                    (n = null != n ? n : i.frame),
                    o.renderTexture.bind(i))
                  : ((r = o.resolution),
                    n || (((n = Di).width = o.width), (n.height = o.height)),
                    o.renderTexture.bind(null));
              var s = Math.round(n.width * r),
                l = Math.round(n.height * r),
                u = new Uint8Array(4 * s * l),
                h = o.gl;
              return (
                h.readPixels(
                  Math.round(n.x * r),
                  Math.round(n.y * r),
                  s,
                  l,
                  h.RGBA,
                  h.UNSIGNED_BYTE,
                  u,
                ),
                a && i.destroy(!0),
                t.arrayPostDivide(u, u),
                u
              );
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            (t.arrayPostDivide = function (t, e) {
              for (var n = 0; n < t.length; n += 4) {
                var r = (e[n + 3] = t[n + 3]);
                0 !== r
                  ? ((e[n] = Math.round(Math.min((255 * t[n]) / r, 255))),
                    (e[n + 1] = Math.round(
                      Math.min((255 * t[n + 1]) / r, 255),
                    )),
                    (e[n + 2] = Math.round(
                      Math.min((255 * t[n + 2]) / r, 255),
                    )))
                  : ((e[n] = t[n]),
                    (e[n + 1] = t[n + 1]),
                    (e[n + 2] = t[n + 2]));
              }
            }),
            (t.extension = { name: "extract", type: $e.RendererPlugin }),
            t
          );
        })(),
        Fi = (function () {
          function t(t, e, n) {
            void 0 === e && (e = !1),
              (this._fn = t),
              (this._once = e),
              (this._thisArg = n),
              (this._next = this._prev = this._owner = null);
          }
          return (
            (t.prototype.detach = function () {
              return null !== this._owner && (this._owner.detach(this), !0);
            }),
            t
          );
        })();
      function Bi(t, e) {
        return (
          t._head
            ? ((t._tail._next = e), (e._prev = t._tail), (t._tail = e))
            : ((t._head = e), (t._tail = e)),
          (e._owner = t),
          e
        );
      }
      var Gi,
        ki = (function () {
          function t() {
            this._head = this._tail = void 0;
          }
          return (
            (t.prototype.handlers = function (t) {
              void 0 === t && (t = !1);
              var e = this._head;
              if (t) return !!e;
              for (var n = []; e; ) n.push(e), (e = e._next);
              return n;
            }),
            (t.prototype.has = function (t) {
              if (!(t instanceof Fi))
                throw new Error(
                  "MiniSignal#has(): First arg must be a SignalBinding object.",
                );
              return t._owner === this;
            }),
            (t.prototype.dispatch = function () {
              for (var t = arguments, e = [], n = 0; n < arguments.length; n++)
                e[n] = t[n];
              var r = this._head;
              if (!r) return !1;
              for (; r; )
                r._once && this.detach(r),
                  r._fn.apply(r._thisArg, e),
                  (r = r._next);
              return !0;
            }),
            (t.prototype.add = function (t, e) {
              if ((void 0 === e && (e = null), "function" != typeof t))
                throw new Error(
                  "MiniSignal#add(): First arg must be a Function.",
                );
              return Bi(this, new Fi(t, !1, e));
            }),
            (t.prototype.once = function (t, e) {
              if ((void 0 === e && (e = null), "function" != typeof t))
                throw new Error(
                  "MiniSignal#once(): First arg must be a Function.",
                );
              return Bi(this, new Fi(t, !0, e));
            }),
            (t.prototype.detach = function (t) {
              if (!(t instanceof Fi))
                throw new Error(
                  "MiniSignal#detach(): First arg must be a SignalBinding object.",
                );
              return (
                t._owner !== this ||
                  (t._prev && (t._prev._next = t._next),
                  t._next && (t._next._prev = t._prev),
                  t === this._head
                    ? ((this._head = t._next),
                      null === t._next && (this._tail = null))
                    : t === this._tail &&
                      ((this._tail = t._prev), (this._tail._next = null)),
                  (t._owner = null)),
                this
              );
            }),
            (t.prototype.detachAll = function () {
              var t = this._head;
              if (!t) return this;
              for (this._head = this._tail = null; t; )
                (t._owner = null), (t = t._next);
              return this;
            }),
            t
          );
        })();
      function Hi(t, e) {
        e = e || {};
        for (
          var n = {
              key: [
                "source",
                "protocol",
                "authority",
                "userInfo",
                "user",
                "password",
                "host",
                "port",
                "relative",
                "path",
                "directory",
                "file",
                "query",
                "anchor",
              ],
              q: { name: "queryKey", parser: /(?:^|&)([^&=]*)=?([^&]*)/g },
              parser: {
                strict:
                  /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
                loose:
                  /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
              },
            },
            r = n.parser[e.strictMode ? "strict" : "loose"].exec(t),
            i = {},
            o = 14;
          o--;

        )
          i[n.key[o]] = r[o] || "";
        return (
          (i[n.q.name] = {}),
          i[n.key[12]].replace(n.q.parser, function (t, e, r) {
            e && (i[n.q.name][e] = r);
          }),
          i
        );
      }
      var zi = null;
      function Vi() {}
      function Xi(t, e, n) {
        e && 0 === e.indexOf(".") && (e = e.substring(1)), e && (t[e] = n);
      }
      function Wi(t) {
        return t.toString().replace("object ", "");
      }
      var ji = (function () {
        function t(e, n, r) {
          if (
            ((this._dequeue = Vi),
            (this._onLoadBinding = null),
            (this._elementTimer = 0),
            (this._boundComplete = null),
            (this._boundOnError = null),
            (this._boundOnProgress = null),
            (this._boundOnTimeout = null),
            (this._boundXhrOnError = null),
            (this._boundXhrOnTimeout = null),
            (this._boundXhrOnAbort = null),
            (this._boundXhrOnLoad = null),
            "string" != typeof e || "string" != typeof n)
          )
            throw new Error(
              "Both name and url are required for constructing a resource.",
            );
          (r = r || {}),
            (this._flags = 0),
            this._setFlag(t.STATUS_FLAGS.DATA_URL, 0 === n.indexOf("data:")),
            (this.name = e),
            (this.url = n),
            (this.extension = this._getExtension()),
            (this.data = null),
            (this.crossOrigin =
              !0 === r.crossOrigin ? "anonymous" : r.crossOrigin),
            (this.timeout = r.timeout || 0),
            (this.loadType = r.loadType || this._determineLoadType()),
            (this.xhrType = r.xhrType),
            (this.metadata = r.metadata || {}),
            (this.error = null),
            (this.xhr = null),
            (this.children = []),
            (this.type = t.TYPE.UNKNOWN),
            (this.progressChunk = 0),
            (this._dequeue = Vi),
            (this._onLoadBinding = null),
            (this._elementTimer = 0),
            (this._boundComplete = this.complete.bind(this)),
            (this._boundOnError = this._onError.bind(this)),
            (this._boundOnProgress = this._onProgress.bind(this)),
            (this._boundOnTimeout = this._onTimeout.bind(this)),
            (this._boundXhrOnError = this._xhrOnError.bind(this)),
            (this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this)),
            (this._boundXhrOnAbort = this._xhrOnAbort.bind(this)),
            (this._boundXhrOnLoad = this._xhrOnLoad.bind(this)),
            (this.onStart = new ki()),
            (this.onProgress = new ki()),
            (this.onComplete = new ki()),
            (this.onAfterMiddleware = new ki());
        }
        return (
          (t.setExtensionLoadType = function (e, n) {
            Xi(t._loadTypeMap, e, n);
          }),
          (t.setExtensionXhrType = function (e, n) {
            Xi(t._xhrTypeMap, e, n);
          }),
          Object.defineProperty(t.prototype, "isDataUrl", {
            get: function () {
              return this._hasFlag(t.STATUS_FLAGS.DATA_URL);
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(t.prototype, "isComplete", {
            get: function () {
              return this._hasFlag(t.STATUS_FLAGS.COMPLETE);
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(t.prototype, "isLoading", {
            get: function () {
              return this._hasFlag(t.STATUS_FLAGS.LOADING);
            },
            enumerable: !1,
            configurable: !0,
          }),
          (t.prototype.complete = function () {
            this._clearEvents(), this._finish();
          }),
          (t.prototype.abort = function (e) {
            if (!this.error) {
              if (((this.error = new Error(e)), this._clearEvents(), this.xhr))
                this.xhr.abort();
              else if (this.xdr) this.xdr.abort();
              else if (this.data)
                if (this.data.src) this.data.src = t.EMPTY_GIF;
                else
                  for (; this.data.firstChild; )
                    this.data.removeChild(this.data.firstChild);
              this._finish();
            }
          }),
          (t.prototype.load = function (e) {
            var n = this;
            if (!this.isLoading)
              if (this.isComplete)
                e &&
                  setTimeout(function () {
                    return e(n);
                  }, 1);
              else
                switch (
                  (e && this.onComplete.once(e),
                  this._setFlag(t.STATUS_FLAGS.LOADING, !0),
                  this.onStart.dispatch(this),
                  (!1 !== this.crossOrigin &&
                    "string" == typeof this.crossOrigin) ||
                    (this.crossOrigin = this._determineCrossOrigin(this.url)),
                  this.loadType)
                ) {
                  case t.LOAD_TYPE.IMAGE:
                    (this.type = t.TYPE.IMAGE), this._loadElement("image");
                    break;
                  case t.LOAD_TYPE.AUDIO:
                    (this.type = t.TYPE.AUDIO),
                      this._loadSourceElement("audio");
                    break;
                  case t.LOAD_TYPE.VIDEO:
                    (this.type = t.TYPE.VIDEO),
                      this._loadSourceElement("video");
                    break;
                  case t.LOAD_TYPE.XHR:
                  default:
                    void 0 === Gi &&
                      (Gi = !(
                        !globalThis.XDomainRequest ||
                        "withCredentials" in new XMLHttpRequest()
                      )),
                      Gi && this.crossOrigin
                        ? this._loadXdr()
                        : this._loadXhr();
                }
          }),
          (t.prototype._hasFlag = function (t) {
            return 0 != (this._flags & t);
          }),
          (t.prototype._setFlag = function (t, e) {
            this._flags = e ? this._flags | t : this._flags & ~t;
          }),
          (t.prototype._clearEvents = function () {
            clearTimeout(this._elementTimer),
              this.data &&
                this.data.removeEventListener &&
                (this.data.removeEventListener("error", this._boundOnError, !1),
                this.data.removeEventListener("load", this._boundComplete, !1),
                this.data.removeEventListener(
                  "progress",
                  this._boundOnProgress,
                  !1,
                ),
                this.data.removeEventListener(
                  "canplaythrough",
                  this._boundComplete,
                  !1,
                )),
              this.xhr &&
                (this.xhr.removeEventListener
                  ? (this.xhr.removeEventListener(
                      "error",
                      this._boundXhrOnError,
                      !1,
                    ),
                    this.xhr.removeEventListener(
                      "timeout",
                      this._boundXhrOnTimeout,
                      !1,
                    ),
                    this.xhr.removeEventListener(
                      "abort",
                      this._boundXhrOnAbort,
                      !1,
                    ),
                    this.xhr.removeEventListener(
                      "progress",
                      this._boundOnProgress,
                      !1,
                    ),
                    this.xhr.removeEventListener(
                      "load",
                      this._boundXhrOnLoad,
                      !1,
                    ))
                  : ((this.xhr.onerror = null),
                    (this.xhr.ontimeout = null),
                    (this.xhr.onprogress = null),
                    (this.xhr.onload = null)));
          }),
          (t.prototype._finish = function () {
            if (this.isComplete)
              throw new Error(
                "Complete called again for an already completed resource.",
              );
            this._setFlag(t.STATUS_FLAGS.COMPLETE, !0),
              this._setFlag(t.STATUS_FLAGS.LOADING, !1),
              this.onComplete.dispatch(this);
          }),
          (t.prototype._loadElement = function (t) {
            this.metadata.loadElement
              ? (this.data = this.metadata.loadElement)
              : "image" === t && void 0 !== globalThis.Image
                ? (this.data = new Image())
                : (this.data = document.createElement(t)),
              this.crossOrigin && (this.data.crossOrigin = this.crossOrigin),
              this.metadata.skipSource || (this.data.src = this.url),
              this.data.addEventListener("error", this._boundOnError, !1),
              this.data.addEventListener("load", this._boundComplete, !1),
              this.data.addEventListener("progress", this._boundOnProgress, !1),
              this.timeout &&
                (this._elementTimer = setTimeout(
                  this._boundOnTimeout,
                  this.timeout,
                ));
          }),
          (t.prototype._loadSourceElement = function (t) {
            if (
              (this.metadata.loadElement
                ? (this.data = this.metadata.loadElement)
                : "audio" === t && void 0 !== globalThis.Audio
                  ? (this.data = new Audio())
                  : (this.data = document.createElement(t)),
              null !== this.data)
            ) {
              if (
                (this.crossOrigin && (this.data.crossOrigin = this.crossOrigin),
                !this.metadata.skipSource)
              )
                if (navigator.isCocoonJS)
                  this.data.src = Array.isArray(this.url)
                    ? this.url[0]
                    : this.url;
                else if (Array.isArray(this.url))
                  for (
                    var e = this.metadata.mimeType, n = 0;
                    n < this.url.length;
                    ++n
                  )
                    this.data.appendChild(
                      this._createSource(
                        t,
                        this.url[n],
                        Array.isArray(e) ? e[n] : e,
                      ),
                    );
                else
                  (e = this.metadata.mimeType),
                    this.data.appendChild(
                      this._createSource(
                        t,
                        this.url,
                        Array.isArray(e) ? e[0] : e,
                      ),
                    );
              this.data.addEventListener("error", this._boundOnError, !1),
                this.data.addEventListener("load", this._boundComplete, !1),
                this.data.addEventListener(
                  "progress",
                  this._boundOnProgress,
                  !1,
                ),
                this.data.addEventListener(
                  "canplaythrough",
                  this._boundComplete,
                  !1,
                ),
                this.data.load(),
                this.timeout &&
                  (this._elementTimer = setTimeout(
                    this._boundOnTimeout,
                    this.timeout,
                  ));
            } else this.abort("Unsupported element: " + t);
          }),
          (t.prototype._loadXhr = function () {
            "string" != typeof this.xhrType &&
              (this.xhrType = this._determineXhrType());
            var e = (this.xhr = new XMLHttpRequest());
            "use-credentials" === this.crossOrigin && (e.withCredentials = !0),
              e.open("GET", this.url, !0),
              (e.timeout = this.timeout),
              this.xhrType === t.XHR_RESPONSE_TYPE.JSON ||
              this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT
                ? (e.responseType = t.XHR_RESPONSE_TYPE.TEXT)
                : (e.responseType = this.xhrType),
              e.addEventListener("error", this._boundXhrOnError, !1),
              e.addEventListener("timeout", this._boundXhrOnTimeout, !1),
              e.addEventListener("abort", this._boundXhrOnAbort, !1),
              e.addEventListener("progress", this._boundOnProgress, !1),
              e.addEventListener("load", this._boundXhrOnLoad, !1),
              e.send();
          }),
          (t.prototype._loadXdr = function () {
            "string" != typeof this.xhrType &&
              (this.xhrType = this._determineXhrType());
            var t = (this.xhr = new globalThis.XDomainRequest());
            (t.timeout = this.timeout || 5e3),
              (t.onerror = this._boundXhrOnError),
              (t.ontimeout = this._boundXhrOnTimeout),
              (t.onprogress = this._boundOnProgress),
              (t.onload = this._boundXhrOnLoad),
              t.open("GET", this.url, !0),
              setTimeout(function () {
                return t.send();
              }, 1);
          }),
          (t.prototype._createSource = function (t, e, n) {
            n || (n = t + "/" + this._getExtension(e));
            var r = document.createElement("source");
            return (r.src = e), (r.type = n), r;
          }),
          (t.prototype._onError = function (t) {
            this.abort("Failed to load element using: " + t.target.nodeName);
          }),
          (t.prototype._onProgress = function (t) {
            t &&
              t.lengthComputable &&
              this.onProgress.dispatch(this, t.loaded / t.total);
          }),
          (t.prototype._onTimeout = function () {
            this.abort("Load timed out.");
          }),
          (t.prototype._xhrOnError = function () {
            var t = this.xhr;
            this.abort(
              Wi(t) +
                " Request failed. Status: " +
                t.status +
                ', text: "' +
                t.statusText +
                '"',
            );
          }),
          (t.prototype._xhrOnTimeout = function () {
            var t = this.xhr;
            this.abort(Wi(t) + " Request timed out.");
          }),
          (t.prototype._xhrOnAbort = function () {
            var t = this.xhr;
            this.abort(Wi(t) + " Request was aborted by the user.");
          }),
          (t.prototype._xhrOnLoad = function () {
            var e = this.xhr,
              n = "",
              r = void 0 === e.status ? 200 : e.status;
            if (
              (("" !== e.responseType &&
                "text" !== e.responseType &&
                void 0 !== e.responseType) ||
                (n = e.responseText),
              0 === r &&
              (n.length > 0 || e.responseType === t.XHR_RESPONSE_TYPE.BUFFER)
                ? (r = 200)
                : 1223 === r && (r = 204),
              2 == ((r / 100) | 0))
            ) {
              if (this.xhrType === t.XHR_RESPONSE_TYPE.TEXT)
                (this.data = n), (this.type = t.TYPE.TEXT);
              else if (this.xhrType === t.XHR_RESPONSE_TYPE.JSON)
                try {
                  (this.data = JSON.parse(n)), (this.type = t.TYPE.JSON);
                } catch (t) {
                  return void this.abort(
                    "Error trying to parse loaded json: " + t,
                  );
                }
              else if (this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT)
                try {
                  if (globalThis.DOMParser) {
                    var i = new DOMParser();
                    this.data = i.parseFromString(n, "text/xml");
                  } else {
                    var o = document.createElement("div");
                    (o.innerHTML = n), (this.data = o);
                  }
                  this.type = t.TYPE.XML;
                } catch (t) {
                  return void this.abort(
                    "Error trying to parse loaded xml: " + t,
                  );
                }
              else this.data = e.response || n;
              this.complete();
            } else
              this.abort(
                "[" + e.status + "] " + e.statusText + ": " + e.responseURL,
              );
          }),
          (t.prototype._determineCrossOrigin = function (t, e) {
            if (0 === t.indexOf("data:")) return "";
            if (globalThis.origin !== globalThis.location.origin)
              return "anonymous";
            (e = e || globalThis.location),
              zi || (zi = document.createElement("a")),
              (zi.href = t);
            var n = Hi(zi.href, { strictMode: !0 }),
              r = (!n.port && "" === e.port) || n.port === e.port,
              i = n.protocol ? n.protocol + ":" : "";
            return n.host === e.hostname && r && i === e.protocol
              ? ""
              : "anonymous";
          }),
          (t.prototype._determineXhrType = function () {
            return t._xhrTypeMap[this.extension] || t.XHR_RESPONSE_TYPE.TEXT;
          }),
          (t.prototype._determineLoadType = function () {
            return t._loadTypeMap[this.extension] || t.LOAD_TYPE.XHR;
          }),
          (t.prototype._getExtension = function (t) {
            void 0 === t && (t = this.url);
            var e = "";
            if (this.isDataUrl) {
              var n = t.indexOf("/");
              e = t.substring(n + 1, t.indexOf(";", n));
            } else {
              var r = t.indexOf("?"),
                i = t.indexOf("#"),
                o = Math.min(r > -1 ? r : t.length, i > -1 ? i : t.length);
              e = (t = t.substring(0, o)).substring(t.lastIndexOf(".") + 1);
            }
            return e.toLowerCase();
          }),
          (t.prototype._getMimeFromXhrType = function (e) {
            switch (e) {
              case t.XHR_RESPONSE_TYPE.BUFFER:
                return "application/octet-binary";
              case t.XHR_RESPONSE_TYPE.BLOB:
                return "application/blob";
              case t.XHR_RESPONSE_TYPE.DOCUMENT:
                return "application/xml";
              case t.XHR_RESPONSE_TYPE.JSON:
                return "application/json";
              case t.XHR_RESPONSE_TYPE.DEFAULT:
              case t.XHR_RESPONSE_TYPE.TEXT:
              default:
                return "text/plain";
            }
          }),
          t
        );
      })();
      function Yi() {}
      function qi(t) {
        return function () {
          for (var e = arguments, n = [], r = 0; r < arguments.length; r++)
            n[r] = e[r];
          if (null === t) throw new Error("Callback was already called.");
          var i = t;
          (t = null), i.apply(this, n);
        };
      }
      !(function (t) {
        var e, n, r, i;
        ((e = t.STATUS_FLAGS || (t.STATUS_FLAGS = {}))[(e.NONE = 0)] = "NONE"),
          (e[(e.DATA_URL = 1)] = "DATA_URL"),
          (e[(e.COMPLETE = 2)] = "COMPLETE"),
          (e[(e.LOADING = 4)] = "LOADING"),
          ((n = t.TYPE || (t.TYPE = {}))[(n.UNKNOWN = 0)] = "UNKNOWN"),
          (n[(n.JSON = 1)] = "JSON"),
          (n[(n.XML = 2)] = "XML"),
          (n[(n.IMAGE = 3)] = "IMAGE"),
          (n[(n.AUDIO = 4)] = "AUDIO"),
          (n[(n.VIDEO = 5)] = "VIDEO"),
          (n[(n.TEXT = 6)] = "TEXT"),
          ((r = t.LOAD_TYPE || (t.LOAD_TYPE = {}))[(r.XHR = 1)] = "XHR"),
          (r[(r.IMAGE = 2)] = "IMAGE"),
          (r[(r.AUDIO = 3)] = "AUDIO"),
          (r[(r.VIDEO = 4)] = "VIDEO"),
          ((i = t.XHR_RESPONSE_TYPE || (t.XHR_RESPONSE_TYPE = {})).DEFAULT =
            "text"),
          (i.BUFFER = "arraybuffer"),
          (i.BLOB = "blob"),
          (i.DOCUMENT = "document"),
          (i.JSON = "json"),
          (i.TEXT = "text"),
          (t._loadTypeMap = {
            gif: t.LOAD_TYPE.IMAGE,
            png: t.LOAD_TYPE.IMAGE,
            bmp: t.LOAD_TYPE.IMAGE,
            jpg: t.LOAD_TYPE.IMAGE,
            jpeg: t.LOAD_TYPE.IMAGE,
            tif: t.LOAD_TYPE.IMAGE,
            tiff: t.LOAD_TYPE.IMAGE,
            webp: t.LOAD_TYPE.IMAGE,
            tga: t.LOAD_TYPE.IMAGE,
            svg: t.LOAD_TYPE.IMAGE,
            "svg+xml": t.LOAD_TYPE.IMAGE,
            mp3: t.LOAD_TYPE.AUDIO,
            ogg: t.LOAD_TYPE.AUDIO,
            wav: t.LOAD_TYPE.AUDIO,
            mp4: t.LOAD_TYPE.VIDEO,
            webm: t.LOAD_TYPE.VIDEO,
          }),
          (t._xhrTypeMap = {
            xhtml: t.XHR_RESPONSE_TYPE.DOCUMENT,
            html: t.XHR_RESPONSE_TYPE.DOCUMENT,
            htm: t.XHR_RESPONSE_TYPE.DOCUMENT,
            xml: t.XHR_RESPONSE_TYPE.DOCUMENT,
            tmx: t.XHR_RESPONSE_TYPE.DOCUMENT,
            svg: t.XHR_RESPONSE_TYPE.DOCUMENT,
            tsx: t.XHR_RESPONSE_TYPE.DOCUMENT,
            gif: t.XHR_RESPONSE_TYPE.BLOB,
            png: t.XHR_RESPONSE_TYPE.BLOB,
            bmp: t.XHR_RESPONSE_TYPE.BLOB,
            jpg: t.XHR_RESPONSE_TYPE.BLOB,
            jpeg: t.XHR_RESPONSE_TYPE.BLOB,
            tif: t.XHR_RESPONSE_TYPE.BLOB,
            tiff: t.XHR_RESPONSE_TYPE.BLOB,
            webp: t.XHR_RESPONSE_TYPE.BLOB,
            tga: t.XHR_RESPONSE_TYPE.BLOB,
            json: t.XHR_RESPONSE_TYPE.JSON,
            text: t.XHR_RESPONSE_TYPE.TEXT,
            txt: t.XHR_RESPONSE_TYPE.TEXT,
            ttf: t.XHR_RESPONSE_TYPE.BUFFER,
            otf: t.XHR_RESPONSE_TYPE.BUFFER,
          }),
          (t.EMPTY_GIF =
            "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");
      })(ji || (ji = {}));
      var Ki = function (t, e) {
          (this.data = t), (this.callback = e);
        },
        Zi = (function () {
          function t(t, e) {
            var n = this;
            if (
              (void 0 === e && (e = 1),
              (this.workers = 0),
              (this.saturated = Yi),
              (this.unsaturated = Yi),
              (this.empty = Yi),
              (this.drain = Yi),
              (this.error = Yi),
              (this.started = !1),
              (this.paused = !1),
              (this._tasks = []),
              (this._insert = function (t, e, r) {
                if (r && "function" != typeof r)
                  throw new Error("task callback must be a function");
                if (((n.started = !0), null == t && n.idle()))
                  setTimeout(function () {
                    return n.drain();
                  }, 1);
                else {
                  var i = new Ki(t, "function" == typeof r ? r : Yi);
                  e ? n._tasks.unshift(i) : n._tasks.push(i),
                    setTimeout(n.process, 1);
                }
              }),
              (this.process = function () {
                for (
                  ;
                  !n.paused && n.workers < n.concurrency && n._tasks.length;

                ) {
                  var t = n._tasks.shift();
                  0 === n._tasks.length && n.empty(),
                    (n.workers += 1),
                    n.workers === n.concurrency && n.saturated(),
                    n._worker(t.data, qi(n._next(t)));
                }
              }),
              (this._worker = t),
              0 === e)
            )
              throw new Error("Concurrency must not be zero");
            (this.concurrency = e), (this.buffer = e / 4);
          }
          return (
            (t.prototype._next = function (t) {
              var e = this;
              return function () {
                for (
                  var n = arguments, r = [], i = 0;
                  i < arguments.length;
                  i++
                )
                  r[i] = n[i];
                (e.workers -= 1),
                  t.callback.apply(t, r),
                  null != r[0] && e.error(r[0], t.data),
                  e.workers <= e.concurrency - e.buffer && e.unsaturated(),
                  e.idle() && e.drain(),
                  e.process();
              };
            }),
            (t.prototype.push = function (t, e) {
              this._insert(t, !1, e);
            }),
            (t.prototype.kill = function () {
              (this.workers = 0),
                (this.drain = Yi),
                (this.started = !1),
                (this._tasks = []);
            }),
            (t.prototype.unshift = function (t, e) {
              this._insert(t, !0, e);
            }),
            (t.prototype.length = function () {
              return this._tasks.length;
            }),
            (t.prototype.running = function () {
              return this.workers;
            }),
            (t.prototype.idle = function () {
              return this._tasks.length + this.workers === 0;
            }),
            (t.prototype.pause = function () {
              !0 !== this.paused && (this.paused = !0);
            }),
            (t.prototype.resume = function () {
              if (!1 !== this.paused) {
                this.paused = !1;
                for (var t = 1; t <= this.concurrency; t++) this.process();
              }
            }),
            (t.eachSeries = function (t, e, n, r) {
              var i = 0,
                o = t.length;
              !(function a(s) {
                s || i === o
                  ? n && n(s)
                  : r
                    ? setTimeout(function () {
                        e(t[i++], a);
                      }, 1)
                    : e(t[i++], a);
              })();
            }),
            (t.queue = function (e, n) {
              return new t(e, n);
            }),
            t
          );
        })(),
        Qi = /(#[\w-]+)?$/,
        $i = (function () {
          function t(e, n) {
            var r = this;
            void 0 === e && (e = ""),
              void 0 === n && (n = 10),
              (this.progress = 0),
              (this.loading = !1),
              (this.defaultQueryString = ""),
              (this._beforeMiddleware = []),
              (this._afterMiddleware = []),
              (this._resourcesParsing = []),
              (this._boundLoadResource = function (t, e) {
                return r._loadResource(t, e);
              }),
              (this.resources = {}),
              (this.baseUrl = e),
              (this._beforeMiddleware = []),
              (this._afterMiddleware = []),
              (this._resourcesParsing = []),
              (this._boundLoadResource = function (t, e) {
                return r._loadResource(t, e);
              }),
              (this._queue = Zi.queue(this._boundLoadResource, n)),
              this._queue.pause(),
              (this.resources = {}),
              (this.onProgress = new ki()),
              (this.onError = new ki()),
              (this.onLoad = new ki()),
              (this.onStart = new ki()),
              (this.onComplete = new ki());
            for (var i = 0; i < t._plugins.length; ++i) {
              var o = t._plugins[i],
                a = o.pre,
                s = o.use;
              a && this.pre(a), s && this.use(s);
            }
            this._protected = !1;
          }
          return (
            (t.prototype._add = function (t, e, n, r) {
              if (this.loading && (!n || !n.parentResource))
                throw new Error(
                  "Cannot add resources while the loader is running.",
                );
              if (this.resources[t])
                throw new Error('Resource named "' + t + '" already exists.');
              if (
                ((e = this._prepareUrl(e)),
                (this.resources[t] = new ji(t, e, n)),
                "function" == typeof r &&
                  this.resources[t].onAfterMiddleware.once(r),
                this.loading)
              ) {
                for (
                  var i = n.parentResource, o = [], a = 0;
                  a < i.children.length;
                  ++a
                )
                  i.children[a].isComplete || o.push(i.children[a]);
                var s = (i.progressChunk * (o.length + 1)) / (o.length + 2);
                for (
                  i.children.push(this.resources[t]),
                    i.progressChunk = s,
                    a = 0;
                  a < o.length;
                  ++a
                )
                  o[a].progressChunk = s;
                this.resources[t].progressChunk = s;
              }
              return this._queue.push(this.resources[t]), this;
            }),
            (t.prototype.pre = function (t) {
              return this._beforeMiddleware.push(t), this;
            }),
            (t.prototype.use = function (t) {
              return this._afterMiddleware.push(t), this;
            }),
            (t.prototype.reset = function () {
              for (var t in ((this.progress = 0),
              (this.loading = !1),
              this._queue.kill(),
              this._queue.pause(),
              this.resources)) {
                var e = this.resources[t];
                e._onLoadBinding && e._onLoadBinding.detach(),
                  e.isLoading && e.abort("loader reset");
              }
              return (this.resources = {}), this;
            }),
            (t.prototype.load = function (t) {
              if (
                (Zt(
                  "6.5.0",
                  "@pixi/loaders is being replaced with @pixi/assets in the next major release.",
                ),
                "function" == typeof t && this.onComplete.once(t),
                this.loading)
              )
                return this;
              if (this._queue.idle()) this._onStart(), this._onComplete();
              else {
                for (
                  var e = 100 / this._queue._tasks.length, n = 0;
                  n < this._queue._tasks.length;
                  ++n
                )
                  this._queue._tasks[n].data.progressChunk = e;
                this._onStart(), this._queue.resume();
              }
              return this;
            }),
            Object.defineProperty(t.prototype, "concurrency", {
              get: function () {
                return this._queue.concurrency;
              },
              set: function (t) {
                this._queue.concurrency = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype._prepareUrl = function (t) {
              var e,
                n = Hi(t, { strictMode: !0 });
              if (
                ((e =
                  n.protocol || !n.path || 0 === t.indexOf("//")
                    ? t
                    : this.baseUrl.length &&
                        this.baseUrl.lastIndexOf("/") !==
                          this.baseUrl.length - 1 &&
                        "/" !== t.charAt(0)
                      ? this.baseUrl + "/" + t
                      : this.baseUrl + t),
                this.defaultQueryString)
              ) {
                var r = Qi.exec(e)[0];
                -1 !== (e = e.slice(0, e.length - r.length)).indexOf("?")
                  ? (e += "&" + this.defaultQueryString)
                  : (e += "?" + this.defaultQueryString),
                  (e += r);
              }
              return e;
            }),
            (t.prototype._loadResource = function (t, e) {
              var n = this;
              (t._dequeue = e),
                Zi.eachSeries(
                  this._beforeMiddleware,
                  function (e, r) {
                    e.call(n, t, function () {
                      r(t.isComplete ? {} : null);
                    });
                  },
                  function () {
                    t.isComplete
                      ? n._onLoad(t)
                      : ((t._onLoadBinding = t.onComplete.once(n._onLoad, n)),
                        t.load());
                  },
                  !0,
                );
            }),
            (t.prototype._onStart = function () {
              (this.progress = 0),
                (this.loading = !0),
                this.onStart.dispatch(this);
            }),
            (t.prototype._onComplete = function () {
              (this.progress = 100),
                (this.loading = !1),
                this.onComplete.dispatch(this, this.resources);
            }),
            (t.prototype._onLoad = function (t) {
              var e = this;
              (t._onLoadBinding = null),
                this._resourcesParsing.push(t),
                t._dequeue(),
                Zi.eachSeries(
                  this._afterMiddleware,
                  function (n, r) {
                    n.call(e, t, r);
                  },
                  function () {
                    t.onAfterMiddleware.dispatch(t),
                      (e.progress = Math.min(
                        100,
                        e.progress + t.progressChunk,
                      )),
                      e.onProgress.dispatch(e, t),
                      t.error
                        ? e.onError.dispatch(t.error, e, t)
                        : e.onLoad.dispatch(e, t),
                      e._resourcesParsing.splice(
                        e._resourcesParsing.indexOf(t),
                        1,
                      ),
                      e._queue.idle() &&
                        0 === e._resourcesParsing.length &&
                        e._onComplete();
                  },
                  !0,
                );
            }),
            (t.prototype.destroy = function () {
              this._protected || this.reset();
            }),
            Object.defineProperty(t, "shared", {
              get: function () {
                var e = t._shared;
                return (
                  e || (((e = new t())._protected = !0), (t._shared = e)), e
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.registerPlugin = function (e) {
              return (
                Zt(
                  "6.5.0",
                  "Loader.registerPlugin() is deprecated, use extensions.add() instead.",
                ),
                nn.add({ type: $e.Loader, ref: e }),
                t
              );
            }),
            (t._plugins = []),
            t
          );
        })();
      nn.handleByList($e.Loader, $i._plugins),
        ($i.prototype.add = function (t, e, n, r) {
          if (Array.isArray(t)) {
            for (var i = 0; i < t.length; ++i) this.add(t[i]);
            return this;
          }
          if (
            ("object" == typeof t &&
              ((n = t),
              (r = e || n.callback || n.onComplete),
              (e = n.url),
              (t = n.name || n.key || n.url)),
            "string" != typeof e && ((r = n), (n = e), (e = t)),
            "string" != typeof e)
          )
            throw new Error("No url passed to add resource to loader.");
          return (
            "function" == typeof n && ((r = n), (n = null)),
            this._add(t, e, n, r)
          );
        });
      var Ji = (function () {
          function t() {}
          return (
            (t.init = function (t) {
              (t = Object.assign({ sharedLoader: !1 }, t)),
                (this.loader = t.sharedLoader ? $i.shared : new $i());
            }),
            (t.destroy = function () {
              this.loader && (this.loader.destroy(), (this.loader = null));
            }),
            (t.extension = $e.Application),
            t
          );
        })(),
        to = (function () {
          function t() {}
          return (
            (t.add = function () {
              ji.setExtensionLoadType("svg", ji.LOAD_TYPE.XHR),
                ji.setExtensionXhrType("svg", ji.XHR_RESPONSE_TYPE.TEXT);
            }),
            (t.use = function (t, e) {
              if (
                !t.data ||
                (t.type !== ji.TYPE.IMAGE && "svg" !== t.extension)
              )
                e();
              else {
                var n = t.data,
                  r = t.url,
                  i = t.name,
                  o = t.metadata;
                Nn.fromLoader(n, r, i, o)
                  .then(function (n) {
                    (t.texture = n), e();
                  })
                  .catch(e);
              }
            }),
            (t.extension = $e.Loader),
            t
          );
        })();
      function eo(t, e) {
        if (t.data) {
          if (t.xhr && t.xhrType === ji.XHR_RESPONSE_TYPE.BLOB)
            if (self.Blob && "string" != typeof t.data) {
              if (0 === t.data.type.indexOf("image")) {
                var n = globalThis.URL || globalThis.webkitURL,
                  r = n.createObjectURL(t.data);
                return (
                  (t.blob = t.data),
                  (t.data = new Image()),
                  (t.data.src = r),
                  (t.type = ji.TYPE.IMAGE),
                  void (t.data.onload = function () {
                    n.revokeObjectURL(r), (t.data.onload = null), e();
                  })
                );
              }
            } else {
              var i = t.xhr.getResponseHeader("content-type");
              if (i && 0 === i.indexOf("image"))
                return (
                  (t.data = new Image()),
                  (t.data.src =
                    "data:" +
                    i +
                    ";base64," +
                    (function (t) {
                      for (var e = "", n = 0; n < t.length; ) {
                        for (
                          var r = [0, 0, 0], i = [0, 0, 0, 0], o = 0;
                          o < r.length;
                          ++o
                        )
                          n < t.length
                            ? (r[o] = 255 & t.charCodeAt(n++))
                            : (r[o] = 0);
                        switch (
                          ((i[0] = r[0] >> 2),
                          (i[1] = ((3 & r[0]) << 4) | (r[1] >> 4)),
                          (i[2] = ((15 & r[1]) << 2) | (r[2] >> 6)),
                          (i[3] = 63 & r[2]),
                          n - (t.length - 1))
                        ) {
                          case 2:
                            (i[3] = 64), (i[2] = 64);
                            break;
                          case 1:
                            i[3] = 64;
                        }
                        for (o = 0; o < i.length; ++o)
                          e +=
                            "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(
                              i[o],
                            );
                      }
                      return e;
                    })(t.xhr.responseText)),
                  (t.type = ji.TYPE.IMAGE),
                  void (t.data.onload = function () {
                    (t.data.onload = null), e();
                  })
                );
            }
          e();
        } else e();
      }
      var no,
        ro,
        io = (function () {
          function t() {}
          return (t.extension = $e.Loader), (t.use = eo), t;
        })();
      nn.add(to, io),
        (function (t) {
          (t[(t.COMPRESSED_RGB_S3TC_DXT1_EXT = 33776)] =
            "COMPRESSED_RGB_S3TC_DXT1_EXT"),
            (t[(t.COMPRESSED_RGBA_S3TC_DXT1_EXT = 33777)] =
              "COMPRESSED_RGBA_S3TC_DXT1_EXT"),
            (t[(t.COMPRESSED_RGBA_S3TC_DXT3_EXT = 33778)] =
              "COMPRESSED_RGBA_S3TC_DXT3_EXT"),
            (t[(t.COMPRESSED_RGBA_S3TC_DXT5_EXT = 33779)] =
              "COMPRESSED_RGBA_S3TC_DXT5_EXT"),
            (t[(t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 35917)] =
              "COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT"),
            (t[(t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 35918)] =
              "COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT"),
            (t[(t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 35919)] =
              "COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT"),
            (t[(t.COMPRESSED_SRGB_S3TC_DXT1_EXT = 35916)] =
              "COMPRESSED_SRGB_S3TC_DXT1_EXT"),
            (t[(t.COMPRESSED_R11_EAC = 37488)] = "COMPRESSED_R11_EAC"),
            (t[(t.COMPRESSED_SIGNED_R11_EAC = 37489)] =
              "COMPRESSED_SIGNED_R11_EAC"),
            (t[(t.COMPRESSED_RG11_EAC = 37490)] = "COMPRESSED_RG11_EAC"),
            (t[(t.COMPRESSED_SIGNED_RG11_EAC = 37491)] =
              "COMPRESSED_SIGNED_RG11_EAC"),
            (t[(t.COMPRESSED_RGB8_ETC2 = 37492)] = "COMPRESSED_RGB8_ETC2"),
            (t[(t.COMPRESSED_RGBA8_ETC2_EAC = 37496)] =
              "COMPRESSED_RGBA8_ETC2_EAC"),
            (t[(t.COMPRESSED_SRGB8_ETC2 = 37493)] = "COMPRESSED_SRGB8_ETC2"),
            (t[(t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 37497)] =
              "COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"),
            (t[(t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37494)] =
              "COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2"),
            (t[(t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37495)] =
              "COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2"),
            (t[(t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 35840)] =
              "COMPRESSED_RGB_PVRTC_4BPPV1_IMG"),
            (t[(t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 35842)] =
              "COMPRESSED_RGBA_PVRTC_4BPPV1_IMG"),
            (t[(t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 35841)] =
              "COMPRESSED_RGB_PVRTC_2BPPV1_IMG"),
            (t[(t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 35843)] =
              "COMPRESSED_RGBA_PVRTC_2BPPV1_IMG"),
            (t[(t.COMPRESSED_RGB_ETC1_WEBGL = 36196)] =
              "COMPRESSED_RGB_ETC1_WEBGL"),
            (t[(t.COMPRESSED_RGB_ATC_WEBGL = 35986)] =
              "COMPRESSED_RGB_ATC_WEBGL"),
            (t[(t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 35986)] =
              "COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL"),
            (t[(t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 34798)] =
              "COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL");
        })(ro || (ro = {}));
      var oo =
          (((no = {})[ro.COMPRESSED_RGB_S3TC_DXT1_EXT] = 0.5),
          (no[ro.COMPRESSED_RGBA_S3TC_DXT1_EXT] = 0.5),
          (no[ro.COMPRESSED_RGBA_S3TC_DXT3_EXT] = 1),
          (no[ro.COMPRESSED_RGBA_S3TC_DXT5_EXT] = 1),
          (no[ro.COMPRESSED_SRGB_S3TC_DXT1_EXT] = 0.5),
          (no[ro.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT] = 0.5),
          (no[ro.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT] = 1),
          (no[ro.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT] = 1),
          (no[ro.COMPRESSED_R11_EAC] = 0.5),
          (no[ro.COMPRESSED_SIGNED_R11_EAC] = 0.5),
          (no[ro.COMPRESSED_RG11_EAC] = 1),
          (no[ro.COMPRESSED_SIGNED_RG11_EAC] = 1),
          (no[ro.COMPRESSED_RGB8_ETC2] = 0.5),
          (no[ro.COMPRESSED_RGBA8_ETC2_EAC] = 1),
          (no[ro.COMPRESSED_SRGB8_ETC2] = 0.5),
          (no[ro.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC] = 1),
          (no[ro.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5),
          (no[ro.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5),
          (no[ro.COMPRESSED_RGB_PVRTC_4BPPV1_IMG] = 0.5),
          (no[ro.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG] = 0.5),
          (no[ro.COMPRESSED_RGB_PVRTC_2BPPV1_IMG] = 0.25),
          (no[ro.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG] = 0.25),
          (no[ro.COMPRESSED_RGB_ETC1_WEBGL] = 0.5),
          (no[ro.COMPRESSED_RGB_ATC_WEBGL] = 0.5),
          (no[ro.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL] = 1),
          (no[ro.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL] = 1),
          no),
        ao = function (t, e) {
          return (
            (ao =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            ao(t, e)
          );
        };
      function so(t, e) {
        function n() {
          this.constructor = t;
        }
        ao(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n()));
      }
      var lo,
        uo,
        ho = (function (t) {
          function e(e, n) {
            void 0 === n && (n = { width: 1, height: 1, autoLoad: !0 });
            var r,
              i,
              o = this;
            return (
              "string" == typeof e
                ? ((r = e), (i = new Uint8Array()))
                : ((r = null), (i = e)),
              ((o = t.call(this, i, n) || this).origin = r),
              (o.buffer = i ? new di(i) : null),
              o.origin && !1 !== n.autoLoad && o.load(),
              i &&
                i.length &&
                ((o.loaded = !0), o.onBlobLoaded(o.buffer.rawBinaryData)),
              o
            );
          }
          return (
            so(e, t),
            (e.prototype.onBlobLoaded = function (t) {}),
            (e.prototype.load = function () {
              return (
                (t = this),
                (e = void 0),
                (r = function () {
                  var t;
                  return (function (t, e) {
                    var n,
                      r,
                      i,
                      o,
                      a = {
                        label: 0,
                        sent: function () {
                          if (1 & i[0]) throw i[1];
                          return i[1];
                        },
                        trys: [],
                        ops: [],
                      };
                    return (
                      (o = { next: s(0), throw: s(1), return: s(2) }),
                      "function" == typeof Symbol &&
                        (o[Symbol.iterator] = function () {
                          return this;
                        }),
                      o
                    );
                    function s(o) {
                      return function (s) {
                        return (function (o) {
                          if (n)
                            throw new TypeError(
                              "Generator is already executing.",
                            );
                          for (; a; )
                            try {
                              if (
                                ((n = 1),
                                r &&
                                  (i =
                                    2 & o[0]
                                      ? r.return
                                      : o[0]
                                        ? r.throw ||
                                          ((i = r.return) && i.call(r), 0)
                                        : r.next) &&
                                  !(i = i.call(r, o[1])).done)
                              )
                                return i;
                              switch (
                                ((r = 0), i && (o = [2 & o[0], i.value]), o[0])
                              ) {
                                case 0:
                                case 1:
                                  i = o;
                                  break;
                                case 4:
                                  return a.label++, { value: o[1], done: !1 };
                                case 5:
                                  a.label++, (r = o[1]), (o = [0]);
                                  continue;
                                case 7:
                                  (o = a.ops.pop()), a.trys.pop();
                                  continue;
                                default:
                                  if (
                                    !(
                                      (i =
                                        (i = a.trys).length > 0 &&
                                        i[i.length - 1]) ||
                                      (6 !== o[0] && 2 !== o[0])
                                    )
                                  ) {
                                    a = 0;
                                    continue;
                                  }
                                  if (
                                    3 === o[0] &&
                                    (!i || (o[1] > i[0] && o[1] < i[3]))
                                  ) {
                                    a.label = o[1];
                                    break;
                                  }
                                  if (6 === o[0] && a.label < i[1]) {
                                    (a.label = i[1]), (i = o);
                                    break;
                                  }
                                  if (i && a.label < i[2]) {
                                    (a.label = i[2]), a.ops.push(o);
                                    break;
                                  }
                                  i[2] && a.ops.pop(), a.trys.pop();
                                  continue;
                              }
                              o = e.call(t, a);
                            } catch (t) {
                              (o = [6, t]), (r = 0);
                            } finally {
                              n = i = 0;
                            }
                          if (5 & o[0]) throw o[1];
                          return { value: o[0] ? o[1] : void 0, done: !0 };
                        })([o, s]);
                      };
                    }
                  })(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return [4, fetch(this.origin)];
                      case 1:
                        return [4, e.sent().blob()];
                      case 2:
                        return [4, e.sent().arrayBuffer()];
                      case 3:
                        return (
                          (t = e.sent()),
                          (this.data = new Uint32Array(t)),
                          (this.buffer = new di(t)),
                          (this.loaded = !0),
                          this.onBlobLoaded(t),
                          this.update(),
                          [2, this]
                        );
                    }
                  });
                }),
                new ((n = Promise) || (n = Promise))(function (i, o) {
                  function a(t) {
                    try {
                      l(r.next(t));
                    } catch (t) {
                      o(t);
                    }
                  }
                  function s(t) {
                    try {
                      l(r.throw(t));
                    } catch (t) {
                      o(t);
                    }
                  }
                  function l(t) {
                    var e;
                    t.done
                      ? i(t.value)
                      : ((e = t.value),
                        e instanceof n
                          ? e
                          : new n(function (t) {
                              t(e);
                            })).then(a, s);
                  }
                  l((r = r.apply(t, e || [])).next());
                })
              );
              var t, e, n, r;
            }),
            e
          );
        })(pn),
        co = (function (t) {
          function e(n, r) {
            var i = t.call(this, n, r) || this;
            return (
              (i.format = r.format),
              (i.levels = r.levels || 1),
              (i._width = r.width),
              (i._height = r.height),
              (i._extension = e._formatToExtension(i.format)),
              (r.levelBuffers || i.buffer) &&
                (i._levelBuffers =
                  r.levelBuffers ||
                  e._createLevelBuffers(
                    n instanceof Uint8Array ? n : i.buffer.uint8View,
                    i.format,
                    i.levels,
                    4,
                    4,
                    i.width,
                    i.height,
                  )),
              i
            );
          }
          return (
            so(e, t),
            (e.prototype.upload = function (t, e, n) {
              var r = t.gl;
              if (!t.context.extensions[this._extension])
                throw new Error(
                  this._extension +
                    " textures are not supported on the current machine",
                );
              if (!this._levelBuffers) return !1;
              for (var i = 0, o = this.levels; i < o; i++) {
                var a = this._levelBuffers[i],
                  s = a.levelID,
                  l = a.levelWidth,
                  u = a.levelHeight,
                  h = a.levelBuffer;
                r.compressedTexImage2D(
                  r.TEXTURE_2D,
                  s,
                  this.format,
                  l,
                  u,
                  0,
                  h,
                );
              }
              return !0;
            }),
            (e.prototype.onBlobLoaded = function () {
              this._levelBuffers = e._createLevelBuffers(
                this.buffer.uint8View,
                this.format,
                this.levels,
                4,
                4,
                this.width,
                this.height,
              );
            }),
            (e._formatToExtension = function (t) {
              if (t >= 33776 && t <= 33779) return "s3tc";
              if (t >= 37488 && t <= 37497) return "etc";
              if (t >= 35840 && t <= 35843) return "pvrtc";
              if (t >= 36196) return "etc1";
              if (t >= 35986 && t <= 34798) return "atc";
              throw new Error("Invalid (compressed) texture format given!");
            }),
            (e._createLevelBuffers = function (t, e, n, r, i, o, a) {
              for (
                var s = new Array(n),
                  l = t.byteOffset,
                  u = o,
                  h = a,
                  c = (u + r - 1) & ~(r - 1),
                  d = (h + i - 1) & ~(i - 1),
                  f = c * d * oo[e],
                  p = 0;
                p < n;
                p++
              )
                (s[p] = {
                  levelID: p,
                  levelWidth: n > 1 ? u : c,
                  levelHeight: n > 1 ? h : d,
                  levelBuffer: new Uint8Array(t.buffer, l, f),
                }),
                  (l += f),
                  (f =
                    (c = ((u = u >> 1 || 1) + r - 1) & ~(r - 1)) *
                    (d = ((h = h >> 1 || 1) + i - 1) & ~(i - 1)) *
                    oo[e]);
              return s;
            }),
            e
          );
        })(ho),
        fo = (function () {
          function t() {}
          return (
            (t.use = function (e, n) {
              var r = e.data;
              if (e.type === ji.TYPE.JSON && r && r.cacheID && r.textures) {
                for (
                  var i = r.textures,
                    o = void 0,
                    a = void 0,
                    s = 0,
                    l = i.length;
                  s < l;
                  s++
                ) {
                  var u = i[s],
                    h = u.src,
                    c = u.format;
                  if ((c || (a = h), t.textureFormats[c])) {
                    o = h;
                    break;
                  }
                }
                if (!(o = o || a))
                  return void n(
                    new Error(
                      "Cannot load compressed-textures in " +
                        e.url +
                        ", make sure you provide a fallback",
                    ),
                  );
                if (o === e.url)
                  return void n(
                    new Error(
                      "URL of compressed texture cannot be the same as the manifest's URL",
                    ),
                  );
                var d = {
                    crossOrigin: e.crossOrigin,
                    metadata: e.metadata.imageMetadata,
                    parentResource: e,
                  },
                  f = It.resolve(e.url.replace(this.baseUrl, ""), o),
                  p = r.cacheID;
                this.add(p, f, d, function (t) {
                  if (t.error) n(t.error);
                  else {
                    var r = t.texture,
                      i = void 0 === r ? null : r,
                      o = t.textures,
                      a = void 0 === o ? {} : o;
                    Object.assign(e, { texture: i, textures: a }), n();
                  }
                });
              } else n();
            }),
            Object.defineProperty(t, "textureExtensions", {
              get: function () {
                if (!t._textureExtensions) {
                  var e = document.createElement("canvas").getContext("webgl");
                  if (!e)
                    return (
                      console.warn(
                        "WebGL not available for compressed textures. Silently failing.",
                      ),
                      {}
                    );
                  var n = {
                    s3tc: e.getExtension("WEBGL_compressed_texture_s3tc"),
                    s3tc_sRGB: e.getExtension(
                      "WEBGL_compressed_texture_s3tc_srgb",
                    ),
                    etc: e.getExtension("WEBGL_compressed_texture_etc"),
                    etc1: e.getExtension("WEBGL_compressed_texture_etc1"),
                    pvrtc:
                      e.getExtension("WEBGL_compressed_texture_pvrtc") ||
                      e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
                    atc: e.getExtension("WEBGL_compressed_texture_atc"),
                    astc: e.getExtension("WEBGL_compressed_texture_astc"),
                  };
                  t._textureExtensions = n;
                }
                return t._textureExtensions;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "textureFormats", {
              get: function () {
                if (!t._textureFormats) {
                  var e = t.textureExtensions;
                  for (var n in ((t._textureFormats = {}), e)) {
                    var r = e[n];
                    r &&
                      Object.assign(
                        t._textureFormats,
                        Object.getPrototypeOf(r),
                      );
                  }
                }
                return t._textureFormats;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.extension = $e.Loader),
            t
          );
        })();
      function po(t, e, n) {
        var r = { textures: {}, texture: null };
        return e
          ? (e
              .map(function (t) {
                return new Nn(
                  new _n(
                    t,
                    Object.assign(
                      { mipmap: J.OFF, alphaMode: tt.NO_PREMULTIPLIED_ALPHA },
                      n,
                    ),
                  ),
                );
              })
              .forEach(function (e, n) {
                var i = e.baseTexture,
                  o = t + "-" + (n + 1);
                _n.addToCache(i, o),
                  Nn.addToCache(e, o),
                  0 === n &&
                    (_n.addToCache(i, t), Nn.addToCache(e, t), (r.texture = e)),
                  (r.textures[o] = e);
              }),
            r)
          : r;
      }
      var mo, _o;
      !(function (t) {
        (t[(t.DXGI_FORMAT_UNKNOWN = 0)] = "DXGI_FORMAT_UNKNOWN"),
          (t[(t.DXGI_FORMAT_R32G32B32A32_TYPELESS = 1)] =
            "DXGI_FORMAT_R32G32B32A32_TYPELESS"),
          (t[(t.DXGI_FORMAT_R32G32B32A32_FLOAT = 2)] =
            "DXGI_FORMAT_R32G32B32A32_FLOAT"),
          (t[(t.DXGI_FORMAT_R32G32B32A32_UINT = 3)] =
            "DXGI_FORMAT_R32G32B32A32_UINT"),
          (t[(t.DXGI_FORMAT_R32G32B32A32_SINT = 4)] =
            "DXGI_FORMAT_R32G32B32A32_SINT"),
          (t[(t.DXGI_FORMAT_R32G32B32_TYPELESS = 5)] =
            "DXGI_FORMAT_R32G32B32_TYPELESS"),
          (t[(t.DXGI_FORMAT_R32G32B32_FLOAT = 6)] =
            "DXGI_FORMAT_R32G32B32_FLOAT"),
          (t[(t.DXGI_FORMAT_R32G32B32_UINT = 7)] =
            "DXGI_FORMAT_R32G32B32_UINT"),
          (t[(t.DXGI_FORMAT_R32G32B32_SINT = 8)] =
            "DXGI_FORMAT_R32G32B32_SINT"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_TYPELESS = 9)] =
            "DXGI_FORMAT_R16G16B16A16_TYPELESS"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_FLOAT = 10)] =
            "DXGI_FORMAT_R16G16B16A16_FLOAT"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_UNORM = 11)] =
            "DXGI_FORMAT_R16G16B16A16_UNORM"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_UINT = 12)] =
            "DXGI_FORMAT_R16G16B16A16_UINT"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_SNORM = 13)] =
            "DXGI_FORMAT_R16G16B16A16_SNORM"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_SINT = 14)] =
            "DXGI_FORMAT_R16G16B16A16_SINT"),
          (t[(t.DXGI_FORMAT_R32G32_TYPELESS = 15)] =
            "DXGI_FORMAT_R32G32_TYPELESS"),
          (t[(t.DXGI_FORMAT_R32G32_FLOAT = 16)] = "DXGI_FORMAT_R32G32_FLOAT"),
          (t[(t.DXGI_FORMAT_R32G32_UINT = 17)] = "DXGI_FORMAT_R32G32_UINT"),
          (t[(t.DXGI_FORMAT_R32G32_SINT = 18)] = "DXGI_FORMAT_R32G32_SINT"),
          (t[(t.DXGI_FORMAT_R32G8X24_TYPELESS = 19)] =
            "DXGI_FORMAT_R32G8X24_TYPELESS"),
          (t[(t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT = 20)] =
            "DXGI_FORMAT_D32_FLOAT_S8X24_UINT"),
          (t[(t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS = 21)] =
            "DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS"),
          (t[(t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT = 22)] =
            "DXGI_FORMAT_X32_TYPELESS_G8X24_UINT"),
          (t[(t.DXGI_FORMAT_R10G10B10A2_TYPELESS = 23)] =
            "DXGI_FORMAT_R10G10B10A2_TYPELESS"),
          (t[(t.DXGI_FORMAT_R10G10B10A2_UNORM = 24)] =
            "DXGI_FORMAT_R10G10B10A2_UNORM"),
          (t[(t.DXGI_FORMAT_R10G10B10A2_UINT = 25)] =
            "DXGI_FORMAT_R10G10B10A2_UINT"),
          (t[(t.DXGI_FORMAT_R11G11B10_FLOAT = 26)] =
            "DXGI_FORMAT_R11G11B10_FLOAT"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_TYPELESS = 27)] =
            "DXGI_FORMAT_R8G8B8A8_TYPELESS"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_UNORM = 28)] =
            "DXGI_FORMAT_R8G8B8A8_UNORM"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB = 29)] =
            "DXGI_FORMAT_R8G8B8A8_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_UINT = 30)] = "DXGI_FORMAT_R8G8B8A8_UINT"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_SNORM = 31)] =
            "DXGI_FORMAT_R8G8B8A8_SNORM"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_SINT = 32)] = "DXGI_FORMAT_R8G8B8A8_SINT"),
          (t[(t.DXGI_FORMAT_R16G16_TYPELESS = 33)] =
            "DXGI_FORMAT_R16G16_TYPELESS"),
          (t[(t.DXGI_FORMAT_R16G16_FLOAT = 34)] = "DXGI_FORMAT_R16G16_FLOAT"),
          (t[(t.DXGI_FORMAT_R16G16_UNORM = 35)] = "DXGI_FORMAT_R16G16_UNORM"),
          (t[(t.DXGI_FORMAT_R16G16_UINT = 36)] = "DXGI_FORMAT_R16G16_UINT"),
          (t[(t.DXGI_FORMAT_R16G16_SNORM = 37)] = "DXGI_FORMAT_R16G16_SNORM"),
          (t[(t.DXGI_FORMAT_R16G16_SINT = 38)] = "DXGI_FORMAT_R16G16_SINT"),
          (t[(t.DXGI_FORMAT_R32_TYPELESS = 39)] = "DXGI_FORMAT_R32_TYPELESS"),
          (t[(t.DXGI_FORMAT_D32_FLOAT = 40)] = "DXGI_FORMAT_D32_FLOAT"),
          (t[(t.DXGI_FORMAT_R32_FLOAT = 41)] = "DXGI_FORMAT_R32_FLOAT"),
          (t[(t.DXGI_FORMAT_R32_UINT = 42)] = "DXGI_FORMAT_R32_UINT"),
          (t[(t.DXGI_FORMAT_R32_SINT = 43)] = "DXGI_FORMAT_R32_SINT"),
          (t[(t.DXGI_FORMAT_R24G8_TYPELESS = 44)] =
            "DXGI_FORMAT_R24G8_TYPELESS"),
          (t[(t.DXGI_FORMAT_D24_UNORM_S8_UINT = 45)] =
            "DXGI_FORMAT_D24_UNORM_S8_UINT"),
          (t[(t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS = 46)] =
            "DXGI_FORMAT_R24_UNORM_X8_TYPELESS"),
          (t[(t.DXGI_FORMAT_X24_TYPELESS_G8_UINT = 47)] =
            "DXGI_FORMAT_X24_TYPELESS_G8_UINT"),
          (t[(t.DXGI_FORMAT_R8G8_TYPELESS = 48)] = "DXGI_FORMAT_R8G8_TYPELESS"),
          (t[(t.DXGI_FORMAT_R8G8_UNORM = 49)] = "DXGI_FORMAT_R8G8_UNORM"),
          (t[(t.DXGI_FORMAT_R8G8_UINT = 50)] = "DXGI_FORMAT_R8G8_UINT"),
          (t[(t.DXGI_FORMAT_R8G8_SNORM = 51)] = "DXGI_FORMAT_R8G8_SNORM"),
          (t[(t.DXGI_FORMAT_R8G8_SINT = 52)] = "DXGI_FORMAT_R8G8_SINT"),
          (t[(t.DXGI_FORMAT_R16_TYPELESS = 53)] = "DXGI_FORMAT_R16_TYPELESS"),
          (t[(t.DXGI_FORMAT_R16_FLOAT = 54)] = "DXGI_FORMAT_R16_FLOAT"),
          (t[(t.DXGI_FORMAT_D16_UNORM = 55)] = "DXGI_FORMAT_D16_UNORM"),
          (t[(t.DXGI_FORMAT_R16_UNORM = 56)] = "DXGI_FORMAT_R16_UNORM"),
          (t[(t.DXGI_FORMAT_R16_UINT = 57)] = "DXGI_FORMAT_R16_UINT"),
          (t[(t.DXGI_FORMAT_R16_SNORM = 58)] = "DXGI_FORMAT_R16_SNORM"),
          (t[(t.DXGI_FORMAT_R16_SINT = 59)] = "DXGI_FORMAT_R16_SINT"),
          (t[(t.DXGI_FORMAT_R8_TYPELESS = 60)] = "DXGI_FORMAT_R8_TYPELESS"),
          (t[(t.DXGI_FORMAT_R8_UNORM = 61)] = "DXGI_FORMAT_R8_UNORM"),
          (t[(t.DXGI_FORMAT_R8_UINT = 62)] = "DXGI_FORMAT_R8_UINT"),
          (t[(t.DXGI_FORMAT_R8_SNORM = 63)] = "DXGI_FORMAT_R8_SNORM"),
          (t[(t.DXGI_FORMAT_R8_SINT = 64)] = "DXGI_FORMAT_R8_SINT"),
          (t[(t.DXGI_FORMAT_A8_UNORM = 65)] = "DXGI_FORMAT_A8_UNORM"),
          (t[(t.DXGI_FORMAT_R1_UNORM = 66)] = "DXGI_FORMAT_R1_UNORM"),
          (t[(t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP = 67)] =
            "DXGI_FORMAT_R9G9B9E5_SHAREDEXP"),
          (t[(t.DXGI_FORMAT_R8G8_B8G8_UNORM = 68)] =
            "DXGI_FORMAT_R8G8_B8G8_UNORM"),
          (t[(t.DXGI_FORMAT_G8R8_G8B8_UNORM = 69)] =
            "DXGI_FORMAT_G8R8_G8B8_UNORM"),
          (t[(t.DXGI_FORMAT_BC1_TYPELESS = 70)] = "DXGI_FORMAT_BC1_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC1_UNORM = 71)] = "DXGI_FORMAT_BC1_UNORM"),
          (t[(t.DXGI_FORMAT_BC1_UNORM_SRGB = 72)] =
            "DXGI_FORMAT_BC1_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_BC2_TYPELESS = 73)] = "DXGI_FORMAT_BC2_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC2_UNORM = 74)] = "DXGI_FORMAT_BC2_UNORM"),
          (t[(t.DXGI_FORMAT_BC2_UNORM_SRGB = 75)] =
            "DXGI_FORMAT_BC2_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_BC3_TYPELESS = 76)] = "DXGI_FORMAT_BC3_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC3_UNORM = 77)] = "DXGI_FORMAT_BC3_UNORM"),
          (t[(t.DXGI_FORMAT_BC3_UNORM_SRGB = 78)] =
            "DXGI_FORMAT_BC3_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_BC4_TYPELESS = 79)] = "DXGI_FORMAT_BC4_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC4_UNORM = 80)] = "DXGI_FORMAT_BC4_UNORM"),
          (t[(t.DXGI_FORMAT_BC4_SNORM = 81)] = "DXGI_FORMAT_BC4_SNORM"),
          (t[(t.DXGI_FORMAT_BC5_TYPELESS = 82)] = "DXGI_FORMAT_BC5_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC5_UNORM = 83)] = "DXGI_FORMAT_BC5_UNORM"),
          (t[(t.DXGI_FORMAT_BC5_SNORM = 84)] = "DXGI_FORMAT_BC5_SNORM"),
          (t[(t.DXGI_FORMAT_B5G6R5_UNORM = 85)] = "DXGI_FORMAT_B5G6R5_UNORM"),
          (t[(t.DXGI_FORMAT_B5G5R5A1_UNORM = 86)] =
            "DXGI_FORMAT_B5G5R5A1_UNORM"),
          (t[(t.DXGI_FORMAT_B8G8R8A8_UNORM = 87)] =
            "DXGI_FORMAT_B8G8R8A8_UNORM"),
          (t[(t.DXGI_FORMAT_B8G8R8X8_UNORM = 88)] =
            "DXGI_FORMAT_B8G8R8X8_UNORM"),
          (t[(t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM = 89)] =
            "DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM"),
          (t[(t.DXGI_FORMAT_B8G8R8A8_TYPELESS = 90)] =
            "DXGI_FORMAT_B8G8R8A8_TYPELESS"),
          (t[(t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB = 91)] =
            "DXGI_FORMAT_B8G8R8A8_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_B8G8R8X8_TYPELESS = 92)] =
            "DXGI_FORMAT_B8G8R8X8_TYPELESS"),
          (t[(t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB = 93)] =
            "DXGI_FORMAT_B8G8R8X8_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_BC6H_TYPELESS = 94)] = "DXGI_FORMAT_BC6H_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC6H_UF16 = 95)] = "DXGI_FORMAT_BC6H_UF16"),
          (t[(t.DXGI_FORMAT_BC6H_SF16 = 96)] = "DXGI_FORMAT_BC6H_SF16"),
          (t[(t.DXGI_FORMAT_BC7_TYPELESS = 97)] = "DXGI_FORMAT_BC7_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC7_UNORM = 98)] = "DXGI_FORMAT_BC7_UNORM"),
          (t[(t.DXGI_FORMAT_BC7_UNORM_SRGB = 99)] =
            "DXGI_FORMAT_BC7_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_AYUV = 100)] = "DXGI_FORMAT_AYUV"),
          (t[(t.DXGI_FORMAT_Y410 = 101)] = "DXGI_FORMAT_Y410"),
          (t[(t.DXGI_FORMAT_Y416 = 102)] = "DXGI_FORMAT_Y416"),
          (t[(t.DXGI_FORMAT_NV12 = 103)] = "DXGI_FORMAT_NV12"),
          (t[(t.DXGI_FORMAT_P010 = 104)] = "DXGI_FORMAT_P010"),
          (t[(t.DXGI_FORMAT_P016 = 105)] = "DXGI_FORMAT_P016"),
          (t[(t.DXGI_FORMAT_420_OPAQUE = 106)] = "DXGI_FORMAT_420_OPAQUE"),
          (t[(t.DXGI_FORMAT_YUY2 = 107)] = "DXGI_FORMAT_YUY2"),
          (t[(t.DXGI_FORMAT_Y210 = 108)] = "DXGI_FORMAT_Y210"),
          (t[(t.DXGI_FORMAT_Y216 = 109)] = "DXGI_FORMAT_Y216"),
          (t[(t.DXGI_FORMAT_NV11 = 110)] = "DXGI_FORMAT_NV11"),
          (t[(t.DXGI_FORMAT_AI44 = 111)] = "DXGI_FORMAT_AI44"),
          (t[(t.DXGI_FORMAT_IA44 = 112)] = "DXGI_FORMAT_IA44"),
          (t[(t.DXGI_FORMAT_P8 = 113)] = "DXGI_FORMAT_P8"),
          (t[(t.DXGI_FORMAT_A8P8 = 114)] = "DXGI_FORMAT_A8P8"),
          (t[(t.DXGI_FORMAT_B4G4R4A4_UNORM = 115)] =
            "DXGI_FORMAT_B4G4R4A4_UNORM"),
          (t[(t.DXGI_FORMAT_P208 = 116)] = "DXGI_FORMAT_P208"),
          (t[(t.DXGI_FORMAT_V208 = 117)] = "DXGI_FORMAT_V208"),
          (t[(t.DXGI_FORMAT_V408 = 118)] = "DXGI_FORMAT_V408"),
          (t[(t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE = 119)] =
            "DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE"),
          (t[(t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE = 120)] =
            "DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE"),
          (t[(t.DXGI_FORMAT_FORCE_UINT = 121)] = "DXGI_FORMAT_FORCE_UINT");
      })(mo || (mo = {})),
        (function (t) {
          (t[(t.DDS_DIMENSION_TEXTURE1D = 2)] = "DDS_DIMENSION_TEXTURE1D"),
            (t[(t.DDS_DIMENSION_TEXTURE2D = 3)] = "DDS_DIMENSION_TEXTURE2D"),
            (t[(t.DDS_DIMENSION_TEXTURE3D = 6)] = "DDS_DIMENSION_TEXTURE3D");
        })(_o || (_o = {}));
      var go,
        vo,
        yo,
        Eo =
          (((lo = {})[827611204] = ro.COMPRESSED_RGBA_S3TC_DXT1_EXT),
          (lo[861165636] = ro.COMPRESSED_RGBA_S3TC_DXT3_EXT),
          (lo[894720068] = ro.COMPRESSED_RGBA_S3TC_DXT5_EXT),
          lo),
        To =
          (((uo = {})[mo.DXGI_FORMAT_BC1_TYPELESS] =
            ro.COMPRESSED_RGBA_S3TC_DXT1_EXT),
          (uo[mo.DXGI_FORMAT_BC1_UNORM] = ro.COMPRESSED_RGBA_S3TC_DXT1_EXT),
          (uo[mo.DXGI_FORMAT_BC2_TYPELESS] = ro.COMPRESSED_RGBA_S3TC_DXT3_EXT),
          (uo[mo.DXGI_FORMAT_BC2_UNORM] = ro.COMPRESSED_RGBA_S3TC_DXT3_EXT),
          (uo[mo.DXGI_FORMAT_BC3_TYPELESS] = ro.COMPRESSED_RGBA_S3TC_DXT5_EXT),
          (uo[mo.DXGI_FORMAT_BC3_UNORM] = ro.COMPRESSED_RGBA_S3TC_DXT5_EXT),
          (uo[mo.DXGI_FORMAT_BC1_UNORM_SRGB] =
            ro.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT),
          (uo[mo.DXGI_FORMAT_BC2_UNORM_SRGB] =
            ro.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT),
          (uo[mo.DXGI_FORMAT_BC3_UNORM_SRGB] =
            ro.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT),
          uo),
        bo = [171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10],
        xo =
          (((go = {})[K.UNSIGNED_BYTE] = 1),
          (go[K.UNSIGNED_SHORT] = 2),
          (go[K.INT] = 4),
          (go[K.UNSIGNED_INT] = 4),
          (go[K.FLOAT] = 4),
          (go[K.HALF_FLOAT] = 8),
          go),
        So =
          (((vo = {})[Y.RGBA] = 4),
          (vo[Y.RGB] = 3),
          (vo[Y.RG] = 2),
          (vo[Y.RED] = 1),
          (vo[Y.LUMINANCE] = 1),
          (vo[Y.LUMINANCE_ALPHA] = 2),
          (vo[Y.ALPHA] = 1),
          vo),
        Mo =
          (((yo = {})[K.UNSIGNED_SHORT_4_4_4_4] = 2),
          (yo[K.UNSIGNED_SHORT_5_5_5_1] = 2),
          (yo[K.UNSIGNED_SHORT_5_6_5] = 2),
          yo);
      function Ao(t) {
        switch (t) {
          case Y.RGBA:
            return Y.RGBA_INTEGER;
          case Y.RGB:
            return Y.RGB_INTEGER;
          case Y.RG:
            return Y.RG_INTEGER;
          case Y.RED:
            return Y.RED_INTEGER;
          default:
            return t;
        }
      }
      ji.setExtensionXhrType("dds", ji.XHR_RESPONSE_TYPE.BUFFER);
      var Ro = (function () {
        function t() {}
        return (
          (t.use = function (t, e) {
            if ("dds" === t.extension && t.data)
              try {
                Object.assign(
                  t,
                  po(
                    t.name || t.url,
                    (function (t) {
                      var e = new Uint32Array(t);
                      if (542327876 !== e[0])
                        throw new Error("Invalid DDS file magic word");
                      var n = new Uint32Array(
                          t,
                          0,
                          124 / Uint32Array.BYTES_PER_ELEMENT,
                        ),
                        r = n[3],
                        i = n[4],
                        o = n[7],
                        a = new Uint32Array(
                          t,
                          19 * Uint32Array.BYTES_PER_ELEMENT,
                          32 / Uint32Array.BYTES_PER_ELEMENT,
                        ),
                        s = a[1];
                      if (4 & s) {
                        var l = a[2];
                        if (808540228 !== l) {
                          var u = Eo[l],
                            h = new Uint8Array(t, 128);
                          return [
                            new co(h, {
                              format: u,
                              width: i,
                              height: r,
                              levels: o,
                            }),
                          ];
                        }
                        var c = new Uint32Array(
                            e.buffer,
                            128,
                            20 / Uint32Array.BYTES_PER_ELEMENT,
                          ),
                          d = c[0],
                          f = c[1],
                          p = c[2],
                          m = c[3],
                          _ = To[d];
                        if (void 0 === _)
                          throw new Error(
                            "DDSParser cannot parse texture data with DXGI format " +
                              d,
                          );
                        if (4 === p)
                          throw new Error(
                            "DDSParser does not support cubemap textures",
                          );
                        if (f === _o.DDS_DIMENSION_TEXTURE3D)
                          throw new Error(
                            "DDSParser does not supported 3D texture data",
                          );
                        var g = new Array();
                        if (1 === m) g.push(new Uint8Array(t, 148));
                        else {
                          for (
                            var v = oo[_], y = 0, E = i, T = r, b = 0;
                            b < o;
                            b++
                          )
                            (y +=
                              Math.max(1, (E + 3) & -4) *
                              Math.max(1, (T + 3) & -4) *
                              v),
                              (E >>>= 1),
                              (T >>>= 1);
                          var x = 148;
                          for (b = 0; b < m; b++)
                            g.push(new Uint8Array(t, x, y)), (x += y);
                        }
                        return g.map(function (t) {
                          return new co(t, {
                            format: _,
                            width: i,
                            height: r,
                            levels: o,
                          });
                        });
                      }
                      if (64 & s)
                        throw new Error(
                          "DDSParser does not support uncompressed texture data.",
                        );
                      if (512 & s)
                        throw new Error(
                          "DDSParser does not supported YUV uncompressed texture data.",
                        );
                      if (131072 & s)
                        throw new Error(
                          "DDSParser does not support single-channel (lumninance) texture data!",
                        );
                      if (2 & s)
                        throw new Error(
                          "DDSParser does not support single-channel (alpha) texture data!",
                        );
                      throw new Error(
                        "DDSParser failed to load a texture file due to an unknown reason!",
                      );
                    })(t.data),
                    t.metadata,
                  ),
                );
              } catch (t) {
                return void e(t);
              }
            e();
          }),
          (t.extension = $e.Loader),
          t
        );
      })();
      ji.setExtensionXhrType("ktx", ji.XHR_RESPONSE_TYPE.BUFFER);
      var wo = (function () {
          function t() {}
          return (
            (t.use = function (t, e) {
              if ("ktx" === t.extension && t.data)
                try {
                  var n = t.name || t.url,
                    r = (function (t, e, n) {
                      void 0 === n && (n = !1);
                      var r = new DataView(e);
                      if (
                        !(function (t, e) {
                          for (var n = 0; n < bo.length; n++)
                            if (e.getUint8(n) !== bo[n])
                              return (
                                console.error(
                                  t + " is not a valid *.ktx file!",
                                ),
                                !1
                              );
                          return !0;
                        })(t, r)
                      )
                        return null;
                      var i = 67305985 === r.getUint32(12, !0),
                        o = r.getUint32(16, i),
                        a = r.getUint32(24, i),
                        s = r.getUint32(28, i),
                        l = r.getUint32(36, i),
                        u = r.getUint32(40, i) || 1,
                        h = r.getUint32(44, i) || 1,
                        c = r.getUint32(48, i) || 1,
                        d = r.getUint32(52, i),
                        f = r.getUint32(56, i),
                        p = r.getUint32(60, i);
                      if (0 === u || 1 !== h)
                        throw new Error("Only 2D textures are supported");
                      if (1 !== d)
                        throw new Error(
                          "CubeTextures are not supported by KTXLoader yet!",
                        );
                      if (1 !== c)
                        throw new Error(
                          "WebGL does not support array textures",
                        );
                      var m,
                        _ = (l + 3) & -4,
                        g = (u + 3) & -4,
                        v = new Array(c),
                        y = l * u;
                      if (
                        (0 === o && (y = _ * g),
                        void 0 ===
                          (m =
                            0 !== o ? (xo[o] ? xo[o] * So[a] : Mo[o]) : oo[s]))
                      )
                        throw new Error(
                          "Unable to resolve the pixel format stored in the *.ktx file!",
                        );
                      for (
                        var E = n
                            ? (function (t, e, n) {
                                for (var r = new Map(), i = 0; i < e; ) {
                                  var o = t.getUint32(64 + i, n),
                                    a = 64 + i + 4,
                                    s = 3 - ((o + 3) % 4);
                                  if (0 === o || o > e - i) {
                                    console.error(
                                      "KTXLoader: keyAndValueByteSize out of bounds",
                                    );
                                    break;
                                  }
                                  for (
                                    var l = 0;
                                    l < o && 0 !== t.getUint8(a + l);
                                    l++
                                  );
                                  if (-1 === l) {
                                    console.error(
                                      "KTXLoader: Failed to find null byte terminating kvData key",
                                    );
                                    break;
                                  }
                                  var u = new TextDecoder().decode(
                                      new Uint8Array(t.buffer, a, l),
                                    ),
                                    h = new DataView(
                                      t.buffer,
                                      a + l + 1,
                                      o - l - 1,
                                    );
                                  r.set(u, h), (i += 4 + o + s);
                                }
                                return r;
                              })(r, p, i)
                            : null,
                          T = y * m,
                          b = l,
                          x = u,
                          S = _,
                          M = g,
                          A = 64 + p,
                          R = 0;
                        R < f;
                        R++
                      ) {
                        for (
                          var w = r.getUint32(A, i), P = A + 4, I = 0;
                          I < c;
                          I++
                        ) {
                          var O = v[I];
                          O || (O = v[I] = new Array(f)),
                            (O[R] = {
                              levelID: R,
                              levelWidth: f > 1 || 0 !== o ? b : S,
                              levelHeight: f > 1 || 0 !== o ? x : M,
                              levelBuffer: new Uint8Array(e, P, T),
                            }),
                            (P += T);
                        }
                        (A = (A += w + 4) % 4 != 0 ? A + 4 - (A % 4) : A),
                          (T =
                            (S = ((b = b >> 1 || 1) + 4 - 1) & -4) *
                            (M = ((x = x >> 1 || 1) + 4 - 1) & -4) *
                            m);
                      }
                      return 0 !== o
                        ? {
                            uncompressed: v.map(function (t) {
                              var e = t[0].levelBuffer,
                                n = !1;
                              return (
                                o === K.FLOAT
                                  ? (e = new Float32Array(
                                      t[0].levelBuffer.buffer,
                                      t[0].levelBuffer.byteOffset,
                                      t[0].levelBuffer.byteLength / 4,
                                    ))
                                  : o === K.UNSIGNED_INT
                                    ? ((n = !0),
                                      (e = new Uint32Array(
                                        t[0].levelBuffer.buffer,
                                        t[0].levelBuffer.byteOffset,
                                        t[0].levelBuffer.byteLength / 4,
                                      )))
                                    : o === K.INT &&
                                      ((n = !0),
                                      (e = new Int32Array(
                                        t[0].levelBuffer.buffer,
                                        t[0].levelBuffer.byteOffset,
                                        t[0].levelBuffer.byteLength / 4,
                                      ))),
                                {
                                  resource: new pn(e, {
                                    width: t[0].levelWidth,
                                    height: t[0].levelHeight,
                                  }),
                                  type: o,
                                  format: n ? Ao(a) : a,
                                }
                              );
                            }),
                            kvData: E,
                          }
                        : {
                            compressed: v.map(function (t) {
                              return new co(null, {
                                format: s,
                                width: l,
                                height: u,
                                levels: f,
                                levelBuffers: t,
                              });
                            }),
                            kvData: E,
                          };
                    })(n, t.data, this.loadKeyValueData),
                    i = r.compressed,
                    o = r.uncompressed,
                    a = r.kvData;
                  if (i) {
                    var s = po(n, i, t.metadata);
                    if (a && s.textures)
                      for (var l in s.textures)
                        s.textures[l].baseTexture.ktxKeyValueData = a;
                    Object.assign(t, s);
                  } else if (o) {
                    var u = {};
                    o.forEach(function (t, e) {
                      var r = new Nn(
                          new _n(t.resource, {
                            mipmap: J.OFF,
                            alphaMode: tt.NO_PREMULTIPLIED_ALPHA,
                            type: t.type,
                            format: t.format,
                          }),
                        ),
                        i = n + "-" + (e + 1);
                      a && (r.baseTexture.ktxKeyValueData = a),
                        _n.addToCache(r.baseTexture, i),
                        Nn.addToCache(r, i),
                        0 === e &&
                          ((u[n] = r),
                          _n.addToCache(r.baseTexture, n),
                          Nn.addToCache(r, n)),
                        (u[i] = r);
                    }),
                      Object.assign(t, { textures: u });
                  }
                } catch (t) {
                  return void e(t);
                }
              e();
            }),
            (t.extension = $e.Loader),
            (t.loadKeyValueData = !1),
            t
          );
        })(),
        Po = function (t, e) {
          return (
            (Po =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            Po(t, e)
          );
        };
      function Io(t, e) {
        function n() {
          this.constructor = t;
        }
        Po(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n()));
      }
      !(function (t) {
        function e(e, n, r, i) {
          void 0 === e && (e = 1500),
            void 0 === r && (r = 16384),
            void 0 === i && (i = !1);
          var o = t.call(this) || this;
          return (
            r > 16384 && (r = 16384),
            (o._properties = [!1, !0, !1, !1, !1]),
            (o._maxSize = e),
            (o._batchSize = r),
            (o._buffers = null),
            (o._bufferUpdateIDs = []),
            (o._updateID = 0),
            (o.interactiveChildren = !1),
            (o.blendMode = W.NORMAL),
            (o.autoResize = i),
            (o.roundPixels = !0),
            (o.baseTexture = null),
            o.setProperties(n),
            (o._tint = 0),
            (o.tintRgb = new Float32Array(4)),
            (o.tint = 16777215),
            o
          );
        }
        Io(e, t),
          (e.prototype.setProperties = function (t) {
            t &&
              ((this._properties[0] =
                "vertices" in t || "scale" in t
                  ? !!t.vertices || !!t.scale
                  : this._properties[0]),
              (this._properties[1] =
                "position" in t ? !!t.position : this._properties[1]),
              (this._properties[2] =
                "rotation" in t ? !!t.rotation : this._properties[2]),
              (this._properties[3] =
                "uvs" in t ? !!t.uvs : this._properties[3]),
              (this._properties[4] =
                "tint" in t || "alpha" in t
                  ? !!t.tint || !!t.alpha
                  : this._properties[4]));
          }),
          (e.prototype.updateTransform = function () {
            this.displayObjectUpdateTransform();
          }),
          Object.defineProperty(e.prototype, "tint", {
            get: function () {
              return this._tint;
            },
            set: function (t) {
              (this._tint = t), Lt(t, this.tintRgb);
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.render = function (t) {
            var e = this;
            this.visible &&
              !(this.worldAlpha <= 0) &&
              this.children.length &&
              this.renderable &&
              (this.baseTexture ||
                ((this.baseTexture = this.children[0]._texture.baseTexture),
                this.baseTexture.valid ||
                  this.baseTexture.once("update", function () {
                    return e.onChildrenChange(0);
                  })),
              t.batch.setObjectRenderer(t.plugins.particle),
              t.plugins.particle.render(this));
          }),
          (e.prototype.onChildrenChange = function (t) {
            for (
              var e = Math.floor(t / this._batchSize);
              this._bufferUpdateIDs.length < e;

            )
              this._bufferUpdateIDs.push(0);
            this._bufferUpdateIDs[e] = ++this._updateID;
          }),
          (e.prototype.dispose = function () {
            if (this._buffers) {
              for (var t = 0; t < this._buffers.length; ++t)
                this._buffers[t].destroy();
              this._buffers = null;
            }
          }),
          (e.prototype.destroy = function (e) {
            t.prototype.destroy.call(this, e),
              this.dispose(),
              (this._properties = null),
              (this._buffers = null),
              (this._bufferUpdateIDs = null);
          });
      })(Qe);
      var Oo,
        Co,
        No = (function () {
          function t(t, e, n) {
            (this.geometry = new Vn()),
              (this.indexBuffer = null),
              (this.size = n),
              (this.dynamicProperties = []),
              (this.staticProperties = []);
            for (var r = 0; r < t.length; ++r) {
              var i = t[r];
              (i = {
                attributeName: i.attributeName,
                size: i.size,
                uploadFunction: i.uploadFunction,
                type: i.type || K.FLOAT,
                offset: i.offset,
              }),
                e[r]
                  ? this.dynamicProperties.push(i)
                  : this.staticProperties.push(i);
            }
            (this.staticStride = 0),
              (this.staticBuffer = null),
              (this.staticData = null),
              (this.staticDataUint32 = null),
              (this.dynamicStride = 0),
              (this.dynamicBuffer = null),
              (this.dynamicData = null),
              (this.dynamicDataUint32 = null),
              (this._updateID = 0),
              this.initBuffers();
          }
          return (
            (t.prototype.initBuffers = function () {
              var t = this.geometry,
                e = 0;
              (this.indexBuffer = new Bn(
                (function (t, e) {
                  void 0 === e && (e = null);
                  var n = 6 * t;
                  if ((e = e || new Uint16Array(n)).length !== n)
                    throw new Error(
                      "Out buffer length is incorrect, got " +
                        e.length +
                        " and expected " +
                        n,
                    );
                  for (var r = 0, i = 0; r < n; r += 6, i += 4)
                    (e[r + 0] = i + 0),
                      (e[r + 1] = i + 1),
                      (e[r + 2] = i + 2),
                      (e[r + 3] = i + 0),
                      (e[r + 4] = i + 2),
                      (e[r + 5] = i + 3);
                  return e;
                })(this.size),
                !0,
                !0,
              )),
                t.addIndex(this.indexBuffer),
                (this.dynamicStride = 0);
              for (var n = 0; n < this.dynamicProperties.length; ++n)
                ((a = this.dynamicProperties[n]).offset = e),
                  (e += a.size),
                  (this.dynamicStride += a.size);
              var r = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
              (this.dynamicData = new Float32Array(r)),
                (this.dynamicDataUint32 = new Uint32Array(r)),
                (this.dynamicBuffer = new Bn(this.dynamicData, !1, !1));
              var i = 0;
              for (
                this.staticStride = 0, n = 0;
                n < this.staticProperties.length;
                ++n
              )
                ((a = this.staticProperties[n]).offset = i),
                  (i += a.size),
                  (this.staticStride += a.size);
              var o = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
              for (
                this.staticData = new Float32Array(o),
                  this.staticDataUint32 = new Uint32Array(o),
                  this.staticBuffer = new Bn(this.staticData, !0, !1),
                  n = 0;
                n < this.dynamicProperties.length;
                ++n
              ) {
                var a = this.dynamicProperties[n];
                t.addAttribute(
                  a.attributeName,
                  this.dynamicBuffer,
                  0,
                  a.type === K.UNSIGNED_BYTE,
                  a.type,
                  4 * this.dynamicStride,
                  4 * a.offset,
                );
              }
              for (n = 0; n < this.staticProperties.length; ++n)
                (a = this.staticProperties[n]),
                  t.addAttribute(
                    a.attributeName,
                    this.staticBuffer,
                    0,
                    a.type === K.UNSIGNED_BYTE,
                    a.type,
                    4 * this.staticStride,
                    4 * a.offset,
                  );
            }),
            (t.prototype.uploadDynamic = function (t, e, n) {
              for (var r = 0; r < this.dynamicProperties.length; r++) {
                var i = this.dynamicProperties[r];
                i.uploadFunction(
                  t,
                  e,
                  n,
                  i.type === K.UNSIGNED_BYTE
                    ? this.dynamicDataUint32
                    : this.dynamicData,
                  this.dynamicStride,
                  i.offset,
                );
              }
              this.dynamicBuffer._updateID++;
            }),
            (t.prototype.uploadStatic = function (t, e, n) {
              for (var r = 0; r < this.staticProperties.length; r++) {
                var i = this.staticProperties[r];
                i.uploadFunction(
                  t,
                  e,
                  n,
                  i.type === K.UNSIGNED_BYTE
                    ? this.staticDataUint32
                    : this.staticData,
                  this.staticStride,
                  i.offset,
                );
              }
              this.staticBuffer._updateID++;
            }),
            (t.prototype.destroy = function () {
              (this.indexBuffer = null),
                (this.dynamicProperties = null),
                (this.dynamicBuffer = null),
                (this.dynamicData = null),
                (this.dynamicDataUint32 = null),
                (this.staticProperties = null),
                (this.staticBuffer = null),
                (this.staticData = null),
                (this.staticDataUint32 = null),
                this.geometry.destroy();
            }),
            t
          );
        })(),
        Lo = (function (t) {
          function e(e) {
            var n = t.call(this, e) || this;
            return (
              (n.shader = null),
              (n.properties = null),
              (n.tempMatrix = new me()),
              (n.properties = [
                {
                  attributeName: "aVertexPosition",
                  size: 2,
                  uploadFunction: n.uploadVertices,
                  offset: 0,
                },
                {
                  attributeName: "aPositionCoord",
                  size: 2,
                  uploadFunction: n.uploadPosition,
                  offset: 0,
                },
                {
                  attributeName: "aRotation",
                  size: 1,
                  uploadFunction: n.uploadRotation,
                  offset: 0,
                },
                {
                  attributeName: "aTextureCoord",
                  size: 2,
                  uploadFunction: n.uploadUvs,
                  offset: 0,
                },
                {
                  attributeName: "aColor",
                  size: 1,
                  type: K.UNSIGNED_BYTE,
                  uploadFunction: n.uploadTint,
                  offset: 0,
                },
              ]),
              (n.shader = Ir.from(
                "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n",
                "varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",
                {},
              )),
              (n.state = Or.for2d()),
              n
            );
          }
          return (
            Io(e, t),
            (e.prototype.render = function (t) {
              var e = t.children,
                n = t._maxSize,
                r = t._batchSize,
                i = this.renderer,
                o = e.length;
              if (0 !== o) {
                o > n && !t.autoResize && (o = n);
                var a = t._buffers;
                a || (a = t._buffers = this.generateBuffers(t));
                var s = e[0]._texture.baseTexture,
                  l = s.alphaMode > 0;
                (this.state.blendMode = Bt(t.blendMode, l)),
                  i.state.set(this.state);
                var u,
                  h,
                  c,
                  d,
                  f = i.gl,
                  p = t.worldTransform.copyTo(this.tempMatrix);
                p.prepend(i.globalUniforms.uniforms.projectionMatrix),
                  (this.shader.uniforms.translationMatrix = p.toArray(!0)),
                  (this.shader.uniforms.uColor =
                    ((u = t.tintRgb),
                    (h = t.worldAlpha),
                    (d = l),
                    (c =
                      (c = this.shader.uniforms.uColor) || new Float32Array(4)),
                    d || void 0 === d
                      ? ((c[0] = u[0] * h),
                        (c[1] = u[1] * h),
                        (c[2] = u[2] * h))
                      : ((c[0] = u[0]), (c[1] = u[1]), (c[2] = u[2])),
                    (c[3] = h),
                    c)),
                  (this.shader.uniforms.uSampler = s),
                  this.renderer.shader.bind(this.shader);
                for (var m = !1, _ = 0, g = 0; _ < o; _ += r, g += 1) {
                  var v = o - _;
                  v > r && (v = r),
                    g >= a.length && a.push(this._generateOneMoreBuffer(t));
                  var y = a[g];
                  y.uploadDynamic(e, _, v);
                  var E = t._bufferUpdateIDs[g] || 0;
                  (m = m || y._updateID < E) &&
                    ((y._updateID = t._updateID), y.uploadStatic(e, _, v)),
                    i.geometry.bind(y.geometry),
                    f.drawElements(f.TRIANGLES, 6 * v, f.UNSIGNED_SHORT, 0);
                }
              }
            }),
            (e.prototype.generateBuffers = function (t) {
              for (
                var e = [],
                  n = t._maxSize,
                  r = t._batchSize,
                  i = t._properties,
                  o = 0;
                o < n;
                o += r
              )
                e.push(new No(this.properties, i, r));
              return e;
            }),
            (e.prototype._generateOneMoreBuffer = function (t) {
              var e = t._batchSize,
                n = t._properties;
              return new No(this.properties, n, e);
            }),
            (e.prototype.uploadVertices = function (t, e, n, r, i, o) {
              for (var a = 0, s = 0, l = 0, u = 0, h = 0; h < n; ++h) {
                var c = t[e + h],
                  d = c._texture,
                  f = c.scale.x,
                  p = c.scale.y,
                  m = d.trim,
                  _ = d.orig;
                m
                  ? ((a = (s = m.x - c.anchor.x * _.width) + m.width),
                    (l = (u = m.y - c.anchor.y * _.height) + m.height))
                  : ((a = _.width * (1 - c.anchor.x)),
                    (s = _.width * -c.anchor.x),
                    (l = _.height * (1 - c.anchor.y)),
                    (u = _.height * -c.anchor.y)),
                  (r[o] = s * f),
                  (r[o + 1] = u * p),
                  (r[o + i] = a * f),
                  (r[o + i + 1] = u * p),
                  (r[o + 2 * i] = a * f),
                  (r[o + 2 * i + 1] = l * p),
                  (r[o + 3 * i] = s * f),
                  (r[o + 3 * i + 1] = l * p),
                  (o += 4 * i);
              }
            }),
            (e.prototype.uploadPosition = function (t, e, n, r, i, o) {
              for (var a = 0; a < n; a++) {
                var s = t[e + a].position;
                (r[o] = s.x),
                  (r[o + 1] = s.y),
                  (r[o + i] = s.x),
                  (r[o + i + 1] = s.y),
                  (r[o + 2 * i] = s.x),
                  (r[o + 2 * i + 1] = s.y),
                  (r[o + 3 * i] = s.x),
                  (r[o + 3 * i + 1] = s.y),
                  (o += 4 * i);
              }
            }),
            (e.prototype.uploadRotation = function (t, e, n, r, i, o) {
              for (var a = 0; a < n; a++) {
                var s = t[e + a].rotation;
                (r[o] = s),
                  (r[o + i] = s),
                  (r[o + 2 * i] = s),
                  (r[o + 3 * i] = s),
                  (o += 4 * i);
              }
            }),
            (e.prototype.uploadUvs = function (t, e, n, r, i, o) {
              for (var a = 0; a < n; ++a) {
                var s = t[e + a]._texture._uvs;
                s
                  ? ((r[o] = s.x0),
                    (r[o + 1] = s.y0),
                    (r[o + i] = s.x1),
                    (r[o + i + 1] = s.y1),
                    (r[o + 2 * i] = s.x2),
                    (r[o + 2 * i + 1] = s.y2),
                    (r[o + 3 * i] = s.x3),
                    (r[o + 3 * i + 1] = s.y3),
                    (o += 4 * i))
                  : ((r[o] = 0),
                    (r[o + 1] = 0),
                    (r[o + i] = 0),
                    (r[o + i + 1] = 0),
                    (r[o + 2 * i] = 0),
                    (r[o + 2 * i + 1] = 0),
                    (r[o + 3 * i] = 0),
                    (r[o + 3 * i + 1] = 0),
                    (o += 4 * i));
              }
            }),
            (e.prototype.uploadTint = function (t, e, n, r, i, o) {
              for (var a = 0; a < n; ++a) {
                var s = t[e + a],
                  l = s._texture.baseTexture.alphaMode > 0,
                  u = s.alpha,
                  h =
                    u < 1 && l
                      ? Gt(s._tintRGB, u)
                      : s._tintRGB + ((255 * u) << 24);
                (r[o] = h),
                  (r[o + i] = h),
                  (r[o + 2 * i] = h),
                  (r[o + 3 * i] = h),
                  (o += 4 * i);
              }
            }),
            (e.prototype.destroy = function () {
              t.prototype.destroy.call(this),
                this.shader && (this.shader.destroy(), (this.shader = null)),
                (this.tempMatrix = null);
            }),
            (e.extension = { name: "particle", type: $e.RendererPlugin }),
            e
          );
        })($n);
      !(function (t) {
        (t.MITER = "miter"), (t.BEVEL = "bevel"), (t.ROUND = "round");
      })(Oo || (Oo = {})),
        (function (t) {
          (t.BUTT = "butt"), (t.ROUND = "round"), (t.SQUARE = "square");
        })(Co || (Co = {}));
      var Do = {
          adaptive: !0,
          maxLength: 10,
          minSegments: 8,
          maxSegments: 2048,
          epsilon: 1e-4,
          _segmentsCount: function (t, e) {
            if ((void 0 === e && (e = 20), !this.adaptive || !t || isNaN(t)))
              return e;
            var n = Math.ceil(t / this.maxLength);
            return (
              n < this.minSegments
                ? (n = this.minSegments)
                : n > this.maxSegments && (n = this.maxSegments),
              n
            );
          },
        },
        Uo = (function () {
          function t() {
            (this.color = 16777215),
              (this.alpha = 1),
              (this.texture = Nn.WHITE),
              (this.matrix = null),
              (this.visible = !1),
              this.reset();
          }
          return (
            (t.prototype.clone = function () {
              var e = new t();
              return (
                (e.color = this.color),
                (e.alpha = this.alpha),
                (e.texture = this.texture),
                (e.matrix = this.matrix),
                (e.visible = this.visible),
                e
              );
            }),
            (t.prototype.reset = function () {
              (this.color = 16777215),
                (this.alpha = 1),
                (this.texture = Nn.WHITE),
                (this.matrix = null),
                (this.visible = !1);
            }),
            (t.prototype.destroy = function () {
              (this.texture = null), (this.matrix = null);
            }),
            t
          );
        })(),
        Fo = function (t, e) {
          return (
            (Fo =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            Fo(t, e)
          );
        };
      function Bo(t, e) {
        function n() {
          this.constructor = t;
        }
        Fo(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n()));
      }
      function Go(t, e) {
        var n, r;
        void 0 === e && (e = !1);
        var i = t.length;
        if (!(i < 6)) {
          for (var o = 0, a = 0, s = t[i - 2], l = t[i - 1]; a < i; a += 2) {
            var u = t[a],
              h = t[a + 1];
            (o += (u - s) * (h + l)), (s = u), (l = h);
          }
          if ((!e && o > 0) || (e && o <= 0)) {
            var c = i / 2;
            for (a = c + (c % 2); a < i; a += 2) {
              var d = i - a - 2,
                f = i - a - 1,
                p = a,
                m = a + 1;
              (n = [t[p], t[d]]),
                (t[d] = n[0]),
                (t[p] = n[1]),
                (r = [t[m], t[f]]),
                (t[f] = r[0]),
                (t[m] = r[1]);
            }
          }
        }
      }
      var ko = {
          build: function (t) {
            t.points = t.shape.points.slice();
          },
          triangulate: function (t, e) {
            var n = t.points,
              r = t.holes,
              i = e.points,
              o = e.indices;
            if (n.length >= 6) {
              Go(n, !1);
              for (var a = [], s = 0; s < r.length; s++) {
                var l = r[s];
                Go(l.points, !0),
                  a.push(n.length / 2),
                  (n = n.concat(l.points));
              }
              var u = wt(n, a, 2);
              if (!u) return;
              var h = i.length / 2;
              for (s = 0; s < u.length; s += 3)
                o.push(u[s] + h), o.push(u[s + 1] + h), o.push(u[s + 2] + h);
              for (s = 0; s < n.length; s++) i.push(n[s]);
            }
          },
        },
        Ho = {
          build: function (t) {
            var e,
              n,
              r,
              i,
              o,
              a,
              s = t.points;
            if (t.type === re.CIRC) {
              var l = t.shape;
              (e = l.x), (n = l.y), (o = a = l.radius), (r = i = 0);
            } else if (t.type === re.ELIP) {
              var u = t.shape;
              (e = u.x), (n = u.y), (o = u.width), (a = u.height), (r = i = 0);
            } else {
              var h = t.shape,
                c = h.width / 2,
                d = h.height / 2;
              (e = h.x + c),
                (n = h.y + d),
                (r =
                  c -
                  (o = a = Math.max(0, Math.min(h.radius, Math.min(c, d))))),
                (i = d - a);
            }
            if (o >= 0 && a >= 0 && r >= 0 && i >= 0) {
              var f = Math.ceil(2.3 * Math.sqrt(o + a)),
                p = 8 * f + (r ? 4 : 0) + (i ? 4 : 0);
              if (((s.length = p), 0 !== p)) {
                if (0 === f)
                  return (
                    (s.length = 8),
                    (s[0] = s[6] = e + r),
                    (s[1] = s[3] = n + i),
                    (s[2] = s[4] = e - r),
                    void (s[5] = s[7] = n - i)
                  );
                var m,
                  _,
                  g = 0,
                  v = 4 * f + (r ? 2 : 0) + 2,
                  y = v,
                  E = p,
                  T = e + (m = r + o),
                  b = e - m,
                  x = n + (_ = i);
                if (
                  ((s[g++] = T), (s[g++] = x), (s[--v] = x), (s[--v] = b), i)
                ) {
                  var S = n - _;
                  (s[y++] = b), (s[y++] = S), (s[--E] = S), (s[--E] = T);
                }
                for (var M = 1; M < f; M++) {
                  var A = (Math.PI / 2) * (M / f);
                  (T = e + (m = r + Math.cos(A) * o)),
                    (b = e - m),
                    (x = n + (_ = i + Math.sin(A) * a)),
                    (S = n - _),
                    (s[g++] = T),
                    (s[g++] = x),
                    (s[--v] = x),
                    (s[--v] = b),
                    (s[y++] = b),
                    (s[y++] = S),
                    (s[--E] = S),
                    (s[--E] = T);
                }
                (T = e + (m = r)),
                  (b = e - m),
                  (x = n + (_ = i + a)),
                  (S = n - _),
                  (s[g++] = T),
                  (s[g++] = x),
                  (s[--E] = S),
                  (s[--E] = T),
                  r && ((s[g++] = b), (s[g++] = x), (s[--E] = S), (s[--E] = b));
              }
            } else s.length = 0;
          },
          triangulate: function (t, e) {
            var n = t.points,
              r = e.points,
              i = e.indices;
            if (0 !== n.length) {
              var o,
                a,
                s = r.length / 2,
                l = s;
              if (t.type !== re.RREC) {
                var u = t.shape;
                (o = u.x), (a = u.y);
              } else {
                var h = t.shape;
                (o = h.x + h.width / 2), (a = h.y + h.height / 2);
              }
              var c = t.matrix;
              r.push(
                t.matrix ? c.a * o + c.c * a + c.tx : o,
                t.matrix ? c.b * o + c.d * a + c.ty : a,
              ),
                s++,
                r.push(n[0], n[1]);
              for (var d = 2; d < n.length; d += 2)
                r.push(n[d], n[d + 1]), i.push(s++, l, s);
              i.push(l + 1, l, s);
            }
          },
        };
      function zo(t, e, n) {
        return t + (e - t) * n;
      }
      function Vo(t, e, n, r, i, o, a) {
        void 0 === a && (a = []);
        for (
          var s = a, l = 0, u = 0, h = 0, c = 0, d = 0, f = 0, p = 0, m = 0;
          p <= 20;
          ++p
        )
          (l = zo(t, n, (m = p / 20))),
            (u = zo(e, r, m)),
            (h = zo(n, i, m)),
            (c = zo(r, o, m)),
            (d = zo(l, h, m)),
            (f = zo(u, c, m)),
            (0 === p && s[s.length - 2] === d && s[s.length - 1] === f) ||
              s.push(d, f);
        return s;
      }
      var Xo = {
        build: function (t) {
          if (ua.nextRoundedRectBehavior) Ho.build(t);
          else {
            var e = t.shape,
              n = t.points,
              r = e.x,
              i = e.y,
              o = e.width,
              a = e.height,
              s = Math.max(0, Math.min(e.radius, Math.min(o, a) / 2));
            (n.length = 0),
              s
                ? (Vo(r, i + s, r, i, r + s, i, n),
                  Vo(r + o - s, i, r + o, i, r + o, i + s, n),
                  Vo(r + o, i + a - s, r + o, i + a, r + o - s, i + a, n),
                  Vo(r + s, i + a, r, i + a, r, i + a - s, n))
                : n.push(r, i, r + o, i, r + o, i + a, r, i + a);
          }
        },
        triangulate: function (t, e) {
          if (ua.nextRoundedRectBehavior) Ho.triangulate(t, e);
          else {
            for (
              var n = t.points,
                r = e.points,
                i = e.indices,
                o = r.length / 2,
                a = wt(n, null, 2),
                s = 0,
                l = a.length;
              s < l;
              s += 3
            )
              i.push(a[s] + o), i.push(a[s + 1] + o), i.push(a[s + 2] + o);
            for (s = 0, l = n.length; s < l; s++) r.push(n[s], n[++s]);
          }
        },
      };
      function Wo(t, e, n, r, i, o, a, s) {
        var l, u;
        a ? ((l = r), (u = -n)) : ((l = -r), (u = n));
        var h = t - n * i + l,
          c = e - r * i + u,
          d = t + n * o + l,
          f = e + r * o + u;
        return s.push(h, c), s.push(d, f), 2;
      }
      function jo(t, e, n, r, i, o, a, s) {
        var l = n - t,
          u = r - e,
          h = Math.atan2(l, u),
          c = Math.atan2(i - t, o - e);
        s && h < c ? (h += 2 * Math.PI) : !s && h > c && (c += 2 * Math.PI);
        var d = h,
          f = c - h,
          p = Math.abs(f),
          m = Math.sqrt(l * l + u * u),
          _ = 1 + (((15 * p * Math.sqrt(m)) / Math.PI) >> 0),
          g = f / _;
        if (((d += g), s)) {
          a.push(t, e), a.push(n, r);
          for (var v = 1, y = d; v < _; v++, y += g)
            a.push(t, e), a.push(t + Math.sin(y) * m, e + Math.cos(y) * m);
          a.push(t, e), a.push(i, o);
        } else {
          for (a.push(n, r), a.push(t, e), v = 1, y = d; v < _; v++, y += g)
            a.push(t + Math.sin(y) * m, e + Math.cos(y) * m), a.push(t, e);
          a.push(i, o), a.push(t, e);
        }
        return 2 * _;
      }
      function Yo(t, e) {
        t.lineStyle.native
          ? (function (t, e) {
              var n = 0,
                r = t.shape,
                i = t.points || r.points,
                o = r.type !== re.POLY || r.closeStroke;
              if (0 !== i.length) {
                var a = e.points,
                  s = e.indices,
                  l = i.length / 2,
                  u = a.length / 2,
                  h = u;
                for (a.push(i[0], i[1]), n = 1; n < l; n++)
                  a.push(i[2 * n], i[2 * n + 1]), s.push(h, h + 1), h++;
                o && s.push(h, u);
              }
            })(t, e)
          : (function (t, e) {
              var n = t.shape,
                r = t.points || n.points.slice(),
                i = e.closePointEps;
              if (0 !== r.length) {
                var o = t.lineStyle,
                  a = new se(r[0], r[1]),
                  s = new se(r[r.length - 2], r[r.length - 1]),
                  l = n.type !== re.POLY || n.closeStroke,
                  u = Math.abs(a.x - s.x) < i && Math.abs(a.y - s.y) < i;
                if (l) {
                  (r = r.slice()),
                    u &&
                      (r.pop(),
                      r.pop(),
                      s.set(r[r.length - 2], r[r.length - 1]));
                  var h = 0.5 * (a.x + s.x),
                    c = 0.5 * (s.y + a.y);
                  r.unshift(h, c), r.push(h, c);
                }
                var d = e.points,
                  f = r.length / 2,
                  p = r.length,
                  m = d.length / 2,
                  _ = o.width / 2,
                  g = _ * _,
                  v = o.miterLimit * o.miterLimit,
                  y = r[0],
                  E = r[1],
                  T = r[2],
                  b = r[3],
                  x = 0,
                  S = 0,
                  M = -(E - b),
                  A = y - T,
                  R = 0,
                  w = 0,
                  P = Math.sqrt(M * M + A * A);
                (M /= P), (A /= P), (M *= _), (A *= _);
                var I = o.alignment,
                  O = 2 * (1 - I),
                  C = 2 * I;
                l ||
                  (o.cap === Co.ROUND
                    ? (p +=
                        jo(
                          y - M * (O - C) * 0.5,
                          E - A * (O - C) * 0.5,
                          y - M * O,
                          E - A * O,
                          y + M * C,
                          E + A * C,
                          d,
                          !0,
                        ) + 2)
                    : o.cap === Co.SQUARE &&
                      (p += Wo(y, E, M, A, O, C, !0, d))),
                  d.push(y - M * O, E - A * O),
                  d.push(y + M * C, E + A * C);
                for (var N = 1; N < f - 1; ++N) {
                  (y = r[2 * (N - 1)]),
                    (E = r[2 * (N - 1) + 1]),
                    (T = r[2 * N]),
                    (b = r[2 * N + 1]),
                    (x = r[2 * (N + 1)]),
                    (S = r[2 * (N + 1) + 1]),
                    (M = -(E - b)),
                    (A = y - T),
                    (M /= P = Math.sqrt(M * M + A * A)),
                    (A /= P),
                    (M *= _),
                    (A *= _),
                    (R = -(b - S)),
                    (w = T - x),
                    (R /= P = Math.sqrt(R * R + w * w)),
                    (w /= P),
                    (R *= _),
                    (w *= _);
                  var L = T - y,
                    D = E - b,
                    U = T - x,
                    F = S - b,
                    B = D * U - F * L,
                    G = B < 0;
                  if (Math.abs(B) < 0.1)
                    d.push(T - M * O, b - A * O), d.push(T + M * C, b + A * C);
                  else {
                    var k = (-M + y) * (-A + b) - (-M + T) * (-A + E),
                      H = (-R + x) * (-w + b) - (-R + T) * (-w + S),
                      z = (L * H - U * k) / B,
                      V = (F * k - D * H) / B,
                      X = (z - T) * (z - T) + (V - b) * (V - b),
                      W = T + (z - T) * O,
                      j = b + (V - b) * O,
                      Y = T - (z - T) * C,
                      q = b - (V - b) * C,
                      K = G ? O : C;
                    X <= Math.min(L * L + D * D, U * U + F * F) + K * K * g
                      ? o.join === Oo.BEVEL || X / g > v
                        ? (G
                            ? (d.push(W, j),
                              d.push(T + M * C, b + A * C),
                              d.push(W, j),
                              d.push(T + R * C, b + w * C))
                            : (d.push(T - M * O, b - A * O),
                              d.push(Y, q),
                              d.push(T - R * O, b - w * O),
                              d.push(Y, q)),
                          (p += 2))
                        : o.join === Oo.ROUND
                          ? G
                            ? (d.push(W, j),
                              d.push(T + M * C, b + A * C),
                              (p +=
                                jo(
                                  T,
                                  b,
                                  T + M * C,
                                  b + A * C,
                                  T + R * C,
                                  b + w * C,
                                  d,
                                  !0,
                                ) + 4),
                              d.push(W, j),
                              d.push(T + R * C, b + w * C))
                            : (d.push(T - M * O, b - A * O),
                              d.push(Y, q),
                              (p +=
                                jo(
                                  T,
                                  b,
                                  T - M * O,
                                  b - A * O,
                                  T - R * O,
                                  b - w * O,
                                  d,
                                  !1,
                                ) + 4),
                              d.push(T - R * O, b - w * O),
                              d.push(Y, q))
                          : (d.push(W, j), d.push(Y, q))
                      : (d.push(T - M * O, b - A * O),
                        d.push(T + M * C, b + A * C),
                        o.join === Oo.ROUND
                          ? (p += G
                              ? jo(
                                  T,
                                  b,
                                  T + M * C,
                                  b + A * C,
                                  T + R * C,
                                  b + w * C,
                                  d,
                                  !0,
                                ) + 2
                              : jo(
                                  T,
                                  b,
                                  T - M * O,
                                  b - A * O,
                                  T - R * O,
                                  b - w * O,
                                  d,
                                  !1,
                                ) + 2)
                          : o.join === Oo.MITER &&
                            X / g <= v &&
                            (G
                              ? (d.push(Y, q), d.push(Y, q))
                              : (d.push(W, j), d.push(W, j)),
                            (p += 2)),
                        d.push(T - R * O, b - w * O),
                        d.push(T + R * C, b + w * C),
                        (p += 2));
                  }
                }
                (y = r[2 * (f - 2)]),
                  (E = r[2 * (f - 2) + 1]),
                  (T = r[2 * (f - 1)]),
                  (M = -(E - (b = r[2 * (f - 1) + 1]))),
                  (A = y - T),
                  (M /= P = Math.sqrt(M * M + A * A)),
                  (A /= P),
                  (M *= _),
                  (A *= _),
                  d.push(T - M * O, b - A * O),
                  d.push(T + M * C, b + A * C),
                  l ||
                    (o.cap === Co.ROUND
                      ? (p +=
                          jo(
                            T - M * (O - C) * 0.5,
                            b - A * (O - C) * 0.5,
                            T - M * O,
                            b - A * O,
                            T + M * C,
                            b + A * C,
                            d,
                            !1,
                          ) + 2)
                      : o.cap === Co.SQUARE &&
                        (p += Wo(T, b, M, A, O, C, !1, d)));
                var Z = e.indices,
                  Q = Do.epsilon * Do.epsilon;
                for (N = m; N < p + m - 2; ++N)
                  (y = d[2 * N]),
                    (E = d[2 * N + 1]),
                    (T = d[2 * (N + 1)]),
                    (b = d[2 * (N + 1) + 1]),
                    (x = d[2 * (N + 2)]),
                    (S = d[2 * (N + 2) + 1]),
                    Math.abs(y * (b - S) + T * (S - E) + x * (E - b)) < Q ||
                      Z.push(N, N + 1, N + 2);
              }
            })(t, e);
      }
      var qo,
        Ko,
        Zo = (function () {
          function t() {}
          return (
            (t.curveTo = function (t, e, n, r, i, o) {
              var a = o[o.length - 2],
                s = o[o.length - 1] - e,
                l = a - t,
                u = r - e,
                h = n - t,
                c = Math.abs(s * h - l * u);
              if (c < 1e-8 || 0 === i)
                return (
                  (o[o.length - 2] === t && o[o.length - 1] === e) ||
                    o.push(t, e),
                  null
                );
              var d = s * s + l * l,
                f = u * u + h * h,
                p = s * u + l * h,
                m = (i * Math.sqrt(d)) / c,
                _ = (i * Math.sqrt(f)) / c,
                g = (m * p) / d,
                v = (_ * p) / f,
                y = m * h + _ * l,
                E = m * u + _ * s,
                T = l * (_ + g),
                b = s * (_ + g),
                x = h * (m + v),
                S = u * (m + v);
              return {
                cx: y + t,
                cy: E + e,
                radius: i,
                startAngle: Math.atan2(b - E, T - y),
                endAngle: Math.atan2(S - E, x - y),
                anticlockwise: l * u > h * s,
              };
            }),
            (t.arc = function (t, e, n, r, i, o, a, s, l) {
              for (
                var u = a - o,
                  h = Do._segmentsCount(
                    Math.abs(u) * i,
                    40 * Math.ceil(Math.abs(u) / ie),
                  ),
                  c = u / (2 * h),
                  d = 2 * c,
                  f = Math.cos(c),
                  p = Math.sin(c),
                  m = h - 1,
                  _ = (m % 1) / m,
                  g = 0;
                g <= m;
                ++g
              ) {
                var v = c + o + d * (g + _ * g),
                  y = Math.cos(v),
                  E = -Math.sin(v);
                l.push((f * y + p * E) * i + n, (f * -E + p * y) * i + r);
              }
            }),
            t
          );
        })(),
        Qo = (function () {
          function t() {}
          return (
            (t.curveLength = function (t, e, n, r, i, o, a, s) {
              for (
                var l = 0,
                  u = 0,
                  h = 0,
                  c = 0,
                  d = 0,
                  f = 0,
                  p = 0,
                  m = 0,
                  _ = 0,
                  g = 0,
                  v = 0,
                  y = t,
                  E = e,
                  T = 1;
                T <= 10;
                ++T
              )
                (g =
                  y -
                  (m =
                    (p = (f = (d = 1 - (u = T / 10)) * d) * d) * t +
                    3 * f * u * n +
                    3 * d * (h = u * u) * i +
                    (c = h * u) * a)),
                  (v = E - (_ = p * e + 3 * f * u * r + 3 * d * h * o + c * s)),
                  (y = m),
                  (E = _),
                  (l += Math.sqrt(g * g + v * v));
              return l;
            }),
            (t.curveTo = function (e, n, r, i, o, a, s) {
              var l = s[s.length - 2],
                u = s[s.length - 1];
              s.length -= 2;
              var h = Do._segmentsCount(t.curveLength(l, u, e, n, r, i, o, a)),
                c = 0,
                d = 0,
                f = 0,
                p = 0,
                m = 0;
              s.push(l, u);
              for (var _ = 1, g = 0; _ <= h; ++_)
                (f = (d = (c = 1 - (g = _ / h)) * c) * c),
                  (m = (p = g * g) * g),
                  s.push(
                    f * l + 3 * d * g * e + 3 * c * p * r + m * o,
                    f * u + 3 * d * g * n + 3 * c * p * i + m * a,
                  );
            }),
            t
          );
        })(),
        $o = (function () {
          function t() {}
          return (
            (t.curveLength = function (t, e, n, r, i, o) {
              var a = t - 2 * n + i,
                s = e - 2 * r + o,
                l = 2 * n - 2 * t,
                u = 2 * r - 2 * e,
                h = 4 * (a * a + s * s),
                c = 4 * (a * l + s * u),
                d = l * l + u * u,
                f = 2 * Math.sqrt(h + c + d),
                p = Math.sqrt(h),
                m = 2 * h * p,
                _ = 2 * Math.sqrt(d),
                g = c / p;
              return (
                (m * f +
                  p * c * (f - _) +
                  (4 * d * h - c * c) * Math.log((2 * p + g + f) / (g + _))) /
                (4 * m)
              );
            }),
            (t.curveTo = function (e, n, r, i, o) {
              for (
                var a = o[o.length - 2],
                  s = o[o.length - 1],
                  l = Do._segmentsCount(t.curveLength(a, s, e, n, r, i)),
                  u = 0,
                  h = 0,
                  c = 1;
                c <= l;
                ++c
              ) {
                var d = c / l;
                (u = a + (e - a) * d),
                  (h = s + (n - s) * d),
                  o.push(
                    u + (e + (r - e) * d - u) * d,
                    h + (n + (i - n) * d - h) * d,
                  );
              }
            }),
            t
          );
        })(),
        Jo = (function () {
          function t() {
            this.reset();
          }
          return (
            (t.prototype.begin = function (t, e, n) {
              this.reset(),
                (this.style = t),
                (this.start = e),
                (this.attribStart = n);
            }),
            (t.prototype.end = function (t, e) {
              (this.attribSize = e - this.attribStart),
                (this.size = t - this.start);
            }),
            (t.prototype.reset = function () {
              (this.style = null),
                (this.size = 0),
                (this.start = 0),
                (this.attribStart = 0),
                (this.attribSize = 0);
            }),
            t
          );
        })(),
        ta =
          (((qo = {})[re.POLY] = ko),
          (qo[re.CIRC] = Ho),
          (qo[re.ELIP] = Ho),
          (qo[re.RECT] = {
            build: function (t) {
              var e = t.shape,
                n = e.x,
                r = e.y,
                i = e.width,
                o = e.height,
                a = t.points;
              (a.length = 0), a.push(n, r, n + i, r, n + i, r + o, n, r + o);
            },
            triangulate: function (t, e) {
              var n = t.points,
                r = e.points,
                i = r.length / 2;
              r.push(n[0], n[1], n[2], n[3], n[6], n[7], n[4], n[5]),
                e.indices.push(i, i + 1, i + 2, i + 1, i + 2, i + 3);
            },
          }),
          (qo[re.RREC] = Xo),
          qo),
        ea = [],
        na = [],
        ra = (function () {
          function t(t, e, n, r) {
            void 0 === e && (e = null),
              void 0 === n && (n = null),
              void 0 === r && (r = null),
              (this.points = []),
              (this.holes = []),
              (this.shape = t),
              (this.lineStyle = n),
              (this.fillStyle = e),
              (this.matrix = r),
              (this.type = t.type);
          }
          return (
            (t.prototype.clone = function () {
              return new t(
                this.shape,
                this.fillStyle,
                this.lineStyle,
                this.matrix,
              );
            }),
            (t.prototype.destroy = function () {
              (this.shape = null),
                (this.holes.length = 0),
                (this.holes = null),
                (this.points.length = 0),
                (this.points = null),
                (this.lineStyle = null),
                (this.fillStyle = null);
            }),
            t
          );
        })(),
        ia = new se(),
        oa = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e.closePointEps = 1e-4),
              (e.boundsPadding = 0),
              (e.uvsFloat32 = null),
              (e.indicesUint16 = null),
              (e.batchable = !1),
              (e.points = []),
              (e.colors = []),
              (e.uvs = []),
              (e.indices = []),
              (e.textureIds = []),
              (e.graphicsData = []),
              (e.drawCalls = []),
              (e.batchDirty = -1),
              (e.batches = []),
              (e.dirty = 0),
              (e.cacheDirty = -1),
              (e.clearDirty = 0),
              (e.shapeIndex = 0),
              (e._bounds = new Me()),
              (e.boundsDirty = -1),
              e
            );
          }
          return (
            Bo(e, t),
            Object.defineProperty(e.prototype, "bounds", {
              get: function () {
                return (
                  this.updateBatches(),
                  this.boundsDirty !== this.dirty &&
                    ((this.boundsDirty = this.dirty), this.calculateBounds()),
                  this._bounds
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.invalidate = function () {
              (this.boundsDirty = -1),
                this.dirty++,
                this.batchDirty++,
                (this.shapeIndex = 0),
                (this.points.length = 0),
                (this.colors.length = 0),
                (this.uvs.length = 0),
                (this.indices.length = 0),
                (this.textureIds.length = 0);
              for (var t = 0; t < this.drawCalls.length; t++)
                this.drawCalls[t].texArray.clear(), na.push(this.drawCalls[t]);
              for (
                this.drawCalls.length = 0, t = 0;
                t < this.batches.length;
                t++
              ) {
                var e = this.batches[t];
                e.reset(), ea.push(e);
              }
              this.batches.length = 0;
            }),
            (e.prototype.clear = function () {
              return (
                this.graphicsData.length > 0 &&
                  (this.invalidate(),
                  this.clearDirty++,
                  (this.graphicsData.length = 0)),
                this
              );
            }),
            (e.prototype.drawShape = function (t, e, n, r) {
              void 0 === e && (e = null),
                void 0 === n && (n = null),
                void 0 === r && (r = null);
              var i = new ra(t, e, n, r);
              return this.graphicsData.push(i), this.dirty++, this;
            }),
            (e.prototype.drawHole = function (t, e) {
              if ((void 0 === e && (e = null), !this.graphicsData.length))
                return null;
              var n = new ra(t, null, null, e),
                r = this.graphicsData[this.graphicsData.length - 1];
              return (
                (n.lineStyle = r.lineStyle), r.holes.push(n), this.dirty++, this
              );
            }),
            (e.prototype.destroy = function () {
              t.prototype.destroy.call(this);
              for (var e = 0; e < this.graphicsData.length; ++e)
                this.graphicsData[e].destroy();
              (this.points.length = 0),
                (this.points = null),
                (this.colors.length = 0),
                (this.colors = null),
                (this.uvs.length = 0),
                (this.uvs = null),
                (this.indices.length = 0),
                (this.indices = null),
                this.indexBuffer.destroy(),
                (this.indexBuffer = null),
                (this.graphicsData.length = 0),
                (this.graphicsData = null),
                (this.drawCalls.length = 0),
                (this.drawCalls = null),
                (this.batches.length = 0),
                (this.batches = null),
                (this._bounds = null);
            }),
            (e.prototype.containsPoint = function (t) {
              for (var e = this.graphicsData, n = 0; n < e.length; ++n) {
                var r = e[n];
                if (
                  r.fillStyle.visible &&
                  r.shape &&
                  (r.matrix ? r.matrix.applyInverse(t, ia) : ia.copyFrom(t),
                  r.shape.contains(ia.x, ia.y))
                ) {
                  var i = !1;
                  if (r.holes)
                    for (var o = 0; o < r.holes.length; o++)
                      if (r.holes[o].shape.contains(ia.x, ia.y)) {
                        i = !0;
                        break;
                      }
                  if (!i) return !0;
                }
              }
              return !1;
            }),
            (e.prototype.updateBatches = function () {
              if (this.graphicsData.length) {
                if (this.validateBatching()) {
                  this.cacheDirty = this.dirty;
                  var t = this.uvs,
                    e = this.graphicsData,
                    n = null,
                    r = null;
                  this.batches.length > 0 &&
                    (r = (n = this.batches[this.batches.length - 1]).style);
                  for (var i = this.shapeIndex; i < e.length; i++) {
                    this.shapeIndex++;
                    var o = e[i],
                      a = o.fillStyle,
                      s = o.lineStyle;
                    ta[o.type].build(o),
                      o.matrix && this.transformPoints(o.points, o.matrix),
                      (a.visible || s.visible) && this.processHoles(o.holes);
                    for (var l = 0; l < 2; l++) {
                      var u = 0 === l ? a : s;
                      if (u.visible) {
                        var h = u.texture.baseTexture,
                          c = this.indices.length,
                          d = this.points.length / 2;
                        (h.wrapMode = $.REPEAT),
                          0 === l ? this.processFill(o) : this.processLine(o);
                        var f = this.points.length / 2 - d;
                        0 !== f &&
                          (n &&
                            !this._compareStyles(r, u) &&
                            (n.end(c, d), (n = null)),
                          n ||
                            ((n = ea.pop() || new Jo()).begin(u, c, d),
                            this.batches.push(n),
                            (r = u)),
                          this.addUvs(
                            this.points,
                            t,
                            u.texture,
                            d,
                            f,
                            u.matrix,
                          ));
                      }
                    }
                  }
                  var p = this.indices.length,
                    m = this.points.length / 2;
                  if ((n && n.end(p, m), 0 !== this.batches.length)) {
                    var _ = m > 65535;
                    this.indicesUint16 &&
                    this.indices.length === this.indicesUint16.length &&
                    _ === this.indicesUint16.BYTES_PER_ELEMENT > 2
                      ? this.indicesUint16.set(this.indices)
                      : (this.indicesUint16 = _
                          ? new Uint32Array(this.indices)
                          : new Uint16Array(this.indices)),
                      (this.batchable = this.isBatchable()),
                      this.batchable
                        ? this.packBatches()
                        : this.buildDrawCalls();
                  } else this.batchable = !0;
                }
              } else this.batchable = !0;
            }),
            (e.prototype._compareStyles = function (t, e) {
              return (
                !(!t || !e) &&
                t.texture.baseTexture === e.texture.baseTexture &&
                t.color + t.alpha === e.color + e.alpha &&
                !!t.native == !!e.native
              );
            }),
            (e.prototype.validateBatching = function () {
              if (this.dirty === this.cacheDirty || !this.graphicsData.length)
                return !1;
              for (var t = 0, e = this.graphicsData.length; t < e; t++) {
                var n = this.graphicsData[t],
                  r = n.fillStyle,
                  i = n.lineStyle;
                if (r && !r.texture.baseTexture.valid) return !1;
                if (i && !i.texture.baseTexture.valid) return !1;
              }
              return !0;
            }),
            (e.prototype.packBatches = function () {
              this.batchDirty++, (this.uvsFloat32 = new Float32Array(this.uvs));
              for (var t = this.batches, e = 0, n = t.length; e < n; e++)
                for (var r = t[e], i = 0; i < r.size; i++) {
                  var o = r.start + i;
                  this.indicesUint16[o] = this.indicesUint16[o] - r.attribStart;
                }
            }),
            (e.prototype.isBatchable = function () {
              if (this.points.length > 131070) return !1;
              for (var t = this.batches, n = 0; n < t.length; n++)
                if (t[n].style.native) return !1;
              return this.points.length < 2 * e.BATCHABLE_SIZE;
            }),
            (e.prototype.buildDrawCalls = function () {
              for (
                var t = ++_n._globalBatch, e = 0;
                e < this.drawCalls.length;
                e++
              )
                this.drawCalls[e].texArray.clear(), na.push(this.drawCalls[e]);
              this.drawCalls.length = 0;
              var n = this.colors,
                r = this.textureIds,
                i = na.pop();
              i || ((i = new hi()).texArray = new ci()),
                (i.texArray.count = 0),
                (i.start = 0),
                (i.size = 0),
                (i.type = j.TRIANGLES);
              var o = 0,
                a = null,
                s = 0,
                l = !1,
                u = j.TRIANGLES,
                h = 0;
              for (
                this.drawCalls.push(i), e = 0;
                e < this.batches.length;
                e++
              ) {
                var c = this.batches[e],
                  d = c.style,
                  f = d.texture.baseTexture;
                l !== !!d.native &&
                  ((u = (l = !!d.native) ? j.LINES : j.TRIANGLES),
                  (a = null),
                  (o = 8),
                  t++),
                  a !== f &&
                    ((a = f),
                    f._batchEnabled !== t &&
                      (8 === o &&
                        (t++,
                        (o = 0),
                        i.size > 0 &&
                          ((i = na.pop()) ||
                            ((i = new hi()).texArray = new ci()),
                          this.drawCalls.push(i)),
                        (i.start = h),
                        (i.size = 0),
                        (i.texArray.count = 0),
                        (i.type = u)),
                      (f.touched = 1),
                      (f._batchEnabled = t),
                      (f._batchLocation = o),
                      (f.wrapMode = $.REPEAT),
                      (i.texArray.elements[i.texArray.count++] = f),
                      o++)),
                  (i.size += c.size),
                  (h += c.size),
                  (s = f._batchLocation),
                  this.addColors(
                    n,
                    d.color,
                    d.alpha,
                    c.attribSize,
                    c.attribStart,
                  ),
                  this.addTextureIds(r, s, c.attribSize, c.attribStart);
              }
              (_n._globalBatch = t), this.packAttributes();
            }),
            (e.prototype.packAttributes = function () {
              for (
                var t = this.points,
                  e = this.uvs,
                  n = this.colors,
                  r = this.textureIds,
                  i = new ArrayBuffer(3 * t.length * 4),
                  o = new Float32Array(i),
                  a = new Uint32Array(i),
                  s = 0,
                  l = 0;
                l < t.length / 2;
                l++
              )
                (o[s++] = t[2 * l]),
                  (o[s++] = t[2 * l + 1]),
                  (o[s++] = e[2 * l]),
                  (o[s++] = e[2 * l + 1]),
                  (a[s++] = n[l]),
                  (o[s++] = r[l]);
              this._buffer.update(i),
                this._indexBuffer.update(this.indicesUint16);
            }),
            (e.prototype.processFill = function (t) {
              t.holes.length
                ? ko.triangulate(t, this)
                : ta[t.type].triangulate(t, this);
            }),
            (e.prototype.processLine = function (t) {
              Yo(t, this);
              for (var e = 0; e < t.holes.length; e++) Yo(t.holes[e], this);
            }),
            (e.prototype.processHoles = function (t) {
              for (var e = 0; e < t.length; e++) {
                var n = t[e];
                ta[n.type].build(n),
                  n.matrix && this.transformPoints(n.points, n.matrix);
              }
            }),
            (e.prototype.calculateBounds = function () {
              var t = this._bounds;
              t.clear(),
                t.addVertexData(this.points, 0, this.points.length),
                t.pad(this.boundsPadding, this.boundsPadding);
            }),
            (e.prototype.transformPoints = function (t, e) {
              for (var n = 0; n < t.length / 2; n++) {
                var r = t[2 * n],
                  i = t[2 * n + 1];
                (t[2 * n] = e.a * r + e.c * i + e.tx),
                  (t[2 * n + 1] = e.b * r + e.d * i + e.ty);
              }
            }),
            (e.prototype.addColors = function (t, e, n, r, i) {
              void 0 === i && (i = 0);
              var o = Gt((e >> 16) + (65280 & e) + ((255 & e) << 16), n);
              t.length = Math.max(t.length, i + r);
              for (var a = 0; a < r; a++) t[i + a] = o;
            }),
            (e.prototype.addTextureIds = function (t, e, n, r) {
              void 0 === r && (r = 0), (t.length = Math.max(t.length, r + n));
              for (var i = 0; i < n; i++) t[r + i] = e;
            }),
            (e.prototype.addUvs = function (t, e, n, r, i, o) {
              void 0 === o && (o = null);
              for (var a = 0, s = e.length, l = n.frame; a < i; ) {
                var u = t[2 * (r + a)],
                  h = t[2 * (r + a) + 1];
                if (o) {
                  var c = o.a * u + o.c * h + o.tx;
                  (h = o.b * u + o.d * h + o.ty), (u = c);
                }
                a++, e.push(u / l.width, h / l.height);
              }
              var d = n.baseTexture;
              (l.width < d.width || l.height < d.height) &&
                this.adjustUvs(e, n, s, i);
            }),
            (e.prototype.adjustUvs = function (t, e, n, r) {
              for (
                var i = e.baseTexture,
                  o = 1e-6,
                  a = n + 2 * r,
                  s = e.frame,
                  l = s.width / i.width,
                  u = s.height / i.height,
                  h = s.x / s.width,
                  c = s.y / s.height,
                  d = Math.floor(t[n] + o),
                  f = Math.floor(t[n + 1] + o),
                  p = n + 2;
                p < a;
                p += 2
              )
                (d = Math.min(d, Math.floor(t[p] + o))),
                  (f = Math.min(f, Math.floor(t[p + 1] + o)));
              for (h -= d, c -= f, p = n; p < a; p += 2)
                (t[p] = (t[p] + h) * l), (t[p + 1] = (t[p + 1] + c) * u);
            }),
            (e.BATCHABLE_SIZE = 100),
            e
          );
        })(mi),
        aa = (function (t) {
          function e() {
            var e = (null !== t && t.apply(this, arguments)) || this;
            return (
              (e.width = 0),
              (e.alignment = 0.5),
              (e.native = !1),
              (e.cap = Co.BUTT),
              (e.join = Oo.MITER),
              (e.miterLimit = 10),
              e
            );
          }
          return (
            Bo(e, t),
            (e.prototype.clone = function () {
              var t = new e();
              return (
                (t.color = this.color),
                (t.alpha = this.alpha),
                (t.texture = this.texture),
                (t.matrix = this.matrix),
                (t.visible = this.visible),
                (t.width = this.width),
                (t.alignment = this.alignment),
                (t.native = this.native),
                (t.cap = this.cap),
                (t.join = this.join),
                (t.miterLimit = this.miterLimit),
                t
              );
            }),
            (e.prototype.reset = function () {
              t.prototype.reset.call(this),
                (this.color = 0),
                (this.alignment = 0.5),
                (this.width = 0),
                (this.native = !1);
            }),
            e
          );
        })(Uo),
        sa = new Float32Array(3),
        la = {},
        ua = (function (t) {
          function e(e) {
            void 0 === e && (e = null);
            var n = t.call(this) || this;
            return (
              (n.shader = null),
              (n.pluginName = "batch"),
              (n.currentPath = null),
              (n.batches = []),
              (n.batchTint = -1),
              (n.batchDirty = -1),
              (n.vertexData = null),
              (n._fillStyle = new Uo()),
              (n._lineStyle = new aa()),
              (n._matrix = null),
              (n._holeMode = !1),
              (n.state = Or.for2d()),
              (n._geometry = e || new oa()),
              n._geometry.refCount++,
              (n._transformID = -1),
              (n.tint = 16777215),
              (n.blendMode = W.NORMAL),
              n
            );
          }
          return (
            Bo(e, t),
            Object.defineProperty(e.prototype, "geometry", {
              get: function () {
                return this._geometry;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.clone = function () {
              return this.finishPoly(), new e(this._geometry);
            }),
            Object.defineProperty(e.prototype, "blendMode", {
              get: function () {
                return this.state.blendMode;
              },
              set: function (t) {
                this.state.blendMode = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "tint", {
              get: function () {
                return this._tint;
              },
              set: function (t) {
                this._tint = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "fill", {
              get: function () {
                return this._fillStyle;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "line", {
              get: function () {
                return this._lineStyle;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.lineStyle = function (t, e, n, r, i) {
              return (
                void 0 === t && (t = null),
                void 0 === e && (e = 0),
                void 0 === n && (n = 1),
                void 0 === r && (r = 0.5),
                void 0 === i && (i = !1),
                "number" == typeof t &&
                  (t = {
                    width: t,
                    color: e,
                    alpha: n,
                    alignment: r,
                    native: i,
                  }),
                this.lineTextureStyle(t)
              );
            }),
            (e.prototype.lineTextureStyle = function (t) {
              (t = Object.assign(
                {
                  width: 0,
                  texture: Nn.WHITE,
                  color: t && t.texture ? 16777215 : 0,
                  alpha: 1,
                  matrix: null,
                  alignment: 0.5,
                  native: !1,
                  cap: Co.BUTT,
                  join: Oo.MITER,
                  miterLimit: 10,
                },
                t,
              )),
                this.currentPath && this.startPoly();
              var e = t.width > 0 && t.alpha > 0;
              return (
                e
                  ? (t.matrix &&
                      ((t.matrix = t.matrix.clone()), t.matrix.invert()),
                    Object.assign(this._lineStyle, { visible: e }, t))
                  : this._lineStyle.reset(),
                this
              );
            }),
            (e.prototype.startPoly = function () {
              if (this.currentPath) {
                var t = this.currentPath.points,
                  e = this.currentPath.points.length;
                e > 2 &&
                  (this.drawShape(this.currentPath),
                  (this.currentPath = new de()),
                  (this.currentPath.closeStroke = !1),
                  this.currentPath.points.push(t[e - 2], t[e - 1]));
              } else
                (this.currentPath = new de()),
                  (this.currentPath.closeStroke = !1);
            }),
            (e.prototype.finishPoly = function () {
              this.currentPath &&
                (this.currentPath.points.length > 2
                  ? (this.drawShape(this.currentPath),
                    (this.currentPath = null))
                  : (this.currentPath.points.length = 0));
            }),
            (e.prototype.moveTo = function (t, e) {
              return (
                this.startPoly(),
                (this.currentPath.points[0] = t),
                (this.currentPath.points[1] = e),
                this
              );
            }),
            (e.prototype.lineTo = function (t, e) {
              this.currentPath || this.moveTo(0, 0);
              var n = this.currentPath.points,
                r = n[n.length - 2],
                i = n[n.length - 1];
              return (r === t && i === e) || n.push(t, e), this;
            }),
            (e.prototype._initCurve = function (t, e) {
              void 0 === t && (t = 0),
                void 0 === e && (e = 0),
                this.currentPath
                  ? 0 === this.currentPath.points.length &&
                    (this.currentPath.points = [t, e])
                  : this.moveTo(t, e);
            }),
            (e.prototype.quadraticCurveTo = function (t, e, n, r) {
              this._initCurve();
              var i = this.currentPath.points;
              return (
                0 === i.length && this.moveTo(0, 0),
                $o.curveTo(t, e, n, r, i),
                this
              );
            }),
            (e.prototype.bezierCurveTo = function (t, e, n, r, i, o) {
              return (
                this._initCurve(),
                Qo.curveTo(t, e, n, r, i, o, this.currentPath.points),
                this
              );
            }),
            (e.prototype.arcTo = function (t, e, n, r, i) {
              this._initCurve(t, e);
              var o = this.currentPath.points,
                a = Zo.curveTo(t, e, n, r, i, o);
              if (a) {
                var s = a.cx,
                  l = a.cy,
                  u = a.radius,
                  h = a.startAngle,
                  c = a.endAngle,
                  d = a.anticlockwise;
                this.arc(s, l, u, h, c, d);
              }
              return this;
            }),
            (e.prototype.arc = function (t, e, n, r, i, o) {
              if ((void 0 === o && (o = !1), r === i)) return this;
              if (
                (!o && i <= r ? (i += ie) : o && r <= i && (r += ie),
                0 == i - r)
              )
                return this;
              var a = t + Math.cos(r) * n,
                s = e + Math.sin(r) * n,
                l = this._geometry.closePointEps,
                u = this.currentPath ? this.currentPath.points : null;
              if (u) {
                var h = Math.abs(u[u.length - 2] - a),
                  c = Math.abs(u[u.length - 1] - s);
                (h < l && c < l) || u.push(a, s);
              } else this.moveTo(a, s), (u = this.currentPath.points);
              return Zo.arc(a, s, t, e, n, r, i, o, u), this;
            }),
            (e.prototype.beginFill = function (t, e) {
              return (
                void 0 === t && (t = 0),
                void 0 === e && (e = 1),
                this.beginTextureFill({ texture: Nn.WHITE, color: t, alpha: e })
              );
            }),
            (e.prototype.beginTextureFill = function (t) {
              (t = Object.assign(
                { texture: Nn.WHITE, color: 16777215, alpha: 1, matrix: null },
                t,
              )),
                this.currentPath && this.startPoly();
              var e = t.alpha > 0;
              return (
                e
                  ? (t.matrix &&
                      ((t.matrix = t.matrix.clone()), t.matrix.invert()),
                    Object.assign(this._fillStyle, { visible: e }, t))
                  : this._fillStyle.reset(),
                this
              );
            }),
            (e.prototype.endFill = function () {
              return this.finishPoly(), this._fillStyle.reset(), this;
            }),
            (e.prototype.drawRect = function (t, e, n, r) {
              return this.drawShape(new ue(t, e, n, r));
            }),
            (e.prototype.drawRoundedRect = function (t, e, n, r, i) {
              return this.drawShape(new fe(t, e, n, r, i));
            }),
            (e.prototype.drawCircle = function (t, e, n) {
              return this.drawShape(new he(t, e, n));
            }),
            (e.prototype.drawEllipse = function (t, e, n, r) {
              return this.drawShape(new ce(t, e, n, r));
            }),
            (e.prototype.drawPolygon = function () {
              for (
                var t, e = arguments, n = [], r = 0;
                r < arguments.length;
                r++
              )
                n[r] = e[r];
              var i = !0,
                o = n[0];
              o.points
                ? ((i = o.closeStroke), (t = o.points))
                : (t = Array.isArray(n[0]) ? n[0] : n);
              var a = new de(t);
              return (a.closeStroke = i), this.drawShape(a), this;
            }),
            (e.prototype.drawShape = function (t) {
              return (
                this._holeMode
                  ? this._geometry.drawHole(t, this._matrix)
                  : this._geometry.drawShape(
                      t,
                      this._fillStyle.clone(),
                      this._lineStyle.clone(),
                      this._matrix,
                    ),
                this
              );
            }),
            (e.prototype.clear = function () {
              return (
                this._geometry.clear(),
                this._lineStyle.reset(),
                this._fillStyle.reset(),
                this._boundsID++,
                (this._matrix = null),
                (this._holeMode = !1),
                (this.currentPath = null),
                this
              );
            }),
            (e.prototype.isFastRect = function () {
              var t = this._geometry.graphicsData;
              return !(
                1 !== t.length ||
                t[0].shape.type !== re.RECT ||
                t[0].matrix ||
                t[0].holes.length ||
                (t[0].lineStyle.visible && t[0].lineStyle.width)
              );
            }),
            (e.prototype._render = function (t) {
              this.finishPoly();
              var e = this._geometry;
              e.updateBatches(),
                e.batchable
                  ? (this.batchDirty !== e.batchDirty &&
                      this._populateBatches(),
                    this._renderBatched(t))
                  : (t.batch.flush(), this._renderDirect(t));
            }),
            (e.prototype._populateBatches = function () {
              var t = this._geometry,
                e = this.blendMode,
                n = t.batches.length;
              (this.batchTint = -1),
                (this._transformID = -1),
                (this.batchDirty = t.batchDirty),
                (this.batches.length = n),
                (this.vertexData = new Float32Array(t.points));
              for (var r = 0; r < n; r++) {
                var i = t.batches[r],
                  o = i.style.color,
                  a = new Float32Array(
                    this.vertexData.buffer,
                    4 * i.attribStart * 2,
                    2 * i.attribSize,
                  ),
                  s = new Float32Array(
                    t.uvsFloat32.buffer,
                    4 * i.attribStart * 2,
                    2 * i.attribSize,
                  ),
                  l = {
                    vertexData: a,
                    blendMode: e,
                    indices: new Uint16Array(
                      t.indicesUint16.buffer,
                      2 * i.start,
                      i.size,
                    ),
                    uvs: s,
                    _batchRGB: Lt(o),
                    _tintRGB: o,
                    _texture: i.style.texture,
                    alpha: i.style.alpha,
                    worldAlpha: 1,
                  };
                this.batches[r] = l;
              }
            }),
            (e.prototype._renderBatched = function (t) {
              if (this.batches.length) {
                t.batch.setObjectRenderer(t.plugins[this.pluginName]),
                  this.calculateVertices(),
                  this.calculateTints();
                for (var e = 0, n = this.batches.length; e < n; e++) {
                  var r = this.batches[e];
                  (r.worldAlpha = this.worldAlpha * r.alpha),
                    t.plugins[this.pluginName].render(r);
                }
              }
            }),
            (e.prototype._renderDirect = function (t) {
              var e = this._resolveDirectShader(t),
                n = this._geometry,
                r = this.tint,
                i = this.worldAlpha,
                o = e.uniforms,
                a = n.drawCalls;
              (o.translationMatrix = this.transform.worldTransform),
                (o.tint[0] = (((r >> 16) & 255) / 255) * i),
                (o.tint[1] = (((r >> 8) & 255) / 255) * i),
                (o.tint[2] = ((255 & r) / 255) * i),
                (o.tint[3] = i),
                t.shader.bind(e),
                t.geometry.bind(n, e),
                t.state.set(this.state);
              for (var s = 0, l = a.length; s < l; s++)
                this._renderDrawCallDirect(t, n.drawCalls[s]);
            }),
            (e.prototype._renderDrawCallDirect = function (t, e) {
              for (
                var n = e.texArray,
                  r = e.type,
                  i = e.size,
                  o = e.start,
                  a = n.count,
                  s = 0;
                s < a;
                s++
              )
                t.texture.bind(n.elements[s], s);
              t.geometry.draw(r, i, o);
            }),
            (e.prototype._resolveDirectShader = function (t) {
              var e = this.shader,
                n = this.pluginName;
              if (!e) {
                if (!la[n]) {
                  for (
                    var r = t.plugins[n].MAX_TEXTURES,
                      i = new Int32Array(r),
                      o = 0;
                    o < r;
                    o++
                  )
                    i[o] = o;
                  var a = {
                      tint: new Float32Array([1, 1, 1, 1]),
                      translationMatrix: new me(),
                      default: Yn.from({ uSamplers: i }, !0),
                    },
                    s = t.plugins[n]._shader.program;
                  la[n] = new Ir(s, a);
                }
                e = la[n];
              }
              return e;
            }),
            (e.prototype._calculateBounds = function () {
              this.finishPoly();
              var t = this._geometry;
              if (t.graphicsData.length) {
                var e = t.bounds,
                  n = e.minX,
                  r = e.minY,
                  i = e.maxX,
                  o = e.maxY;
                this._bounds.addFrame(this.transform, n, r, i, o);
              }
            }),
            (e.prototype.containsPoint = function (t) {
              return (
                this.worldTransform.applyInverse(t, e._TEMP_POINT),
                this._geometry.containsPoint(e._TEMP_POINT)
              );
            }),
            (e.prototype.calculateTints = function () {
              if (this.batchTint !== this.tint) {
                this.batchTint = this.tint;
                for (
                  var t = Lt(this.tint, sa), e = 0;
                  e < this.batches.length;
                  e++
                ) {
                  var n = this.batches[e],
                    r = n._batchRGB,
                    i =
                      ((t[0] * r[0] * 255) << 16) +
                      ((t[1] * r[1] * 255) << 8) +
                      (0 | (t[2] * r[2] * 255));
                  n._tintRGB = (i >> 16) + (65280 & i) + ((255 & i) << 16);
                }
              }
            }),
            (e.prototype.calculateVertices = function () {
              var t = this.transform._worldID;
              if (this._transformID !== t) {
                this._transformID = t;
                for (
                  var e = this.transform.worldTransform,
                    n = e.a,
                    r = e.b,
                    i = e.c,
                    o = e.d,
                    a = e.tx,
                    s = e.ty,
                    l = this._geometry.points,
                    u = this.vertexData,
                    h = 0,
                    c = 0;
                  c < l.length;
                  c += 2
                ) {
                  var d = l[c],
                    f = l[c + 1];
                  (u[h++] = n * d + i * f + a), (u[h++] = o * f + r * d + s);
                }
              }
            }),
            (e.prototype.closePath = function () {
              var t = this.currentPath;
              return t && ((t.closeStroke = !0), this.finishPoly()), this;
            }),
            (e.prototype.setMatrix = function (t) {
              return (this._matrix = t), this;
            }),
            (e.prototype.beginHole = function () {
              return this.finishPoly(), (this._holeMode = !0), this;
            }),
            (e.prototype.endHole = function () {
              return this.finishPoly(), (this._holeMode = !1), this;
            }),
            (e.prototype.destroy = function (e) {
              this._geometry.refCount--,
                0 === this._geometry.refCount && this._geometry.dispose(),
                (this._matrix = null),
                (this.currentPath = null),
                this._lineStyle.destroy(),
                (this._lineStyle = null),
                this._fillStyle.destroy(),
                (this._fillStyle = null),
                (this._geometry = null),
                (this.shader = null),
                (this.vertexData = null),
                (this.batches.length = 0),
                (this.batches = null),
                t.prototype.destroy.call(this, e);
            }),
            (e.nextRoundedRectBehavior = !1),
            (e._TEMP_POINT = new se()),
            e
          );
        })(Qe),
        ha = function (t, e) {
          return (
            (ha =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            ha(t, e)
          );
        },
        ca = new se(),
        da = new Uint16Array([0, 1, 2, 0, 2, 3]),
        fa = (function (t) {
          function e(e) {
            var n = t.call(this) || this;
            return (
              (n._anchor = new pe(
                n._onAnchorUpdate,
                n,
                e ? e.defaultAnchor.x : 0,
                e ? e.defaultAnchor.y : 0,
              )),
              (n._texture = null),
              (n._width = 0),
              (n._height = 0),
              (n._tint = null),
              (n._tintRGB = null),
              (n.tint = 16777215),
              (n.blendMode = W.NORMAL),
              (n._cachedTint = 16777215),
              (n.uvs = null),
              (n.texture = e || Nn.EMPTY),
              (n.vertexData = new Float32Array(8)),
              (n.vertexTrimmedData = null),
              (n._transformID = -1),
              (n._textureID = -1),
              (n._transformTrimmedID = -1),
              (n._textureTrimmedID = -1),
              (n.indices = da),
              (n.pluginName = "batch"),
              (n.isSprite = !0),
              (n._roundPixels = At.ROUND_PIXELS),
              n
            );
          }
          return (
            (function (t, e) {
              function n() {
                this.constructor = t;
              }
              ha(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((n.prototype = e.prototype), new n()));
            })(e, t),
            (e.prototype._onTextureUpdate = function () {
              (this._textureID = -1),
                (this._textureTrimmedID = -1),
                (this._cachedTint = 16777215),
                this._width &&
                  (this.scale.x =
                    (jt(this.scale.x) * this._width) /
                    this._texture.orig.width),
                this._height &&
                  (this.scale.y =
                    (jt(this.scale.y) * this._height) /
                    this._texture.orig.height);
            }),
            (e.prototype._onAnchorUpdate = function () {
              (this._transformID = -1), (this._transformTrimmedID = -1);
            }),
            (e.prototype.calculateVertices = function () {
              var t = this._texture;
              if (
                this._transformID !== this.transform._worldID ||
                this._textureID !== t._updateID
              ) {
                this._textureID !== t._updateID &&
                  (this.uvs = this._texture._uvs.uvsFloat32),
                  (this._transformID = this.transform._worldID),
                  (this._textureID = t._updateID);
                var e = this.transform.worldTransform,
                  n = e.a,
                  r = e.b,
                  i = e.c,
                  o = e.d,
                  a = e.tx,
                  s = e.ty,
                  l = this.vertexData,
                  u = t.trim,
                  h = t.orig,
                  c = this._anchor,
                  d = 0,
                  f = 0,
                  p = 0,
                  m = 0;
                if (
                  (u
                    ? ((d = (f = u.x - c._x * h.width) + u.width),
                      (p = (m = u.y - c._y * h.height) + u.height))
                    : ((d = (f = -c._x * h.width) + h.width),
                      (p = (m = -c._y * h.height) + h.height)),
                  (l[0] = n * f + i * m + a),
                  (l[1] = o * m + r * f + s),
                  (l[2] = n * d + i * m + a),
                  (l[3] = o * m + r * d + s),
                  (l[4] = n * d + i * p + a),
                  (l[5] = o * p + r * d + s),
                  (l[6] = n * f + i * p + a),
                  (l[7] = o * p + r * f + s),
                  this._roundPixels)
                )
                  for (var _ = At.RESOLUTION, g = 0; g < l.length; ++g)
                    l[g] = Math.round(((l[g] * _) | 0) / _);
              }
            }),
            (e.prototype.calculateTrimmedVertices = function () {
              if (this.vertexTrimmedData) {
                if (
                  this._transformTrimmedID === this.transform._worldID &&
                  this._textureTrimmedID === this._texture._updateID
                )
                  return;
              } else this.vertexTrimmedData = new Float32Array(8);
              (this._transformTrimmedID = this.transform._worldID),
                (this._textureTrimmedID = this._texture._updateID);
              var t = this._texture,
                e = this.vertexTrimmedData,
                n = t.orig,
                r = this._anchor,
                i = this.transform.worldTransform,
                o = i.a,
                a = i.b,
                s = i.c,
                l = i.d,
                u = i.tx,
                h = i.ty,
                c = -r._x * n.width,
                d = c + n.width,
                f = -r._y * n.height,
                p = f + n.height;
              (e[0] = o * c + s * f + u),
                (e[1] = l * f + a * c + h),
                (e[2] = o * d + s * f + u),
                (e[3] = l * f + a * d + h),
                (e[4] = o * d + s * p + u),
                (e[5] = l * p + a * d + h),
                (e[6] = o * c + s * p + u),
                (e[7] = l * p + a * c + h);
            }),
            (e.prototype._render = function (t) {
              this.calculateVertices(),
                t.batch.setObjectRenderer(t.plugins[this.pluginName]),
                t.plugins[this.pluginName].render(this);
            }),
            (e.prototype._calculateBounds = function () {
              var t = this._texture.trim,
                e = this._texture.orig;
              !t || (t.width === e.width && t.height === e.height)
                ? (this.calculateVertices(),
                  this._bounds.addQuad(this.vertexData))
                : (this.calculateTrimmedVertices(),
                  this._bounds.addQuad(this.vertexTrimmedData));
            }),
            (e.prototype.getLocalBounds = function (e) {
              return 0 === this.children.length
                ? (this._localBounds || (this._localBounds = new Me()),
                  (this._localBounds.minX =
                    this._texture.orig.width * -this._anchor._x),
                  (this._localBounds.minY =
                    this._texture.orig.height * -this._anchor._y),
                  (this._localBounds.maxX =
                    this._texture.orig.width * (1 - this._anchor._x)),
                  (this._localBounds.maxY =
                    this._texture.orig.height * (1 - this._anchor._y)),
                  e ||
                    (this._localBoundsRect ||
                      (this._localBoundsRect = new ue()),
                    (e = this._localBoundsRect)),
                  this._localBounds.getRectangle(e))
                : t.prototype.getLocalBounds.call(this, e);
            }),
            (e.prototype.containsPoint = function (t) {
              this.worldTransform.applyInverse(t, ca);
              var e = this._texture.orig.width,
                n = this._texture.orig.height,
                r = -e * this.anchor.x,
                i = 0;
              return (
                ca.x >= r &&
                ca.x < r + e &&
                ((i = -n * this.anchor.y), ca.y >= i && ca.y < i + n)
              );
            }),
            (e.prototype.destroy = function (e) {
              if (
                (t.prototype.destroy.call(this, e),
                this._texture.off("update", this._onTextureUpdate, this),
                (this._anchor = null),
                "boolean" == typeof e ? e : e && e.texture)
              ) {
                var n = "boolean" == typeof e ? e : e && e.baseTexture;
                this._texture.destroy(!!n);
              }
              this._texture = null;
            }),
            (e.from = function (t, n) {
              return new e(t instanceof Nn ? t : Nn.from(t, n));
            }),
            Object.defineProperty(e.prototype, "roundPixels", {
              get: function () {
                return this._roundPixels;
              },
              set: function (t) {
                this._roundPixels !== t && (this._transformID = -1),
                  (this._roundPixels = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "width", {
              get: function () {
                return Math.abs(this.scale.x) * this._texture.orig.width;
              },
              set: function (t) {
                var e = jt(this.scale.x) || 1;
                (this.scale.x = (e * t) / this._texture.orig.width),
                  (this._width = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "height", {
              get: function () {
                return Math.abs(this.scale.y) * this._texture.orig.height;
              },
              set: function (t) {
                var e = jt(this.scale.y) || 1;
                (this.scale.y = (e * t) / this._texture.orig.height),
                  (this._height = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "anchor", {
              get: function () {
                return this._anchor;
              },
              set: function (t) {
                this._anchor.copyFrom(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "tint", {
              get: function () {
                return this._tint;
              },
              set: function (t) {
                (this._tint = t),
                  (this._tintRGB = (t >> 16) + (65280 & t) + ((255 & t) << 16));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "texture", {
              get: function () {
                return this._texture;
              },
              set: function (t) {
                this._texture !== t &&
                  (this._texture &&
                    this._texture.off("update", this._onTextureUpdate, this),
                  (this._texture = t || Nn.EMPTY),
                  (this._cachedTint = 16777215),
                  (this._textureID = -1),
                  (this._textureTrimmedID = -1),
                  t &&
                    (t.baseTexture.valid
                      ? this._onTextureUpdate()
                      : t.once("update", this._onTextureUpdate, this)));
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Qe),
        pa = function (t, e) {
          return (
            (pa =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            pa(t, e)
          );
        };
      !(function (t) {
        (t[(t.LINEAR_VERTICAL = 0)] = "LINEAR_VERTICAL"),
          (t[(t.LINEAR_HORIZONTAL = 1)] = "LINEAR_HORIZONTAL");
      })(Ko || (Ko = {}));
      var ma = {
          align: "left",
          breakWords: !1,
          dropShadow: !1,
          dropShadowAlpha: 1,
          dropShadowAngle: Math.PI / 6,
          dropShadowBlur: 0,
          dropShadowColor: "black",
          dropShadowDistance: 5,
          fill: "black",
          fillGradientType: Ko.LINEAR_VERTICAL,
          fillGradientStops: [],
          fontFamily: "Arial",
          fontSize: 26,
          fontStyle: "normal",
          fontVariant: "normal",
          fontWeight: "normal",
          letterSpacing: 0,
          lineHeight: 0,
          lineJoin: "miter",
          miterLimit: 10,
          padding: 0,
          stroke: "black",
          strokeThickness: 0,
          textBaseline: "alphabetic",
          trim: !1,
          whiteSpace: "pre",
          wordWrap: !1,
          wordWrapWidth: 100,
          leading: 0,
        },
        _a = [
          "serif",
          "sans-serif",
          "monospace",
          "cursive",
          "fantasy",
          "system-ui",
        ],
        ga = (function () {
          function t(t) {
            (this.styleID = 0), this.reset(), Ea(this, t, t);
          }
          return (
            (t.prototype.clone = function () {
              var e = {};
              return Ea(e, this, ma), new t(e);
            }),
            (t.prototype.reset = function () {
              Ea(this, ma, ma);
            }),
            Object.defineProperty(t.prototype, "align", {
              get: function () {
                return this._align;
              },
              set: function (t) {
                this._align !== t && ((this._align = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "breakWords", {
              get: function () {
                return this._breakWords;
              },
              set: function (t) {
                this._breakWords !== t &&
                  ((this._breakWords = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadow", {
              get: function () {
                return this._dropShadow;
              },
              set: function (t) {
                this._dropShadow !== t &&
                  ((this._dropShadow = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadowAlpha", {
              get: function () {
                return this._dropShadowAlpha;
              },
              set: function (t) {
                this._dropShadowAlpha !== t &&
                  ((this._dropShadowAlpha = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadowAngle", {
              get: function () {
                return this._dropShadowAngle;
              },
              set: function (t) {
                this._dropShadowAngle !== t &&
                  ((this._dropShadowAngle = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadowBlur", {
              get: function () {
                return this._dropShadowBlur;
              },
              set: function (t) {
                this._dropShadowBlur !== t &&
                  ((this._dropShadowBlur = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadowColor", {
              get: function () {
                return this._dropShadowColor;
              },
              set: function (t) {
                var e = ya(t);
                this._dropShadowColor !== e &&
                  ((this._dropShadowColor = e), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadowDistance", {
              get: function () {
                return this._dropShadowDistance;
              },
              set: function (t) {
                this._dropShadowDistance !== t &&
                  ((this._dropShadowDistance = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fill", {
              get: function () {
                return this._fill;
              },
              set: function (t) {
                var e = ya(t);
                this._fill !== e && ((this._fill = e), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fillGradientType", {
              get: function () {
                return this._fillGradientType;
              },
              set: function (t) {
                this._fillGradientType !== t &&
                  ((this._fillGradientType = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fillGradientStops", {
              get: function () {
                return this._fillGradientStops;
              },
              set: function (t) {
                (function (t, e) {
                  if (!Array.isArray(t) || !Array.isArray(e)) return !1;
                  if (t.length !== e.length) return !1;
                  for (var n = 0; n < t.length; ++n)
                    if (t[n] !== e[n]) return !1;
                  return !0;
                })(this._fillGradientStops, t) ||
                  ((this._fillGradientStops = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fontFamily", {
              get: function () {
                return this._fontFamily;
              },
              set: function (t) {
                this.fontFamily !== t &&
                  ((this._fontFamily = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fontSize", {
              get: function () {
                return this._fontSize;
              },
              set: function (t) {
                this._fontSize !== t && ((this._fontSize = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fontStyle", {
              get: function () {
                return this._fontStyle;
              },
              set: function (t) {
                this._fontStyle !== t &&
                  ((this._fontStyle = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fontVariant", {
              get: function () {
                return this._fontVariant;
              },
              set: function (t) {
                this._fontVariant !== t &&
                  ((this._fontVariant = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fontWeight", {
              get: function () {
                return this._fontWeight;
              },
              set: function (t) {
                this._fontWeight !== t &&
                  ((this._fontWeight = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "letterSpacing", {
              get: function () {
                return this._letterSpacing;
              },
              set: function (t) {
                this._letterSpacing !== t &&
                  ((this._letterSpacing = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "lineHeight", {
              get: function () {
                return this._lineHeight;
              },
              set: function (t) {
                this._lineHeight !== t &&
                  ((this._lineHeight = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "leading", {
              get: function () {
                return this._leading;
              },
              set: function (t) {
                this._leading !== t && ((this._leading = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "lineJoin", {
              get: function () {
                return this._lineJoin;
              },
              set: function (t) {
                this._lineJoin !== t && ((this._lineJoin = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "miterLimit", {
              get: function () {
                return this._miterLimit;
              },
              set: function (t) {
                this._miterLimit !== t &&
                  ((this._miterLimit = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "padding", {
              get: function () {
                return this._padding;
              },
              set: function (t) {
                this._padding !== t && ((this._padding = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "stroke", {
              get: function () {
                return this._stroke;
              },
              set: function (t) {
                var e = ya(t);
                this._stroke !== e && ((this._stroke = e), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "strokeThickness", {
              get: function () {
                return this._strokeThickness;
              },
              set: function (t) {
                this._strokeThickness !== t &&
                  ((this._strokeThickness = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "textBaseline", {
              get: function () {
                return this._textBaseline;
              },
              set: function (t) {
                this._textBaseline !== t &&
                  ((this._textBaseline = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "trim", {
              get: function () {
                return this._trim;
              },
              set: function (t) {
                this._trim !== t && ((this._trim = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "whiteSpace", {
              get: function () {
                return this._whiteSpace;
              },
              set: function (t) {
                this._whiteSpace !== t &&
                  ((this._whiteSpace = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "wordWrap", {
              get: function () {
                return this._wordWrap;
              },
              set: function (t) {
                this._wordWrap !== t && ((this._wordWrap = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "wordWrapWidth", {
              get: function () {
                return this._wordWrapWidth;
              },
              set: function (t) {
                this._wordWrapWidth !== t &&
                  ((this._wordWrapWidth = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.toFontString = function () {
              var t =
                  "number" == typeof this.fontSize
                    ? this.fontSize + "px"
                    : this.fontSize,
                e = this.fontFamily;
              Array.isArray(this.fontFamily) ||
                (e = this.fontFamily.split(","));
              for (var n = e.length - 1; n >= 0; n--) {
                var r = e[n].trim();
                !/([\"\'])[^\'\"]+\1/.test(r) &&
                  _a.indexOf(r) < 0 &&
                  (r = '"' + r + '"'),
                  (e[n] = r);
              }
              return (
                this.fontStyle +
                " " +
                this.fontVariant +
                " " +
                this.fontWeight +
                " " +
                t +
                " " +
                e.join(",")
              );
            }),
            t
          );
        })();
      function va(t) {
        return "number" == typeof t
          ? Dt(t)
          : ("string" == typeof t &&
              0 === t.indexOf("0x") &&
              (t = t.replace("0x", "#")),
            t);
      }
      function ya(t) {
        if (Array.isArray(t)) {
          for (var e = 0; e < t.length; ++e) t[e] = va(t[e]);
          return t;
        }
        return va(t);
      }
      function Ea(t, e, n) {
        for (var r in n)
          Array.isArray(e[r]) ? (t[r] = e[r].slice()) : (t[r] = e[r]);
      }
      var Ta = (function () {
        function t(t, e, n, r, i, o, a, s, l) {
          (this.text = t),
            (this.style = e),
            (this.width = n),
            (this.height = r),
            (this.lines = i),
            (this.lineWidths = o),
            (this.lineHeight = a),
            (this.maxLineWidth = s),
            (this.fontProperties = l);
        }
        return (
          (t.measureText = function (e, n, r, i) {
            void 0 === i && (i = t._canvas), (r = null == r ? n.wordWrap : r);
            var o = n.toFontString(),
              a = t.measureFont(o);
            0 === a.fontSize &&
              ((a.fontSize = n.fontSize), (a.ascent = n.fontSize));
            var s = i.getContext("2d");
            s.font = o;
            for (
              var l = (r ? t.wordWrap(e, n, i) : e).split(/(?:\r\n|\r|\n)/),
                u = new Array(l.length),
                h = 0,
                c = 0;
              c < l.length;
              c++
            ) {
              var d =
                s.measureText(l[c]).width + (l[c].length - 1) * n.letterSpacing;
              (u[c] = d), (h = Math.max(h, d));
            }
            var f = h + n.strokeThickness;
            n.dropShadow && (f += n.dropShadowDistance);
            var p = n.lineHeight || a.fontSize + n.strokeThickness,
              m =
                Math.max(p, a.fontSize + n.strokeThickness) +
                (l.length - 1) * (p + n.leading);
            return (
              n.dropShadow && (m += n.dropShadowDistance),
              new t(e, n, f, m, l, u, p + n.leading, h, a)
            );
          }),
          (t.wordWrap = function (e, n, r) {
            void 0 === r && (r = t._canvas);
            for (
              var i = r.getContext("2d"),
                o = 0,
                a = "",
                s = "",
                l = Object.create(null),
                u = n.letterSpacing,
                h = n.whiteSpace,
                c = t.collapseSpaces(h),
                d = t.collapseNewlines(h),
                f = !c,
                p = n.wordWrapWidth + u,
                m = t.tokenize(e),
                _ = 0;
              _ < m.length;
              _++
            ) {
              var g = m[_];
              if (t.isNewline(g)) {
                if (!d) {
                  (s += t.addLine(a)), (f = !c), (a = ""), (o = 0);
                  continue;
                }
                g = " ";
              }
              if (c) {
                var v = t.isBreakingSpace(g),
                  y = t.isBreakingSpace(a[a.length - 1]);
                if (v && y) continue;
              }
              var E = t.getFromCache(g, u, l, i);
              if (E > p)
                if (
                  ("" !== a && ((s += t.addLine(a)), (a = ""), (o = 0)),
                  t.canBreakWords(g, n.breakWords))
                )
                  for (var T = t.wordWrapSplit(g), b = 0; b < T.length; b++) {
                    for (var x = T[b], S = 1; T[b + S]; ) {
                      var M = T[b + S],
                        A = x[x.length - 1];
                      if (t.canBreakChars(A, M, g, b, n.breakWords)) break;
                      (x += M), S++;
                    }
                    b += x.length - 1;
                    var R = t.getFromCache(x, u, l, i);
                    R + o > p &&
                      ((s += t.addLine(a)), (f = !1), (a = ""), (o = 0)),
                      (a += x),
                      (o += R);
                  }
                else {
                  a.length > 0 && ((s += t.addLine(a)), (a = ""), (o = 0));
                  var w = _ === m.length - 1;
                  (s += t.addLine(g, !w)), (f = !1), (a = ""), (o = 0);
                }
              else
                E + o > p && ((f = !1), (s += t.addLine(a)), (a = ""), (o = 0)),
                  (a.length > 0 || !t.isBreakingSpace(g) || f) &&
                    ((a += g), (o += E));
            }
            return s + t.addLine(a, !1);
          }),
          (t.addLine = function (e, n) {
            return (
              void 0 === n && (n = !0), (e = t.trimRight(e)), n ? e + "\n" : e
            );
          }),
          (t.getFromCache = function (t, e, n, r) {
            var i = n[t];
            if ("number" != typeof i) {
              var o = t.length * e;
              (i = r.measureText(t).width + o), (n[t] = i);
            }
            return i;
          }),
          (t.collapseSpaces = function (t) {
            return "normal" === t || "pre-line" === t;
          }),
          (t.collapseNewlines = function (t) {
            return "normal" === t;
          }),
          (t.trimRight = function (e) {
            if ("string" != typeof e) return "";
            for (var n = e.length - 1; n >= 0; n--) {
              var r = e[n];
              if (!t.isBreakingSpace(r)) break;
              e = e.slice(0, -1);
            }
            return e;
          }),
          (t.isNewline = function (e) {
            return (
              "string" == typeof e && t._newlines.indexOf(e.charCodeAt(0)) >= 0
            );
          }),
          (t.isBreakingSpace = function (e, n) {
            return (
              "string" == typeof e &&
              t._breakingSpaces.indexOf(e.charCodeAt(0)) >= 0
            );
          }),
          (t.tokenize = function (e) {
            var n = [],
              r = "";
            if ("string" != typeof e) return n;
            for (var i = 0; i < e.length; i++) {
              var o = e[i],
                a = e[i + 1];
              t.isBreakingSpace(o, a) || t.isNewline(o)
                ? ("" !== r && (n.push(r), (r = "")), n.push(o))
                : (r += o);
            }
            return "" !== r && n.push(r), n;
          }),
          (t.canBreakWords = function (t, e) {
            return e;
          }),
          (t.canBreakChars = function (t, e, n, r, i) {
            return !0;
          }),
          (t.wordWrapSplit = function (t) {
            return t.split("");
          }),
          (t.measureFont = function (e) {
            if (t._fonts[e]) return t._fonts[e];
            var n = { ascent: 0, descent: 0, fontSize: 0 },
              r = t._canvas,
              i = t._context;
            i.font = e;
            var o = t.METRICS_STRING + t.BASELINE_SYMBOL,
              a = Math.ceil(i.measureText(o).width),
              s = Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),
              l = Math.ceil(t.HEIGHT_MULTIPLIER * s);
            (s = (s * t.BASELINE_MULTIPLIER) | 0),
              (r.width = a),
              (r.height = l),
              (i.fillStyle = "#f00"),
              i.fillRect(0, 0, a, l),
              (i.font = e),
              (i.textBaseline = "alphabetic"),
              (i.fillStyle = "#000"),
              i.fillText(o, 0, s);
            var u = i.getImageData(0, 0, a, l).data,
              h = u.length,
              c = 4 * a,
              d = 0,
              f = 0,
              p = !1;
            for (d = 0; d < s; ++d) {
              for (var m = 0; m < c; m += 4)
                if (255 !== u[f + m]) {
                  p = !0;
                  break;
                }
              if (p) break;
              f += c;
            }
            for (n.ascent = s - d, f = h - c, p = !1, d = l; d > s; --d) {
              for (m = 0; m < c; m += 4)
                if (255 !== u[f + m]) {
                  p = !0;
                  break;
                }
              if (p) break;
              f -= c;
            }
            return (
              (n.descent = d - s),
              (n.fontSize = n.ascent + n.descent),
              (t._fonts[e] = n),
              n
            );
          }),
          (t.clearMetrics = function (e) {
            void 0 === e && (e = ""), e ? delete t._fonts[e] : (t._fonts = {});
          }),
          Object.defineProperty(t, "_canvas", {
            get: function () {
              if (!t.__canvas) {
                var e = void 0;
                try {
                  var n = new OffscreenCanvas(0, 0),
                    r = n.getContext("2d");
                  if (r && r.measureText) return (t.__canvas = n), n;
                  e = At.ADAPTER.createCanvas();
                } catch (t) {
                  e = At.ADAPTER.createCanvas();
                }
                (e.width = e.height = 10), (t.__canvas = e);
              }
              return t.__canvas;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(t, "_context", {
            get: function () {
              return (
                t.__context || (t.__context = t._canvas.getContext("2d")),
                t.__context
              );
            },
            enumerable: !1,
            configurable: !0,
          }),
          t
        );
      })();
      (Ta._fonts = {}),
        (Ta.METRICS_STRING = "|ÉqÅ"),
        (Ta.BASELINE_SYMBOL = "M"),
        (Ta.BASELINE_MULTIPLIER = 1.4),
        (Ta.HEIGHT_MULTIPLIER = 2),
        (Ta._newlines = [10, 13]),
        (Ta._breakingSpaces = [
          9, 32, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8200, 8201, 8202,
          8287, 12288,
        ]);
      var ba = { texture: !0, children: !1, baseTexture: !0 },
        xa = (function (t) {
          function e(e, n, r) {
            var i = this,
              o = !1;
            r || ((r = At.ADAPTER.createCanvas()), (o = !0)),
              (r.width = 3),
              (r.height = 3);
            var a = Nn.from(r);
            return (
              (a.orig = new ue()),
              (a.trim = new ue()),
              ((i = t.call(this, a) || this)._ownCanvas = o),
              (i.canvas = r),
              (i.context = r.getContext("2d")),
              (i._resolution = At.RESOLUTION),
              (i._autoResolution = !0),
              (i._text = null),
              (i._style = null),
              (i._styleListener = null),
              (i._font = ""),
              (i.text = e),
              (i.style = n),
              (i.localStyleID = -1),
              i
            );
          }
          return (
            (function (t, e) {
              function n() {
                this.constructor = t;
              }
              pa(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((n.prototype = e.prototype), new n()));
            })(e, t),
            (e.prototype.updateText = function (t) {
              var n = this._style;
              if (
                (this.localStyleID !== n.styleID &&
                  ((this.dirty = !0), (this.localStyleID = n.styleID)),
                this.dirty || !t)
              ) {
                this._font = this._style.toFontString();
                var r,
                  i,
                  o = this.context,
                  a = Ta.measureText(
                    this._text || " ",
                    this._style,
                    this._style.wordWrap,
                    this.canvas,
                  ),
                  s = a.width,
                  l = a.height,
                  u = a.lines,
                  h = a.lineHeight,
                  c = a.lineWidths,
                  d = a.maxLineWidth,
                  f = a.fontProperties;
                (this.canvas.width = Math.ceil(
                  Math.ceil(Math.max(1, s) + 2 * n.padding) * this._resolution,
                )),
                  (this.canvas.height = Math.ceil(
                    Math.ceil(Math.max(1, l) + 2 * n.padding) *
                      this._resolution,
                  )),
                  o.scale(this._resolution, this._resolution),
                  o.clearRect(0, 0, this.canvas.width, this.canvas.height),
                  (o.font = this._font),
                  (o.lineWidth = n.strokeThickness),
                  (o.textBaseline = n.textBaseline),
                  (o.lineJoin = n.lineJoin),
                  (o.miterLimit = n.miterLimit);
                for (var p = n.dropShadow ? 2 : 1, m = 0; m < p; ++m) {
                  var _ = n.dropShadow && 0 === m,
                    g = _ ? Math.ceil(Math.max(1, l) + 2 * n.padding) : 0,
                    v = g * this._resolution;
                  if (_) {
                    (o.fillStyle = "black"), (o.strokeStyle = "black");
                    var y = n.dropShadowColor,
                      E = Lt("number" == typeof y ? y : Ut(y)),
                      T = n.dropShadowBlur * this._resolution,
                      b = n.dropShadowDistance * this._resolution;
                    (o.shadowColor =
                      "rgba(" +
                      255 * E[0] +
                      "," +
                      255 * E[1] +
                      "," +
                      255 * E[2] +
                      "," +
                      n.dropShadowAlpha +
                      ")"),
                      (o.shadowBlur = T),
                      (o.shadowOffsetX = Math.cos(n.dropShadowAngle) * b),
                      (o.shadowOffsetY = Math.sin(n.dropShadowAngle) * b + v);
                  } else
                    (o.fillStyle = this._generateFillStyle(n, u, a)),
                      (o.strokeStyle = n.stroke),
                      (o.shadowColor = "black"),
                      (o.shadowBlur = 0),
                      (o.shadowOffsetX = 0),
                      (o.shadowOffsetY = 0);
                  var x = (h - f.fontSize) / 2;
                  (!e.nextLineHeightBehavior || h - f.fontSize < 0) && (x = 0);
                  for (var S = 0; S < u.length; S++)
                    (r = n.strokeThickness / 2),
                      (i = n.strokeThickness / 2 + S * h + f.ascent + x),
                      "right" === n.align
                        ? (r += d - c[S])
                        : "center" === n.align && (r += (d - c[S]) / 2),
                      n.stroke &&
                        n.strokeThickness &&
                        this.drawLetterSpacing(
                          u[S],
                          r + n.padding,
                          i + n.padding - g,
                          !0,
                        ),
                      n.fill &&
                        this.drawLetterSpacing(
                          u[S],
                          r + n.padding,
                          i + n.padding - g,
                        );
                }
                this.updateTexture();
              }
            }),
            (e.prototype.drawLetterSpacing = function (t, n, r, i) {
              void 0 === i && (i = !1);
              var o = this._style.letterSpacing,
                a =
                  e.experimentalLetterSpacing &&
                  ("letterSpacing" in CanvasRenderingContext2D.prototype ||
                    "textLetterSpacing" in CanvasRenderingContext2D.prototype);
              if (0 === o || a)
                return (
                  a &&
                    ((this.context.letterSpacing = o),
                    (this.context.textLetterSpacing = o)),
                  void (i
                    ? this.context.strokeText(t, n, r)
                    : this.context.fillText(t, n, r))
                );
              for (
                var s = n,
                  l = Array.from ? Array.from(t) : t.split(""),
                  u = this.context.measureText(t).width,
                  h = 0,
                  c = 0;
                c < l.length;
                ++c
              ) {
                var d = l[c];
                i
                  ? this.context.strokeText(d, s, r)
                  : this.context.fillText(d, s, r);
                for (var f = "", p = c + 1; p < l.length; ++p) f += l[p];
                (s += u - (h = this.context.measureText(f).width) + o), (u = h);
              }
            }),
            (e.prototype.updateTexture = function () {
              var t = this.canvas;
              if (this._style.trim) {
                var e = (function (t) {
                  var e,
                    n,
                    r,
                    i = t.width,
                    o = t.height,
                    a = t.getContext("2d"),
                    s = a.getImageData(0, 0, i, o).data,
                    l = s.length,
                    u = { top: null, left: null, right: null, bottom: null },
                    h = null;
                  for (e = 0; e < l; e += 4)
                    0 !== s[e + 3] &&
                      ((n = (e / 4) % i),
                      (r = ~~(e / 4 / i)),
                      null === u.top && (u.top = r),
                      (null === u.left || n < u.left) && (u.left = n),
                      (null === u.right || u.right < n) && (u.right = n + 1),
                      (null === u.bottom || u.bottom < r) && (u.bottom = r));
                  return (
                    null !== u.top &&
                      ((i = u.right - u.left),
                      (o = u.bottom - u.top + 1),
                      (h = a.getImageData(u.left, u.top, i, o))),
                    { height: o, width: i, data: h }
                  );
                })(t);
                e.data &&
                  ((t.width = e.width),
                  (t.height = e.height),
                  this.context.putImageData(e.data, 0, 0));
              }
              var n = this._texture,
                r = this._style,
                i = r.trim ? 0 : r.padding,
                o = n.baseTexture;
              (n.trim.width = n._frame.width = t.width / this._resolution),
                (n.trim.height = n._frame.height = t.height / this._resolution),
                (n.trim.x = -i),
                (n.trim.y = -i),
                (n.orig.width = n._frame.width - 2 * i),
                (n.orig.height = n._frame.height - 2 * i),
                this._onTextureUpdate(),
                o.setRealSize(t.width, t.height, this._resolution),
                n.updateUvs(),
                (this.dirty = !1);
            }),
            (e.prototype._render = function (e) {
              this._autoResolution &&
                this._resolution !== e.resolution &&
                ((this._resolution = e.resolution), (this.dirty = !0)),
                this.updateText(!0),
                t.prototype._render.call(this, e);
            }),
            (e.prototype.updateTransform = function () {
              this.updateText(!0), t.prototype.updateTransform.call(this);
            }),
            (e.prototype.getBounds = function (e, n) {
              return (
                this.updateText(!0),
                -1 === this._textureID && (e = !1),
                t.prototype.getBounds.call(this, e, n)
              );
            }),
            (e.prototype.getLocalBounds = function (e) {
              return (
                this.updateText(!0), t.prototype.getLocalBounds.call(this, e)
              );
            }),
            (e.prototype._calculateBounds = function () {
              this.calculateVertices(), this._bounds.addQuad(this.vertexData);
            }),
            (e.prototype._generateFillStyle = function (t, e, n) {
              var r,
                i = t.fill;
              if (!Array.isArray(i)) return i;
              if (1 === i.length) return i[0];
              var o = t.dropShadow ? t.dropShadowDistance : 0,
                a = t.padding || 0,
                s = this.canvas.width / this._resolution - o - 2 * a,
                l = this.canvas.height / this._resolution - o - 2 * a,
                u = i.slice(),
                h = t.fillGradientStops.slice();
              if (!h.length)
                for (var c = u.length + 1, d = 1; d < c; ++d) h.push(d / c);
              if (
                (u.unshift(i[0]),
                h.unshift(0),
                u.push(i[i.length - 1]),
                h.push(1),
                t.fillGradientType === Ko.LINEAR_VERTICAL)
              ) {
                r = this.context.createLinearGradient(s / 2, a, s / 2, l + a);
                var f = n.fontProperties.fontSize + t.strokeThickness;
                for (d = 0; d < e.length; d++) {
                  var p = n.lineHeight * (d - 1) + f,
                    m = n.lineHeight * d,
                    _ = m;
                  d > 0 && p > m && (_ = (m + p) / 2);
                  var g = m + f,
                    v = n.lineHeight * (d + 1),
                    y = g;
                  d + 1 < e.length && v < g && (y = (g + v) / 2);
                  for (var E = (y - _) / l, T = 0; T < u.length; T++) {
                    var b;
                    b = "number" == typeof h[T] ? h[T] : T / u.length;
                    var x = Math.min(1, Math.max(0, _ / l + b * E));
                    (x = Number(x.toFixed(5))), r.addColorStop(x, u[T]);
                  }
                }
              } else {
                r = this.context.createLinearGradient(a, l / 2, s + a, l / 2);
                var S = u.length + 1,
                  M = 1;
                for (d = 0; d < u.length; d++) {
                  var A;
                  (A = "number" == typeof h[d] ? h[d] : M / S),
                    r.addColorStop(A, u[d]),
                    M++;
                }
              }
              return r;
            }),
            (e.prototype.destroy = function (e) {
              "boolean" == typeof e && (e = { children: e }),
                (e = Object.assign({}, ba, e)),
                t.prototype.destroy.call(this, e),
                this._ownCanvas && (this.canvas.height = this.canvas.width = 0),
                (this.context = null),
                (this.canvas = null),
                (this._style = null);
            }),
            Object.defineProperty(e.prototype, "width", {
              get: function () {
                return (
                  this.updateText(!0),
                  Math.abs(this.scale.x) * this._texture.orig.width
                );
              },
              set: function (t) {
                this.updateText(!0);
                var e = jt(this.scale.x) || 1;
                (this.scale.x = (e * t) / this._texture.orig.width),
                  (this._width = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "height", {
              get: function () {
                return (
                  this.updateText(!0),
                  Math.abs(this.scale.y) * this._texture.orig.height
                );
              },
              set: function (t) {
                this.updateText(!0);
                var e = jt(this.scale.y) || 1;
                (this.scale.y = (e * t) / this._texture.orig.height),
                  (this._height = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "style", {
              get: function () {
                return this._style;
              },
              set: function (t) {
                (t = t || {}),
                  (this._style = t instanceof ga ? t : new ga(t)),
                  (this.localStyleID = -1),
                  (this.dirty = !0);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "text", {
              get: function () {
                return this._text;
              },
              set: function (t) {
                (t = String(null == t ? "" : t)),
                  this._text !== t && ((this._text = t), (this.dirty = !0));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "resolution", {
              get: function () {
                return this._resolution;
              },
              set: function (t) {
                (this._autoResolution = !1),
                  this._resolution !== t &&
                    ((this._resolution = t), (this.dirty = !0));
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.nextLineHeightBehavior = !1),
            (e.experimentalLetterSpacing = !1),
            e
          );
        })(fa);
      At.UPLOADS_PER_FRAME = 4;
      var Sa = function (t, e) {
          return (
            (Sa =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            Sa(t, e)
          );
        },
        Ma = (function () {
          function t(t) {
            (this.maxItemsPerFrame = t), (this.itemsLeft = 0);
          }
          return (
            (t.prototype.beginFrame = function () {
              this.itemsLeft = this.maxItemsPerFrame;
            }),
            (t.prototype.allowedToUpload = function () {
              return this.itemsLeft-- > 0;
            }),
            t
          );
        })();
      function Aa(t, e) {
        var n = !1;
        if (t && t._textures && t._textures.length)
          for (var r = 0; r < t._textures.length; r++)
            if (t._textures[r] instanceof Nn) {
              var i = t._textures[r].baseTexture;
              -1 === e.indexOf(i) && (e.push(i), (n = !0));
            }
        return n;
      }
      function Ra(t, e) {
        if (t.baseTexture instanceof _n) {
          var n = t.baseTexture;
          return -1 === e.indexOf(n) && e.push(n), !0;
        }
        return !1;
      }
      function wa(t, e) {
        if (t._texture && t._texture instanceof Nn) {
          var n = t._texture.baseTexture;
          return -1 === e.indexOf(n) && e.push(n), !0;
        }
        return !1;
      }
      function Pa(t, e) {
        return e instanceof xa && (e.updateText(!0), !0);
      }
      function Ia(t, e) {
        if (e instanceof ga) {
          var n = e.toFontString();
          return Ta.measureFont(n), !0;
        }
        return !1;
      }
      function Oa(t, e) {
        if (t instanceof xa) {
          -1 === e.indexOf(t.style) && e.push(t.style),
            -1 === e.indexOf(t) && e.push(t);
          var n = t._texture.baseTexture;
          return -1 === e.indexOf(n) && e.push(n), !0;
        }
        return !1;
      }
      function Ca(t, e) {
        return t instanceof ga && (-1 === e.indexOf(t) && e.push(t), !0);
      }
      var Na = (function () {
        function t(t) {
          var e = this;
          (this.limiter = new Ma(At.UPLOADS_PER_FRAME)),
            (this.renderer = t),
            (this.uploadHookHelper = null),
            (this.queue = []),
            (this.addHooks = []),
            (this.uploadHooks = []),
            (this.completes = []),
            (this.ticking = !1),
            (this.delayedTick = function () {
              e.queue && e.prepareItems();
            }),
            this.registerFindHook(Oa),
            this.registerFindHook(Ca),
            this.registerFindHook(Aa),
            this.registerFindHook(Ra),
            this.registerFindHook(wa),
            this.registerUploadHook(Pa),
            this.registerUploadHook(Ia);
        }
        return (
          (t.prototype.upload = function (t, e) {
            var n = this;
            return (
              "function" == typeof t && ((e = t), (t = null)),
              e &&
                Zt(
                  "6.5.0",
                  "BasePrepare.upload callback is deprecated, use the return Promise instead.",
                ),
              new Promise(function (r) {
                t && n.add(t);
                var i = function () {
                  null == e || e(), r();
                };
                n.queue.length
                  ? (n.completes.push(i),
                    n.ticking ||
                      ((n.ticking = !0),
                      an.system.addOnce(n.tick, n, tn.UTILITY)))
                  : i();
              })
            );
          }),
          (t.prototype.tick = function () {
            setTimeout(this.delayedTick, 0);
          }),
          (t.prototype.prepareItems = function () {
            for (
              this.limiter.beginFrame();
              this.queue.length && this.limiter.allowedToUpload();

            ) {
              var t = this.queue[0],
                e = !1;
              if (t && !t._destroyed)
                for (var n = 0, r = this.uploadHooks.length; n < r; n++)
                  if (this.uploadHooks[n](this.uploadHookHelper, t)) {
                    this.queue.shift(), (e = !0);
                    break;
                  }
              e || this.queue.shift();
            }
            if (this.queue.length)
              an.system.addOnce(this.tick, this, tn.UTILITY);
            else {
              this.ticking = !1;
              var i = this.completes.slice(0);
              for (this.completes.length = 0, n = 0, r = i.length; n < r; n++)
                i[n]();
            }
          }),
          (t.prototype.registerFindHook = function (t) {
            return t && this.addHooks.push(t), this;
          }),
          (t.prototype.registerUploadHook = function (t) {
            return t && this.uploadHooks.push(t), this;
          }),
          (t.prototype.add = function (t) {
            for (
              var e = 0, n = this.addHooks.length;
              e < n && !this.addHooks[e](t, this.queue);
              e++
            );
            if (t instanceof Qe)
              for (e = t.children.length - 1; e >= 0; e--)
                this.add(t.children[e]);
            return this;
          }),
          (t.prototype.destroy = function () {
            this.ticking && an.system.remove(this.tick, this),
              (this.ticking = !1),
              (this.addHooks = null),
              (this.uploadHooks = null),
              (this.renderer = null),
              (this.completes = null),
              (this.queue = null),
              (this.limiter = null),
              (this.uploadHookHelper = null);
          }),
          t
        );
      })();
      function La(t, e) {
        return (
          e instanceof _n &&
          (e._glTextures[t.CONTEXT_UID] || t.texture.bind(e), !0)
        );
      }
      function Da(t, e) {
        if (!(e instanceof ua)) return !1;
        var n = e.geometry;
        e.finishPoly(), n.updateBatches();
        for (var r = n.batches, i = 0; i < r.length; i++) {
          var o = r[i].style.texture;
          o && La(t, o.baseTexture);
        }
        return n.batchable || t.geometry.bind(n, e._resolveDirectShader(t)), !0;
      }
      function Ua(t, e) {
        return t instanceof ua && (e.push(t), !0);
      }
      var Fa = (function (t) {
          function e(e) {
            var n = t.call(this, e) || this;
            return (
              (n.uploadHookHelper = n.renderer),
              n.registerFindHook(Ua),
              n.registerUploadHook(La),
              n.registerUploadHook(Da),
              n
            );
          }
          return (
            (function (t, e) {
              function n() {
                this.constructor = t;
              }
              Sa(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((n.prototype = e.prototype), new n()));
            })(e, t),
            (e.extension = { name: "prepare", type: $e.RendererPlugin }),
            e
          );
        })(Na),
        Ba =
          ((function () {
            function t(t) {
              (this.maxMilliseconds = t), (this.frameStart = 0);
            }
            (t.prototype.beginFrame = function () {
              this.frameStart = Date.now();
            }),
              (t.prototype.allowedToUpload = function () {
                return Date.now() - this.frameStart < this.maxMilliseconds;
              });
          })(),
          (function () {
            function t(t, e, n) {
              void 0 === n && (n = null),
                (this.linkedSheets = []),
                (this._texture = t instanceof Nn ? t : null),
                (this.baseTexture =
                  t instanceof _n ? t : this._texture.baseTexture),
                (this.textures = {}),
                (this.animations = {}),
                (this.data = e);
              var r = this.baseTexture.resource;
              (this.resolution = this._updateResolution(
                n || (r ? r.url : null),
              )),
                (this._frames = this.data.frames),
                (this._frameKeys = Object.keys(this._frames)),
                (this._batchIndex = 0),
                (this._callback = null);
            }
            return (
              (t.prototype._updateResolution = function (t) {
                void 0 === t && (t = null);
                var e = this.data.meta.scale,
                  n = ne(t, null);
                return (
                  null === n && (n = void 0 !== e ? parseFloat(e) : 1),
                  1 !== n && this.baseTexture.setResolution(n),
                  n
                );
              }),
              (t.prototype.parse = function (e) {
                var n = this;
                return (
                  e &&
                    Zt(
                      "6.5.0",
                      "Spritesheet.parse callback is deprecated, use the return Promise instead.",
                    ),
                  new Promise(function (r) {
                    (n._callback = function (t) {
                      null == e || e(t), r(t);
                    }),
                      (n._batchIndex = 0),
                      n._frameKeys.length <= t.BATCH_SIZE
                        ? (n._processFrames(0),
                          n._processAnimations(),
                          n._parseComplete())
                        : n._nextBatch();
                  })
                );
              }),
              (t.prototype._processFrames = function (e) {
                for (
                  var n = e, r = t.BATCH_SIZE;
                  n - e < r && n < this._frameKeys.length;

                ) {
                  var i = this._frameKeys[n],
                    o = this._frames[i],
                    a = o.frame;
                  if (a) {
                    var s,
                      l = null,
                      u =
                        !1 !== o.trimmed && o.sourceSize
                          ? o.sourceSize
                          : o.frame,
                      h = new ue(
                        0,
                        0,
                        Math.floor(u.w) / this.resolution,
                        Math.floor(u.h) / this.resolution,
                      );
                    (s = o.rotated
                      ? new ue(
                          Math.floor(a.x) / this.resolution,
                          Math.floor(a.y) / this.resolution,
                          Math.floor(a.h) / this.resolution,
                          Math.floor(a.w) / this.resolution,
                        )
                      : new ue(
                          Math.floor(a.x) / this.resolution,
                          Math.floor(a.y) / this.resolution,
                          Math.floor(a.w) / this.resolution,
                          Math.floor(a.h) / this.resolution,
                        )),
                      !1 !== o.trimmed &&
                        o.spriteSourceSize &&
                        (l = new ue(
                          Math.floor(o.spriteSourceSize.x) / this.resolution,
                          Math.floor(o.spriteSourceSize.y) / this.resolution,
                          Math.floor(a.w) / this.resolution,
                          Math.floor(a.h) / this.resolution,
                        )),
                      (this.textures[i] = new Nn(
                        this.baseTexture,
                        s,
                        h,
                        l,
                        o.rotated ? 2 : 0,
                        o.anchor,
                      )),
                      Nn.addToCache(this.textures[i], i);
                  }
                  n++;
                }
              }),
              (t.prototype._processAnimations = function () {
                var t = this.data.animations || {};
                for (var e in t) {
                  this.animations[e] = [];
                  for (var n = 0; n < t[e].length; n++) {
                    var r = t[e][n];
                    this.animations[e].push(this.textures[r]);
                  }
                }
              }),
              (t.prototype._parseComplete = function () {
                var t = this._callback;
                (this._callback = null),
                  (this._batchIndex = 0),
                  t.call(this, this.textures);
              }),
              (t.prototype._nextBatch = function () {
                var e = this;
                this._processFrames(this._batchIndex * t.BATCH_SIZE),
                  this._batchIndex++,
                  setTimeout(function () {
                    e._batchIndex * t.BATCH_SIZE < e._frameKeys.length
                      ? e._nextBatch()
                      : (e._processAnimations(), e._parseComplete());
                  }, 0);
              }),
              (t.prototype.destroy = function (t) {
                var e;
                for (var n in (void 0 === t && (t = !1), this.textures))
                  this.textures[n].destroy();
                (this._frames = null),
                  (this._frameKeys = null),
                  (this.data = null),
                  (this.textures = null),
                  t &&
                    (null === (e = this._texture) ||
                      void 0 === e ||
                      e.destroy(),
                    this.baseTexture.destroy()),
                  (this._texture = null),
                  (this.baseTexture = null),
                  (this.linkedSheets = []);
              }),
              (t.BATCH_SIZE = 1e3),
              t
            );
          })()),
        Ga = (function () {
          function t() {}
          return (
            (t.use = function (e, n) {
              var r,
                i,
                o = this,
                a = e.name + "_image";
              if (
                e.data &&
                e.type === ji.TYPE.JSON &&
                e.data.frames &&
                !o.resources[a]
              ) {
                var s =
                  null ===
                    (i =
                      null === (r = e.data) || void 0 === r
                        ? void 0
                        : r.meta) || void 0 === i
                    ? void 0
                    : i.related_multi_packs;
                if (Array.isArray(s))
                  for (
                    var l = function (t) {
                        if ("string" != typeof t) return "continue";
                        var n = t.replace(".json", ""),
                          r = It.resolve(e.url.replace(o.baseUrl, ""), t);
                        if (
                          o.resources[n] ||
                          Object.values(o.resources).some(function (t) {
                            return It.format(It.parse(t.url)) === r;
                          })
                        )
                          return "continue";
                        var i = {
                          crossOrigin: e.crossOrigin,
                          loadType: ji.LOAD_TYPE.XHR,
                          xhrType: ji.XHR_RESPONSE_TYPE.JSON,
                          parentResource: e,
                          metadata: e.metadata,
                        };
                        o.add(n, r, i);
                      },
                      u = 0,
                      h = s;
                    u < h.length;
                    u++
                  )
                    l(h[u]);
                var c = {
                    crossOrigin: e.crossOrigin,
                    metadata: e.metadata.imageMetadata,
                    parentResource: e,
                  },
                  d = t.getResourcePath(e, o.baseUrl);
                o.add(a, d, c, function (t) {
                  if (t.error) n(t.error);
                  else {
                    var r = new Ba(t.texture, e.data, e.url);
                    r.parse().then(function () {
                      (e.spritesheet = r), (e.textures = r.textures), n();
                    });
                  }
                });
              } else n();
            }),
            (t.getResourcePath = function (t, e) {
              return t.isDataUrl
                ? t.data.meta.image
                : It.resolve(t.url.replace(e, ""), t.data.meta.image);
            }),
            (t.extension = $e.Loader),
            t
          );
        })(),
        ka = function (t, e) {
          return (
            (ka =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            ka(t, e)
          );
        };
      function Ha(t, e) {
        function n() {
          this.constructor = t;
        }
        ka(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n()));
      }
      var za = new se(),
        Va =
          ((function (t) {
            function e(e, n, r) {
              void 0 === n && (n = 100), void 0 === r && (r = 100);
              var i = t.call(this, e) || this;
              return (
                (i.tileTransform = new Se()),
                (i._width = n),
                (i._height = r),
                (i.uvMatrix = i.texture.uvMatrix || new Lr(e)),
                (i.pluginName = "tilingSprite"),
                (i.uvRespectAnchor = !1),
                i
              );
            }
            Ha(e, t),
              Object.defineProperty(e.prototype, "clampMargin", {
                get: function () {
                  return this.uvMatrix.clampMargin;
                },
                set: function (t) {
                  (this.uvMatrix.clampMargin = t), this.uvMatrix.update(!0);
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "tileScale", {
                get: function () {
                  return this.tileTransform.scale;
                },
                set: function (t) {
                  this.tileTransform.scale.copyFrom(t);
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "tilePosition", {
                get: function () {
                  return this.tileTransform.position;
                },
                set: function (t) {
                  this.tileTransform.position.copyFrom(t);
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype._onTextureUpdate = function () {
                this.uvMatrix && (this.uvMatrix.texture = this._texture),
                  (this._cachedTint = 16777215);
              }),
              (e.prototype._render = function (t) {
                var e = this._texture;
                e &&
                  e.valid &&
                  (this.tileTransform.updateLocalTransform(),
                  this.uvMatrix.update(),
                  t.batch.setObjectRenderer(t.plugins[this.pluginName]),
                  t.plugins[this.pluginName].render(this));
              }),
              (e.prototype._calculateBounds = function () {
                var t = this._width * -this._anchor._x,
                  e = this._height * -this._anchor._y,
                  n = this._width * (1 - this._anchor._x),
                  r = this._height * (1 - this._anchor._y);
                this._bounds.addFrame(this.transform, t, e, n, r);
              }),
              (e.prototype.getLocalBounds = function (e) {
                return 0 === this.children.length
                  ? ((this._bounds.minX = this._width * -this._anchor._x),
                    (this._bounds.minY = this._height * -this._anchor._y),
                    (this._bounds.maxX = this._width * (1 - this._anchor._x)),
                    (this._bounds.maxY = this._height * (1 - this._anchor._y)),
                    e ||
                      (this._localBoundsRect ||
                        (this._localBoundsRect = new ue()),
                      (e = this._localBoundsRect)),
                    this._bounds.getRectangle(e))
                  : t.prototype.getLocalBounds.call(this, e);
              }),
              (e.prototype.containsPoint = function (t) {
                this.worldTransform.applyInverse(t, za);
                var e = this._width,
                  n = this._height,
                  r = -e * this.anchor._x;
                if (za.x >= r && za.x < r + e) {
                  var i = -n * this.anchor._y;
                  if (za.y >= i && za.y < i + n) return !0;
                }
                return !1;
              }),
              (e.prototype.destroy = function (e) {
                t.prototype.destroy.call(this, e),
                  (this.tileTransform = null),
                  (this.uvMatrix = null);
              }),
              (e.from = function (t, n) {
                return new e(
                  t instanceof Nn ? t : Nn.from(t, n),
                  n.width,
                  n.height,
                );
              }),
              Object.defineProperty(e.prototype, "width", {
                get: function () {
                  return this._width;
                },
                set: function (t) {
                  this._width = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "height", {
                get: function () {
                  return this._height;
                },
                set: function (t) {
                  this._height = t;
                },
                enumerable: !1,
                configurable: !0,
              });
          })(fa),
          "#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n"),
        Xa = new me(),
        Wa = (function (t) {
          function e(e) {
            var n = t.call(this, e) || this;
            return (
              e.runners.contextChange.add(n),
              (n.quad = new Wn()),
              (n.state = Or.for2d()),
              n
            );
          }
          return (
            Ha(e, t),
            (e.prototype.contextChange = function () {
              var t = this.renderer,
                e = { globals: t.globalUniforms };
              (this.simpleShader = Ir.from(
                Va,
                "#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",
                e,
              )),
                (this.shader =
                  t.context.webGLVersion > 1
                    ? Ir.from(
                        "#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",
                        "#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",
                        e,
                      )
                    : Ir.from(
                        Va,
                        "#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",
                        e,
                      ));
            }),
            (e.prototype.render = function (t) {
              var e = this.renderer,
                n = this.quad,
                r = n.vertices;
              (r[0] = r[6] = t._width * -t.anchor.x),
                (r[1] = r[3] = t._height * -t.anchor.y),
                (r[2] = r[4] = t._width * (1 - t.anchor.x)),
                (r[5] = r[7] = t._height * (1 - t.anchor.y));
              var i = t.uvRespectAnchor ? t.anchor.x : 0,
                o = t.uvRespectAnchor ? t.anchor.y : 0;
              ((r = n.uvs)[0] = r[6] = -i),
                (r[1] = r[3] = -o),
                (r[2] = r[4] = 1 - i),
                (r[5] = r[7] = 1 - o),
                n.invalidate();
              var a = t._texture,
                s = a.baseTexture,
                l = s.alphaMode > 0,
                u = t.tileTransform.localTransform,
                h = t.uvMatrix,
                c =
                  s.isPowerOfTwo &&
                  a.frame.width === s.width &&
                  a.frame.height === s.height;
              c &&
                (s._glTextures[e.CONTEXT_UID]
                  ? (c = s.wrapMode !== $.CLAMP)
                  : s.wrapMode === $.CLAMP && (s.wrapMode = $.REPEAT));
              var d = c ? this.simpleShader : this.shader,
                f = a.width,
                p = a.height,
                m = t._width,
                _ = t._height;
              Xa.set(
                (u.a * f) / m,
                (u.b * f) / _,
                (u.c * p) / m,
                (u.d * p) / _,
                u.tx / m,
                u.ty / _,
              ),
                Xa.invert(),
                c
                  ? Xa.prepend(h.mapCoord)
                  : ((d.uniforms.uMapCoord = h.mapCoord.toArray(!0)),
                    (d.uniforms.uClampFrame = h.uClampFrame),
                    (d.uniforms.uClampOffset = h.uClampOffset)),
                (d.uniforms.uTransform = Xa.toArray(!0)),
                (d.uniforms.uColor = kt(
                  t.tint,
                  t.worldAlpha,
                  d.uniforms.uColor,
                  l,
                )),
                (d.uniforms.translationMatrix =
                  t.transform.worldTransform.toArray(!0)),
                (d.uniforms.uSampler = a),
                e.shader.bind(d),
                e.geometry.bind(n),
                (this.state.blendMode = Bt(t.blendMode, l)),
                e.state.set(this.state),
                e.geometry.draw(this.renderer.gl.TRIANGLES, 6, 0);
            }),
            (e.extension = { name: "tilingSprite", type: $e.RendererPlugin }),
            e
          );
        })($n),
        ja = function (t, e) {
          return (
            (ja =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            ja(t, e)
          );
        };
      function Ya(t, e) {
        function n() {
          this.constructor = t;
        }
        ja(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n()));
      }
      var qa = (function () {
          function t(t, e) {
            (this.uvBuffer = t),
              (this.uvMatrix = e),
              (this.data = null),
              (this._bufferUpdateId = -1),
              (this._textureUpdateId = -1),
              (this._updateID = 0);
          }
          return (
            (t.prototype.update = function (t) {
              if (
                t ||
                this._bufferUpdateId !== this.uvBuffer._updateID ||
                this._textureUpdateId !== this.uvMatrix._updateID
              ) {
                (this._bufferUpdateId = this.uvBuffer._updateID),
                  (this._textureUpdateId = this.uvMatrix._updateID);
                var e = this.uvBuffer.data;
                (this.data && this.data.length === e.length) ||
                  (this.data = new Float32Array(e.length)),
                  this.uvMatrix.multiplyUvs(e, this.data),
                  this._updateID++;
              }
            }),
            t
          );
        })(),
        Ka = new se(),
        Za = new de(),
        Qa = (function (t) {
          function e(e, n, r, i) {
            void 0 === i && (i = j.TRIANGLES);
            var o = t.call(this) || this;
            return (
              (o.geometry = e),
              (o.shader = n),
              (o.state = r || Or.for2d()),
              (o.drawMode = i),
              (o.start = 0),
              (o.size = 0),
              (o.uvs = null),
              (o.indices = null),
              (o.vertexData = new Float32Array(1)),
              (o.vertexDirty = -1),
              (o._transformID = -1),
              (o._roundPixels = At.ROUND_PIXELS),
              (o.batchUvs = null),
              o
            );
          }
          return (
            Ya(e, t),
            Object.defineProperty(e.prototype, "geometry", {
              get: function () {
                return this._geometry;
              },
              set: function (t) {
                this._geometry !== t &&
                  (this._geometry &&
                    (this._geometry.refCount--,
                    0 === this._geometry.refCount && this._geometry.dispose()),
                  (this._geometry = t),
                  this._geometry && this._geometry.refCount++,
                  (this.vertexDirty = -1));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "uvBuffer", {
              get: function () {
                return this.geometry.buffers[1];
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "verticesBuffer", {
              get: function () {
                return this.geometry.buffers[0];
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "material", {
              get: function () {
                return this.shader;
              },
              set: function (t) {
                this.shader = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "blendMode", {
              get: function () {
                return this.state.blendMode;
              },
              set: function (t) {
                this.state.blendMode = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "roundPixels", {
              get: function () {
                return this._roundPixels;
              },
              set: function (t) {
                this._roundPixels !== t && (this._transformID = -1),
                  (this._roundPixels = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "tint", {
              get: function () {
                return "tint" in this.shader ? this.shader.tint : null;
              },
              set: function (t) {
                this.shader.tint = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "texture", {
              get: function () {
                return "texture" in this.shader ? this.shader.texture : null;
              },
              set: function (t) {
                this.shader.texture = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype._render = function (t) {
              var n = this.geometry.buffers[0].data;
              this.shader.batchable &&
              this.drawMode === j.TRIANGLES &&
              n.length < 2 * e.BATCHABLE_SIZE
                ? this._renderToBatch(t)
                : this._renderDefault(t);
            }),
            (e.prototype._renderDefault = function (t) {
              var e = this.shader;
              (e.alpha = this.worldAlpha),
                e.update && e.update(),
                t.batch.flush(),
                (e.uniforms.translationMatrix =
                  this.transform.worldTransform.toArray(!0)),
                t.shader.bind(e),
                t.state.set(this.state),
                t.geometry.bind(this.geometry, e),
                t.geometry.draw(
                  this.drawMode,
                  this.size,
                  this.start,
                  this.geometry.instanceCount,
                );
            }),
            (e.prototype._renderToBatch = function (t) {
              var e = this.geometry,
                n = this.shader;
              n.uvMatrix && (n.uvMatrix.update(), this.calculateUvs()),
                this.calculateVertices(),
                (this.indices = e.indexBuffer.data),
                (this._tintRGB = n._tintRGB),
                (this._texture = n.texture);
              var r = this.material.pluginName;
              t.batch.setObjectRenderer(t.plugins[r]),
                t.plugins[r].render(this);
            }),
            (e.prototype.calculateVertices = function () {
              var t = this.geometry.buffers[0],
                e = t.data,
                n = t._updateID;
              if (
                n !== this.vertexDirty ||
                this._transformID !== this.transform._worldID
              ) {
                (this._transformID = this.transform._worldID),
                  this.vertexData.length !== e.length &&
                    (this.vertexData = new Float32Array(e.length));
                for (
                  var r = this.transform.worldTransform,
                    i = r.a,
                    o = r.b,
                    a = r.c,
                    s = r.d,
                    l = r.tx,
                    u = r.ty,
                    h = this.vertexData,
                    c = 0;
                  c < h.length / 2;
                  c++
                ) {
                  var d = e[2 * c],
                    f = e[2 * c + 1];
                  (h[2 * c] = i * d + a * f + l),
                    (h[2 * c + 1] = o * d + s * f + u);
                }
                if (this._roundPixels) {
                  var p = At.RESOLUTION;
                  for (c = 0; c < h.length; ++c)
                    h[c] = Math.round(((h[c] * p) | 0) / p);
                }
                this.vertexDirty = n;
              }
            }),
            (e.prototype.calculateUvs = function () {
              var t = this.geometry.buffers[1],
                e = this.shader;
              e.uvMatrix.isSimple
                ? (this.uvs = t.data)
                : (this.batchUvs || (this.batchUvs = new qa(t, e.uvMatrix)),
                  this.batchUvs.update(),
                  (this.uvs = this.batchUvs.data));
            }),
            (e.prototype._calculateBounds = function () {
              this.calculateVertices(),
                this._bounds.addVertexData(
                  this.vertexData,
                  0,
                  this.vertexData.length,
                );
            }),
            (e.prototype.containsPoint = function (t) {
              if (!this.getBounds().contains(t.x, t.y)) return !1;
              this.worldTransform.applyInverse(t, Ka);
              for (
                var e = this.geometry.getBuffer("aVertexPosition").data,
                  n = Za.points,
                  r = this.geometry.getIndex().data,
                  i = r.length,
                  o = 4 === this.drawMode ? 3 : 1,
                  a = 0;
                a + 2 < i;
                a += o
              ) {
                var s = 2 * r[a],
                  l = 2 * r[a + 1],
                  u = 2 * r[a + 2];
                if (
                  ((n[0] = e[s]),
                  (n[1] = e[s + 1]),
                  (n[2] = e[l]),
                  (n[3] = e[l + 1]),
                  (n[4] = e[u]),
                  (n[5] = e[u + 1]),
                  Za.contains(Ka.x, Ka.y))
                )
                  return !0;
              }
              return !1;
            }),
            (e.prototype.destroy = function (e) {
              t.prototype.destroy.call(this, e),
                this._cachedTexture &&
                  (this._cachedTexture.destroy(), (this._cachedTexture = null)),
                (this.geometry = null),
                (this.shader = null),
                (this.state = null),
                (this.uvs = null),
                (this.indices = null),
                (this.vertexData = null);
            }),
            (e.BATCHABLE_SIZE = 100),
            e
          );
        })(Qe),
        $a = (function (t) {
          function e(e, n) {
            var r = this,
              i = {
                uSampler: e,
                alpha: 1,
                uTextureMatrix: me.IDENTITY,
                uColor: new Float32Array([1, 1, 1, 1]),
              };
            return (
              (n = Object.assign(
                { tint: 16777215, alpha: 1, pluginName: "batch" },
                n,
              )).uniforms && Object.assign(i, n.uniforms),
              ((r =
                t.call(
                  this,
                  n.program ||
                    Pr.from(
                      "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n",
                      "varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n",
                    ),
                  i,
                ) || this)._colorDirty = !1),
              (r.uvMatrix = new Lr(e)),
              (r.batchable = void 0 === n.program),
              (r.pluginName = n.pluginName),
              (r.tint = n.tint),
              (r.alpha = n.alpha),
              r
            );
          }
          return (
            Ya(e, t),
            Object.defineProperty(e.prototype, "texture", {
              get: function () {
                return this.uniforms.uSampler;
              },
              set: function (t) {
                this.uniforms.uSampler !== t &&
                  (!this.uniforms.uSampler.baseTexture.alphaMode !=
                    !t.baseTexture.alphaMode && (this._colorDirty = !0),
                  (this.uniforms.uSampler = t),
                  (this.uvMatrix.texture = t));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "alpha", {
              get: function () {
                return this._alpha;
              },
              set: function (t) {
                t !== this._alpha &&
                  ((this._alpha = t), (this._colorDirty = !0));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "tint", {
              get: function () {
                return this._tint;
              },
              set: function (t) {
                t !== this._tint &&
                  ((this._tint = t),
                  (this._tintRGB = (t >> 16) + (65280 & t) + ((255 & t) << 16)),
                  (this._colorDirty = !0));
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.update = function () {
              if (this._colorDirty) {
                this._colorDirty = !1;
                var t = this.texture.baseTexture;
                kt(this._tint, this._alpha, this.uniforms.uColor, t.alphaMode);
              }
              this.uvMatrix.update() &&
                (this.uniforms.uTextureMatrix = this.uvMatrix.mapCoord);
            }),
            e
          );
        })(Ir),
        Ja = (function (t) {
          function e(e, n, r) {
            var i = t.call(this) || this,
              o = new Bn(e),
              a = new Bn(n, !0),
              s = new Bn(r, !0, !0);
            return (
              i
                .addAttribute("aVertexPosition", o, 2, !1, K.FLOAT)
                .addAttribute("aTextureCoord", a, 2, !1, K.FLOAT)
                .addIndex(s),
              (i._updateId = -1),
              i
            );
          }
          return (
            Ya(e, t),
            Object.defineProperty(e.prototype, "vertexDirtyId", {
              get: function () {
                return this.buffers[0]._updateID;
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Vn),
        ts = function (t, e) {
          return (
            (ts =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            ts(t, e)
          );
        },
        es = function () {
          (this.info = []),
            (this.common = []),
            (this.page = []),
            (this.char = []),
            (this.kerning = []),
            (this.distanceField = []);
        },
        ns = (function () {
          function t() {}
          return (
            (t.test = function (t) {
              return "string" == typeof t && 0 === t.indexOf("info face=");
            }),
            (t.parse = function (t) {
              var e = t.match(/^[a-z]+\s+.+$/gm),
                n = {
                  info: [],
                  common: [],
                  page: [],
                  char: [],
                  chars: [],
                  kerning: [],
                  kernings: [],
                  distanceField: [],
                };
              for (var r in e) {
                var i = e[r].match(/^[a-z]+/gm)[0],
                  o = e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),
                  a = {};
                for (var s in o) {
                  var l = o[s].split("="),
                    u = l[0],
                    h = l[1].replace(/"/gm, ""),
                    c = parseFloat(h),
                    d = isNaN(c) ? h : c;
                  a[u] = d;
                }
                n[i].push(a);
              }
              var f = new es();
              return (
                n.info.forEach(function (t) {
                  return f.info.push({
                    face: t.face,
                    size: parseInt(t.size, 10),
                  });
                }),
                n.common.forEach(function (t) {
                  return f.common.push({
                    lineHeight: parseInt(t.lineHeight, 10),
                  });
                }),
                n.page.forEach(function (t) {
                  return f.page.push({ id: parseInt(t.id, 10), file: t.file });
                }),
                n.char.forEach(function (t) {
                  return f.char.push({
                    id: parseInt(t.id, 10),
                    page: parseInt(t.page, 10),
                    x: parseInt(t.x, 10),
                    y: parseInt(t.y, 10),
                    width: parseInt(t.width, 10),
                    height: parseInt(t.height, 10),
                    xoffset: parseInt(t.xoffset, 10),
                    yoffset: parseInt(t.yoffset, 10),
                    xadvance: parseInt(t.xadvance, 10),
                  });
                }),
                n.kerning.forEach(function (t) {
                  return f.kerning.push({
                    first: parseInt(t.first, 10),
                    second: parseInt(t.second, 10),
                    amount: parseInt(t.amount, 10),
                  });
                }),
                n.distanceField.forEach(function (t) {
                  return f.distanceField.push({
                    distanceRange: parseInt(t.distanceRange, 10),
                    fieldType: t.fieldType,
                  });
                }),
                f
              );
            }),
            t
          );
        })(),
        rs = (function () {
          function t() {}
          return (
            (t.test = function (t) {
              return (
                t instanceof XMLDocument &&
                t.getElementsByTagName("page").length &&
                null !== t.getElementsByTagName("info")[0].getAttribute("face")
              );
            }),
            (t.parse = function (t) {
              for (
                var e = new es(),
                  n = t.getElementsByTagName("info"),
                  r = t.getElementsByTagName("common"),
                  i = t.getElementsByTagName("page"),
                  o = t.getElementsByTagName("char"),
                  a = t.getElementsByTagName("kerning"),
                  s = t.getElementsByTagName("distanceField"),
                  l = 0;
                l < n.length;
                l++
              )
                e.info.push({
                  face: n[l].getAttribute("face"),
                  size: parseInt(n[l].getAttribute("size"), 10),
                });
              for (l = 0; l < r.length; l++)
                e.common.push({
                  lineHeight: parseInt(r[l].getAttribute("lineHeight"), 10),
                });
              for (l = 0; l < i.length; l++)
                e.page.push({
                  id: parseInt(i[l].getAttribute("id"), 10) || 0,
                  file: i[l].getAttribute("file"),
                });
              for (l = 0; l < o.length; l++) {
                var u = o[l];
                e.char.push({
                  id: parseInt(u.getAttribute("id"), 10),
                  page: parseInt(u.getAttribute("page"), 10) || 0,
                  x: parseInt(u.getAttribute("x"), 10),
                  y: parseInt(u.getAttribute("y"), 10),
                  width: parseInt(u.getAttribute("width"), 10),
                  height: parseInt(u.getAttribute("height"), 10),
                  xoffset: parseInt(u.getAttribute("xoffset"), 10),
                  yoffset: parseInt(u.getAttribute("yoffset"), 10),
                  xadvance: parseInt(u.getAttribute("xadvance"), 10),
                });
              }
              for (l = 0; l < a.length; l++)
                e.kerning.push({
                  first: parseInt(a[l].getAttribute("first"), 10),
                  second: parseInt(a[l].getAttribute("second"), 10),
                  amount: parseInt(a[l].getAttribute("amount"), 10),
                });
              for (l = 0; l < s.length; l++)
                e.distanceField.push({
                  fieldType: s[l].getAttribute("fieldType"),
                  distanceRange: parseInt(
                    s[l].getAttribute("distanceRange"),
                    10,
                  ),
                });
              return e;
            }),
            t
          );
        })(),
        is = (function () {
          function t() {}
          return (
            (t.test = function (t) {
              if ("string" == typeof t && t.indexOf("<font>") > -1) {
                var e = new globalThis.DOMParser().parseFromString(
                  t,
                  "text/xml",
                );
                return rs.test(e);
              }
              return !1;
            }),
            (t.parse = function (t) {
              var e = new globalThis.DOMParser().parseFromString(t, "text/xml");
              return rs.parse(e);
            }),
            t
          );
        })(),
        os = [ns, rs, is];
      function as(t) {
        for (var e = 0; e < os.length; e++) if (os[e].test(t)) return os[e];
        return null;
      }
      function ss(t, e, n, r, i, o, a) {
        var s = n.text,
          l = n.fontProperties;
        e.translate(r, i), e.scale(o, o);
        var u = a.strokeThickness / 2,
          h = -a.strokeThickness / 2;
        if (
          ((e.font = a.toFontString()),
          (e.lineWidth = a.strokeThickness),
          (e.textBaseline = a.textBaseline),
          (e.lineJoin = a.lineJoin),
          (e.miterLimit = a.miterLimit),
          (e.fillStyle = (function (t, e, n, r, i, o) {
            var a,
              s = n.fill;
            if (!Array.isArray(s)) return s;
            if (1 === s.length) return s[0];
            var l = n.dropShadow ? n.dropShadowDistance : 0,
              u = n.padding || 0,
              h = t.width / r - l - 2 * u,
              c = t.height / r - l - 2 * u,
              d = s.slice(),
              f = n.fillGradientStops.slice();
            if (!f.length)
              for (var p = d.length + 1, m = 1; m < p; ++m) f.push(m / p);
            if (
              (d.unshift(s[0]),
              f.unshift(0),
              d.push(s[s.length - 1]),
              f.push(1),
              n.fillGradientType === Ko.LINEAR_VERTICAL)
            ) {
              a = e.createLinearGradient(h / 2, u, h / 2, c + u);
              var _ = 0,
                g = (o.fontProperties.fontSize + n.strokeThickness) / c;
              for (m = 0; m < i.length; m++)
                for (var v = o.lineHeight * m, y = 0; y < d.length; y++) {
                  var E =
                      v / c +
                      ("number" == typeof f[y] ? f[y] : y / d.length) * g,
                    T = Math.max(_, E);
                  (T = Math.min(T, 1)), a.addColorStop(T, d[y]), (_ = T);
                }
            } else {
              a = e.createLinearGradient(u, c / 2, h + u, c / 2);
              var b = d.length + 1,
                x = 1;
              for (m = 0; m < d.length; m++) {
                var S;
                (S = "number" == typeof f[m] ? f[m] : x / b),
                  a.addColorStop(S, d[m]),
                  x++;
              }
            }
            return a;
          })(t, e, a, o, [s], n)),
          (e.strokeStyle = a.stroke),
          a.dropShadow)
        ) {
          var c = a.dropShadowColor,
            d = Lt("number" == typeof c ? c : Ut(c)),
            f = a.dropShadowBlur * o,
            p = a.dropShadowDistance * o;
          (e.shadowColor =
            "rgba(" +
            255 * d[0] +
            "," +
            255 * d[1] +
            "," +
            255 * d[2] +
            "," +
            a.dropShadowAlpha +
            ")"),
            (e.shadowBlur = f),
            (e.shadowOffsetX = Math.cos(a.dropShadowAngle) * p),
            (e.shadowOffsetY = Math.sin(a.dropShadowAngle) * p);
        } else
          (e.shadowColor = "black"),
            (e.shadowBlur = 0),
            (e.shadowOffsetX = 0),
            (e.shadowOffsetY = 0);
        a.stroke &&
          a.strokeThickness &&
          e.strokeText(s, u, h + n.lineHeight - l.descent),
          a.fill && e.fillText(s, u, h + n.lineHeight - l.descent),
          e.setTransform(1, 0, 0, 1, 0, 0),
          (e.fillStyle = "rgba(0, 0, 0, 0)");
      }
      function ls(t) {
        return Array.from ? Array.from(t) : t.split("");
      }
      function us(t) {
        return t.codePointAt ? t.codePointAt(0) : t.charCodeAt(0);
      }
      var hs = (function () {
          function t(t, e, n) {
            var r,
              i,
              o = t.info[0],
              a = t.common[0],
              s = t.page[0],
              l = t.distanceField[0],
              u = ne(s.file),
              h = {};
            (this._ownsTextures = n),
              (this.font = o.face),
              (this.size = o.size),
              (this.lineHeight = a.lineHeight / u),
              (this.chars = {}),
              (this.pageTextures = h);
            for (var c = 0; c < t.page.length; c++) {
              var d = t.page[c],
                f = d.id,
                p = d.file;
              (h[f] = e instanceof Array ? e[c] : e[p]),
                (null == l ? void 0 : l.fieldType) &&
                  "none" !== l.fieldType &&
                  (h[f].baseTexture.alphaMode = tt.NO_PREMULTIPLIED_ALPHA);
            }
            for (c = 0; c < t.char.length; c++) {
              var m = t.char[c],
                _ = ((f = m.id), m.page),
                g = t.char[c],
                v = g.x,
                y = g.y,
                E = g.width,
                T = g.height,
                b = g.xoffset,
                x = g.yoffset,
                S = g.xadvance;
              (y /= u), (E /= u), (T /= u), (b /= u), (x /= u), (S /= u);
              var M = new ue(
                (v /= u) + h[_].frame.x / u,
                y + h[_].frame.y / u,
                E,
                T,
              );
              this.chars[f] = {
                xOffset: b,
                yOffset: x,
                xAdvance: S,
                kerning: {},
                texture: new Nn(h[_].baseTexture, M),
                page: _,
              };
            }
            for (c = 0; c < t.kerning.length; c++) {
              var A = t.kerning[c],
                R = A.first,
                w = A.second,
                P = A.amount;
              (R /= u),
                (w /= u),
                (P /= u),
                this.chars[w] && (this.chars[w].kerning[R] = P);
            }
            (this.distanceFieldRange = null == l ? void 0 : l.distanceRange),
              (this.distanceFieldType =
                null !==
                  (i =
                    null === (r = null == l ? void 0 : l.fieldType) ||
                    void 0 === r
                      ? void 0
                      : r.toLowerCase()) && void 0 !== i
                  ? i
                  : "none");
          }
          return (
            (t.prototype.destroy = function () {
              for (var t in this.chars)
                this.chars[t].texture.destroy(), (this.chars[t].texture = null);
              for (var t in this.pageTextures)
                this._ownsTextures && this.pageTextures[t].destroy(!0),
                  (this.pageTextures[t] = null);
              (this.chars = null), (this.pageTextures = null);
            }),
            (t.install = function (e, n, r) {
              var i;
              if (e instanceof es) i = e;
              else {
                var o = as(e);
                if (!o) throw new Error("Unrecognized data format for font.");
                i = o.parse(e);
              }
              n instanceof Nn && (n = [n]);
              var a = new t(i, n, r);
              return (t.available[a.font] = a), a;
            }),
            (t.uninstall = function (e) {
              var n = t.available[e];
              if (!n) throw new Error("No font found named '" + e + "'");
              n.destroy(), delete t.available[e];
            }),
            (t.from = function (e, n, r) {
              if (!e)
                throw new Error("[BitmapFont] Property `name` is required.");
              var i = Object.assign({}, t.defaultOptions, r),
                o = i.chars,
                a = i.padding,
                s = i.resolution,
                l = i.textureWidth,
                u = i.textureHeight,
                h = (function (t) {
                  "string" == typeof t && (t = [t]);
                  for (var e = [], n = 0, r = t.length; n < r; n++) {
                    var i = t[n];
                    if (Array.isArray(i)) {
                      if (2 !== i.length)
                        throw new Error(
                          "[BitmapFont]: Invalid character range length, expecting 2 got " +
                            i.length +
                            ".",
                        );
                      var o = i[0].charCodeAt(0),
                        a = i[1].charCodeAt(0);
                      if (a < o)
                        throw new Error(
                          "[BitmapFont]: Invalid character range.",
                        );
                      for (var s = o, l = a; s <= l; s++)
                        e.push(String.fromCharCode(s));
                    } else e.push.apply(e, ls(i));
                  }
                  if (0 === e.length)
                    throw new Error(
                      "[BitmapFont]: Empty set when resolving characters.",
                    );
                  return e;
                })(o),
                c = n instanceof ga ? n : new ga(n),
                d = l,
                f = new es();
              (f.info[0] = { face: c.fontFamily, size: c.fontSize }),
                (f.common[0] = { lineHeight: c.fontSize });
              for (
                var p, m, _, g = 0, v = 0, y = 0, E = [], T = 0;
                T < h.length;
                T++
              ) {
                p ||
                  (((p = At.ADAPTER.createCanvas()).width = l),
                  (p.height = u),
                  (m = p.getContext("2d")),
                  (_ = new _n(p, { resolution: s })),
                  E.push(new Nn(_)),
                  f.page.push({ id: E.length - 1, file: "" }));
                var b = Ta.measureText(h[T], c, !1, p),
                  x = b.width,
                  S = Math.ceil(b.height),
                  M = Math.ceil(("italic" === c.fontStyle ? 2 : 1) * x);
                if (v >= u - S * s) {
                  if (0 === v)
                    throw new Error(
                      "[BitmapFont] textureHeight " +
                        u +
                        "px is too small for " +
                        c.fontSize +
                        "px fonts",
                    );
                  --T,
                    (p = null),
                    (m = null),
                    (_ = null),
                    (v = 0),
                    (g = 0),
                    (y = 0);
                } else if (
                  ((y = Math.max(S + b.fontProperties.descent, y)),
                  M * s + g >= d)
                )
                  --T, (v += y * s), (v = Math.ceil(v)), (g = 0), (y = 0);
                else {
                  ss(p, m, b, g, v, s, c);
                  var A = us(b.text);
                  f.char.push({
                    id: A,
                    page: E.length - 1,
                    x: g / s,
                    y: v / s,
                    width: M,
                    height: S,
                    xoffset: 0,
                    yoffset: 0,
                    xadvance: Math.ceil(
                      x -
                        (c.dropShadow ? c.dropShadowDistance : 0) -
                        (c.stroke ? c.strokeThickness : 0),
                    ),
                  }),
                    (g += (M + 2 * a) * s),
                    (g = Math.ceil(g));
                }
              }
              T = 0;
              for (var R = h.length; T < R; T++)
                for (var w = h[T], P = 0; P < R; P++) {
                  var I = h[P],
                    O = m.measureText(w).width,
                    C = m.measureText(I).width,
                    N = m.measureText(w + I).width - (O + C);
                  N &&
                    f.kerning.push({ first: us(w), second: us(I), amount: N });
                }
              var L = new t(f, E, !0);
              return (
                void 0 !== t.available[e] && t.uninstall(e),
                (t.available[e] = L),
                L
              );
            }),
            (t.ALPHA = [["a", "z"], ["A", "Z"], " "]),
            (t.NUMERIC = [["0", "9"]]),
            (t.ALPHANUMERIC = [["a", "z"], ["A", "Z"], ["0", "9"], " "]),
            (t.ASCII = [[" ", "~"]]),
            (t.defaultOptions = {
              resolution: 1,
              textureWidth: 512,
              textureHeight: 512,
              padding: 4,
              chars: t.ALPHANUMERIC,
            }),
            (t.available = {}),
            t
          );
        })(),
        cs = [],
        ds = [],
        fs = [],
        ps =
          ((function (t) {
            function e(n, r) {
              void 0 === r && (r = {});
              var i = t.call(this) || this;
              i._tint = 16777215;
              var o = Object.assign({}, e.styleDefaults, r),
                a = o.align,
                s = o.tint,
                l = o.maxWidth,
                u = o.letterSpacing,
                h = o.fontName,
                c = o.fontSize;
              if (!hs.available[h])
                throw new Error('Missing BitmapFont "' + h + '"');
              return (
                (i._activePagesMeshData = []),
                (i._textWidth = 0),
                (i._textHeight = 0),
                (i._align = a),
                (i._tint = s),
                (i._fontName = h),
                (i._fontSize = c || hs.available[h].size),
                (i.text = n),
                (i._maxWidth = l),
                (i._maxLineHeight = 0),
                (i._letterSpacing = u),
                (i._anchor = new pe(
                  function () {
                    i.dirty = !0;
                  },
                  i,
                  0,
                  0,
                )),
                (i._roundPixels = At.ROUND_PIXELS),
                (i.dirty = !0),
                (i._resolution = At.RESOLUTION),
                (i._autoResolution = !0),
                (i._textureCache = {}),
                i
              );
            }
            (function (t, e) {
              function n() {
                this.constructor = t;
              }
              ts(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((n.prototype = e.prototype), new n()));
            })(e, t),
              (e.prototype.updateText = function () {
                for (
                  var t,
                    e = hs.available[this._fontName],
                    n = this._fontSize / e.size,
                    r = new se(),
                    i = [],
                    o = [],
                    a = [],
                    s = ls(this._text.replace(/(?:\r\n|\r)/g, "\n") || " "),
                    l = (this._maxWidth * e.size) / this._fontSize,
                    u = "none" === e.distanceFieldType ? cs : ds,
                    h = null,
                    c = 0,
                    d = 0,
                    f = 0,
                    p = -1,
                    m = 0,
                    _ = 0,
                    g = 0,
                    v = 0,
                    y = 0;
                  y < s.length;
                  y++
                ) {
                  var E = us((k = s[y]));
                  if (
                    (/(?:\s)/.test(k) && ((p = y), (m = c), v++),
                    "\r" !== k && "\n" !== k)
                  ) {
                    var T = e.chars[E];
                    if (T) {
                      h && T.kerning[h] && (r.x += T.kerning[h]);
                      var b = fs.pop() || {
                        texture: Nn.EMPTY,
                        line: 0,
                        charCode: 0,
                        prevSpaces: 0,
                        position: new se(),
                      };
                      (b.texture = T.texture),
                        (b.line = f),
                        (b.charCode = E),
                        (b.position.x =
                          r.x + T.xOffset + this._letterSpacing / 2),
                        (b.position.y = r.y + T.yOffset),
                        (b.prevSpaces = v),
                        i.push(b),
                        (c =
                          b.position.x +
                          Math.max(T.xAdvance, T.texture.orig.width)),
                        (r.x += T.xAdvance + this._letterSpacing),
                        (g = Math.max(g, T.yOffset + T.texture.height)),
                        (h = E),
                        -1 !== p &&
                          l > 0 &&
                          r.x > l &&
                          (Wt(i, 1 + p - ++_, 1 + y - p),
                          (y = p),
                          (p = -1),
                          o.push(m),
                          a.push(i.length > 0 ? i[i.length - 1].prevSpaces : 0),
                          (d = Math.max(d, m)),
                          f++,
                          (r.x = 0),
                          (r.y += e.lineHeight),
                          (h = null),
                          (v = 0));
                    }
                  } else
                    o.push(c),
                      a.push(-1),
                      (d = Math.max(d, c)),
                      ++f,
                      ++_,
                      (r.x = 0),
                      (r.y += e.lineHeight),
                      (h = null),
                      (v = 0);
                }
                var x = s[s.length - 1];
                "\r" !== x &&
                  "\n" !== x &&
                  (/(?:\s)/.test(x) && (c = m),
                  o.push(c),
                  (d = Math.max(d, c)),
                  a.push(-1));
                var S = [];
                for (y = 0; y <= f; y++) {
                  var M = 0;
                  "right" === this._align
                    ? (M = d - o[y])
                    : "center" === this._align
                      ? (M = (d - o[y]) / 2)
                      : "justify" === this._align &&
                        (M = a[y] < 0 ? 0 : (d - o[y]) / a[y]),
                    S.push(M);
                }
                var A = i.length,
                  R = {},
                  w = [],
                  P = this._activePagesMeshData;
                for (y = 0; y < P.length; y++) u.push(P[y]);
                for (y = 0; y < A; y++) {
                  var I = (z = i[y].texture).baseTexture.uid;
                  if (!R[I]) {
                    if (!(Z = u.pop())) {
                      var O = new Ja(),
                        C = void 0,
                        N = void 0;
                      "none" === e.distanceFieldType
                        ? ((C = new $a(Nn.EMPTY)), (N = W.NORMAL))
                        : ((C = new $a(Nn.EMPTY, {
                            program: Pr.from(
                              "// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n",
                              "// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n",
                            ),
                            uniforms: { uFWidth: 0 },
                          })),
                          (N = W.NORMAL_NPM));
                      var L = new Qa(O, C);
                      (L.blendMode = N),
                        (Z = {
                          index: 0,
                          indexCount: 0,
                          vertexCount: 0,
                          uvsCount: 0,
                          total: 0,
                          mesh: L,
                          vertices: null,
                          uvs: null,
                          indices: null,
                        });
                    }
                    (Z.index = 0),
                      (Z.indexCount = 0),
                      (Z.vertexCount = 0),
                      (Z.uvsCount = 0),
                      (Z.total = 0);
                    var D = this._textureCache;
                    (D[I] = D[I] || new Nn(z.baseTexture)),
                      (Z.mesh.texture = D[I]),
                      (Z.mesh.tint = this._tint),
                      w.push(Z),
                      (R[I] = Z);
                  }
                  R[I].total++;
                }
                for (y = 0; y < P.length; y++)
                  -1 === w.indexOf(P[y]) && this.removeChild(P[y].mesh);
                for (y = 0; y < w.length; y++)
                  w[y].mesh.parent !== this && this.addChild(w[y].mesh);
                for (var y in ((this._activePagesMeshData = w), R)) {
                  var U = (Z = R[y]).total;
                  if (
                    !(
                      (null === (t = Z.indices) || void 0 === t
                        ? void 0
                        : t.length) >
                      6 * U
                    ) ||
                    Z.vertices.length < 2 * Qa.BATCHABLE_SIZE
                  )
                    (Z.vertices = new Float32Array(8 * U)),
                      (Z.uvs = new Float32Array(8 * U)),
                      (Z.indices = new Uint16Array(6 * U));
                  else
                    for (
                      var F = Z.total, B = Z.vertices, G = 4 * F * 2;
                      G < B.length;
                      G++
                    )
                      B[G] = 0;
                  Z.mesh.size = 6 * U;
                }
                for (y = 0; y < A; y++) {
                  var k,
                    H =
                      (k = i[y]).position.x +
                      S[k.line] *
                        ("justify" === this._align ? k.prevSpaces : 1);
                  this._roundPixels && (H = Math.round(H));
                  var z,
                    V = H * n,
                    X = k.position.y * n,
                    j = R[(z = k.texture).baseTexture.uid],
                    Y = z.frame,
                    q = z._uvs,
                    K = j.index++;
                  (j.indices[6 * K + 0] = 0 + 4 * K),
                    (j.indices[6 * K + 1] = 1 + 4 * K),
                    (j.indices[6 * K + 2] = 2 + 4 * K),
                    (j.indices[6 * K + 3] = 0 + 4 * K),
                    (j.indices[6 * K + 4] = 2 + 4 * K),
                    (j.indices[6 * K + 5] = 3 + 4 * K),
                    (j.vertices[8 * K + 0] = V),
                    (j.vertices[8 * K + 1] = X),
                    (j.vertices[8 * K + 2] = V + Y.width * n),
                    (j.vertices[8 * K + 3] = X),
                    (j.vertices[8 * K + 4] = V + Y.width * n),
                    (j.vertices[8 * K + 5] = X + Y.height * n),
                    (j.vertices[8 * K + 6] = V),
                    (j.vertices[8 * K + 7] = X + Y.height * n),
                    (j.uvs[8 * K + 0] = q.x0),
                    (j.uvs[8 * K + 1] = q.y0),
                    (j.uvs[8 * K + 2] = q.x1),
                    (j.uvs[8 * K + 3] = q.y1),
                    (j.uvs[8 * K + 4] = q.x2),
                    (j.uvs[8 * K + 5] = q.y2),
                    (j.uvs[8 * K + 6] = q.x3),
                    (j.uvs[8 * K + 7] = q.y3);
                }
                for (var y in ((this._textWidth = d * n),
                (this._textHeight = (r.y + e.lineHeight) * n),
                R)) {
                  var Z = R[y];
                  if (0 !== this.anchor.x || 0 !== this.anchor.y)
                    for (
                      var Q = 0,
                        $ = this._textWidth * this.anchor.x,
                        J = this._textHeight * this.anchor.y,
                        tt = 0;
                      tt < Z.total;
                      tt++
                    )
                      (Z.vertices[Q++] -= $),
                        (Z.vertices[Q++] -= J),
                        (Z.vertices[Q++] -= $),
                        (Z.vertices[Q++] -= J),
                        (Z.vertices[Q++] -= $),
                        (Z.vertices[Q++] -= J),
                        (Z.vertices[Q++] -= $),
                        (Z.vertices[Q++] -= J);
                  this._maxLineHeight = g * n;
                  var et = Z.mesh.geometry.getBuffer("aVertexPosition"),
                    nt = Z.mesh.geometry.getBuffer("aTextureCoord"),
                    rt = Z.mesh.geometry.getIndex();
                  (et.data = Z.vertices),
                    (nt.data = Z.uvs),
                    (rt.data = Z.indices),
                    et.update(),
                    nt.update(),
                    rt.update();
                }
                for (y = 0; y < i.length; y++) fs.push(i[y]);
              }),
              (e.prototype.updateTransform = function () {
                this.validate(), this.containerUpdateTransform();
              }),
              (e.prototype._render = function (e) {
                this._autoResolution &&
                  this._resolution !== e.resolution &&
                  ((this._resolution = e.resolution), (this.dirty = !0));
                var n = hs.available[this._fontName],
                  r = n.distanceFieldRange,
                  i = n.distanceFieldType,
                  o = n.size;
                if ("none" !== i)
                  for (
                    var a = this.worldTransform,
                      s = a.a,
                      l = a.b,
                      u = a.c,
                      h = a.d,
                      c = Math.sqrt(s * s + l * l),
                      d = Math.sqrt(u * u + h * h),
                      f = (Math.abs(c) + Math.abs(d)) / 2,
                      p = this._fontSize / o,
                      m = 0,
                      _ = this._activePagesMeshData;
                    m < _.length;
                    m++
                  )
                    _[m].mesh.shader.uniforms.uFWidth =
                      f * r * p * this._resolution;
                t.prototype._render.call(this, e);
              }),
              (e.prototype.getLocalBounds = function () {
                return this.validate(), t.prototype.getLocalBounds.call(this);
              }),
              (e.prototype.validate = function () {
                this.dirty && (this.updateText(), (this.dirty = !1));
              }),
              Object.defineProperty(e.prototype, "tint", {
                get: function () {
                  return this._tint;
                },
                set: function (t) {
                  if (this._tint !== t) {
                    this._tint = t;
                    for (var e = 0; e < this._activePagesMeshData.length; e++)
                      this._activePagesMeshData[e].mesh.tint = t;
                  }
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "align", {
                get: function () {
                  return this._align;
                },
                set: function (t) {
                  this._align !== t && ((this._align = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "fontName", {
                get: function () {
                  return this._fontName;
                },
                set: function (t) {
                  if (!hs.available[t])
                    throw new Error('Missing BitmapFont "' + t + '"');
                  this._fontName !== t &&
                    ((this._fontName = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "fontSize", {
                get: function () {
                  return this._fontSize;
                },
                set: function (t) {
                  this._fontSize !== t &&
                    ((this._fontSize = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "anchor", {
                get: function () {
                  return this._anchor;
                },
                set: function (t) {
                  "number" == typeof t
                    ? this._anchor.set(t)
                    : this._anchor.copyFrom(t);
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "text", {
                get: function () {
                  return this._text;
                },
                set: function (t) {
                  (t = String(null == t ? "" : t)),
                    this._text !== t && ((this._text = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "maxWidth", {
                get: function () {
                  return this._maxWidth;
                },
                set: function (t) {
                  this._maxWidth !== t &&
                    ((this._maxWidth = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "maxLineHeight", {
                get: function () {
                  return this.validate(), this._maxLineHeight;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "textWidth", {
                get: function () {
                  return this.validate(), this._textWidth;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "letterSpacing", {
                get: function () {
                  return this._letterSpacing;
                },
                set: function (t) {
                  this._letterSpacing !== t &&
                    ((this._letterSpacing = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "roundPixels", {
                get: function () {
                  return this._roundPixels;
                },
                set: function (t) {
                  t !== this._roundPixels &&
                    ((this._roundPixels = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "textHeight", {
                get: function () {
                  return this.validate(), this._textHeight;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "resolution", {
                get: function () {
                  return this._resolution;
                },
                set: function (t) {
                  (this._autoResolution = !1),
                    this._resolution !== t &&
                      ((this._resolution = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype.destroy = function (e) {
                var n = this._textureCache;
                for (var r in n) n[r].destroy(), delete n[r];
                (this._textureCache = null), t.prototype.destroy.call(this, e);
              }),
              (e.styleDefaults = {
                align: "left",
                tint: 16777215,
                maxWidth: 0,
                letterSpacing: 0,
              });
          })(Qe),
          (function () {
            function t() {}
            return (
              (t.add = function () {
                ji.setExtensionXhrType("fnt", ji.XHR_RESPONSE_TYPE.TEXT);
              }),
              (t.use = function (e, n) {
                var r = as(e.data);
                if (r)
                  for (
                    var i = t.getBaseUrl(this, e),
                      o = r.parse(e.data),
                      a = {},
                      s = function (t) {
                        (a[t.metadata.pageFile] = t.texture),
                          Object.keys(a).length === o.page.length &&
                            ((e.bitmapFont = hs.install(o, a, !0)), n());
                      },
                      l = 0;
                    l < o.page.length;
                    ++l
                  ) {
                    var u = o.page[l].file,
                      h = i + u,
                      c = !1;
                    for (var d in this.resources) {
                      var f = this.resources[d];
                      if (f.url === h) {
                        (f.metadata.pageFile = u),
                          f.texture ? s(f) : f.onAfterMiddleware.add(s),
                          (c = !0);
                        break;
                      }
                    }
                    if (!c) {
                      var p = {
                        crossOrigin: e.crossOrigin,
                        loadType: ji.LOAD_TYPE.IMAGE,
                        metadata: Object.assign(
                          { pageFile: u },
                          e.metadata.imageMetadata,
                        ),
                        parentResource: e,
                      };
                      this.add(h, p, s);
                    }
                  }
                else n();
              }),
              (t.getBaseUrl = function (e, n) {
                var r = n.isDataUrl ? "" : t.dirname(n.url);
                return (
                  n.isDataUrl &&
                    ("." === r && (r = ""),
                    e.baseUrl &&
                      r &&
                      "/" === e.baseUrl.charAt(e.baseUrl.length - 1) &&
                      (r += "/")),
                  (r = r.replace(e.baseUrl, "")) &&
                    "/" !== r.charAt(r.length - 1) &&
                    (r += "/"),
                  r
                );
              }),
              (t.dirname = function (t) {
                var e = t
                  .replace(/\\/g, "/")
                  .replace(/\/$/, "")
                  .replace(/\/[^\/]*$/, "");
                return e === t ? "." : "" === e ? "/" : e;
              }),
              (t.extension = $e.Loader),
              t
            );
          })()),
        ms = function (t, e) {
          return (
            (ms =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            ms(t, e)
          );
        };
      !(function (t) {
        function e(e) {
          void 0 === e && (e = 1);
          var n =
            t.call(
              this,
              "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
              "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",
              { uAlpha: 1 },
            ) || this;
          return (n.alpha = e), n;
        }
        (function (t, e) {
          function n() {
            this.constructor = t;
          }
          ms(t, e),
            (t.prototype =
              null === e
                ? Object.create(e)
                : ((n.prototype = e.prototype), new n()));
        })(e, t),
          Object.defineProperty(e.prototype, "alpha", {
            get: function () {
              return this.uniforms.uAlpha;
            },
            set: function (t) {
              this.uniforms.uAlpha = t;
            },
            enumerable: !1,
            configurable: !0,
          });
      })(Cr);
      var _s = function (t, e) {
        return (
          (_s =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
            }),
          _s(t, e)
        );
      };
      function gs(t, e) {
        function n() {
          this.constructor = t;
        }
        _s(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n()));
      }
      var vs,
        ys,
        Es,
        Ts,
        bs,
        xs,
        Ss,
        Ms,
        As,
        Rs,
        ws,
        Ps,
        Is,
        Os,
        Cs,
        Ns,
        Ls,
        Ds,
        Us,
        Fs,
        Bs = {
          5: [0.153388, 0.221461, 0.250301],
          7: [0.071303, 0.131514, 0.189879, 0.214607],
          9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],
          11: [0.0093, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],
          13: [
            0.002406, 0.009255, 0.027867, 0.065666, 0.121117, 0.174868,
            0.197641,
          ],
          15: [
            489e-6, 0.002403, 0.009246, 0.02784, 0.065602, 0.120999, 0.174697,
            0.197448,
          ],
        },
        Gs = [
          "varying vec2 vBlurTexCoords[%size%];",
          "uniform sampler2D uSampler;",
          "void main(void)",
          "{",
          "    gl_FragColor = vec4(0.0);",
          "    %blur%",
          "}",
        ].join("\n");
      !(function (t) {
        (t[(t.WEBGL_LEGACY = 0)] = "WEBGL_LEGACY"),
          (t[(t.WEBGL = 1)] = "WEBGL"),
          (t[(t.WEBGL2 = 2)] = "WEBGL2");
      })(vs || (vs = {})),
        (function (t) {
          (t[(t.UNKNOWN = 0)] = "UNKNOWN"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.CANVAS = 2)] = "CANVAS");
        })(ys || (ys = {})),
        (function (t) {
          (t[(t.COLOR = 16384)] = "COLOR"),
            (t[(t.DEPTH = 256)] = "DEPTH"),
            (t[(t.STENCIL = 1024)] = "STENCIL");
        })(Es || (Es = {})),
        (function (t) {
          (t[(t.NORMAL = 0)] = "NORMAL"),
            (t[(t.ADD = 1)] = "ADD"),
            (t[(t.MULTIPLY = 2)] = "MULTIPLY"),
            (t[(t.SCREEN = 3)] = "SCREEN"),
            (t[(t.OVERLAY = 4)] = "OVERLAY"),
            (t[(t.DARKEN = 5)] = "DARKEN"),
            (t[(t.LIGHTEN = 6)] = "LIGHTEN"),
            (t[(t.COLOR_DODGE = 7)] = "COLOR_DODGE"),
            (t[(t.COLOR_BURN = 8)] = "COLOR_BURN"),
            (t[(t.HARD_LIGHT = 9)] = "HARD_LIGHT"),
            (t[(t.SOFT_LIGHT = 10)] = "SOFT_LIGHT"),
            (t[(t.DIFFERENCE = 11)] = "DIFFERENCE"),
            (t[(t.EXCLUSION = 12)] = "EXCLUSION"),
            (t[(t.HUE = 13)] = "HUE"),
            (t[(t.SATURATION = 14)] = "SATURATION"),
            (t[(t.COLOR = 15)] = "COLOR"),
            (t[(t.LUMINOSITY = 16)] = "LUMINOSITY"),
            (t[(t.NORMAL_NPM = 17)] = "NORMAL_NPM"),
            (t[(t.ADD_NPM = 18)] = "ADD_NPM"),
            (t[(t.SCREEN_NPM = 19)] = "SCREEN_NPM"),
            (t[(t.NONE = 20)] = "NONE"),
            (t[(t.SRC_OVER = 0)] = "SRC_OVER"),
            (t[(t.SRC_IN = 21)] = "SRC_IN"),
            (t[(t.SRC_OUT = 22)] = "SRC_OUT"),
            (t[(t.SRC_ATOP = 23)] = "SRC_ATOP"),
            (t[(t.DST_OVER = 24)] = "DST_OVER"),
            (t[(t.DST_IN = 25)] = "DST_IN"),
            (t[(t.DST_OUT = 26)] = "DST_OUT"),
            (t[(t.DST_ATOP = 27)] = "DST_ATOP"),
            (t[(t.ERASE = 26)] = "ERASE"),
            (t[(t.SUBTRACT = 28)] = "SUBTRACT"),
            (t[(t.XOR = 29)] = "XOR");
        })(Ts || (Ts = {})),
        (function (t) {
          (t[(t.POINTS = 0)] = "POINTS"),
            (t[(t.LINES = 1)] = "LINES"),
            (t[(t.LINE_LOOP = 2)] = "LINE_LOOP"),
            (t[(t.LINE_STRIP = 3)] = "LINE_STRIP"),
            (t[(t.TRIANGLES = 4)] = "TRIANGLES"),
            (t[(t.TRIANGLE_STRIP = 5)] = "TRIANGLE_STRIP"),
            (t[(t.TRIANGLE_FAN = 6)] = "TRIANGLE_FAN");
        })(bs || (bs = {})),
        (function (t) {
          (t[(t.RGBA = 6408)] = "RGBA"),
            (t[(t.RGB = 6407)] = "RGB"),
            (t[(t.RG = 33319)] = "RG"),
            (t[(t.RED = 6403)] = "RED"),
            (t[(t.RGBA_INTEGER = 36249)] = "RGBA_INTEGER"),
            (t[(t.RGB_INTEGER = 36248)] = "RGB_INTEGER"),
            (t[(t.RG_INTEGER = 33320)] = "RG_INTEGER"),
            (t[(t.RED_INTEGER = 36244)] = "RED_INTEGER"),
            (t[(t.ALPHA = 6406)] = "ALPHA"),
            (t[(t.LUMINANCE = 6409)] = "LUMINANCE"),
            (t[(t.LUMINANCE_ALPHA = 6410)] = "LUMINANCE_ALPHA"),
            (t[(t.DEPTH_COMPONENT = 6402)] = "DEPTH_COMPONENT"),
            (t[(t.DEPTH_STENCIL = 34041)] = "DEPTH_STENCIL");
        })(xs || (xs = {})),
        (function (t) {
          (t[(t.TEXTURE_2D = 3553)] = "TEXTURE_2D"),
            (t[(t.TEXTURE_CUBE_MAP = 34067)] = "TEXTURE_CUBE_MAP"),
            (t[(t.TEXTURE_2D_ARRAY = 35866)] = "TEXTURE_2D_ARRAY"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069)] =
              "TEXTURE_CUBE_MAP_POSITIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Z"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Z");
        })(Ss || (Ss = {})),
        (function (t) {
          (t[(t.UNSIGNED_BYTE = 5121)] = "UNSIGNED_BYTE"),
            (t[(t.UNSIGNED_SHORT = 5123)] = "UNSIGNED_SHORT"),
            (t[(t.UNSIGNED_SHORT_5_6_5 = 33635)] = "UNSIGNED_SHORT_5_6_5"),
            (t[(t.UNSIGNED_SHORT_4_4_4_4 = 32819)] = "UNSIGNED_SHORT_4_4_4_4"),
            (t[(t.UNSIGNED_SHORT_5_5_5_1 = 32820)] = "UNSIGNED_SHORT_5_5_5_1"),
            (t[(t.UNSIGNED_INT = 5125)] = "UNSIGNED_INT"),
            (t[(t.UNSIGNED_INT_10F_11F_11F_REV = 35899)] =
              "UNSIGNED_INT_10F_11F_11F_REV"),
            (t[(t.UNSIGNED_INT_2_10_10_10_REV = 33640)] =
              "UNSIGNED_INT_2_10_10_10_REV"),
            (t[(t.UNSIGNED_INT_24_8 = 34042)] = "UNSIGNED_INT_24_8"),
            (t[(t.UNSIGNED_INT_5_9_9_9_REV = 35902)] =
              "UNSIGNED_INT_5_9_9_9_REV"),
            (t[(t.BYTE = 5120)] = "BYTE"),
            (t[(t.SHORT = 5122)] = "SHORT"),
            (t[(t.INT = 5124)] = "INT"),
            (t[(t.FLOAT = 5126)] = "FLOAT"),
            (t[(t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269)] =
              "FLOAT_32_UNSIGNED_INT_24_8_REV"),
            (t[(t.HALF_FLOAT = 36193)] = "HALF_FLOAT");
        })(Ms || (Ms = {})),
        (function (t) {
          (t[(t.FLOAT = 0)] = "FLOAT"),
            (t[(t.INT = 1)] = "INT"),
            (t[(t.UINT = 2)] = "UINT");
        })(As || (As = {})),
        (function (t) {
          (t[(t.NEAREST = 0)] = "NEAREST"), (t[(t.LINEAR = 1)] = "LINEAR");
        })(Rs || (Rs = {})),
        (function (t) {
          (t[(t.CLAMP = 33071)] = "CLAMP"),
            (t[(t.REPEAT = 10497)] = "REPEAT"),
            (t[(t.MIRRORED_REPEAT = 33648)] = "MIRRORED_REPEAT");
        })(ws || (ws = {})),
        (function (t) {
          (t[(t.OFF = 0)] = "OFF"),
            (t[(t.POW2 = 1)] = "POW2"),
            (t[(t.ON = 2)] = "ON"),
            (t[(t.ON_MANUAL = 3)] = "ON_MANUAL");
        })(Ps || (Ps = {})),
        (function (t) {
          (t[(t.NPM = 0)] = "NPM"),
            (t[(t.UNPACK = 1)] = "UNPACK"),
            (t[(t.PMA = 2)] = "PMA"),
            (t[(t.NO_PREMULTIPLIED_ALPHA = 0)] = "NO_PREMULTIPLIED_ALPHA"),
            (t[(t.PREMULTIPLY_ON_UPLOAD = 1)] = "PREMULTIPLY_ON_UPLOAD"),
            (t[(t.PREMULTIPLY_ALPHA = 2)] = "PREMULTIPLY_ALPHA"),
            (t[(t.PREMULTIPLIED_ALPHA = 2)] = "PREMULTIPLIED_ALPHA");
        })(Is || (Is = {})),
        (function (t) {
          (t[(t.NO = 0)] = "NO"),
            (t[(t.YES = 1)] = "YES"),
            (t[(t.AUTO = 2)] = "AUTO"),
            (t[(t.BLEND = 0)] = "BLEND"),
            (t[(t.CLEAR = 1)] = "CLEAR"),
            (t[(t.BLIT = 2)] = "BLIT");
        })(Os || (Os = {})),
        (function (t) {
          (t[(t.AUTO = 0)] = "AUTO"), (t[(t.MANUAL = 1)] = "MANUAL");
        })(Cs || (Cs = {})),
        (function (t) {
          (t.LOW = "lowp"), (t.MEDIUM = "mediump"), (t.HIGH = "highp");
        })(Ns || (Ns = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.SCISSOR = 1)] = "SCISSOR"),
            (t[(t.STENCIL = 2)] = "STENCIL"),
            (t[(t.SPRITE = 3)] = "SPRITE"),
            (t[(t.COLOR = 4)] = "COLOR");
        })(Ls || (Ls = {})),
        (function (t) {
          (t[(t.RED = 1)] = "RED"),
            (t[(t.GREEN = 2)] = "GREEN"),
            (t[(t.BLUE = 4)] = "BLUE"),
            (t[(t.ALPHA = 8)] = "ALPHA");
        })(Ds || (Ds = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.LOW = 2)] = "LOW"),
            (t[(t.MEDIUM = 4)] = "MEDIUM"),
            (t[(t.HIGH = 8)] = "HIGH");
        })(Us || (Us = {})),
        (function (t) {
          (t[(t.ELEMENT_ARRAY_BUFFER = 34963)] = "ELEMENT_ARRAY_BUFFER"),
            (t[(t.ARRAY_BUFFER = 34962)] = "ARRAY_BUFFER"),
            (t[(t.UNIFORM_BUFFER = 35345)] = "UNIFORM_BUFFER");
        })(Fs || (Fs = {}));
      var ks = (function (t) {
          function e(e, n, r, i, o) {
            void 0 === n && (n = 8),
              void 0 === r && (r = 4),
              void 0 === i && (i = At.FILTER_RESOLUTION),
              void 0 === o && (o = 5);
            var a = this,
              s = (function (t, e) {
                var n,
                  r = Math.ceil(t / 2),
                  i =
                    "\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",
                  o = "";
                n = e
                  ? "vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);"
                  : "vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";
                for (var a = 0; a < t; a++) {
                  var s = n.replace("%index%", a.toString());
                  (o += s = s.replace("%sampleIndex%", a - (r - 1) + ".0")),
                    (o += "\n");
                }
                return (i = i.replace("%blur%", o)).replace(
                  "%size%",
                  t.toString(),
                );
              })(o, e),
              l = (function (t) {
                for (
                  var e, n = Bs[t], r = n.length, i = Gs, o = "", a = 0;
                  a < t;
                  a++
                ) {
                  var s =
                    "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace(
                      "%index%",
                      a.toString(),
                    );
                  (e = a),
                    a >= r && (e = t - a - 1),
                    (o += s = s.replace("%value%", n[e].toString())),
                    (o += "\n");
                }
                return (i = i.replace("%blur%", o)).replace(
                  "%size%",
                  t.toString(),
                );
              })(o);
            return (
              ((a = t.call(this, s, l) || this).horizontal = e),
              (a.resolution = i),
              (a._quality = 0),
              (a.quality = r),
              (a.blur = n),
              a
            );
          }
          return (
            gs(e, t),
            (e.prototype.apply = function (t, e, n, r) {
              if (
                (n
                  ? this.horizontal
                    ? (this.uniforms.strength =
                        (1 / n.width) * (n.width / e.width))
                    : (this.uniforms.strength =
                        (1 / n.height) * (n.height / e.height))
                  : this.horizontal
                    ? (this.uniforms.strength =
                        (1 / t.renderer.width) * (t.renderer.width / e.width))
                    : (this.uniforms.strength =
                        (1 / t.renderer.height) *
                        (t.renderer.height / e.height)),
                (this.uniforms.strength *= this.strength),
                (this.uniforms.strength /= this.passes),
                1 === this.passes)
              )
                t.applyFilter(this, e, n, r);
              else {
                var i = t.getFilterTexture(),
                  o = t.renderer,
                  a = e,
                  s = i;
                (this.state.blend = !1), t.applyFilter(this, a, s, Os.CLEAR);
                for (var l = 1; l < this.passes - 1; l++) {
                  t.bindAndClear(a, Os.BLIT), (this.uniforms.uSampler = s);
                  var u = s;
                  (s = a), (a = u), o.shader.bind(this), o.geometry.draw(5);
                }
                (this.state.blend = !0),
                  t.applyFilter(this, s, n, r),
                  t.returnFilterTexture(i);
              }
            }),
            Object.defineProperty(e.prototype, "blur", {
              get: function () {
                return this.strength;
              },
              set: function (t) {
                (this.padding = 1 + 2 * Math.abs(t)), (this.strength = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "quality", {
              get: function () {
                return this._quality;
              },
              set: function (t) {
                (this._quality = t), (this.passes = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Cr),
        Hs =
          ((function (t) {
            function e(e, n, r, i) {
              void 0 === e && (e = 8),
                void 0 === n && (n = 4),
                void 0 === r && (r = At.FILTER_RESOLUTION),
                void 0 === i && (i = 5);
              var o = t.call(this) || this;
              return (
                (o.blurXFilter = new ks(!0, e, n, r, i)),
                (o.blurYFilter = new ks(!1, e, n, r, i)),
                (o.resolution = r),
                (o.quality = n),
                (o.blur = e),
                (o.repeatEdgePixels = !1),
                o
              );
            }
            gs(e, t),
              (e.prototype.apply = function (t, e, n, r) {
                var i = Math.abs(this.blurXFilter.strength),
                  o = Math.abs(this.blurYFilter.strength);
                if (i && o) {
                  var a = t.getFilterTexture();
                  this.blurXFilter.apply(t, e, a, Os.CLEAR),
                    this.blurYFilter.apply(t, a, n, r),
                    t.returnFilterTexture(a);
                } else
                  o
                    ? this.blurYFilter.apply(t, e, n, r)
                    : this.blurXFilter.apply(t, e, n, r);
              }),
              (e.prototype.updatePadding = function () {
                this._repeatEdgePixels
                  ? (this.padding = 0)
                  : (this.padding =
                      2 *
                      Math.max(
                        Math.abs(this.blurXFilter.strength),
                        Math.abs(this.blurYFilter.strength),
                      ));
              }),
              Object.defineProperty(e.prototype, "blur", {
                get: function () {
                  return this.blurXFilter.blur;
                },
                set: function (t) {
                  (this.blurXFilter.blur = this.blurYFilter.blur = t),
                    this.updatePadding();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "quality", {
                get: function () {
                  return this.blurXFilter.quality;
                },
                set: function (t) {
                  this.blurXFilter.quality = this.blurYFilter.quality = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "blurX", {
                get: function () {
                  return this.blurXFilter.blur;
                },
                set: function (t) {
                  (this.blurXFilter.blur = t), this.updatePadding();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "blurY", {
                get: function () {
                  return this.blurYFilter.blur;
                },
                set: function (t) {
                  (this.blurYFilter.blur = t), this.updatePadding();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "blendMode", {
                get: function () {
                  return this.blurYFilter.blendMode;
                },
                set: function (t) {
                  this.blurYFilter.blendMode = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "repeatEdgePixels", {
                get: function () {
                  return this._repeatEdgePixels;
                },
                set: function (t) {
                  (this._repeatEdgePixels = t), this.updatePadding();
                },
                enumerable: !1,
                configurable: !0,
              });
          })(Cr),
          function (t, e) {
            return (
              (Hs =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
                }),
              Hs(t, e)
            );
          }),
        zs = (function (t) {
          function e() {
            var e = this,
              n = {
                m: new Float32Array([
                  1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0,
                ]),
                uAlpha: 1,
              };
            return (
              ((e =
                t.call(
                  this,
                  ui,
                  "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",
                  n,
                ) || this).alpha = 1),
              e
            );
          }
          return (
            (function (t, e) {
              function n() {
                this.constructor = t;
              }
              Hs(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((n.prototype = e.prototype), new n()));
            })(e, t),
            (e.prototype._loadMatrix = function (t, e) {
              void 0 === e && (e = !1);
              var n = t;
              e &&
                (this._multiply(n, this.uniforms.m, t),
                (n = this._colorMatrix(n))),
                (this.uniforms.m = n);
            }),
            (e.prototype._multiply = function (t, e, n) {
              return (
                (t[0] =
                  e[0] * n[0] + e[1] * n[5] + e[2] * n[10] + e[3] * n[15]),
                (t[1] =
                  e[0] * n[1] + e[1] * n[6] + e[2] * n[11] + e[3] * n[16]),
                (t[2] =
                  e[0] * n[2] + e[1] * n[7] + e[2] * n[12] + e[3] * n[17]),
                (t[3] =
                  e[0] * n[3] + e[1] * n[8] + e[2] * n[13] + e[3] * n[18]),
                (t[4] =
                  e[0] * n[4] +
                  e[1] * n[9] +
                  e[2] * n[14] +
                  e[3] * n[19] +
                  e[4]),
                (t[5] =
                  e[5] * n[0] + e[6] * n[5] + e[7] * n[10] + e[8] * n[15]),
                (t[6] =
                  e[5] * n[1] + e[6] * n[6] + e[7] * n[11] + e[8] * n[16]),
                (t[7] =
                  e[5] * n[2] + e[6] * n[7] + e[7] * n[12] + e[8] * n[17]),
                (t[8] =
                  e[5] * n[3] + e[6] * n[8] + e[7] * n[13] + e[8] * n[18]),
                (t[9] =
                  e[5] * n[4] +
                  e[6] * n[9] +
                  e[7] * n[14] +
                  e[8] * n[19] +
                  e[9]),
                (t[10] =
                  e[10] * n[0] + e[11] * n[5] + e[12] * n[10] + e[13] * n[15]),
                (t[11] =
                  e[10] * n[1] + e[11] * n[6] + e[12] * n[11] + e[13] * n[16]),
                (t[12] =
                  e[10] * n[2] + e[11] * n[7] + e[12] * n[12] + e[13] * n[17]),
                (t[13] =
                  e[10] * n[3] + e[11] * n[8] + e[12] * n[13] + e[13] * n[18]),
                (t[14] =
                  e[10] * n[4] +
                  e[11] * n[9] +
                  e[12] * n[14] +
                  e[13] * n[19] +
                  e[14]),
                (t[15] =
                  e[15] * n[0] + e[16] * n[5] + e[17] * n[10] + e[18] * n[15]),
                (t[16] =
                  e[15] * n[1] + e[16] * n[6] + e[17] * n[11] + e[18] * n[16]),
                (t[17] =
                  e[15] * n[2] + e[16] * n[7] + e[17] * n[12] + e[18] * n[17]),
                (t[18] =
                  e[15] * n[3] + e[16] * n[8] + e[17] * n[13] + e[18] * n[18]),
                (t[19] =
                  e[15] * n[4] +
                  e[16] * n[9] +
                  e[17] * n[14] +
                  e[18] * n[19] +
                  e[19]),
                t
              );
            }),
            (e.prototype._colorMatrix = function (t) {
              var e = new Float32Array(t);
              return (
                (e[4] /= 255), (e[9] /= 255), (e[14] /= 255), (e[19] /= 255), e
              );
            }),
            (e.prototype.brightness = function (t, e) {
              var n = [
                t,
                0,
                0,
                0,
                0,
                0,
                t,
                0,
                0,
                0,
                0,
                0,
                t,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
              ];
              this._loadMatrix(n, e);
            }),
            (e.prototype.tint = function (t, e) {
              var n = [
                ((t >> 16) & 255) / 255,
                0,
                0,
                0,
                0,
                0,
                ((t >> 8) & 255) / 255,
                0,
                0,
                0,
                0,
                0,
                (255 & t) / 255,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
              ];
              this._loadMatrix(n, e);
            }),
            (e.prototype.greyscale = function (t, e) {
              var n = [
                t,
                t,
                t,
                0,
                0,
                t,
                t,
                t,
                0,
                0,
                t,
                t,
                t,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
              ];
              this._loadMatrix(n, e);
            }),
            (e.prototype.blackAndWhite = function (t) {
              this._loadMatrix(
                [
                  0.3, 0.6, 0.1, 0, 0, 0.3, 0.6, 0.1, 0, 0, 0.3, 0.6, 0.1, 0, 0,
                  0, 0, 0, 1, 0,
                ],
                t,
              );
            }),
            (e.prototype.hue = function (t, e) {
              t = ((t || 0) / 180) * Math.PI;
              var n = Math.cos(t),
                r = Math.sin(t),
                i = 1 / 3,
                o = (0, Math.sqrt)(i),
                a = [
                  n + (1 - n) * i,
                  i * (1 - n) - o * r,
                  i * (1 - n) + o * r,
                  0,
                  0,
                  i * (1 - n) + o * r,
                  n + i * (1 - n),
                  i * (1 - n) - o * r,
                  0,
                  0,
                  i * (1 - n) - o * r,
                  i * (1 - n) + o * r,
                  n + i * (1 - n),
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0,
                ];
              this._loadMatrix(a, e);
            }),
            (e.prototype.contrast = function (t, e) {
              var n = (t || 0) + 1,
                r = -0.5 * (n - 1),
                i = [
                  n,
                  0,
                  0,
                  0,
                  r,
                  0,
                  n,
                  0,
                  0,
                  r,
                  0,
                  0,
                  n,
                  0,
                  r,
                  0,
                  0,
                  0,
                  1,
                  0,
                ];
              this._loadMatrix(i, e);
            }),
            (e.prototype.saturate = function (t, e) {
              void 0 === t && (t = 0);
              var n = (2 * t) / 3 + 1,
                r = -0.5 * (n - 1),
                i = [
                  n,
                  r,
                  r,
                  0,
                  0,
                  r,
                  n,
                  r,
                  0,
                  0,
                  r,
                  r,
                  n,
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0,
                ];
              this._loadMatrix(i, e);
            }),
            (e.prototype.desaturate = function () {
              this.saturate(-1);
            }),
            (e.prototype.negative = function (t) {
              this._loadMatrix(
                [-1, 0, 0, 1, 0, 0, -1, 0, 1, 0, 0, 0, -1, 1, 0, 0, 0, 0, 1, 0],
                t,
              );
            }),
            (e.prototype.sepia = function (t) {
              this._loadMatrix(
                [
                  0.393, 0.7689999, 0.18899999, 0, 0, 0.349, 0.6859999,
                  0.16799999, 0, 0, 0.272, 0.5339999, 0.13099999, 0, 0, 0, 0, 0,
                  1, 0,
                ],
                t,
              );
            }),
            (e.prototype.technicolor = function (t) {
              this._loadMatrix(
                [
                  1.9125277891456083, -0.8545344976951645, -0.09155508482755585,
                  0, 11.793603434377337, -0.3087833385928097,
                  1.7658908555458428, -0.10601743074722245, 0,
                  -70.35205161461398, -0.231103377548616, -0.7501899197440212,
                  1.847597816108189, 0, 30.950940869491138, 0, 0, 0, 1, 0,
                ],
                t,
              );
            }),
            (e.prototype.polaroid = function (t) {
              this._loadMatrix(
                [
                  1.438, -0.062, -0.062, 0, 0, -0.122, 1.378, -0.122, 0, 0,
                  -0.016, -0.016, 1.483, 0, 0, 0, 0, 0, 1, 0,
                ],
                t,
              );
            }),
            (e.prototype.toBGR = function (t) {
              this._loadMatrix(
                [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
                t,
              );
            }),
            (e.prototype.kodachrome = function (t) {
              this._loadMatrix(
                [
                  1.1285582396593525, -0.3967382283601348, -0.03992559172921793,
                  0, 63.72958762196502, -0.16404339962244616,
                  1.0835251566291304, -0.05498805115633132, 0,
                  24.732407896706203, -0.16786010706155763, -0.5603416277695248,
                  1.6014850761964943, 0, 35.62982807460946, 0, 0, 0, 1, 0,
                ],
                t,
              );
            }),
            (e.prototype.browni = function (t) {
              this._loadMatrix(
                [
                  0.5997023498159715, 0.34553243048391263, -0.2708298674538042,
                  0, 47.43192855600873, -0.037703249837783157,
                  0.8609577587992641, 0.15059552388459913, 0,
                  -36.96841498319127, 0.24113635128153335, -0.07441037908422492,
                  0.44972182064877153, 0, -7.562075277591283, 0, 0, 0, 1, 0,
                ],
                t,
              );
            }),
            (e.prototype.vintage = function (t) {
              this._loadMatrix(
                [
                  0.6279345635605994, 0.3202183420819367, -0.03965408211312453,
                  0, 9.651285835294123, 0.02578397704808868, 0.6441188644374771,
                  0.03259127616149294, 0, 7.462829176470591, 0.0466055556782719,
                  -0.0851232987247891, 0.5241648018700465, 0, 5.159190588235296,
                  0, 0, 0, 1, 0,
                ],
                t,
              );
            }),
            (e.prototype.colorTone = function (t, e, n, r, i) {
              var o = (((n = n || 16770432) >> 16) & 255) / 255,
                a = ((n >> 8) & 255) / 255,
                s = (255 & n) / 255,
                l = (((r = r || 3375104) >> 16) & 255) / 255,
                u = ((r >> 8) & 255) / 255,
                h = (255 & r) / 255,
                c = [
                  0.3,
                  0.59,
                  0.11,
                  0,
                  0,
                  o,
                  a,
                  s,
                  (t = t || 0.2),
                  0,
                  l,
                  u,
                  h,
                  (e = e || 0.15),
                  0,
                  o - l,
                  a - u,
                  s - h,
                  0,
                  0,
                ];
              this._loadMatrix(c, i);
            }),
            (e.prototype.night = function (t, e) {
              var n = [
                -2 * (t = t || 0.1),
                -t,
                0,
                0,
                0,
                -t,
                0,
                t,
                0,
                0,
                0,
                t,
                2 * t,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
              ];
              this._loadMatrix(n, e);
            }),
            (e.prototype.predator = function (t, e) {
              var n = [
                11.224130630493164 * t,
                -4.794486999511719 * t,
                -2.8746118545532227 * t,
                0 * t,
                0.40342438220977783 * t,
                -3.6330697536468506 * t,
                9.193157196044922 * t,
                -2.951810836791992 * t,
                0 * t,
                -1.316135048866272 * t,
                -3.2184197902679443 * t,
                -4.2375030517578125 * t,
                7.476448059082031 * t,
                0 * t,
                0.8044459223747253 * t,
                0,
                0,
                0,
                1,
                0,
              ];
              this._loadMatrix(n, e);
            }),
            (e.prototype.lsd = function (t) {
              this._loadMatrix(
                [
                  2, -0.4, 0.5, 0, 0, -0.5, 2, -0.4, 0, 0, -0.4, -0.5, 3, 0, 0,
                  0, 0, 0, 1, 0,
                ],
                t,
              );
            }),
            (e.prototype.reset = function () {
              this._loadMatrix(
                [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0],
                !1,
              );
            }),
            Object.defineProperty(e.prototype, "matrix", {
              get: function () {
                return this.uniforms.m;
              },
              set: function (t) {
                this.uniforms.m = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "alpha", {
              get: function () {
                return this.uniforms.uAlpha;
              },
              set: function (t) {
                this.uniforms.uAlpha = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Cr);
      zs.prototype.grayscale = zs.prototype.greyscale;
      var Vs = function (t, e) {
        return (
          (Vs =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
            }),
          Vs(t, e)
        );
      };
      !(function (t) {
        function e(e, n) {
          var r = this,
            i = new me();
          return (
            (e.renderable = !1),
            ((r =
              t.call(
                this,
                "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n",
                "varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",
                {
                  mapSampler: e._texture,
                  filterMatrix: i,
                  scale: { x: 1, y: 1 },
                  rotation: new Float32Array([1, 0, 0, 1]),
                },
              ) || this).maskSprite = e),
            (r.maskMatrix = i),
            null == n && (n = 20),
            (r.scale = new se(n, n)),
            r
          );
        }
        (function (t, e) {
          function n() {
            this.constructor = t;
          }
          Vs(t, e),
            (t.prototype =
              null === e
                ? Object.create(e)
                : ((n.prototype = e.prototype), new n()));
        })(e, t),
          (e.prototype.apply = function (t, e, n, r) {
            (this.uniforms.filterMatrix = t.calculateSpriteMatrix(
              this.maskMatrix,
              this.maskSprite,
            )),
              (this.uniforms.scale.x = this.scale.x),
              (this.uniforms.scale.y = this.scale.y);
            var i = this.maskSprite.worldTransform,
              o = Math.sqrt(i.a * i.a + i.b * i.b),
              a = Math.sqrt(i.c * i.c + i.d * i.d);
            0 !== o &&
              0 !== a &&
              ((this.uniforms.rotation[0] = i.a / o),
              (this.uniforms.rotation[1] = i.b / o),
              (this.uniforms.rotation[2] = i.c / a),
              (this.uniforms.rotation[3] = i.d / a)),
              t.applyFilter(this, e, n, r);
          }),
          Object.defineProperty(e.prototype, "map", {
            get: function () {
              return this.uniforms.mapSampler;
            },
            set: function (t) {
              this.uniforms.mapSampler = t;
            },
            enumerable: !1,
            configurable: !0,
          });
      })(Cr);
      var Xs,
        Ws = function (t, e) {
          return (
            (Ws =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            Ws(t, e)
          );
        };
      (function (t, e) {
        function n() {
          this.constructor = t;
        }
        Ws(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n()));
      })(
        function () {
          return (
            Xs.call(
              this,
              "\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",
              'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n',
            ) || this
          );
        },
        (Xs = Cr),
      );
      var js,
        Ys,
        qs,
        Ks,
        Zs,
        Qs,
        $s,
        Js,
        tl,
        el,
        nl,
        rl,
        il,
        ol,
        al,
        sl,
        ll,
        ul,
        hl,
        cl,
        dl = function (t, e) {
          return (
            (dl =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
              }),
            dl(t, e)
          );
        };
      !(function (t) {
        function e(e, n) {
          void 0 === e && (e = 0.5), void 0 === n && (n = Math.random());
          var r =
            t.call(
              this,
              ui,
              "precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",
              { uNoise: 0, uSeed: 0 },
            ) || this;
          return (r.noise = e), (r.seed = n), r;
        }
        (function (t, e) {
          function n() {
            this.constructor = t;
          }
          dl(t, e),
            (t.prototype =
              null === e
                ? Object.create(e)
                : ((n.prototype = e.prototype), new n()));
        })(e, t),
          Object.defineProperty(e.prototype, "noise", {
            get: function () {
              return this.uniforms.uNoise;
            },
            set: function (t) {
              this.uniforms.uNoise = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "seed", {
            get: function () {
              return this.uniforms.uSeed;
            },
            set: function (t) {
              this.uniforms.uSeed = t;
            },
            enumerable: !1,
            configurable: !0,
          });
      })(Cr),
        (function (t) {
          (t[(t.WEBGL_LEGACY = 0)] = "WEBGL_LEGACY"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.WEBGL2 = 2)] = "WEBGL2");
        })(js || (js = {})),
        (function (t) {
          (t[(t.UNKNOWN = 0)] = "UNKNOWN"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.CANVAS = 2)] = "CANVAS");
        })(Ys || (Ys = {})),
        (function (t) {
          (t[(t.COLOR = 16384)] = "COLOR"),
            (t[(t.DEPTH = 256)] = "DEPTH"),
            (t[(t.STENCIL = 1024)] = "STENCIL");
        })(qs || (qs = {})),
        (function (t) {
          (t[(t.NORMAL = 0)] = "NORMAL"),
            (t[(t.ADD = 1)] = "ADD"),
            (t[(t.MULTIPLY = 2)] = "MULTIPLY"),
            (t[(t.SCREEN = 3)] = "SCREEN"),
            (t[(t.OVERLAY = 4)] = "OVERLAY"),
            (t[(t.DARKEN = 5)] = "DARKEN"),
            (t[(t.LIGHTEN = 6)] = "LIGHTEN"),
            (t[(t.COLOR_DODGE = 7)] = "COLOR_DODGE"),
            (t[(t.COLOR_BURN = 8)] = "COLOR_BURN"),
            (t[(t.HARD_LIGHT = 9)] = "HARD_LIGHT"),
            (t[(t.SOFT_LIGHT = 10)] = "SOFT_LIGHT"),
            (t[(t.DIFFERENCE = 11)] = "DIFFERENCE"),
            (t[(t.EXCLUSION = 12)] = "EXCLUSION"),
            (t[(t.HUE = 13)] = "HUE"),
            (t[(t.SATURATION = 14)] = "SATURATION"),
            (t[(t.COLOR = 15)] = "COLOR"),
            (t[(t.LUMINOSITY = 16)] = "LUMINOSITY"),
            (t[(t.NORMAL_NPM = 17)] = "NORMAL_NPM"),
            (t[(t.ADD_NPM = 18)] = "ADD_NPM"),
            (t[(t.SCREEN_NPM = 19)] = "SCREEN_NPM"),
            (t[(t.NONE = 20)] = "NONE"),
            (t[(t.SRC_OVER = 0)] = "SRC_OVER"),
            (t[(t.SRC_IN = 21)] = "SRC_IN"),
            (t[(t.SRC_OUT = 22)] = "SRC_OUT"),
            (t[(t.SRC_ATOP = 23)] = "SRC_ATOP"),
            (t[(t.DST_OVER = 24)] = "DST_OVER"),
            (t[(t.DST_IN = 25)] = "DST_IN"),
            (t[(t.DST_OUT = 26)] = "DST_OUT"),
            (t[(t.DST_ATOP = 27)] = "DST_ATOP"),
            (t[(t.ERASE = 26)] = "ERASE"),
            (t[(t.SUBTRACT = 28)] = "SUBTRACT"),
            (t[(t.XOR = 29)] = "XOR");
        })(Ks || (Ks = {})),
        (function (t) {
          (t[(t.POINTS = 0)] = "POINTS"),
            (t[(t.LINES = 1)] = "LINES"),
            (t[(t.LINE_LOOP = 2)] = "LINE_LOOP"),
            (t[(t.LINE_STRIP = 3)] = "LINE_STRIP"),
            (t[(t.TRIANGLES = 4)] = "TRIANGLES"),
            (t[(t.TRIANGLE_STRIP = 5)] = "TRIANGLE_STRIP"),
            (t[(t.TRIANGLE_FAN = 6)] = "TRIANGLE_FAN");
        })(Zs || (Zs = {})),
        (function (t) {
          (t[(t.RGBA = 6408)] = "RGBA"),
            (t[(t.RGB = 6407)] = "RGB"),
            (t[(t.RG = 33319)] = "RG"),
            (t[(t.RED = 6403)] = "RED"),
            (t[(t.RGBA_INTEGER = 36249)] = "RGBA_INTEGER"),
            (t[(t.RGB_INTEGER = 36248)] = "RGB_INTEGER"),
            (t[(t.RG_INTEGER = 33320)] = "RG_INTEGER"),
            (t[(t.RED_INTEGER = 36244)] = "RED_INTEGER"),
            (t[(t.ALPHA = 6406)] = "ALPHA"),
            (t[(t.LUMINANCE = 6409)] = "LUMINANCE"),
            (t[(t.LUMINANCE_ALPHA = 6410)] = "LUMINANCE_ALPHA"),
            (t[(t.DEPTH_COMPONENT = 6402)] = "DEPTH_COMPONENT"),
            (t[(t.DEPTH_STENCIL = 34041)] = "DEPTH_STENCIL");
        })(Qs || (Qs = {})),
        (function (t) {
          (t[(t.TEXTURE_2D = 3553)] = "TEXTURE_2D"),
            (t[(t.TEXTURE_CUBE_MAP = 34067)] = "TEXTURE_CUBE_MAP"),
            (t[(t.TEXTURE_2D_ARRAY = 35866)] = "TEXTURE_2D_ARRAY"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069)] =
              "TEXTURE_CUBE_MAP_POSITIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Z"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Z");
        })($s || ($s = {})),
        (function (t) {
          (t[(t.UNSIGNED_BYTE = 5121)] = "UNSIGNED_BYTE"),
            (t[(t.UNSIGNED_SHORT = 5123)] = "UNSIGNED_SHORT"),
            (t[(t.UNSIGNED_SHORT_5_6_5 = 33635)] = "UNSIGNED_SHORT_5_6_5"),
            (t[(t.UNSIGNED_SHORT_4_4_4_4 = 32819)] = "UNSIGNED_SHORT_4_4_4_4"),
            (t[(t.UNSIGNED_SHORT_5_5_5_1 = 32820)] = "UNSIGNED_SHORT_5_5_5_1"),
            (t[(t.UNSIGNED_INT = 5125)] = "UNSIGNED_INT"),
            (t[(t.UNSIGNED_INT_10F_11F_11F_REV = 35899)] =
              "UNSIGNED_INT_10F_11F_11F_REV"),
            (t[(t.UNSIGNED_INT_2_10_10_10_REV = 33640)] =
              "UNSIGNED_INT_2_10_10_10_REV"),
            (t[(t.UNSIGNED_INT_24_8 = 34042)] = "UNSIGNED_INT_24_8"),
            (t[(t.UNSIGNED_INT_5_9_9_9_REV = 35902)] =
              "UNSIGNED_INT_5_9_9_9_REV"),
            (t[(t.BYTE = 5120)] = "BYTE"),
            (t[(t.SHORT = 5122)] = "SHORT"),
            (t[(t.INT = 5124)] = "INT"),
            (t[(t.FLOAT = 5126)] = "FLOAT"),
            (t[(t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269)] =
              "FLOAT_32_UNSIGNED_INT_24_8_REV"),
            (t[(t.HALF_FLOAT = 36193)] = "HALF_FLOAT");
        })(Js || (Js = {})),
        (function (t) {
          (t[(t.FLOAT = 0)] = "FLOAT"),
            (t[(t.INT = 1)] = "INT"),
            (t[(t.UINT = 2)] = "UINT");
        })(tl || (tl = {})),
        (function (t) {
          (t[(t.NEAREST = 0)] = "NEAREST"), (t[(t.LINEAR = 1)] = "LINEAR");
        })(el || (el = {})),
        (function (t) {
          (t[(t.CLAMP = 33071)] = "CLAMP"),
            (t[(t.REPEAT = 10497)] = "REPEAT"),
            (t[(t.MIRRORED_REPEAT = 33648)] = "MIRRORED_REPEAT");
        })(nl || (nl = {})),
        (function (t) {
          (t[(t.OFF = 0)] = "OFF"),
            (t[(t.POW2 = 1)] = "POW2"),
            (t[(t.ON = 2)] = "ON"),
            (t[(t.ON_MANUAL = 3)] = "ON_MANUAL");
        })(rl || (rl = {})),
        (function (t) {
          (t[(t.NPM = 0)] = "NPM"),
            (t[(t.UNPACK = 1)] = "UNPACK"),
            (t[(t.PMA = 2)] = "PMA"),
            (t[(t.NO_PREMULTIPLIED_ALPHA = 0)] = "NO_PREMULTIPLIED_ALPHA"),
            (t[(t.PREMULTIPLY_ON_UPLOAD = 1)] = "PREMULTIPLY_ON_UPLOAD"),
            (t[(t.PREMULTIPLY_ALPHA = 2)] = "PREMULTIPLY_ALPHA"),
            (t[(t.PREMULTIPLIED_ALPHA = 2)] = "PREMULTIPLIED_ALPHA");
        })(il || (il = {})),
        (function (t) {
          (t[(t.NO = 0)] = "NO"),
            (t[(t.YES = 1)] = "YES"),
            (t[(t.AUTO = 2)] = "AUTO"),
            (t[(t.BLEND = 0)] = "BLEND"),
            (t[(t.CLEAR = 1)] = "CLEAR"),
            (t[(t.BLIT = 2)] = "BLIT");
        })(ol || (ol = {})),
        (function (t) {
          (t[(t.AUTO = 0)] = "AUTO"), (t[(t.MANUAL = 1)] = "MANUAL");
        })(al || (al = {})),
        (function (t) {
          (t.LOW = "lowp"), (t.MEDIUM = "mediump"), (t.HIGH = "highp");
        })(sl || (sl = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.SCISSOR = 1)] = "SCISSOR"),
            (t[(t.STENCIL = 2)] = "STENCIL"),
            (t[(t.SPRITE = 3)] = "SPRITE"),
            (t[(t.COLOR = 4)] = "COLOR");
        })(ll || (ll = {})),
        (function (t) {
          (t[(t.RED = 1)] = "RED"),
            (t[(t.GREEN = 2)] = "GREEN"),
            (t[(t.BLUE = 4)] = "BLUE"),
            (t[(t.ALPHA = 8)] = "ALPHA");
        })(ul || (ul = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.LOW = 2)] = "LOW"),
            (t[(t.MEDIUM = 4)] = "MEDIUM"),
            (t[(t.HIGH = 8)] = "HIGH");
        })(hl || (hl = {})),
        (function (t) {
          (t[(t.ELEMENT_ARRAY_BUFFER = 34963)] = "ELEMENT_ARRAY_BUFFER"),
            (t[(t.ARRAY_BUFFER = 34962)] = "ARRAY_BUFFER"),
            (t[(t.UNIFORM_BUFFER = 35345)] = "UNIFORM_BUFFER");
        })(cl || (cl = {}));
      var fl = new me();
      (qe.prototype._cacheAsBitmap = !1),
        (qe.prototype._cacheData = null),
        (qe.prototype._cacheAsBitmapResolution = null),
        (qe.prototype._cacheAsBitmapMultisample = hl.NONE);
      var pl = function () {
        (this.textureCacheId = null),
          (this.originalRender = null),
          (this.originalRenderCanvas = null),
          (this.originalCalculateBounds = null),
          (this.originalGetLocalBounds = null),
          (this.originalUpdateTransform = null),
          (this.originalDestroy = null),
          (this.originalMask = null),
          (this.originalFilterArea = null),
          (this.originalContainsPoint = null),
          (this.sprite = null);
      };
      Object.defineProperties(qe.prototype, {
        cacheAsBitmapResolution: {
          get: function () {
            return this._cacheAsBitmapResolution;
          },
          set: function (t) {
            t !== this._cacheAsBitmapResolution &&
              ((this._cacheAsBitmapResolution = t),
              this.cacheAsBitmap &&
                ((this.cacheAsBitmap = !1), (this.cacheAsBitmap = !0)));
          },
        },
        cacheAsBitmapMultisample: {
          get: function () {
            return this._cacheAsBitmapMultisample;
          },
          set: function (t) {
            t !== this._cacheAsBitmapMultisample &&
              ((this._cacheAsBitmapMultisample = t),
              this.cacheAsBitmap &&
                ((this.cacheAsBitmap = !1), (this.cacheAsBitmap = !0)));
          },
        },
        cacheAsBitmap: {
          get: function () {
            return this._cacheAsBitmap;
          },
          set: function (t) {
            var e;
            this._cacheAsBitmap !== t &&
              ((this._cacheAsBitmap = t),
              t
                ? (this._cacheData || (this._cacheData = new pl()),
                  ((e = this._cacheData).originalRender = this.render),
                  (e.originalRenderCanvas = this.renderCanvas),
                  (e.originalUpdateTransform = this.updateTransform),
                  (e.originalCalculateBounds = this.calculateBounds),
                  (e.originalGetLocalBounds = this.getLocalBounds),
                  (e.originalDestroy = this.destroy),
                  (e.originalContainsPoint = this.containsPoint),
                  (e.originalMask = this._mask),
                  (e.originalFilterArea = this.filterArea),
                  (this.render = this._renderCached),
                  (this.renderCanvas = this._renderCachedCanvas),
                  (this.destroy = this._cacheAsBitmapDestroy))
                : ((e = this._cacheData).sprite &&
                    this._destroyCachedDisplayObject(),
                  (this.render = e.originalRender),
                  (this.renderCanvas = e.originalRenderCanvas),
                  (this.calculateBounds = e.originalCalculateBounds),
                  (this.getLocalBounds = e.originalGetLocalBounds),
                  (this.destroy = e.originalDestroy),
                  (this.updateTransform = e.originalUpdateTransform),
                  (this.containsPoint = e.originalContainsPoint),
                  (this._mask = e.originalMask),
                  (this.filterArea = e.originalFilterArea)));
          },
        },
      }),
        (qe.prototype._renderCached = function (t) {
          !this.visible ||
            this.worldAlpha <= 0 ||
            !this.renderable ||
            (this._initCachedDisplayObject(t),
            (this._cacheData.sprite.transform._worldID =
              this.transform._worldID),
            (this._cacheData.sprite.worldAlpha = this.worldAlpha),
            this._cacheData.sprite._render(t));
        }),
        (qe.prototype._initCachedDisplayObject = function (t) {
          var e;
          if (!this._cacheData || !this._cacheData.sprite) {
            var n = this.alpha;
            (this.alpha = 1), t.batch.flush();
            var r = this.getLocalBounds(null, !0).clone();
            if (this.filters && this.filters.length) {
              var i = this.filters[0].padding;
              r.pad(i);
            }
            r.ceil(At.RESOLUTION);
            var o = t.renderTexture.current,
              a = t.renderTexture.sourceFrame.clone(),
              s = t.renderTexture.destinationFrame.clone(),
              l = t.projection.transform,
              u = Ln.create({
                width: r.width,
                height: r.height,
                resolution: this.cacheAsBitmapResolution || t.resolution,
                multisample:
                  null !== (e = this.cacheAsBitmapMultisample) && void 0 !== e
                    ? e
                    : t.multisample,
              }),
              h = "cacheAsBitmap_" + qt();
            (this._cacheData.textureCacheId = h),
              _n.addToCache(u.baseTexture, h),
              Nn.addToCache(u, h);
            var c = this.transform.localTransform
              .copyTo(fl)
              .invert()
              .translate(-r.x, -r.y);
            (this.render = this._cacheData.originalRender),
              t.render(this, {
                renderTexture: u,
                clear: !0,
                transform: c,
                skipUpdateTransform: !1,
              }),
              t.framebuffer.blit(),
              (t.projection.transform = l),
              t.renderTexture.bind(o, a, s),
              (this.render = this._renderCached),
              (this.updateTransform = this.displayObjectUpdateTransform),
              (this.calculateBounds = this._calculateCachedBounds),
              (this.getLocalBounds = this._getCachedLocalBounds),
              (this._mask = null),
              (this.filterArea = null),
              (this.alpha = n);
            var d = new fa(u);
            (d.transform.worldTransform = this.transform.worldTransform),
              (d.anchor.x = -r.x / r.width),
              (d.anchor.y = -r.y / r.height),
              (d.alpha = n),
              (d._bounds = this._bounds),
              (this._cacheData.sprite = d),
              (this.transform._parentID = -1),
              this.parent
                ? this.updateTransform()
                : (this.enableTempParent(),
                  this.updateTransform(),
                  this.disableTempParent(null)),
              (this.containsPoint = d.containsPoint.bind(d));
          }
        }),
        (qe.prototype._renderCachedCanvas = function (t) {
          !this.visible ||
            this.worldAlpha <= 0 ||
            !this.renderable ||
            (this._initCachedDisplayObjectCanvas(t),
            (this._cacheData.sprite.worldAlpha = this.worldAlpha),
            this._cacheData.sprite._renderCanvas(t));
        }),
        (qe.prototype._initCachedDisplayObjectCanvas = function (t) {
          if (!this._cacheData || !this._cacheData.sprite) {
            var e = this.getLocalBounds(null, !0),
              n = this.alpha;
            this.alpha = 1;
            var r = t.context,
              i = t._projTransform;
            e.ceil(At.RESOLUTION);
            var o = Ln.create({ width: e.width, height: e.height }),
              a = "cacheAsBitmap_" + qt();
            (this._cacheData.textureCacheId = a),
              _n.addToCache(o.baseTexture, a),
              Nn.addToCache(o, a);
            var s = fl;
            this.transform.localTransform.copyTo(s),
              s.invert(),
              (s.tx -= e.x),
              (s.ty -= e.y),
              (this.renderCanvas = this._cacheData.originalRenderCanvas),
              t.render(this, {
                renderTexture: o,
                clear: !0,
                transform: s,
                skipUpdateTransform: !1,
              }),
              (t.context = r),
              (t._projTransform = i),
              (this.renderCanvas = this._renderCachedCanvas),
              (this.updateTransform = this.displayObjectUpdateTransform),
              (this.calculateBounds = this._calculateCachedBounds),
              (this.getLocalBounds = this._getCachedLocalBounds),
              (this._mask = null),
              (this.filterArea = null),
              (this.alpha = n);
            var l = new fa(o);
            (l.transform.worldTransform = this.transform.worldTransform),
              (l.anchor.x = -e.x / e.width),
              (l.anchor.y = -e.y / e.height),
              (l.alpha = n),
              (l._bounds = this._bounds),
              (this._cacheData.sprite = l),
              (this.transform._parentID = -1),
              this.parent
                ? this.updateTransform()
                : ((this.parent = t._tempDisplayObjectParent),
                  this.updateTransform(),
                  (this.parent = null)),
              (this.containsPoint = l.containsPoint.bind(l));
          }
        }),
        (qe.prototype._calculateCachedBounds = function () {
          this._bounds.clear(),
            (this._cacheData.sprite.transform._worldID =
              this.transform._worldID),
            this._cacheData.sprite._calculateBounds(),
            (this._bounds.updateID = this._boundsID);
        }),
        (qe.prototype._getCachedLocalBounds = function () {
          return this._cacheData.sprite.getLocalBounds(null);
        }),
        (qe.prototype._destroyCachedDisplayObject = function () {
          this._cacheData.sprite._texture.destroy(!0),
            (this._cacheData.sprite = null),
            _n.removeFromCache(this._cacheData.textureCacheId),
            Nn.removeFromCache(this._cacheData.textureCacheId),
            (this._cacheData.textureCacheId = null);
        }),
        (qe.prototype._cacheAsBitmapDestroy = function (t) {
          (this.cacheAsBitmap = !1), this.destroy(t);
        }),
        (qe.prototype.name = null),
        (Qe.prototype.getChildByName = function (t, e) {
          for (var n = 0, r = this.children.length; n < r; n++)
            if (this.children[n].name === t) return this.children[n];
          if (e)
            for (n = 0, r = this.children.length; n < r; n++) {
              var i = this.children[n];
              if (i.getChildByName) {
                var o = i.getChildByName(t, !0);
                if (o) return o;
              }
            }
          return null;
        }),
        (qe.prototype.getGlobalPosition = function (t, e) {
          return (
            void 0 === t && (t = new se()),
            void 0 === e && (e = !1),
            this.parent
              ? this.parent.toGlobal(this.position, t, e)
              : ((t.x = this.position.x), (t.y = this.position.y)),
            t
          );
        });
      var ml,
        _l,
        gl,
        vl,
        yl,
        El,
        Tl,
        bl,
        xl,
        Sl,
        Ml,
        Al,
        Rl,
        wl,
        Pl,
        Il,
        Ol,
        Cl,
        Nl,
        Ll,
        Dl = (function () {
          function t() {}
          return (
            (t.init = function (t) {
              var e = this;
              Object.defineProperty(this, "resizeTo", {
                set: function (t) {
                  globalThis.removeEventListener("resize", this.queueResize),
                    (this._resizeTo = t),
                    t &&
                      (globalThis.addEventListener("resize", this.queueResize),
                      this.resize());
                },
                get: function () {
                  return this._resizeTo;
                },
              }),
                (this.queueResize = function () {
                  e._resizeTo &&
                    (e.cancelResize(),
                    (e._resizeId = requestAnimationFrame(function () {
                      return e.resize();
                    })));
                }),
                (this.cancelResize = function () {
                  e._resizeId &&
                    (cancelAnimationFrame(e._resizeId), (e._resizeId = null));
                }),
                (this.resize = function () {
                  if (e._resizeTo) {
                    var t, n;
                    if ((e.cancelResize(), e._resizeTo === globalThis.window))
                      (t = globalThis.innerWidth), (n = globalThis.innerHeight);
                    else {
                      var r = e._resizeTo;
                      (t = r.clientWidth), (n = r.clientHeight);
                    }
                    e.renderer.resize(t, n);
                  }
                }),
                (this._resizeId = null),
                (this._resizeTo = null),
                (this.resizeTo = t.resizeTo || null);
            }),
            (t.destroy = function () {
              globalThis.removeEventListener("resize", this.queueResize),
                this.cancelResize(),
                (this.cancelResize = null),
                (this.queueResize = null),
                (this.resizeTo = null),
                (this.resize = null);
            }),
            (t.extension = $e.Application),
            t
          );
        })();
      !(function (t) {
        (t[(t.WEBGL_LEGACY = 0)] = "WEBGL_LEGACY"),
          (t[(t.WEBGL = 1)] = "WEBGL"),
          (t[(t.WEBGL2 = 2)] = "WEBGL2");
      })(ml || (ml = {})),
        (function (t) {
          (t[(t.UNKNOWN = 0)] = "UNKNOWN"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.CANVAS = 2)] = "CANVAS");
        })(_l || (_l = {})),
        (function (t) {
          (t[(t.COLOR = 16384)] = "COLOR"),
            (t[(t.DEPTH = 256)] = "DEPTH"),
            (t[(t.STENCIL = 1024)] = "STENCIL");
        })(gl || (gl = {})),
        (function (t) {
          (t[(t.NORMAL = 0)] = "NORMAL"),
            (t[(t.ADD = 1)] = "ADD"),
            (t[(t.MULTIPLY = 2)] = "MULTIPLY"),
            (t[(t.SCREEN = 3)] = "SCREEN"),
            (t[(t.OVERLAY = 4)] = "OVERLAY"),
            (t[(t.DARKEN = 5)] = "DARKEN"),
            (t[(t.LIGHTEN = 6)] = "LIGHTEN"),
            (t[(t.COLOR_DODGE = 7)] = "COLOR_DODGE"),
            (t[(t.COLOR_BURN = 8)] = "COLOR_BURN"),
            (t[(t.HARD_LIGHT = 9)] = "HARD_LIGHT"),
            (t[(t.SOFT_LIGHT = 10)] = "SOFT_LIGHT"),
            (t[(t.DIFFERENCE = 11)] = "DIFFERENCE"),
            (t[(t.EXCLUSION = 12)] = "EXCLUSION"),
            (t[(t.HUE = 13)] = "HUE"),
            (t[(t.SATURATION = 14)] = "SATURATION"),
            (t[(t.COLOR = 15)] = "COLOR"),
            (t[(t.LUMINOSITY = 16)] = "LUMINOSITY"),
            (t[(t.NORMAL_NPM = 17)] = "NORMAL_NPM"),
            (t[(t.ADD_NPM = 18)] = "ADD_NPM"),
            (t[(t.SCREEN_NPM = 19)] = "SCREEN_NPM"),
            (t[(t.NONE = 20)] = "NONE"),
            (t[(t.SRC_OVER = 0)] = "SRC_OVER"),
            (t[(t.SRC_IN = 21)] = "SRC_IN"),
            (t[(t.SRC_OUT = 22)] = "SRC_OUT"),
            (t[(t.SRC_ATOP = 23)] = "SRC_ATOP"),
            (t[(t.DST_OVER = 24)] = "DST_OVER"),
            (t[(t.DST_IN = 25)] = "DST_IN"),
            (t[(t.DST_OUT = 26)] = "DST_OUT"),
            (t[(t.DST_ATOP = 27)] = "DST_ATOP"),
            (t[(t.ERASE = 26)] = "ERASE"),
            (t[(t.SUBTRACT = 28)] = "SUBTRACT"),
            (t[(t.XOR = 29)] = "XOR");
        })(vl || (vl = {})),
        (function (t) {
          (t[(t.POINTS = 0)] = "POINTS"),
            (t[(t.LINES = 1)] = "LINES"),
            (t[(t.LINE_LOOP = 2)] = "LINE_LOOP"),
            (t[(t.LINE_STRIP = 3)] = "LINE_STRIP"),
            (t[(t.TRIANGLES = 4)] = "TRIANGLES"),
            (t[(t.TRIANGLE_STRIP = 5)] = "TRIANGLE_STRIP"),
            (t[(t.TRIANGLE_FAN = 6)] = "TRIANGLE_FAN");
        })(yl || (yl = {})),
        (function (t) {
          (t[(t.RGBA = 6408)] = "RGBA"),
            (t[(t.RGB = 6407)] = "RGB"),
            (t[(t.RG = 33319)] = "RG"),
            (t[(t.RED = 6403)] = "RED"),
            (t[(t.RGBA_INTEGER = 36249)] = "RGBA_INTEGER"),
            (t[(t.RGB_INTEGER = 36248)] = "RGB_INTEGER"),
            (t[(t.RG_INTEGER = 33320)] = "RG_INTEGER"),
            (t[(t.RED_INTEGER = 36244)] = "RED_INTEGER"),
            (t[(t.ALPHA = 6406)] = "ALPHA"),
            (t[(t.LUMINANCE = 6409)] = "LUMINANCE"),
            (t[(t.LUMINANCE_ALPHA = 6410)] = "LUMINANCE_ALPHA"),
            (t[(t.DEPTH_COMPONENT = 6402)] = "DEPTH_COMPONENT"),
            (t[(t.DEPTH_STENCIL = 34041)] = "DEPTH_STENCIL");
        })(El || (El = {})),
        (function (t) {
          (t[(t.TEXTURE_2D = 3553)] = "TEXTURE_2D"),
            (t[(t.TEXTURE_CUBE_MAP = 34067)] = "TEXTURE_CUBE_MAP"),
            (t[(t.TEXTURE_2D_ARRAY = 35866)] = "TEXTURE_2D_ARRAY"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069)] =
              "TEXTURE_CUBE_MAP_POSITIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Z"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Z");
        })(Tl || (Tl = {})),
        (function (t) {
          (t[(t.UNSIGNED_BYTE = 5121)] = "UNSIGNED_BYTE"),
            (t[(t.UNSIGNED_SHORT = 5123)] = "UNSIGNED_SHORT"),
            (t[(t.UNSIGNED_SHORT_5_6_5 = 33635)] = "UNSIGNED_SHORT_5_6_5"),
            (t[(t.UNSIGNED_SHORT_4_4_4_4 = 32819)] = "UNSIGNED_SHORT_4_4_4_4"),
            (t[(t.UNSIGNED_SHORT_5_5_5_1 = 32820)] = "UNSIGNED_SHORT_5_5_5_1"),
            (t[(t.UNSIGNED_INT = 5125)] = "UNSIGNED_INT"),
            (t[(t.UNSIGNED_INT_10F_11F_11F_REV = 35899)] =
              "UNSIGNED_INT_10F_11F_11F_REV"),
            (t[(t.UNSIGNED_INT_2_10_10_10_REV = 33640)] =
              "UNSIGNED_INT_2_10_10_10_REV"),
            (t[(t.UNSIGNED_INT_24_8 = 34042)] = "UNSIGNED_INT_24_8"),
            (t[(t.UNSIGNED_INT_5_9_9_9_REV = 35902)] =
              "UNSIGNED_INT_5_9_9_9_REV"),
            (t[(t.BYTE = 5120)] = "BYTE"),
            (t[(t.SHORT = 5122)] = "SHORT"),
            (t[(t.INT = 5124)] = "INT"),
            (t[(t.FLOAT = 5126)] = "FLOAT"),
            (t[(t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269)] =
              "FLOAT_32_UNSIGNED_INT_24_8_REV"),
            (t[(t.HALF_FLOAT = 36193)] = "HALF_FLOAT");
        })(bl || (bl = {})),
        (function (t) {
          (t[(t.FLOAT = 0)] = "FLOAT"),
            (t[(t.INT = 1)] = "INT"),
            (t[(t.UINT = 2)] = "UINT");
        })(xl || (xl = {})),
        (function (t) {
          (t[(t.NEAREST = 0)] = "NEAREST"), (t[(t.LINEAR = 1)] = "LINEAR");
        })(Sl || (Sl = {})),
        (function (t) {
          (t[(t.CLAMP = 33071)] = "CLAMP"),
            (t[(t.REPEAT = 10497)] = "REPEAT"),
            (t[(t.MIRRORED_REPEAT = 33648)] = "MIRRORED_REPEAT");
        })(Ml || (Ml = {})),
        (function (t) {
          (t[(t.OFF = 0)] = "OFF"),
            (t[(t.POW2 = 1)] = "POW2"),
            (t[(t.ON = 2)] = "ON"),
            (t[(t.ON_MANUAL = 3)] = "ON_MANUAL");
        })(Al || (Al = {})),
        (function (t) {
          (t[(t.NPM = 0)] = "NPM"),
            (t[(t.UNPACK = 1)] = "UNPACK"),
            (t[(t.PMA = 2)] = "PMA"),
            (t[(t.NO_PREMULTIPLIED_ALPHA = 0)] = "NO_PREMULTIPLIED_ALPHA"),
            (t[(t.PREMULTIPLY_ON_UPLOAD = 1)] = "PREMULTIPLY_ON_UPLOAD"),
            (t[(t.PREMULTIPLY_ALPHA = 2)] = "PREMULTIPLY_ALPHA"),
            (t[(t.PREMULTIPLIED_ALPHA = 2)] = "PREMULTIPLIED_ALPHA");
        })(Rl || (Rl = {})),
        (function (t) {
          (t[(t.NO = 0)] = "NO"),
            (t[(t.YES = 1)] = "YES"),
            (t[(t.AUTO = 2)] = "AUTO"),
            (t[(t.BLEND = 0)] = "BLEND"),
            (t[(t.CLEAR = 1)] = "CLEAR"),
            (t[(t.BLIT = 2)] = "BLIT");
        })(wl || (wl = {})),
        (function (t) {
          (t[(t.AUTO = 0)] = "AUTO"), (t[(t.MANUAL = 1)] = "MANUAL");
        })(Pl || (Pl = {})),
        (function (t) {
          (t.LOW = "lowp"), (t.MEDIUM = "mediump"), (t.HIGH = "highp");
        })(Il || (Il = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.SCISSOR = 1)] = "SCISSOR"),
            (t[(t.STENCIL = 2)] = "STENCIL"),
            (t[(t.SPRITE = 3)] = "SPRITE"),
            (t[(t.COLOR = 4)] = "COLOR");
        })(Ol || (Ol = {})),
        (function (t) {
          (t[(t.RED = 1)] = "RED"),
            (t[(t.GREEN = 2)] = "GREEN"),
            (t[(t.BLUE = 4)] = "BLUE"),
            (t[(t.ALPHA = 8)] = "ALPHA");
        })(Cl || (Cl = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.LOW = 2)] = "LOW"),
            (t[(t.MEDIUM = 4)] = "MEDIUM"),
            (t[(t.HIGH = 8)] = "HIGH");
        })(Nl || (Nl = {})),
        (function (t) {
          (t[(t.ELEMENT_ARRAY_BUFFER = 34963)] = "ELEMENT_ARRAY_BUFFER"),
            (t[(t.ARRAY_BUFFER = 34962)] = "ARRAY_BUFFER"),
            (t[(t.UNIFORM_BUFFER = 35345)] = "UNIFORM_BUFFER");
        })(Ll || (Ll = {}));
      var Ul = {
          createCanvas: function (t, e) {
            var n = document.createElement("canvas");
            return (n.width = t), (n.height = e), n;
          },
          getWebGLRenderingContext: function () {
            return WebGLRenderingContext;
          },
          getNavigator: function () {
            return navigator;
          },
          getBaseUrl: function () {
            var t;
            return null !== (t = document.baseURI) && void 0 !== t
              ? t
              : window.location.href;
          },
          fetch: function (t, e) {
            return fetch(t, e);
          },
        },
        Fl = /iPhone/i,
        Bl = /iPod/i,
        Gl = /iPad/i,
        kl = /\biOS-universal(?:.+)Mac\b/i,
        Hl = /\bAndroid(?:.+)Mobile\b/i,
        zl = /Android/i,
        Vl = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,
        Xl = /Silk/i,
        Wl = /Windows Phone/i,
        jl = /\bWindows(?:.+)ARM\b/i,
        Yl = /BlackBerry/i,
        ql = /BB10/i,
        Kl = /Opera Mini/i,
        Zl = /\b(CriOS|Chrome)(?:.+)Mobile/i,
        Ql = /Mobile(?:.+)Firefox\b/i,
        $l = function (t) {
          return (
            void 0 !== t &&
            "MacIntel" === t.platform &&
            "number" == typeof t.maxTouchPoints &&
            t.maxTouchPoints > 1 &&
            "undefined" == typeof MSStream
          );
        },
        Jl = (function (t) {
          var e = { userAgent: "", platform: "", maxTouchPoints: 0 };
          t || "undefined" == typeof navigator
            ? "string" == typeof t
              ? (e.userAgent = t)
              : t &&
                t.userAgent &&
                (e = {
                  userAgent: t.userAgent,
                  platform: t.platform,
                  maxTouchPoints: t.maxTouchPoints || 0,
                })
            : (e = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                maxTouchPoints: navigator.maxTouchPoints || 0,
              });
          var n = e.userAgent,
            r = n.split("[FBAN");
          void 0 !== r[1] && (n = r[0]),
            void 0 !== (r = n.split("Twitter"))[1] && (n = r[0]);
          var i = (function (t) {
              return function (e) {
                return e.test(t);
              };
            })(n),
            o = {
              apple: {
                phone: i(Fl) && !i(Wl),
                ipod: i(Bl),
                tablet: !i(Fl) && (i(Gl) || $l(e)) && !i(Wl),
                universal: i(kl),
                device: (i(Fl) || i(Bl) || i(Gl) || i(kl) || $l(e)) && !i(Wl),
              },
              amazon: {
                phone: i(Vl),
                tablet: !i(Vl) && i(Xl),
                device: i(Vl) || i(Xl),
              },
              android: {
                phone: (!i(Wl) && i(Vl)) || (!i(Wl) && i(Hl)),
                tablet: !i(Wl) && !i(Vl) && !i(Hl) && (i(Xl) || i(zl)),
                device:
                  (!i(Wl) && (i(Vl) || i(Xl) || i(Hl) || i(zl))) ||
                  i(/\bokhttp\b/i),
              },
              windows: { phone: i(Wl), tablet: i(jl), device: i(Wl) || i(jl) },
              other: {
                blackberry: i(Yl),
                blackberry10: i(ql),
                opera: i(Kl),
                firefox: i(Ql),
                chrome: i(Zl),
                device: i(Yl) || i(ql) || i(Kl) || i(Ql) || i(Zl),
              },
              any: !1,
              phone: !1,
              tablet: !1,
            };
          return (
            (o.any =
              o.apple.device ||
              o.android.device ||
              o.windows.device ||
              o.other.device),
            (o.phone = o.apple.phone || o.android.phone || o.windows.phone),
            (o.tablet = o.apple.tablet || o.android.tablet || o.windows.tablet),
            o
          );
        })(globalThis.navigator),
        tu = {
          ADAPTER: Ul,
          MIPMAP_TEXTURES: Al.POW2,
          ANISOTROPIC_LEVEL: 0,
          RESOLUTION: 1,
          FILTER_RESOLUTION: 1,
          FILTER_MULTISAMPLE: Nl.NONE,
          SPRITE_MAX_TEXTURES: (function (t) {
            var e,
              n = !0;
            (Jl.tablet || Jl.phone) &&
              (Jl.apple.device &&
                (e = navigator.userAgent.match(/OS (\d+)_(\d+)?/)) &&
                parseInt(e[1], 10) < 11 &&
                (n = !1),
              Jl.android.device &&
                (e = navigator.userAgent.match(/Android\s([0-9.]*)/)) &&
                parseInt(e[1], 10) < 7 &&
                (n = !1));
            return n ? 32 : 4;
          })(),
          SPRITE_BATCH_SIZE: 4096,
          RENDER_OPTIONS: {
            view: null,
            antialias: !1,
            autoDensity: !1,
            backgroundColor: 0,
            backgroundAlpha: 1,
            useContextAlpha: !0,
            clearBeforeRender: !0,
            preserveDrawingBuffer: !1,
            width: 800,
            height: 600,
            legacy: !1,
          },
          GC_MODE: Pl.AUTO,
          GC_MAX_IDLE: 3600,
          GC_MAX_CHECK_COUNT: 600,
          WRAP_MODE: Ml.CLAMP,
          SCALE_MODE: Sl.LINEAR,
          PRECISION_VERTEX: Il.HIGH,
          PRECISION_FRAGMENT: Jl.apple.device ? Il.HIGH : Il.MEDIUM,
          CAN_UPLOAD_SAME_BUFFER: !Jl.apple.device,
          CREATE_IMAGE_BITMAP: !1,
          ROUND_PIXELS: !1,
        },
        eu =
          "undefined" != typeof globalThis
            ? globalThis
            : "undefined" != typeof window
              ? window
              : "undefined" != typeof global
                ? global
                : "undefined" != typeof self
                  ? self
                  : {};
      function nu(t, e, n) {
        return (
          t(
            (n = {
              path: e,
              exports: {},
              require: function (t, e) {
                return (function () {
                  throw new Error(
                    "Dynamic requires are not currently supported by @rollup/plugin-commonjs",
                  );
                })(null == e && n.path);
              },
            }),
            n.exports,
          ),
          n.exports
        );
      }
      function ru(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e);
      }
      nu(function (t) {
        var e = Object.prototype.hasOwnProperty,
          n = "~";
        function r() {}
        function i(t, e, n) {
          (this.fn = t), (this.context = e), (this.once = n || !1);
        }
        function o(t, e, r, o, a) {
          if ("function" != typeof r)
            throw new TypeError("The listener must be a function");
          var s = new i(r, o || t, a),
            l = n ? n + e : e;
          return (
            t._events[l]
              ? t._events[l].fn
                ? (t._events[l] = [t._events[l], s])
                : t._events[l].push(s)
              : ((t._events[l] = s), t._eventsCount++),
            t
          );
        }
        function a(t, e) {
          0 == --t._eventsCount ? (t._events = new r()) : delete t._events[e];
        }
        function s() {
          (this._events = new r()), (this._eventsCount = 0);
        }
        Object.create &&
          ((r.prototype = Object.create(null)), new r().__proto__ || (n = !1)),
          (s.prototype.eventNames = function () {
            var t,
              r,
              i = [];
            if (0 === this._eventsCount) return i;
            for (r in (t = this._events))
              e.call(t, r) && i.push(n ? r.slice(1) : r);
            return Object.getOwnPropertySymbols
              ? i.concat(Object.getOwnPropertySymbols(t))
              : i;
          }),
          (s.prototype.listeners = function (t) {
            var e = n ? n + t : t,
              r = this._events[e];
            if (!r) return [];
            if (r.fn) return [r.fn];
            for (var i = 0, o = r.length, a = new Array(o); i < o; i++)
              a[i] = r[i].fn;
            return a;
          }),
          (s.prototype.listenerCount = function (t) {
            var e = n ? n + t : t,
              r = this._events[e];
            return r ? (r.fn ? 1 : r.length) : 0;
          }),
          (s.prototype.emit = function (t, e, r, i, o, a) {
            var s = arguments,
              l = n ? n + t : t;
            if (!this._events[l]) return !1;
            var u,
              h,
              c = this._events[l],
              d = arguments.length;
            if (c.fn) {
              switch ((c.once && this.removeListener(t, c.fn, void 0, !0), d)) {
                case 1:
                  return c.fn.call(c.context), !0;
                case 2:
                  return c.fn.call(c.context, e), !0;
                case 3:
                  return c.fn.call(c.context, e, r), !0;
                case 4:
                  return c.fn.call(c.context, e, r, i), !0;
                case 5:
                  return c.fn.call(c.context, e, r, i, o), !0;
                case 6:
                  return c.fn.call(c.context, e, r, i, o, a), !0;
              }
              for (h = 1, u = new Array(d - 1); h < d; h++) u[h - 1] = s[h];
              c.fn.apply(c.context, u);
            } else {
              var f,
                p = c.length;
              for (h = 0; h < p; h++)
                switch (
                  (c[h].once && this.removeListener(t, c[h].fn, void 0, !0), d)
                ) {
                  case 1:
                    c[h].fn.call(c[h].context);
                    break;
                  case 2:
                    c[h].fn.call(c[h].context, e);
                    break;
                  case 3:
                    c[h].fn.call(c[h].context, e, r);
                    break;
                  case 4:
                    c[h].fn.call(c[h].context, e, r, i);
                    break;
                  default:
                    if (!u)
                      for (f = 1, u = new Array(d - 1); f < d; f++)
                        u[f - 1] = s[f];
                    c[h].fn.apply(c[h].context, u);
                }
            }
            return !0;
          }),
          (s.prototype.on = function (t, e, n) {
            return o(this, t, e, n, !1);
          }),
          (s.prototype.once = function (t, e, n) {
            return o(this, t, e, n, !0);
          }),
          (s.prototype.removeListener = function (t, e, r, i) {
            var o = n ? n + t : t;
            if (!this._events[o]) return this;
            if (!e) return a(this, o), this;
            var s = this._events[o];
            if (s.fn)
              s.fn !== e ||
                (i && !s.once) ||
                (r && s.context !== r) ||
                a(this, o);
            else {
              for (var l = 0, u = [], h = s.length; l < h; l++)
                (s[l].fn !== e ||
                  (i && !s[l].once) ||
                  (r && s[l].context !== r)) &&
                  u.push(s[l]);
              u.length
                ? (this._events[o] = 1 === u.length ? u[0] : u)
                : a(this, o);
            }
            return this;
          }),
          (s.prototype.removeAllListeners = function (t) {
            var e;
            return (
              t
                ? ((e = n ? n + t : t), this._events[e] && a(this, e))
                : ((this._events = new r()), (this._eventsCount = 0)),
              this
            );
          }),
          (s.prototype.off = s.prototype.removeListener),
          (s.prototype.addListener = s.prototype.on),
          (s.prefixed = n),
          (s.EventEmitter = s),
          (t.exports = s);
      }),
        nu(function (t, e) {
          !(function (n) {
            var r = e && !e.nodeType && e,
              i = t && !t.nodeType && t,
              o = "object" == typeof eu && eu;
            (o.global !== o && o.window !== o && o.self !== o) || (n = o);
            var a,
              s,
              l = 2147483647,
              u = 36,
              h = 26,
              c = 38,
              d = 700,
              f = /^xn--/,
              p = /[^\x20-\x7E]/,
              m = /[\x2E\u3002\uFF0E\uFF61]/g,
              _ = {
                overflow: "Overflow: input needs wider integers to process",
                "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                "invalid-input": "Invalid input",
              },
              g = u - 1,
              v = Math.floor,
              y = String.fromCharCode;
            function E(t) {
              throw RangeError(_[t]);
            }
            function T(t, e) {
              for (var n = t.length, r = []; n--; ) r[n] = e(t[n]);
              return r;
            }
            function b(t, e) {
              var n = t.split("@"),
                r = "";
              return (
                n.length > 1 && ((r = n[0] + "@"), (t = n[1])),
                r + T((t = t.replace(m, ".")).split("."), e).join(".")
              );
            }
            function x(t) {
              for (var e, n, r = [], i = 0, o = t.length; i < o; )
                (e = t.charCodeAt(i++)) >= 55296 && e <= 56319 && i < o
                  ? 56320 == (64512 & (n = t.charCodeAt(i++)))
                    ? r.push(((1023 & e) << 10) + (1023 & n) + 65536)
                    : (r.push(e), i--)
                  : r.push(e);
              return r;
            }
            function S(t) {
              return T(t, function (t) {
                var e = "";
                return (
                  t > 65535 &&
                    ((e += y((((t -= 65536) >>> 10) & 1023) | 55296)),
                    (t = 56320 | (1023 & t))),
                  e + y(t)
                );
              }).join("");
            }
            function M(t, e) {
              return t + 22 + 75 * (t < 26) - ((0 != e) << 5);
            }
            function A(t, e, n) {
              var r = 0;
              for (
                t = n ? v(t / d) : t >> 1, t += v(t / e);
                t > (g * h) >> 1;
                r += u
              )
                t = v(t / g);
              return v(r + ((g + 1) * t) / (t + c));
            }
            function R(t) {
              var e,
                n,
                r,
                i,
                o,
                a,
                s,
                c,
                d,
                f,
                p,
                m = [],
                _ = t.length,
                g = 0,
                y = 128,
                T = 72;
              for ((n = t.lastIndexOf("-")) < 0 && (n = 0), r = 0; r < n; ++r)
                t.charCodeAt(r) >= 128 && E("not-basic"),
                  m.push(t.charCodeAt(r));
              for (i = n > 0 ? n + 1 : 0; i < _; ) {
                for (
                  o = g, a = 1, s = u;
                  i >= _ && E("invalid-input"),
                    ((c =
                      (p = t.charCodeAt(i++)) - 48 < 10
                        ? p - 22
                        : p - 65 < 26
                          ? p - 65
                          : p - 97 < 26
                            ? p - 97
                            : u) >= u ||
                      c > v((l - g) / a)) &&
                      E("overflow"),
                    (g += c * a),
                    !(c < (d = s <= T ? 1 : s >= T + h ? h : s - T));
                  s += u
                )
                  a > v(l / (f = u - d)) && E("overflow"), (a *= f);
                (T = A(g - o, (e = m.length + 1), 0 == o)),
                  v(g / e) > l - y && E("overflow"),
                  (y += v(g / e)),
                  (g %= e),
                  m.splice(g++, 0, y);
              }
              return S(m);
            }
            function w(t) {
              var e,
                n,
                r,
                i,
                o,
                a,
                s,
                c,
                d,
                f,
                p,
                m,
                _,
                g,
                T,
                b = [];
              for (
                m = (t = x(t)).length, e = 128, n = 0, o = 72, a = 0;
                a < m;
                ++a
              )
                (p = t[a]) < 128 && b.push(y(p));
              for (r = i = b.length, i && b.push("-"); r < m; ) {
                for (s = l, a = 0; a < m; ++a)
                  (p = t[a]) >= e && p < s && (s = p);
                for (
                  s - e > v((l - n) / (_ = r + 1)) && E("overflow"),
                    n += (s - e) * _,
                    e = s,
                    a = 0;
                  a < m;
                  ++a
                )
                  if (((p = t[a]) < e && ++n > l && E("overflow"), p == e)) {
                    for (
                      c = n, d = u;
                      !(c < (f = d <= o ? 1 : d >= o + h ? h : d - o));
                      d += u
                    )
                      (T = c - f),
                        (g = u - f),
                        b.push(y(M(f + (T % g), 0))),
                        (c = v(T / g));
                    b.push(y(M(c, 0))), (o = A(n, _, r == i)), (n = 0), ++r;
                  }
                ++n, ++e;
              }
              return b.join("");
            }
            if (
              ((a = {
                version: "1.3.2",
                ucs2: { decode: x, encode: S },
                decode: R,
                encode: w,
                toASCII: function (t) {
                  return b(t, function (t) {
                    return p.test(t) ? "xn--" + w(t) : t;
                  });
                },
                toUnicode: function (t) {
                  return b(t, function (t) {
                    return f.test(t) ? R(t.slice(4).toLowerCase()) : t;
                  });
                },
              }),
              r && i)
            )
              if (t.exports == r) i.exports = a;
              else for (s in a) a.hasOwnProperty(s) && (r[s] = a[s]);
            else n.punycode = a;
          })(eu);
        });
      var iu,
        ou,
        au,
        su,
        lu,
        uu,
        hu,
        cu,
        du,
        fu,
        pu,
        mu,
        _u,
        gu,
        vu,
        yu,
        Eu,
        Tu,
        bu,
        xu,
        Su = function (t, e, n, r) {
          (e = e || "&"), (n = n || "=");
          var i = {};
          if ("string" != typeof t || 0 === t.length) return i;
          var o = /\+/g;
          t = t.split(e);
          var a = 1e3;
          r && "number" == typeof r.maxKeys && (a = r.maxKeys);
          var s = t.length;
          a > 0 && s > a && (s = a);
          for (var l = 0; l < s; ++l) {
            var u,
              h,
              c,
              d,
              f = t[l].replace(o, "%20"),
              p = f.indexOf(n);
            p >= 0
              ? ((u = f.substr(0, p)), (h = f.substr(p + 1)))
              : ((u = f), (h = "")),
              (c = decodeURIComponent(u)),
              (d = decodeURIComponent(h)),
              ru(i, c)
                ? Array.isArray(i[c])
                  ? i[c].push(d)
                  : (i[c] = [i[c], d])
                : (i[c] = d);
          }
          return i;
        },
        Mu = function (t) {
          switch (typeof t) {
            case "string":
              return t;
            case "boolean":
              return t ? "true" : "false";
            case "number":
              return isFinite(t) ? t : "";
            default:
              return "";
          }
        },
        Au = function (t, e, n, r) {
          return (
            (e = e || "&"),
            (n = n || "="),
            null === t && (t = void 0),
            "object" == typeof t
              ? Object.keys(t)
                  .map(function (r) {
                    var i = encodeURIComponent(Mu(r)) + n;
                    return Array.isArray(t[r])
                      ? t[r]
                          .map(function (t) {
                            return i + encodeURIComponent(Mu(t));
                          })
                          .join(e)
                      : i + encodeURIComponent(Mu(t[r]));
                  })
                  .join(e)
              : r
                ? encodeURIComponent(Mu(r)) + n + encodeURIComponent(Mu(t))
                : ""
          );
        };
      nu(function (t, e) {
        (e.decode = e.parse = Su), (e.encode = e.stringify = Au);
      }),
        (function (t) {
          (t[(t.WEBGL_LEGACY = 0)] = "WEBGL_LEGACY"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.WEBGL2 = 2)] = "WEBGL2");
        })(iu || (iu = {})),
        (function (t) {
          (t[(t.UNKNOWN = 0)] = "UNKNOWN"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.CANVAS = 2)] = "CANVAS");
        })(ou || (ou = {})),
        (function (t) {
          (t[(t.COLOR = 16384)] = "COLOR"),
            (t[(t.DEPTH = 256)] = "DEPTH"),
            (t[(t.STENCIL = 1024)] = "STENCIL");
        })(au || (au = {})),
        (function (t) {
          (t[(t.NORMAL = 0)] = "NORMAL"),
            (t[(t.ADD = 1)] = "ADD"),
            (t[(t.MULTIPLY = 2)] = "MULTIPLY"),
            (t[(t.SCREEN = 3)] = "SCREEN"),
            (t[(t.OVERLAY = 4)] = "OVERLAY"),
            (t[(t.DARKEN = 5)] = "DARKEN"),
            (t[(t.LIGHTEN = 6)] = "LIGHTEN"),
            (t[(t.COLOR_DODGE = 7)] = "COLOR_DODGE"),
            (t[(t.COLOR_BURN = 8)] = "COLOR_BURN"),
            (t[(t.HARD_LIGHT = 9)] = "HARD_LIGHT"),
            (t[(t.SOFT_LIGHT = 10)] = "SOFT_LIGHT"),
            (t[(t.DIFFERENCE = 11)] = "DIFFERENCE"),
            (t[(t.EXCLUSION = 12)] = "EXCLUSION"),
            (t[(t.HUE = 13)] = "HUE"),
            (t[(t.SATURATION = 14)] = "SATURATION"),
            (t[(t.COLOR = 15)] = "COLOR"),
            (t[(t.LUMINOSITY = 16)] = "LUMINOSITY"),
            (t[(t.NORMAL_NPM = 17)] = "NORMAL_NPM"),
            (t[(t.ADD_NPM = 18)] = "ADD_NPM"),
            (t[(t.SCREEN_NPM = 19)] = "SCREEN_NPM"),
            (t[(t.NONE = 20)] = "NONE"),
            (t[(t.SRC_OVER = 0)] = "SRC_OVER"),
            (t[(t.SRC_IN = 21)] = "SRC_IN"),
            (t[(t.SRC_OUT = 22)] = "SRC_OUT"),
            (t[(t.SRC_ATOP = 23)] = "SRC_ATOP"),
            (t[(t.DST_OVER = 24)] = "DST_OVER"),
            (t[(t.DST_IN = 25)] = "DST_IN"),
            (t[(t.DST_OUT = 26)] = "DST_OUT"),
            (t[(t.DST_ATOP = 27)] = "DST_ATOP"),
            (t[(t.ERASE = 26)] = "ERASE"),
            (t[(t.SUBTRACT = 28)] = "SUBTRACT"),
            (t[(t.XOR = 29)] = "XOR");
        })(su || (su = {})),
        (function (t) {
          (t[(t.POINTS = 0)] = "POINTS"),
            (t[(t.LINES = 1)] = "LINES"),
            (t[(t.LINE_LOOP = 2)] = "LINE_LOOP"),
            (t[(t.LINE_STRIP = 3)] = "LINE_STRIP"),
            (t[(t.TRIANGLES = 4)] = "TRIANGLES"),
            (t[(t.TRIANGLE_STRIP = 5)] = "TRIANGLE_STRIP"),
            (t[(t.TRIANGLE_FAN = 6)] = "TRIANGLE_FAN");
        })(lu || (lu = {})),
        (function (t) {
          (t[(t.RGBA = 6408)] = "RGBA"),
            (t[(t.RGB = 6407)] = "RGB"),
            (t[(t.RG = 33319)] = "RG"),
            (t[(t.RED = 6403)] = "RED"),
            (t[(t.RGBA_INTEGER = 36249)] = "RGBA_INTEGER"),
            (t[(t.RGB_INTEGER = 36248)] = "RGB_INTEGER"),
            (t[(t.RG_INTEGER = 33320)] = "RG_INTEGER"),
            (t[(t.RED_INTEGER = 36244)] = "RED_INTEGER"),
            (t[(t.ALPHA = 6406)] = "ALPHA"),
            (t[(t.LUMINANCE = 6409)] = "LUMINANCE"),
            (t[(t.LUMINANCE_ALPHA = 6410)] = "LUMINANCE_ALPHA"),
            (t[(t.DEPTH_COMPONENT = 6402)] = "DEPTH_COMPONENT"),
            (t[(t.DEPTH_STENCIL = 34041)] = "DEPTH_STENCIL");
        })(uu || (uu = {})),
        (function (t) {
          (t[(t.TEXTURE_2D = 3553)] = "TEXTURE_2D"),
            (t[(t.TEXTURE_CUBE_MAP = 34067)] = "TEXTURE_CUBE_MAP"),
            (t[(t.TEXTURE_2D_ARRAY = 35866)] = "TEXTURE_2D_ARRAY"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069)] =
              "TEXTURE_CUBE_MAP_POSITIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Z"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Z");
        })(hu || (hu = {})),
        (function (t) {
          (t[(t.UNSIGNED_BYTE = 5121)] = "UNSIGNED_BYTE"),
            (t[(t.UNSIGNED_SHORT = 5123)] = "UNSIGNED_SHORT"),
            (t[(t.UNSIGNED_SHORT_5_6_5 = 33635)] = "UNSIGNED_SHORT_5_6_5"),
            (t[(t.UNSIGNED_SHORT_4_4_4_4 = 32819)] = "UNSIGNED_SHORT_4_4_4_4"),
            (t[(t.UNSIGNED_SHORT_5_5_5_1 = 32820)] = "UNSIGNED_SHORT_5_5_5_1"),
            (t[(t.UNSIGNED_INT = 5125)] = "UNSIGNED_INT"),
            (t[(t.UNSIGNED_INT_10F_11F_11F_REV = 35899)] =
              "UNSIGNED_INT_10F_11F_11F_REV"),
            (t[(t.UNSIGNED_INT_2_10_10_10_REV = 33640)] =
              "UNSIGNED_INT_2_10_10_10_REV"),
            (t[(t.UNSIGNED_INT_24_8 = 34042)] = "UNSIGNED_INT_24_8"),
            (t[(t.UNSIGNED_INT_5_9_9_9_REV = 35902)] =
              "UNSIGNED_INT_5_9_9_9_REV"),
            (t[(t.BYTE = 5120)] = "BYTE"),
            (t[(t.SHORT = 5122)] = "SHORT"),
            (t[(t.INT = 5124)] = "INT"),
            (t[(t.FLOAT = 5126)] = "FLOAT"),
            (t[(t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269)] =
              "FLOAT_32_UNSIGNED_INT_24_8_REV"),
            (t[(t.HALF_FLOAT = 36193)] = "HALF_FLOAT");
        })(cu || (cu = {})),
        (function (t) {
          (t[(t.FLOAT = 0)] = "FLOAT"),
            (t[(t.INT = 1)] = "INT"),
            (t[(t.UINT = 2)] = "UINT");
        })(du || (du = {})),
        (function (t) {
          (t[(t.NEAREST = 0)] = "NEAREST"), (t[(t.LINEAR = 1)] = "LINEAR");
        })(fu || (fu = {})),
        (function (t) {
          (t[(t.CLAMP = 33071)] = "CLAMP"),
            (t[(t.REPEAT = 10497)] = "REPEAT"),
            (t[(t.MIRRORED_REPEAT = 33648)] = "MIRRORED_REPEAT");
        })(pu || (pu = {})),
        (function (t) {
          (t[(t.OFF = 0)] = "OFF"),
            (t[(t.POW2 = 1)] = "POW2"),
            (t[(t.ON = 2)] = "ON"),
            (t[(t.ON_MANUAL = 3)] = "ON_MANUAL");
        })(mu || (mu = {})),
        (function (t) {
          (t[(t.NPM = 0)] = "NPM"),
            (t[(t.UNPACK = 1)] = "UNPACK"),
            (t[(t.PMA = 2)] = "PMA"),
            (t[(t.NO_PREMULTIPLIED_ALPHA = 0)] = "NO_PREMULTIPLIED_ALPHA"),
            (t[(t.PREMULTIPLY_ON_UPLOAD = 1)] = "PREMULTIPLY_ON_UPLOAD"),
            (t[(t.PREMULTIPLY_ALPHA = 2)] = "PREMULTIPLY_ALPHA"),
            (t[(t.PREMULTIPLIED_ALPHA = 2)] = "PREMULTIPLIED_ALPHA");
        })(_u || (_u = {})),
        (function (t) {
          (t[(t.NO = 0)] = "NO"),
            (t[(t.YES = 1)] = "YES"),
            (t[(t.AUTO = 2)] = "AUTO"),
            (t[(t.BLEND = 0)] = "BLEND"),
            (t[(t.CLEAR = 1)] = "CLEAR"),
            (t[(t.BLIT = 2)] = "BLIT");
        })(gu || (gu = {})),
        (function (t) {
          (t[(t.AUTO = 0)] = "AUTO"), (t[(t.MANUAL = 1)] = "MANUAL");
        })(vu || (vu = {})),
        (function (t) {
          (t.LOW = "lowp"), (t.MEDIUM = "mediump"), (t.HIGH = "highp");
        })(yu || (yu = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.SCISSOR = 1)] = "SCISSOR"),
            (t[(t.STENCIL = 2)] = "STENCIL"),
            (t[(t.SPRITE = 3)] = "SPRITE"),
            (t[(t.COLOR = 4)] = "COLOR");
        })(Eu || (Eu = {})),
        (function (t) {
          (t[(t.RED = 1)] = "RED"),
            (t[(t.GREEN = 2)] = "GREEN"),
            (t[(t.BLUE = 4)] = "BLUE"),
            (t[(t.ALPHA = 8)] = "ALPHA");
        })(Tu || (Tu = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.LOW = 2)] = "LOW"),
            (t[(t.MEDIUM = 4)] = "MEDIUM"),
            (t[(t.HIGH = 8)] = "HIGH");
        })(bu || (bu = {})),
        (function (t) {
          (t[(t.ELEMENT_ARRAY_BUFFER = 34963)] = "ELEMENT_ARRAY_BUFFER"),
            (t[(t.ARRAY_BUFFER = 34962)] = "ARRAY_BUFFER"),
            (t[(t.UNIFORM_BUFFER = 35345)] = "UNIFORM_BUFFER");
        })(xu || (xu = {})),
        (tu.RETINA_PREFIX = /@([0-9\.]+)x/),
        (tu.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1),
        (function () {
          for (var t = [], e = [], n = 0; n < 32; n++) (t[n] = n), (e[n] = n);
          (t[su.NORMAL_NPM] = su.NORMAL),
            (t[su.ADD_NPM] = su.ADD),
            (t[su.SCREEN_NPM] = su.SCREEN),
            (e[su.NORMAL] = su.NORMAL_NPM),
            (e[su.ADD] = su.ADD_NPM),
            (e[su.SCREEN] = su.SCREEN_NPM);
          var r = [];
          r.push(e), r.push(t);
        })();
      var Ru = {};
      !(function () {
        function t(t, e, n) {
          (this.canvas = tu.ADAPTER.createCanvas()),
            (this.context = this.canvas.getContext("2d")),
            (this.resolution = n || tu.RESOLUTION),
            this.resize(t, e);
        }
        (t.prototype.clear = function () {
          this.context.setTransform(1, 0, 0, 1, 0, 0),
            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
        }),
          (t.prototype.resize = function (t, e) {
            (this.canvas.width = Math.round(t * this.resolution)),
              (this.canvas.height = Math.round(e * this.resolution));
          }),
          (t.prototype.destroy = function () {
            (this.context = null), (this.canvas = null);
          }),
          Object.defineProperty(t.prototype, "width", {
            get: function () {
              return this.canvas.width;
            },
            set: function (t) {
              this.canvas.width = Math.round(t);
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(t.prototype, "height", {
            get: function () {
              return this.canvas.height;
            },
            set: function (t) {
              this.canvas.height = Math.round(t);
            },
            enumerable: !1,
            configurable: !0,
          });
      })();
      var wu = (function () {
        function t(e) {
          var n = this;
          (this.stage = new Qe()),
            (e = Object.assign({ forceCanvas: !1 }, e)),
            (this.renderer = (function (t) {
              return li.create(t);
            })(e)),
            t._plugins.forEach(function (t) {
              t.init.call(n, e);
            });
        }
        return (
          (t.registerPlugin = function (t) {
            !(function (t, e, n) {
              if ((void 0 === n && (n = 3), !Ru[e])) {
                var r = new Error().stack;
                void 0 === r
                  ? console.warn(
                      "PixiJS Deprecation Warning: ",
                      e + "\nDeprecated since v" + t,
                    )
                  : ((r = r.split("\n").splice(n).join("\n")),
                    console.groupCollapsed
                      ? (console.groupCollapsed(
                          "%cPixiJS Deprecation Warning: %c%s",
                          "color:#614108;background:#fffbe6",
                          "font-weight:normal;color:#614108;background:#fffbe6",
                          e + "\nDeprecated since v" + t,
                        ),
                        console.warn(r),
                        console.groupEnd())
                      : (console.warn(
                          "PixiJS Deprecation Warning: ",
                          e + "\nDeprecated since v" + t,
                        ),
                        console.warn(r))),
                  (Ru[e] = !0);
              }
            })(
              "6.5.0",
              "Application.registerPlugin() is deprecated, use extensions.add()",
            ),
              nn.add({ type: $e.Application, ref: t });
          }),
          (t.prototype.render = function () {
            this.renderer.render(this.stage);
          }),
          Object.defineProperty(t.prototype, "view", {
            get: function () {
              return this.renderer.view;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(t.prototype, "screen", {
            get: function () {
              return this.renderer.screen;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (t.prototype.destroy = function (e, n) {
            var r = this,
              i = t._plugins.slice(0);
            i.reverse(),
              i.forEach(function (t) {
                t.destroy.call(r);
              }),
              this.stage.destroy(n),
              (this.stage = null),
              this.renderer.destroy(e),
              (this.renderer = null);
          }),
          (t._plugins = []),
          t
        );
      })();
      nn.handleByList($e.Application, wu._plugins), nn.add(Dl);
      var Pu = function (t, e) {
        return (
          (Pu =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
            }),
          Pu(t, e)
        );
      };
      function Iu(t, e) {
        function n() {
          this.constructor = t;
        }
        Pu(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n()));
      }
      var Ou = (function (t) {
          function e(e, n, r, i) {
            void 0 === e && (e = 100),
              void 0 === n && (n = 100),
              void 0 === r && (r = 10),
              void 0 === i && (i = 10);
            var o = t.call(this) || this;
            return (
              (o.segWidth = r),
              (o.segHeight = i),
              (o.width = e),
              (o.height = n),
              o.build(),
              o
            );
          }
          return (
            Iu(e, t),
            (e.prototype.build = function () {
              for (
                var t = this.segWidth * this.segHeight,
                  e = [],
                  n = [],
                  r = [],
                  i = this.segWidth - 1,
                  o = this.segHeight - 1,
                  a = this.width / i,
                  s = this.height / o,
                  l = 0;
                l < t;
                l++
              ) {
                var u = l % this.segWidth,
                  h = (l / this.segWidth) | 0;
                e.push(u * a, h * s), n.push(u / i, h / o);
              }
              var c = i * o;
              for (l = 0; l < c; l++) {
                var d = l % i,
                  f = (l / i) | 0,
                  p = f * this.segWidth + d,
                  m = f * this.segWidth + d + 1,
                  _ = (f + 1) * this.segWidth + d,
                  g = (f + 1) * this.segWidth + d + 1;
                r.push(p, m, _, m, g, _);
              }
              (this.buffers[0].data = new Float32Array(e)),
                (this.buffers[1].data = new Float32Array(n)),
                (this.indexBuffer.data = new Uint16Array(r)),
                this.buffers[0].update(),
                this.buffers[1].update(),
                this.indexBuffer.update();
            }),
            e
          );
        })(Ja),
        Cu = (function (t) {
          function e(e, n, r) {
            void 0 === e && (e = 200), void 0 === r && (r = 0);
            var i =
              t.call(
                this,
                new Float32Array(4 * n.length),
                new Float32Array(4 * n.length),
                new Uint16Array(6 * (n.length - 1)),
              ) || this;
            return (
              (i.points = n), (i._width = e), (i.textureScale = r), i.build(), i
            );
          }
          return (
            Iu(e, t),
            Object.defineProperty(e.prototype, "width", {
              get: function () {
                return this._width;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.build = function () {
              var t = this.points;
              if (t) {
                var e = this.getBuffer("aVertexPosition"),
                  n = this.getBuffer("aTextureCoord"),
                  r = this.getIndex();
                if (!(t.length < 1)) {
                  e.data.length / 4 !== t.length &&
                    ((e.data = new Float32Array(4 * t.length)),
                    (n.data = new Float32Array(4 * t.length)),
                    (r.data = new Uint16Array(6 * (t.length - 1))));
                  var i = n.data,
                    o = r.data;
                  (i[0] = 0), (i[1] = 0), (i[2] = 0), (i[3] = 1);
                  for (
                    var a = 0,
                      s = t[0],
                      l = this._width * this.textureScale,
                      u = t.length,
                      h = 0;
                    h < u;
                    h++
                  ) {
                    var c = 4 * h;
                    if (this.textureScale > 0) {
                      var d = s.x - t[h].x,
                        f = s.y - t[h].y,
                        p = Math.sqrt(d * d + f * f);
                      (s = t[h]), (a += p / l);
                    } else a = h / (u - 1);
                    (i[c] = a), (i[c + 1] = 0), (i[c + 2] = a), (i[c + 3] = 1);
                  }
                  var m = 0;
                  for (h = 0; h < u - 1; h++)
                    (c = 2 * h),
                      (o[m++] = c),
                      (o[m++] = c + 1),
                      (o[m++] = c + 2),
                      (o[m++] = c + 2),
                      (o[m++] = c + 1),
                      (o[m++] = c + 3);
                  n.update(), r.update(), this.updateVertices();
                }
              }
            }),
            (e.prototype.updateVertices = function () {
              var t = this.points;
              if (!(t.length < 1)) {
                for (
                  var e,
                    n = t[0],
                    r = 0,
                    i = 0,
                    o = this.buffers[0].data,
                    a = t.length,
                    s = 0;
                  s < a;
                  s++
                ) {
                  var l = t[s],
                    u = 4 * s;
                  (i = -((e = s < t.length - 1 ? t[s + 1] : l).x - n.x)),
                    (r = e.y - n.y);
                  var h = Math.sqrt(r * r + i * i),
                    c =
                      this.textureScale > 0
                        ? (this.textureScale * this._width) / 2
                        : this._width / 2;
                  (r /= h),
                    (i /= h),
                    (r *= c),
                    (i *= c),
                    (o[u] = l.x + r),
                    (o[u + 1] = l.y + i),
                    (o[u + 2] = l.x - r),
                    (o[u + 3] = l.y - i),
                    (n = l);
                }
                this.buffers[0].update();
              }
            }),
            (e.prototype.update = function () {
              this.textureScale > 0 ? this.build() : this.updateVertices();
            }),
            e
          );
        })(Ja),
        Nu =
          ((function (t) {
            function e(e, n, r) {
              void 0 === r && (r = 0);
              var i = this,
                o = new Cu(e.height, n, r),
                a = new $a(e);
              return (
                r > 0 && (e.baseTexture.wrapMode = $.REPEAT),
                ((i = t.call(this, o, a) || this).autoUpdate = !0),
                i
              );
            }
            Iu(e, t),
              (e.prototype._render = function (e) {
                var n = this.geometry;
                (this.autoUpdate || n._width !== this.shader.texture.height) &&
                  ((n._width = this.shader.texture.height), n.update()),
                  t.prototype._render.call(this, e);
              });
          })(Qa),
          (function (t) {
            function e(e, n, r) {
              var i = this,
                o = new Ou(e.width, e.height, n, r),
                a = new $a(Nn.WHITE);
              return (
                ((i = t.call(this, o, a) || this).texture = e),
                (i.autoResize = !0),
                i
              );
            }
            return (
              Iu(e, t),
              (e.prototype.textureUpdated = function () {
                this._textureID = this.shader.texture._updateID;
                var t = this.geometry,
                  e = this.shader.texture,
                  n = e.width,
                  r = e.height;
                !this.autoResize ||
                  (t.width === n && t.height === r) ||
                  ((t.width = this.shader.texture.width),
                  (t.height = this.shader.texture.height),
                  t.build());
              }),
              Object.defineProperty(e.prototype, "texture", {
                get: function () {
                  return this.shader.texture;
                },
                set: function (t) {
                  this.shader.texture !== t &&
                    ((this.shader.texture = t),
                    (this._textureID = -1),
                    t.baseTexture.valid
                      ? this.textureUpdated()
                      : t.once("update", this.textureUpdated, this));
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype._render = function (e) {
                this._textureID !== this.shader.texture._updateID &&
                  this.textureUpdated(),
                  t.prototype._render.call(this, e);
              }),
              (e.prototype.destroy = function (e) {
                this.shader.texture.off("update", this.textureUpdated, this),
                  t.prototype.destroy.call(this, e);
              }),
              e
            );
          })(Qa)),
        Lu =
          ((function (t) {
            function e(e, n, r, i, o) {
              void 0 === e && (e = Nn.EMPTY);
              var a = this,
                s = new Ja(n, r, i);
              s.getBuffer("aVertexPosition").static = !1;
              var l = new $a(e);
              return (
                ((a = t.call(this, s, l, null, o) || this).autoUpdate = !0), a
              );
            }
            Iu(e, t),
              Object.defineProperty(e.prototype, "vertices", {
                get: function () {
                  return this.geometry.getBuffer("aVertexPosition").data;
                },
                set: function (t) {
                  this.geometry.getBuffer("aVertexPosition").data = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype._render = function (e) {
                this.autoUpdate &&
                  this.geometry.getBuffer("aVertexPosition").update(),
                  t.prototype._render.call(this, e);
              });
          })(Qa),
          (function (t) {
            function e(e, n, r, i, o) {
              void 0 === n && (n = 10),
                void 0 === r && (r = 10),
                void 0 === i && (i = 10),
                void 0 === o && (o = 10);
              var a = t.call(this, Nn.WHITE, 4, 4) || this;
              return (
                (a._origWidth = e.orig.width),
                (a._origHeight = e.orig.height),
                (a._width = a._origWidth),
                (a._height = a._origHeight),
                (a._leftWidth = n),
                (a._rightWidth = i),
                (a._topHeight = r),
                (a._bottomHeight = o),
                (a.texture = e),
                a
              );
            }
            Iu(e, t),
              (e.prototype.textureUpdated = function () {
                (this._textureID = this.shader.texture._updateID),
                  this._refresh();
              }),
              Object.defineProperty(e.prototype, "vertices", {
                get: function () {
                  return this.geometry.getBuffer("aVertexPosition").data;
                },
                set: function (t) {
                  this.geometry.getBuffer("aVertexPosition").data = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype.updateHorizontalVertices = function () {
                var t = this.vertices,
                  e = this._getMinScale();
                (t[9] = t[11] = t[13] = t[15] = this._topHeight * e),
                  (t[17] =
                    t[19] =
                    t[21] =
                    t[23] =
                      this._height - this._bottomHeight * e),
                  (t[25] = t[27] = t[29] = t[31] = this._height);
              }),
              (e.prototype.updateVerticalVertices = function () {
                var t = this.vertices,
                  e = this._getMinScale();
                (t[2] = t[10] = t[18] = t[26] = this._leftWidth * e),
                  (t[4] =
                    t[12] =
                    t[20] =
                    t[28] =
                      this._width - this._rightWidth * e),
                  (t[6] = t[14] = t[22] = t[30] = this._width);
              }),
              (e.prototype._getMinScale = function () {
                var t = this._leftWidth + this._rightWidth,
                  e = this._width > t ? 1 : this._width / t,
                  n = this._topHeight + this._bottomHeight,
                  r = this._height > n ? 1 : this._height / n;
                return Math.min(e, r);
              }),
              Object.defineProperty(e.prototype, "width", {
                get: function () {
                  return this._width;
                },
                set: function (t) {
                  (this._width = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "height", {
                get: function () {
                  return this._height;
                },
                set: function (t) {
                  (this._height = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "leftWidth", {
                get: function () {
                  return this._leftWidth;
                },
                set: function (t) {
                  (this._leftWidth = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "rightWidth", {
                get: function () {
                  return this._rightWidth;
                },
                set: function (t) {
                  (this._rightWidth = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "topHeight", {
                get: function () {
                  return this._topHeight;
                },
                set: function (t) {
                  (this._topHeight = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "bottomHeight", {
                get: function () {
                  return this._bottomHeight;
                },
                set: function (t) {
                  (this._bottomHeight = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype._refresh = function () {
                var t = this.texture,
                  e = this.geometry.buffers[1].data;
                (this._origWidth = t.orig.width),
                  (this._origHeight = t.orig.height);
                var n = 1 / this._origWidth,
                  r = 1 / this._origHeight;
                (e[0] = e[8] = e[16] = e[24] = 0),
                  (e[1] = e[3] = e[5] = e[7] = 0),
                  (e[6] = e[14] = e[22] = e[30] = 1),
                  (e[25] = e[27] = e[29] = e[31] = 1),
                  (e[2] = e[10] = e[18] = e[26] = n * this._leftWidth),
                  (e[4] = e[12] = e[20] = e[28] = 1 - n * this._rightWidth),
                  (e[9] = e[11] = e[13] = e[15] = r * this._topHeight),
                  (e[17] = e[19] = e[21] = e[23] = 1 - r * this._bottomHeight),
                  this.updateHorizontalVertices(),
                  this.updateVerticalVertices(),
                  this.geometry.buffers[0].update(),
                  this.geometry.buffers[1].update();
              });
          })(Nu),
          function (t, e) {
            return (
              (Lu =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
                }),
              Lu(t, e)
            );
          });
      !(function (t) {
        function e(e, n) {
          void 0 === n && (n = !0);
          var r =
            t.call(this, e[0] instanceof Nn ? e[0] : e[0].texture) || this;
          return (
            (r._textures = null),
            (r._durations = null),
            (r._autoUpdate = n),
            (r._isConnectedToTicker = !1),
            (r.animationSpeed = 1),
            (r.loop = !0),
            (r.updateAnchor = !1),
            (r.onComplete = null),
            (r.onFrameChange = null),
            (r.onLoop = null),
            (r._currentTime = 0),
            (r._playing = !1),
            (r._previousFrame = null),
            (r.textures = e),
            r
          );
        }
        (function (t, e) {
          function n() {
            this.constructor = t;
          }
          Lu(t, e),
            (t.prototype =
              null === e
                ? Object.create(e)
                : ((n.prototype = e.prototype), new n()));
        })(e, t),
          (e.prototype.Parar = function () {
            this._playing &&
              ((this._playing = !1),
              this._autoUpdate &&
                this._isConnectedToTicker &&
                (an.shared.remove(this.update, this),
                (this._isConnectedToTicker = !1)));
          }),
          (e.prototype.play = function () {
            this._playing ||
              ((this._playing = !0),
              this._autoUpdate &&
                !this._isConnectedToTicker &&
                (an.shared.add(this.update, this, tn.HIGH),
                (this._isConnectedToTicker = !0)));
          }),
          (e.prototype.gotoAndStop = function (t) {
            this.Parar();
            var e = this.currentFrame;
            (this._currentTime = t),
              e !== this.currentFrame && this.updateTexture();
          }),
          (e.prototype.gotoAndPlay = function (t) {
            var e = this.currentFrame;
            (this._currentTime = t),
              e !== this.currentFrame && this.updateTexture(),
              this.play();
          }),
          (e.prototype.update = function (t) {
            if (this._playing) {
              var e = this.animationSpeed * t,
                n = this.currentFrame;
              if (null !== this._durations) {
                var r =
                  (this._currentTime % 1) * this._durations[this.currentFrame];
                for (r += (e / 60) * 1e3; r < 0; )
                  this._currentTime--,
                    (r += this._durations[this.currentFrame]);
                var i = Math.sign(this.animationSpeed * t);
                for (
                  this._currentTime = Math.floor(this._currentTime);
                  r >= this._durations[this.currentFrame];

                )
                  (r -= this._durations[this.currentFrame] * i),
                    (this._currentTime += i);
                this._currentTime += r / this._durations[this.currentFrame];
              } else this._currentTime += e;
              this._currentTime < 0 && !this.loop
                ? (this.gotoAndStop(0), this.onComplete && this.onComplete())
                : this._currentTime >= this._textures.length && !this.loop
                  ? (this.gotoAndStop(this._textures.length - 1),
                    this.onComplete && this.onComplete())
                  : n !== this.currentFrame &&
                    (this.loop &&
                      this.onLoop &&
                      ((this.animationSpeed > 0 && this.currentFrame < n) ||
                        (this.animationSpeed < 0 && this.currentFrame > n)) &&
                      this.onLoop(),
                    this.updateTexture());
            }
          }),
          (e.prototype.updateTexture = function () {
            var t = this.currentFrame;
            this._previousFrame !== t &&
              ((this._previousFrame = t),
              (this._texture = this._textures[t]),
              (this._textureID = -1),
              (this._textureTrimmedID = -1),
              (this._cachedTint = 16777215),
              (this.uvs = this._texture._uvs.uvsFloat32),
              this.updateAnchor &&
                this._anchor.copyFrom(this._texture.defaultAnchor),
              this.onFrameChange && this.onFrameChange(this.currentFrame));
          }),
          (e.prototype.destroy = function (e) {
            this.Parar(),
              t.prototype.destroy.call(this, e),
              (this.onComplete = null),
              (this.onFrameChange = null),
              (this.onLoop = null);
          }),
          (e.fromFrames = function (t) {
            for (var n = [], r = 0; r < t.length; ++r) n.push(Nn.from(t[r]));
            return new e(n);
          }),
          (e.fromImages = function (t) {
            for (var n = [], r = 0; r < t.length; ++r) n.push(Nn.from(t[r]));
            return new e(n);
          }),
          Object.defineProperty(e.prototype, "totalFrames", {
            get: function () {
              return this._textures.length;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "textures", {
            get: function () {
              return this._textures;
            },
            set: function (t) {
              if (t[0] instanceof Nn)
                (this._textures = t), (this._durations = null);
              else {
                (this._textures = []), (this._durations = []);
                for (var e = 0; e < t.length; e++)
                  this._textures.push(t[e].texture),
                    this._durations.push(t[e].time);
              }
              (this._previousFrame = null),
                this.gotoAndStop(0),
                this.updateTexture();
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "currentFrame", {
            get: function () {
              var t = Math.floor(this._currentTime) % this._textures.length;
              return t < 0 && (t += this._textures.length), t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "playing", {
            get: function () {
              return this._playing;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "autoUpdate", {
            get: function () {
              return this._autoUpdate;
            },
            set: function (t) {
              t !== this._autoUpdate &&
                ((this._autoUpdate = t),
                !this._autoUpdate && this._isConnectedToTicker
                  ? (an.shared.remove(this.update, this),
                    (this._isConnectedToTicker = !1))
                  : this._autoUpdate &&
                    !this._isConnectedToTicker &&
                    this._playing &&
                    (an.shared.add(this.update, this),
                    (this._isConnectedToTicker = !0)));
            },
            enumerable: !1,
            configurable: !0,
          });
      })(fa),
        nn.add(Ai, Ui, Li, Lo, Fa, yi, Wa, ps, fo, Ro, wo, Ga, sn, Ji);
      var Du = function (t) {
          return (t = Number(t)), (isNaN(t) || void 0 === t) && (t = 0), t;
        },
        Uu = function (t) {
          return (t * Math.PI) / 180;
        },
        Fu = function (t) {
          return (180 * t) / Math.PI;
        },
        Bu = function (t) {
          return Math.round(10 * t) / 10;
        };
      function Gu(t) {
        return (
          (Gu =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (t) {
                  return typeof t;
                }
              : function (t) {
                  return t &&
                    "function" == typeof Symbol &&
                    t.constructor === Symbol &&
                    t !== Symbol.prototype
                    ? "symbol"
                    : typeof t;
                }),
          Gu(t)
        );
      }
      function ku(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            "value" in r && (r.writable = !0),
            Object.defineProperty(
              t,
              (void 0,
              (i = (function (t, e) {
                if ("object" !== Gu(t) || null === t) return t;
                var n = t[Symbol.toPrimitive];
                if (void 0 !== n) {
                  var r = n.call(t, "string");
                  if ("object" !== Gu(r)) return r;
                  throw new TypeError(
                    "@@toPrimitive must return a primitive value.",
                  );
                }
                return String(t);
              })(r.key)),
              "symbol" === Gu(i) ? i : String(i)),
              r,
            );
        }
        var i;
      }
      function Hu(t, e) {
        return (
          (Hu = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (t, e) {
                return (t.__proto__ = e), t;
              }),
          Hu(t, e)
        );
      }
      function zu(t) {
        if (void 0 === t)
          throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called",
          );
        return t;
      }
      function Vu(t) {
        return (
          (Vu = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (t) {
                return t.__proto__ || Object.getPrototypeOf(t);
              }),
          Vu(t)
        );
      }
      var Xu = function (t) {
          var e = Math.abs(t - Math.PI);
          e >= Math.PI && (e -= 2 * Math.PI);
          var n = Bu(Fu(Math.abs(e)));
          return "".concat(n, "°");
        },
        Wu = (function (e) {
          !(function (t, e) {
            if ("function" != typeof e && null !== e)
              throw new TypeError(
                "Super expression must either be null or a function",
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: { value: t, writable: !0, configurable: !0 },
            })),
              Object.defineProperty(t, "prototype", { writable: !1 }),
              e && Hu(t, e);
          })(s, e);
          var n,
            r,
            i,
            o,
            a =
              ((i = s),
              (o = (function () {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                  return !1;
                if (Reflect.construct.sham) return !1;
                if ("function" == typeof Proxy) return !0;
                try {
                  return (
                    Boolean.prototype.valueOf.call(
                      Reflect.construct(Boolean, [], function () {}),
                    ),
                    !0
                  );
                } catch (t) {
                  return !1;
                }
              })()),
              function () {
                var t,
                  e = Vu(i);
                if (o) {
                  var n = Vu(this).constructor;
                  t = Reflect.construct(e, arguments, n);
                } else t = e.apply(this, arguments);
                return (function (t, e) {
                  if (e && ("object" === Gu(e) || "function" == typeof e))
                    return e;
                  if (void 0 !== e)
                    throw new TypeError(
                      "Derived constructors may only return object or undefined",
                    );
                  return zu(t);
                })(this, t);
              });
          function s(t) {
            var e;
            return (
              (function (t, e) {
                if (!(t instanceof e))
                  throw new TypeError("Cannot call a class as a function");
              })(this, s),
              ((e = a.call(this, t)).state = {
                isHoveringOnEarth: !1,
                isHoveringOnMoon: !1,
              }),
              (e.resources = {}),
              (e.orbitCenter = new se(740, 460)),
              (e.start = e.start.bind(zu(e))),
              (e.Parar = e.Parar.bind(zu(e))),
              (e.animacao = e.animacao.bind(zu(e))),
              (e.onDragStart = e.onDragStart.bind(zu(e))),
              (e.onDragEnd = e.onDragEnd.bind(zu(e))),
              (e.onEarthMove = e.onEarthMove.bind(zu(e))),
              (e.LuaMovimento = e.LuaMovimento.bind(zu(e))),
              e
            );
          }
          return (
            (n = s),
            (r = [
              {
                key: "render",
                value: function () {
                  var e = this;
                  return t.createElement("div", {
                    className: "MainView",
                    ref: function (t) {
                      e.el = t;
                    },
                  });
                },
              },
              {
                key: "componentDidMount",
                value: function () {
                  (this.app = new wu({
                    width: 1200,
                    height: 920,
                    antialias: !0,
                    sharedTicker: !0,
                  })),
                    this.el.appendChild(this.app.view),
                    this.drawText(),
                    this.drawArrows(),
                    this.drawOrbit(),
                    (this.angle = this.drawAngle()),
                    (this.angleText = this.drawAngleText(this.props.LuaAngle)),
                    this.app.loader
                      .add("moon", "img/moon.svg")
                      .add("earth", "img/earth.svg")
                      .add("avatar", "img/white-stickfigure.svg")
                      .add("highlight", "img/circle-highlight.svg")
                      .add("timeCompass", "img/compass.svg");
                  var t = this;
                  this.app.loader.load(function (e, n) {
                    (t.resources = n),
                      (t.moonContainer = t.drawMoon(n.moon, n.highlight)),
                      t.moonContainer
                        .on("pointerdown", t.onDragStart)
                        .on("touchstart", t.onDragStart)
                        .on("pointerup", t.onDragEnd)
                        .on("pointerupoutside", t.onDragEnd)
                        .on("touchend", t.onDragEnd)
                        .on("touchendoutside", t.onDragEnd)
                        .on("pointermove", t.LuaMovimento)
                        .on("touchmove", t.LuaMovimento),
                      (t.earth = t.drawEarth(n.earth, n.avatar, n.highlight)),
                      t.earth
                        .on("pointerdown", t.onDragStart)
                        .on("touchstart", t.onDragStart)
                        .on("pointerup", t.onDragEnd)
                        .on("pointerupoutside", t.onDragEnd)
                        .on("touchend", t.onDragEnd)
                        .on("touchendoutside", t.onDragEnd)
                        .on("pointermove", t.onEarthMove)
                        .on("touchmove", t.onEarthMove),
                      (t.timeCompass = t.drawTimeCompass(n.timeCompass)),
                      t.start();
                  });
                },
              },
              {
                key: "componentWillUnmount",
                value: function () {
                  this.app.Parar();
                },
              },
              {
                key: "componentDidUpdate",
                value: function (t) {
                  t.showLunarLandmark !== this.props.showLunarLandmark &&
                    (this.landmark.visible = this.props.showLunarLandmark),
                    this.props.showAngle &&
                      t.LuaAngle !== this.props.LuaAngle &&
                      (this.updateAngle(this.angle, this.props.LuaAngle),
                      this.updateAngleText(
                        this.angleText,
                        this.props.LuaAngle,
                      )),
                    t.showAngle !== this.props.showAngle &&
                      (this.props.showAngle &&
                        (this.updateAngle(this.angle, this.props.LuaAngle),
                        this.updateAngleText(
                          this.angleText,
                          this.props.LuaAngle,
                        )),
                      (this.angle.visible = this.props.showAngle),
                      (this.angleText.visible = this.props.showAngle));
                },
              },
              {
                key: "start",
                value: function () {
                  this.frameId ||
                    (this.frameId = requestAnimationFrame(this.animacao));
                },
              },
              {
                key: "Parar",
                value: function () {
                  cancelAnimationFrame(this.frameId);
                },
              },
              {
                key: "animacao",
                value: function () {
                  this.moonContainer.position = this.obterLuaPos(
                    this.props.LuaAngle,
                  );
                  var t = this;
                  this.moonContainer.children
                    .filter(function (t) {
                      return "moonObj" === t.name || "landmark" === t.name;
                    })
                    .forEach(function (e) {
                      e.rotation = -t.props.LuaAngle;
                    }),
                    this.state.isHoveringOnMoon || this.draggingMoon
                      ? (this.moonHighlight.visible = !0)
                      : (this.moonHighlight.visible = !1),
                    (this.earth.rotation = -this.props.observerAngle + Uu(90)),
                    this.state.isHoveringOnEarth || this.draggingEarth
                      ? (this.earthHighlight.visible = !0)
                      : (this.earthHighlight.visible = !1),
                    this.props.showTimeTickmarks
                      ? (this.timeCompass.visible = !0)
                      : (this.timeCompass.visible = !1),
                    (this.frameId = requestAnimationFrame(this.animacao));
                },
              },
              {
                key: "drawOrbit",
                value: function () {
                  var t = new ua();
                  t.lineStyle(2, 16777215),
                    t.drawCircle(this.orbitCenter.x, this.orbitCenter.y, 400),
                    this.app.stage.addChild(t);
                },
              },
              {
                key: "drawAngle",
                value: function () {
                  var t = new ua();
                  return (
                    (t.visible = !1),
                    this.updateAngle(t, this.props.LuaAngle),
                    this.app.stage.addChild(t),
                    t
                  );
                },
              },
              {
                key: "drawAngleText",
                value: function (t) {
                  var e = Xu(-t),
                    n = new xa(e, {
                      fontFamily: "Arial",
                      fontSize: 32,
                      fontWeight: "bold",
                      fill: 16769088,
                      align: "center",
                    });
                  return (
                    (n.visible = !1),
                    (n.position.x = this.orbitCenter.x - 360),
                    (n.position.y = this.orbitCenter.y - 340),
                    this.updateAngleText(n, this.props.LuaAngle),
                    this.app.stage.addChild(n),
                    n
                  );
                },
              },
              {
                key: "updateAngle",
                value: function (t, e) {
                  t.clear(),
                    t.moveTo(this.orbitCenter.x, this.orbitCenter.y),
                    t.lineStyle(6, 16769088),
                    t.beginFill(16769536, 0.7),
                    t.arc(
                      this.orbitCenter.x,
                      this.orbitCenter.y,
                      400,
                      Math.PI,
                      -e,
                      e < 0 && e > -Math.PI,
                    ),
                    t.lineTo(this.orbitCenter.x, this.orbitCenter.y),
                    t.lineTo(340, 460);
                },
              },
              {
                key: "updateAngleText",
                value: function (t, e) {
                  t.text = Xu(-e);
                },
              },
              {
                key: "drawTimeCompass",
                value: function (t) {
                  var e = new fa(t.texture);
                  return (
                    (e.name = "timeCompass"),
                    (e.width = 656),
                    (e.height = 416),
                    (e.position = this.orbitCenter),
                    e.anchor.set(0.5),
                    (e.visible = !1),
                    this.app.stage.addChild(e),
                    e
                  );
                },
              },
              {
                key: "drawMoon",
                value: function (t, e) {
                  var n = this.obterLuaPos(this.props.LuaAngle),
                    r = new Qe();
                  (r.name = "moon"),
                    (r.buttonMode = !0),
                    (r.interactive = !0),
                    (r.position = n),
                    (r.position = this.orbitCenter);
                  var i = new fa(e.texture);
                  (i.visible = !1),
                    (i.width = 60),
                    (i.height = 60),
                    i.anchor.set(0.5),
                    (this.moonHighlight = i),
                    r.addChild(i);
                  var o = new fa(t.texture);
                  (o.name = "moonObj"),
                    (o.width = 40),
                    (o.height = 40),
                    o.anchor.set(0.5),
                    r.addChild(o);
                  var a = new ua();
                  (a.name = "landmark"),
                    (a.visible = !1),
                    a.lineStyle(4, 16750079),
                    a.moveTo(-20, 0),
                    a.lineTo(-40, 0),
                    (this.landmark = a),
                    r.addChild(this.landmark);
                  var s = new ua();
                  return (
                    s.beginFill(0),
                    (s.alpha = 0.7),
                    s.arc(0, 0, 20, Uu(-90), Uu(90)),
                    r.addChild(s),
                    this.app.stage.addChild(r),
                    r
                  );
                },
              },
              {
                key: "drawEarth",
                value: function (t, e, n) {
                  var r = new Qe();
                  (r.pivot = this.orbitCenter),
                    (r.name = "earth"),
                    (r.buttonMode = !0),
                    (r.interactive = !0),
                    (r.position = this.orbitCenter),
                    (r.rotation = -this.props.observerAngle + Uu(90));
                  var i = new fa(n.texture);
                  (i.visible = !1),
                    (i.width = 180),
                    (i.height = 180),
                    (i.position = this.orbitCenter),
                    i.anchor.set(0.5),
                    (this.earthHighlight = i),
                    r.addChild(i);
                  var o = new fa(t.texture);
                  (o.width = 140),
                    (o.height = 140),
                    (o.position = this.orbitCenter),
                    o.anchor.set(0.5),
                    (o.rotation = -0.9),
                    r.addChild(o);
                  var a = new fa(e.texture);
                  (a.width = 48.6),
                    (a.height = 22.95),
                    (a.position = this.orbitCenter),
                    (a.position.x -= 84),
                    a.anchor.set(0.5),
                    r.addChild(a),
                    this.app.stage.addChild(r);
                  var s = new ua();
                  return (
                    s.beginFill(0),
                    (s.alpha = 0.7),
                    s.arc(
                      this.orbitCenter.x,
                      this.orbitCenter.y,
                      70,
                      -Math.PI / 2,
                      Math.PI / 2,
                    ),
                    this.app.stage.addChild(s),
                    r
                  );
                },
              },
              {
                key: "drawText",
                value: function () {
                  var t = new xa("Luz do sol", {
                    fontFamily: "Arial",
                    fontSize: 56,
                    fontWeight: "bold",
                    fill: 16777088,
                    align: "center",
                  });
                  (t.rotation = Uu(-90)),
                    (t.position.x = 28),
                    (t.position.y = 540),
                    this.app.stage.addChild(t);
                },
              },
              {
                key: "drawArrows",
                value: function () {
                  for (var t = 1; t < 8; t++) {
                    var e = new ua();
                    e.lineStyle(4, 16777088),
                      e.moveTo(120, 2 * (50 * t + 30)),
                      e.lineTo(240, 2 * (50 * t + 30));
                    var n = new ua()
                      .beginFill(16777088)
                      .drawPolygon([
                        220,
                        2 * (50 * t + 26),
                        220,
                        2 * (50 * t + 34),
                        246,
                        2 * (50 * t + 30),
                      ]);
                    this.app.stage.addChild(e), this.app.stage.addChild(n);
                  }
                },
              },
              {
                key: "onDragStart",
                value: function (t) {
                  this.props.pararAnimação(),
                    (this.data = t.data),
                    (this.dragStartPos = this.data.getLocalPosition(
                      this.app.stage,
                    )),
                    (this.dragStartAngle = this.props.observerAngle),
                    "earth" === t.target.name
                      ? (this.draggingEarth = !0)
                      : "moon" === t.target.name && (this.draggingMoon = !0);
                },
              },
              {
                key: "onDragEnd",
                value: function () {
                  (this.draggingEarth = !1),
                    (this.draggingMoon = !1),
                    (this.data = null);
                },
              },
              {
                key: "onEarthMove",
                value: function (t) {
                  if (
                    (!t.target ||
                      "earth" !== t.target.name ||
                      this.state.isHoveringOnEarth ||
                      this.draggingMoon ||
                      this.setState({ isHoveringOnEarth: !0 }),
                    !t.target &&
                      this.state.isHoveringOnEarth &&
                      this.setState({ isHoveringOnEarth: !1 }),
                    this.draggingEarth)
                  ) {
                    var e = this.data.getLocalPosition(this.app.stage),
                      n = Math.atan2(
                        e.y - this.orbitCenter.y,
                        e.x - this.orbitCenter.x,
                      ),
                      r =
                        Math.atan2(
                          this.dragStartPos.y - this.orbitCenter.y,
                          this.dragStartPos.x - this.orbitCenter.x,
                        ) +
                        Math.PI / 2;
                    this.props.ObservadorAngleUpdate(
                      -n + r + (this.dragStartAngle - Math.PI / 2),
                    );
                  }
                },
              },
              {
                key: "LuaMovimento",
                value: function (t) {
                  if (
                    (!t.target ||
                      "moon" !== t.target.name ||
                      this.state.isHoveringOnMoon ||
                      this.draggingEarth ||
                      this.setState({ isHoveringOnMoon: !0 }),
                    !t.target &&
                      this.state.isHoveringOnMoon &&
                      this.setState({ isHoveringOnMoon: !1 }),
                    this.draggingMoon)
                  ) {
                    var e = this.data.getLocalPosition(this.app.stage),
                      n = Math.atan2(
                        e.y - this.orbitCenter.y,
                        e.x - this.orbitCenter.x,
                      );
                    this.props.onLuaAngleUpdate(-n);
                  }
                },
              },
              {
                key: "obterLuaPos",
                value: function (t) {
                  return new se(
                    400 * Math.cos(-t) + this.orbitCenter.x,
                    400 * Math.sin(-t) + this.orbitCenter.y,
                  );
                },
              },
            ]),
            r && ku(n.prototype, r),
            Object.defineProperty(n, "prototype", { writable: !1 }),
            s
          );
        })(t.Component);
      function ju(t) {
        return (
          (ju =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (t) {
                  return typeof t;
                }
              : function (t) {
                  return t &&
                    "function" == typeof Symbol &&
                    t.constructor === Symbol &&
                    t !== Symbol.prototype
                    ? "symbol"
                    : typeof t;
                }),
          ju(t)
        );
      }
      function Yu(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            "value" in r && (r.writable = !0),
            Object.defineProperty(
              t,
              (void 0,
              (i = (function (t, e) {
                if ("object" !== ju(t) || null === t) return t;
                var n = t[Symbol.toPrimitive];
                if (void 0 !== n) {
                  var r = n.call(t, "string");
                  if ("object" !== ju(r)) return r;
                  throw new TypeError(
                    "@@toPrimitive must return a primitive value.",
                  );
                }
                return String(t);
              })(r.key)),
              "symbol" === ju(i) ? i : String(i)),
              r,
            );
        }
        var i;
      }
      function qu(t, e) {
        return (
          (qu = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (t, e) {
                return (t.__proto__ = e), t;
              }),
          qu(t, e)
        );
      }
      function Ku(t) {
        return (
          (Ku = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (t) {
                return t.__proto__ || Object.getPrototypeOf(t);
              }),
          Ku(t)
        );
      }
      Wu.propTypes = {
        observerAngle: i().number.isRequired,
        LuaAngle: i().number.isRequired,
        ObservadorAngleUpdate: i().func.isRequired,
        onLuaAngleUpdate: i().func.isRequired,
        showAngle: i().bool.isRequired,
        showTimeTickmarks: i().bool.isRequired,
        showLunarLandmark: i().bool.isRequired,
        pararAnimação: i().func.isRequired,
      };
      var Zu = (function (e) {
        !(function (t, e) {
          if ("function" != typeof e && null !== e)
            throw new TypeError(
              "Super expression must either be null or a function",
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: { value: t, writable: !0, configurable: !0 },
          })),
            Object.defineProperty(t, "prototype", { writable: !1 }),
            e && qu(t, e);
        })(s, e);
        var n,
          r,
          i,
          o,
          a =
            ((i = s),
            (o = (function () {
              if ("undefined" == typeof Reflect || !Reflect.construct)
                return !1;
              if (Reflect.construct.sham) return !1;
              if ("function" == typeof Proxy) return !0;
              try {
                return (
                  Boolean.prototype.valueOf.call(
                    Reflect.construct(Boolean, [], function () {}),
                  ),
                  !0
                );
              } catch (t) {
                return !1;
              }
            })()),
            function () {
              var t,
                e = Ku(i);
              if (o) {
                var n = Ku(this).constructor;
                t = Reflect.construct(e, arguments, n);
              } else t = e.apply(this, arguments);
              return (function (t, e) {
                if (e && ("object" === ju(e) || "function" == typeof e))
                  return e;
                if (void 0 !== e)
                  throw new TypeError(
                    "Derived constructors may only return object or undefined",
                  );
                return (function (t) {
                  if (void 0 === t)
                    throw new ReferenceError(
                      "this hasn't been initialised - super() hasn't been called",
                    );
                  return t;
                })(t);
              })(this, t);
            });
        function s(t) {
          var e;
          return (
            (function (t, e) {
              if (!(t instanceof e))
                throw new TypeError("Cannot call a class as a function");
            })(this, s),
            ((e = a.call(this, t)).id = "MoonPhaseView"),
            (e.moon = null),
            (e.radius = 100.5),
            (e.center = new se(114, 107.5)),
            e
          );
        }
        return (
          (n = s),
          (r = [
            {
              key: "render",
              value: function () {
                var e,
                  n,
                  r,
                  i,
                  o,
                  a,
                  s,
                  l = this,
                  u =
                    ((e = this.props.LuaAngle),
                    (n = Fu(e)),
                    Math.abs(n - 180) < 5 || Math.abs(n + 180) < 5
                      ? 180
                      : Math.abs(n + 90) < 5
                        ? -90
                        : Math.abs(n) < 5
                          ? 0
                          : Math.abs(n - 90) < 5
                            ? 90
                            : Math.abs(n + 135) < 45
                              ? -135
                              : Math.abs(n + 45) < 45
                                ? -45
                                : Math.abs(n - 45) < 45
                                  ? 45
                                  : Math.abs(n - 135) < 45
                                    ? 135
                                    : null),
                  h = Math.round(
                    (function (t) {
                      return (t + Math.PI) / ((2 * Math.PI) / 708.734136);
                    })(this.props.LuaAngle),
                  );
                return t.createElement(
                  "div",
                  null,
                  t.createElement(
                    "div",
                    {
                      style: {
                        visibility: this.props.isHidden ? "hidden" : "visible",
                      },
                    },
                    t.createElement(
                      "select",
                      {
                        className: "form-control form-control-sm",
                        onChange: this.onLuaAngleUpdate.bind(this),
                        value: u,
                      },
                      t.createElement("option", { value: 180 }, "Lua nova"),
                      t.createElement(
                        "option",
                        { value: -135 },
                        "Lua Crescente",
                      ),
                      t.createElement(
                        "option",
                        { value: -90 },
                        "Primeiro Quarto",
                      ),
                      t.createElement(
                        "option",
                        { value: -45 },
                        "Gibbosa Crescente",
                      ),
                      t.createElement("option", { value: 0 }, "Lua cheia"),
                      t.createElement(
                        "option",
                        { value: 45 },
                        "Gibbosa Minguante",
                      ),
                      t.createElement("option", { value: 90 }, "Terceiro Quartro"),
                      t.createElement(
                        "option",
                        { value: 135 },
                        "Crescente Minguante",
                      ),
                    ),
                    t.createElement("div", {
                      className: "mt-1",
                      ref: function (t) {
                        l.el = t;
                      },
                    }),
                    t.createElement(
                      "div",
                      { className: "text-center" },
                      Bu(
                        (function (t) {
                          return ((1 - Math.cos(t)) / 2) * 100;
                        })(this.props.LuaAngle - Math.PI),
                      ),
                      "% Iluminada",
                    ),
                    t.createElement(
                      "div",
                      { className: "text-center" },
                      "Tempo desde a Lua Nova:",
                    ),
                    t.createElement(
                      "div",
                      { className: "text-center" },
                      ((r = h),
                      (a = 1 === (i = Math.floor(r / 24)) ? "" : "s"),
                      (s = 1 == (o = r % 24) ? "" : "s"),
                      i
                        ? ""
                            .concat(i, " day")
                            .concat(a, ", ")
                            .concat(o, " hour")
                            .concat(s)
                        : "".concat(o, " hora").concat(s)),
                    ),
                  ),
                  t.createElement(
                    "div",
                    { className: "text-right" },
                    t.createElement(
                      "button",
                      {
                        type: "button",
                        onClick: this.props.onHideShowToggle,
                        className: "btn btn-primary btn-sm",
                      },
                      this.props.isHidden ? "Exibir" : "Esconder",
                    ),
                  ),
                );
              },
            },
            {
              key: "componentDidMount",
              value: function () {
                var t = this;
                (this.app = new wu({
                  width: 2 * this.center.x,
                  height: 2 * this.center.y,
                })),
                  this.el.appendChild(this.app.view),
                  this.app.loader.add("moon", "img/moon.png"),
                  this.app.loader.load(function (e, n) {
                    (t.moon = n.moon), t.draw();
                  });
              },
            },
            {
              key: "componentDidUpdate",
              value: function (t) {
                t.LuaAngle !== this.props.LuaAngle &&
                  this.drawPhase(
                    this.leftShade,
                    this.rightShade,
                    this.convertPhase(this.props.LuaAngle),
                  ),
                  t.showLunarLandmark !== this.props.showLunarLandmark &&
                    (this.lunarLandmark.visible = this.props.showLunarLandmark);
              },
            },
            {
              key: "draw",
              value: function () {
                this.drawMoon(this.app),
                  this.drawShades(this.app),
                  this.drawPhase(
                    this.leftShade,
                    this.rightShade,
                    this.convertPhase(this.props.LuaAngle),
                  ),
                  this.drawLunarLandmark(this.app);
              },
            },
            {
              key: "drawMoon",
              value: function (t) {
                var e = new fa(this.moon.texture);
                t.stage.addChild(e);
              },
            },
            {
              key: "drawShades",
              value: function (t) {
                (this.leftShade = new ua()),
                  (this.leftShade.pivot = this.center),
                  (this.rightShade = new ua()),
                  (this.rightShade.pivot = this.center),
                  this.leftShade.beginFill(0, 0.7),
                  this.leftShade.arc(
                    2 * this.center.x,
                    2 * this.center.y,
                    this.radius,
                    Math.PI / 2,
                    -Math.PI / 2,
                  ),
                  this.leftShade.endFill(),
                  t.stage.addChild(this.leftShade),
                  this.rightShade.beginFill(0, 0.7),
                  this.rightShade.arc(
                    2 * this.center.x,
                    2 * this.center.y,
                    this.radius,
                    -Math.PI / 2,
                    Math.PI / 2,
                  ),
                  this.rightShade.endFill(),
                  t.stage.addChild(this.rightShade);
                var e = new fa(this.moon.texture);
                (e.visible = !1), t.stage.addChild(e), (this.hiddenMoon = e);
              },
            },
            {
              key: "drawPhase",
              value: function (t, e, n) {
                if (n <= 0.5) {
                  var r = 1 - 4 * n;
                  (t.scale.x = 1),
                    (t.position.x = 0),
                    (e.scale.x = r),
                    (e.position.x = this.center.x - r * this.center.x),
                    n > 0.25
                      ? ((this.hiddenMoon.mask = this.rightShade),
                        (this.hiddenMoon.visible = !0))
                      : ((this.hiddenMoon.mask = null),
                        (this.hiddenMoon.visible = !1));
                } else {
                  var i = 4 * -n + 3;
                  (e.scale.x = 1),
                    (e.position.x = 0),
                    n < 0.75
                      ? ((this.hiddenMoon.mask = this.leftShade),
                        (this.hiddenMoon.visible = !0),
                        (t.scale.x = -i),
                        (t.position.x = this.center.x - -i * this.center.x))
                      : ((this.hiddenMoon.mask = null),
                        (this.hiddenMoon.visible = !1),
                        (t.scale.x = -i),
                        (t.position.x = this.center.x - -i * this.center.x),
                        (e.scale.x = 1),
                        (e.position.x = 0));
                }
              },
            },
            {
              key: "convertPhase",
              value: function (t) {
                var e = (t - Math.PI) / (2 * Math.PI);
                return e > 1 ? 0 : e < 0 ? e + 1 : e;
              },
            },
            {
              key: "drawLunarLandmark",
              value: function (t) {
                var e = new ua();
                e.lineStyle(1, 0),
                  e.beginFill(16750079),
                  e.drawCircle(this.center.x, this.center.y, 8),
                  (e.visible = this.props.showLunarLandmark),
                  t.stage.addChild(e),
                  (this.lunarLandmark = e);
              },
            },
            {
              key: "onLuaAngleUpdate",
              value: function (t) {
                this.props.onLuaAngleUpdate(Uu(Du(t.target.value)));
              },
            },
          ]),
          r && Yu(n.prototype, r),
          Object.defineProperty(n, "prototype", { writable: !1 }),
          s
        );
      })(t.Component);
      Zu.propTypes = {
        LuaAngle: i().number.isRequired,
        onLuaAngleUpdate: i().func.isRequired,
        showLunarLandmark: i().bool.isRequired,
        isHidden: i().bool.isRequired,
        onHideShowToggle: i().func.isRequired,
      };
      const Qu = "155",
        $u = 1,
        Ju = 2,
        th = 3,
        eh = 0,
        nh = 1,
        rh = 2,
        ih = 0,
        oh = 100,
        ah = 0,
        sh = 1,
        lh = 2,
        uh = 0,
        hh = 1,
        ch = 2,
        dh = 3,
        fh = 4,
        ph = 5,
        mh = 301,
        _h = 302,
        gh = 306,
        vh = 1e3,
        yh = 1001,
        Eh = 1002,
        Th = 1003,
        bh = 1005,
        xh = 1006,
        Sh = 1008,
        Mh = 1009,
        Ah = 1012,
        Rh = 1014,
        wh = 1015,
        Ph = 1016,
        Ih = 1017,
        Oh = 1018,
        Ch = 1020,
        Nh = 1023,
        Lh = 1026,
        Dh = 1027,
        Uh = 1029,
        Fh = 1031,
        Bh = 1033,
        Gh = 33776,
        kh = 33777,
        Hh = 33778,
        zh = 33779,
        Vh = 36492,
        Xh = 2300,
        Wh = 2301,
        jh = 2302,
        Yh = 3001,
        qh = "srgb",
        Kh = "srgb-linear",
        Zh = "display-p3",
        Qh = 7680,
        $h = 35044,
        Jh = "300 es",
        tc = 1035,
        ec = 2e3,
        nc = 2001;
      class rc {
        addEventListener(t, e) {
          void 0 === this._listeners && (this._listeners = {});
          const n = this._listeners;
          void 0 === n[t] && (n[t] = []),
            -1 === n[t].indexOf(e) && n[t].push(e);
        }
        hasEventListener(t, e) {
          if (void 0 === this._listeners) return !1;
          const n = this._listeners;
          return void 0 !== n[t] && -1 !== n[t].indexOf(e);
        }
        removeEventListener(t, e) {
          if (void 0 === this._listeners) return;
          const n = this._listeners[t];
          if (void 0 !== n) {
            const t = n.indexOf(e);
            -1 !== t && n.splice(t, 1);
          }
        }
        dispatchEvent(t) {
          if (void 0 === this._listeners) return;
          const e = this._listeners[t.type];
          if (void 0 !== e) {
            t.target = this;
            const n = e.slice(0);
            for (let e = 0, r = n.length; e < r; e++) n[e].call(this, t);
            t.target = null;
          }
        }
      }
      const ic = [
        "00",
        "01",
        "02",
        "03",
        "04",
        "05",
        "06",
        "07",
        "08",
        "09",
        "0a",
        "0b",
        "0c",
        "0d",
        "0e",
        "0f",
        "10",
        "11",
        "12",
        "13",
        "14",
        "15",
        "16",
        "17",
        "18",
        "19",
        "1a",
        "1b",
        "1c",
        "1d",
        "1e",
        "1f",
        "20",
        "21",
        "22",
        "23",
        "24",
        "25",
        "26",
        "27",
        "28",
        "29",
        "2a",
        "2b",
        "2c",
        "2d",
        "2e",
        "2f",
        "30",
        "31",
        "32",
        "33",
        "34",
        "35",
        "36",
        "37",
        "38",
        "39",
        "3a",
        "3b",
        "3c",
        "3d",
        "3e",
        "3f",
        "40",
        "41",
        "42",
        "43",
        "44",
        "45",
        "46",
        "47",
        "48",
        "49",
        "4a",
        "4b",
        "4c",
        "4d",
        "4e",
        "4f",
        "50",
        "51",
        "52",
        "53",
        "54",
        "55",
        "56",
        "57",
        "58",
        "59",
        "5a",
        "5b",
        "5c",
        "5d",
        "5e",
        "5f",
        "60",
        "61",
        "62",
        "63",
        "64",
        "65",
        "66",
        "67",
        "68",
        "69",
        "6a",
        "6b",
        "6c",
        "6d",
        "6e",
        "6f",
        "70",
        "71",
        "72",
        "73",
        "74",
        "75",
        "76",
        "77",
        "78",
        "79",
        "7a",
        "7b",
        "7c",
        "7d",
        "7e",
        "7f",
        "80",
        "81",
        "82",
        "83",
        "84",
        "85",
        "86",
        "87",
        "88",
        "89",
        "8a",
        "8b",
        "8c",
        "8d",
        "8e",
        "8f",
        "90",
        "91",
        "92",
        "93",
        "94",
        "95",
        "96",
        "97",
        "98",
        "99",
        "9a",
        "9b",
        "9c",
        "9d",
        "9e",
        "9f",
        "a0",
        "a1",
        "a2",
        "a3",
        "a4",
        "a5",
        "a6",
        "a7",
        "a8",
        "a9",
        "aa",
        "ab",
        "ac",
        "ad",
        "ae",
        "af",
        "b0",
        "b1",
        "b2",
        "b3",
        "b4",
        "b5",
        "b6",
        "b7",
        "b8",
        "b9",
        "ba",
        "bb",
        "bc",
        "bd",
        "be",
        "bf",
        "c0",
        "c1",
        "c2",
        "c3",
        "c4",
        "c5",
        "c6",
        "c7",
        "c8",
        "c9",
        "ca",
        "cb",
        "cc",
        "cd",
        "ce",
        "cf",
        "d0",
        "d1",
        "d2",
        "d3",
        "d4",
        "d5",
        "d6",
        "d7",
        "d8",
        "d9",
        "da",
        "db",
        "dc",
        "dd",
        "de",
        "df",
        "e0",
        "e1",
        "e2",
        "e3",
        "e4",
        "e5",
        "e6",
        "e7",
        "e8",
        "e9",
        "ea",
        "eb",
        "ec",
        "ed",
        "ee",
        "ef",
        "f0",
        "f1",
        "f2",
        "f3",
        "f4",
        "f5",
        "f6",
        "f7",
        "f8",
        "f9",
        "fa",
        "fb",
        "fc",
        "fd",
        "fe",
        "ff",
      ];
      const oc = Math.PI / 180,
        ac = 180 / Math.PI;
      function sc() {
        const t = (4294967295 * Math.random()) | 0,
          e = (4294967295 * Math.random()) | 0,
          n = (4294967295 * Math.random()) | 0,
          r = (4294967295 * Math.random()) | 0;
        return (
          ic[255 & t] +
          ic[(t >> 8) & 255] +
          ic[(t >> 16) & 255] +
          ic[(t >> 24) & 255] +
          "-" +
          ic[255 & e] +
          ic[(e >> 8) & 255] +
          "-" +
          ic[((e >> 16) & 15) | 64] +
          ic[(e >> 24) & 255] +
          "-" +
          ic[(63 & n) | 128] +
          ic[(n >> 8) & 255] +
          "-" +
          ic[(n >> 16) & 255] +
          ic[(n >> 24) & 255] +
          ic[255 & r] +
          ic[(r >> 8) & 255] +
          ic[(r >> 16) & 255] +
          ic[(r >> 24) & 255]
        ).toLowerCase();
      }
      function lc(t, e, n) {
        return Math.max(e, Math.min(n, t));
      }
      function uc(t, e) {
        return ((t % e) + e) % e;
      }
      function hc(t, e, n) {
        return (1 - n) * t + n * e;
      }
      function cc(t) {
        return 0 == (t & (t - 1)) && 0 !== t;
      }
      function dc(t) {
        return Math.pow(2, Math.floor(Math.log(t) / Math.LN2));
      }
      function fc(t, e) {
        switch (e.constructor) {
          case Float32Array:
            return t;
          case Uint32Array:
            return t / 4294967295;
          case Uint16Array:
            return t / 65535;
          case Uint8Array:
            return t / 255;
          case Int32Array:
            return Math.max(t / 2147483647, -1);
          case Int16Array:
            return Math.max(t / 32767, -1);
          case Int8Array:
            return Math.max(t / 127, -1);
          default:
            throw new Error("Invalid component type.");
        }
      }
      function pc(t, e) {
        switch (e.constructor) {
          case Float32Array:
            return t;
          case Uint32Array:
            return Math.round(4294967295 * t);
          case Uint16Array:
            return Math.round(65535 * t);
          case Uint8Array:
            return Math.round(255 * t);
          case Int32Array:
            return Math.round(2147483647 * t);
          case Int16Array:
            return Math.round(32767 * t);
          case Int8Array:
            return Math.round(127 * t);
          default:
            throw new Error("Invalid component type.");
        }
      }
      const mc = oc,
        _c = function (t) {
          return t * oc;
        },
        gc = function (t) {
          return t * ac;
        };
      class vc {
        constructor(t = 0, e = 0) {
          (vc.prototype.isVector2 = !0), (this.x = t), (this.y = e);
        }
        get width() {
          return this.x;
        }
        set width(t) {
          this.x = t;
        }
        get height() {
          return this.y;
        }
        set height(t) {
          this.y = t;
        }
        set(t, e) {
          return (this.x = t), (this.y = e), this;
        }
        setScalar(t) {
          return (this.x = t), (this.y = t), this;
        }
        setX(t) {
          return (this.x = t), this;
        }
        setY(t) {
          return (this.y = t), this;
        }
        setComponent(t, e) {
          switch (t) {
            case 0:
              this.x = e;
              break;
            case 1:
              this.y = e;
              break;
            default:
              throw new Error("index is out of range: " + t);
          }
          return this;
        }
        getComponent(t) {
          switch (t) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            default:
              throw new Error("index is out of range: " + t);
          }
        }
        clone() {
          return new this.constructor(this.x, this.y);
        }
        copy(t) {
          return (this.x = t.x), (this.y = t.y), this;
        }
        add(t) {
          return (this.x += t.x), (this.y += t.y), this;
        }
        addScalar(t) {
          return (this.x += t), (this.y += t), this;
        }
        addVectors(t, e) {
          return (this.x = t.x + e.x), (this.y = t.y + e.y), this;
        }
        addScaledVector(t, e) {
          return (this.x += t.x * e), (this.y += t.y * e), this;
        }
        sub(t) {
          return (this.x -= t.x), (this.y -= t.y), this;
        }
        subScalar(t) {
          return (this.x -= t), (this.y -= t), this;
        }
        subVectors(t, e) {
          return (this.x = t.x - e.x), (this.y = t.y - e.y), this;
        }
        multiply(t) {
          return (this.x *= t.x), (this.y *= t.y), this;
        }
        multiplyScalar(t) {
          return (this.x *= t), (this.y *= t), this;
        }
        divide(t) {
          return (this.x /= t.x), (this.y /= t.y), this;
        }
        divideScalar(t) {
          return this.multiplyScalar(1 / t);
        }
        applyMatrix3(t) {
          const e = this.x,
            n = this.y,
            r = t.elements;
          return (
            (this.x = r[0] * e + r[3] * n + r[6]),
            (this.y = r[1] * e + r[4] * n + r[7]),
            this
          );
        }
        min(t) {
          return (
            (this.x = Math.min(this.x, t.x)),
            (this.y = Math.min(this.y, t.y)),
            this
          );
        }
        max(t) {
          return (
            (this.x = Math.max(this.x, t.x)),
            (this.y = Math.max(this.y, t.y)),
            this
          );
        }
        clamp(t, e) {
          return (
            (this.x = Math.max(t.x, Math.min(e.x, this.x))),
            (this.y = Math.max(t.y, Math.min(e.y, this.y))),
            this
          );
        }
        clampScalar(t, e) {
          return (
            (this.x = Math.max(t, Math.min(e, this.x))),
            (this.y = Math.max(t, Math.min(e, this.y))),
            this
          );
        }
        clampLength(t, e) {
          const n = this.length();
          return this.divideScalar(n || 1).multiplyScalar(
            Math.max(t, Math.min(e, n)),
          );
        }
        floor() {
          return (
            (this.x = Math.floor(this.x)), (this.y = Math.floor(this.y)), this
          );
        }
        ceil() {
          return (
            (this.x = Math.ceil(this.x)), (this.y = Math.ceil(this.y)), this
          );
        }
        round() {
          return (
            (this.x = Math.round(this.x)), (this.y = Math.round(this.y)), this
          );
        }
        roundToZero() {
          return (
            (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
            (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
            this
          );
        }
        negate() {
          return (this.x = -this.x), (this.y = -this.y), this;
        }
        dot(t) {
          return this.x * t.x + this.y * t.y;
        }
        cross(t) {
          return this.x * t.y - this.y * t.x;
        }
        lengthSq() {
          return this.x * this.x + this.y * this.y;
        }
        length() {
          return Math.sqrt(this.x * this.x + this.y * this.y);
        }
        manhattanLength() {
          return Math.abs(this.x) + Math.abs(this.y);
        }
        normalize() {
          return this.divideScalar(this.length() || 1);
        }
        angle() {
          return Math.atan2(-this.y, -this.x) + Math.PI;
        }
        angleTo(t) {
          const e = Math.sqrt(this.lengthSq() * t.lengthSq());
          if (0 === e) return Math.PI / 2;
          const n = this.dot(t) / e;
          return Math.acos(lc(n, -1, 1));
        }
        distanceTo(t) {
          return Math.sqrt(this.distanceToSquared(t));
        }
        distanceToSquared(t) {
          const e = this.x - t.x,
            n = this.y - t.y;
          return e * e + n * n;
        }
        manhattanDistanceTo(t) {
          return Math.abs(this.x - t.x) + Math.abs(this.y - t.y);
        }
        setLength(t) {
          return this.normalize().multiplyScalar(t);
        }
        lerp(t, e) {
          return (
            (this.x += (t.x - this.x) * e), (this.y += (t.y - this.y) * e), this
          );
        }
        lerpVectors(t, e, n) {
          return (
            (this.x = t.x + (e.x - t.x) * n),
            (this.y = t.y + (e.y - t.y) * n),
            this
          );
        }
        equals(t) {
          return t.x === this.x && t.y === this.y;
        }
        fromArray(t, e = 0) {
          return (this.x = t[e]), (this.y = t[e + 1]), this;
        }
        toArray(t = [], e = 0) {
          return (t[e] = this.x), (t[e + 1] = this.y), t;
        }
        fromBufferAttribute(t, e) {
          return (this.x = t.getX(e)), (this.y = t.getY(e)), this;
        }
        rotateAround(t, e) {
          const n = Math.cos(e),
            r = Math.sin(e),
            i = this.x - t.x,
            o = this.y - t.y;
          return (
            (this.x = i * n - o * r + t.x), (this.y = i * r + o * n + t.y), this
          );
        }
        random() {
          return (this.x = Math.random()), (this.y = Math.random()), this;
        }
        *[Symbol.iterator]() {
          yield this.x, yield this.y;
        }
      }
      class yc {
        constructor(t, e, n, r, i, o, a, s, l) {
          (yc.prototype.isMatrix3 = !0),
            (this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
            void 0 !== t && this.set(t, e, n, r, i, o, a, s, l);
        }
        set(t, e, n, r, i, o, a, s, l) {
          const u = this.elements;
          return (
            (u[0] = t),
            (u[1] = r),
            (u[2] = a),
            (u[3] = e),
            (u[4] = i),
            (u[5] = s),
            (u[6] = n),
            (u[7] = o),
            (u[8] = l),
            this
          );
        }
        identity() {
          return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
        }
        copy(t) {
          const e = this.elements,
            n = t.elements;
          return (
            (e[0] = n[0]),
            (e[1] = n[1]),
            (e[2] = n[2]),
            (e[3] = n[3]),
            (e[4] = n[4]),
            (e[5] = n[5]),
            (e[6] = n[6]),
            (e[7] = n[7]),
            (e[8] = n[8]),
            this
          );
        }
        extractBasis(t, e, n) {
          return (
            t.setFromMatrix3Column(this, 0),
            e.setFromMatrix3Column(this, 1),
            n.setFromMatrix3Column(this, 2),
            this
          );
        }
        setFromMatrix4(t) {
          const e = t.elements;
          return (
            this.set(e[0], e[4], e[8], e[1], e[5], e[9], e[2], e[6], e[10]),
            this
          );
        }
        multiply(t) {
          return this.multiplyMatrices(this, t);
        }
        premultiply(t) {
          return this.multiplyMatrices(t, this);
        }
        multiplyMatrices(t, e) {
          const n = t.elements,
            r = e.elements,
            i = this.elements,
            o = n[0],
            a = n[3],
            s = n[6],
            l = n[1],
            u = n[4],
            h = n[7],
            c = n[2],
            d = n[5],
            f = n[8],
            p = r[0],
            m = r[3],
            _ = r[6],
            g = r[1],
            v = r[4],
            y = r[7],
            E = r[2],
            T = r[5],
            b = r[8];
          return (
            (i[0] = o * p + a * g + s * E),
            (i[3] = o * m + a * v + s * T),
            (i[6] = o * _ + a * y + s * b),
            (i[1] = l * p + u * g + h * E),
            (i[4] = l * m + u * v + h * T),
            (i[7] = l * _ + u * y + h * b),
            (i[2] = c * p + d * g + f * E),
            (i[5] = c * m + d * v + f * T),
            (i[8] = c * _ + d * y + f * b),
            this
          );
        }
        multiplyScalar(t) {
          const e = this.elements;
          return (
            (e[0] *= t),
            (e[3] *= t),
            (e[6] *= t),
            (e[1] *= t),
            (e[4] *= t),
            (e[7] *= t),
            (e[2] *= t),
            (e[5] *= t),
            (e[8] *= t),
            this
          );
        }
        determinant() {
          const t = this.elements,
            e = t[0],
            n = t[1],
            r = t[2],
            i = t[3],
            o = t[4],
            a = t[5],
            s = t[6],
            l = t[7],
            u = t[8];
          return (
            e * o * u -
            e * a * l -
            n * i * u +
            n * a * s +
            r * i * l -
            r * o * s
          );
        }
        invert() {
          const t = this.elements,
            e = t[0],
            n = t[1],
            r = t[2],
            i = t[3],
            o = t[4],
            a = t[5],
            s = t[6],
            l = t[7],
            u = t[8],
            h = u * o - a * l,
            c = a * s - u * i,
            d = l * i - o * s,
            f = e * h + n * c + r * d;
          if (0 === f) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
          const p = 1 / f;
          return (
            (t[0] = h * p),
            (t[1] = (r * l - u * n) * p),
            (t[2] = (a * n - r * o) * p),
            (t[3] = c * p),
            (t[4] = (u * e - r * s) * p),
            (t[5] = (r * i - a * e) * p),
            (t[6] = d * p),
            (t[7] = (n * s - l * e) * p),
            (t[8] = (o * e - n * i) * p),
            this
          );
        }
        transpose() {
          let t;
          const e = this.elements;
          return (
            (t = e[1]),
            (e[1] = e[3]),
            (e[3] = t),
            (t = e[2]),
            (e[2] = e[6]),
            (e[6] = t),
            (t = e[5]),
            (e[5] = e[7]),
            (e[7] = t),
            this
          );
        }
        getNormalMatrix(t) {
          return this.setFromMatrix4(t).invert().transpose();
        }
        transposeIntoArray(t) {
          const e = this.elements;
          return (
            (t[0] = e[0]),
            (t[1] = e[3]),
            (t[2] = e[6]),
            (t[3] = e[1]),
            (t[4] = e[4]),
            (t[5] = e[7]),
            (t[6] = e[2]),
            (t[7] = e[5]),
            (t[8] = e[8]),
            this
          );
        }
        setUvTransform(t, e, n, r, i, o, a) {
          const s = Math.cos(i),
            l = Math.sin(i);
          return (
            this.set(
              n * s,
              n * l,
              -n * (s * o + l * a) + o + t,
              -r * l,
              r * s,
              -r * (-l * o + s * a) + a + e,
              0,
              0,
              1,
            ),
            this
          );
        }
        scale(t, e) {
          return this.premultiply(Ec.makeScale(t, e)), this;
        }
        rotate(t) {
          return this.premultiply(Ec.makeRotation(-t)), this;
        }
        translate(t, e) {
          return this.premultiply(Ec.makeTranslation(t, e)), this;
        }
        makeTranslation(t, e) {
          return (
            t.isVector2
              ? this.set(1, 0, t.x, 0, 1, t.y, 0, 0, 1)
              : this.set(1, 0, t, 0, 1, e, 0, 0, 1),
            this
          );
        }
        makeRotation(t) {
          const e = Math.cos(t),
            n = Math.sin(t);
          return this.set(e, -n, 0, n, e, 0, 0, 0, 1), this;
        }
        makeScale(t, e) {
          return this.set(t, 0, 0, 0, e, 0, 0, 0, 1), this;
        }
        equals(t) {
          const e = this.elements,
            n = t.elements;
          for (let t = 0; t < 9; t++) if (e[t] !== n[t]) return !1;
          return !0;
        }
        fromArray(t, e = 0) {
          for (let n = 0; n < 9; n++) this.elements[n] = t[n + e];
          return this;
        }
        toArray(t = [], e = 0) {
          const n = this.elements;
          return (
            (t[e] = n[0]),
            (t[e + 1] = n[1]),
            (t[e + 2] = n[2]),
            (t[e + 3] = n[3]),
            (t[e + 4] = n[4]),
            (t[e + 5] = n[5]),
            (t[e + 6] = n[6]),
            (t[e + 7] = n[7]),
            (t[e + 8] = n[8]),
            t
          );
        }
        clone() {
          return new this.constructor().fromArray(this.elements);
        }
      }
      const Ec = new yc();
      function Tc(t) {
        for (let e = t.length - 1; e >= 0; --e) if (t[e] >= 65535) return !0;
        return !1;
      }
      function bc(t) {
        return document.createElementNS("http://www.w3.org/1999/xhtml", t);
      }
      Int8Array,
        Uint8Array,
        Uint8ClampedArray,
        Int16Array,
        Uint16Array,
        Int32Array,
        Uint32Array,
        Float32Array,
        Float64Array;
      const xc = {};
      function Sc(t) {
        t in xc || ((xc[t] = !0), console.warn(t));
      }
      function Mc(t) {
        return t < 0.04045
          ? 0.0773993808 * t
          : Math.pow(0.9478672986 * t + 0.0521327014, 2.4);
      }
      function Ac(t) {
        return t < 0.0031308 ? 12.92 * t : 1.055 * Math.pow(t, 0.41666) - 0.055;
      }
      const Rc = new yc().fromArray([
          0.8224621, 0.0331941, 0.0170827, 0.177538, 0.9668058, 0.0723974,
          -1e-7, 1e-7, 0.9105199,
        ]),
        wc = new yc().fromArray([
          1.2249401, -0.0420569, -0.0196376, -0.2249404, 1.0420571, -0.0786361,
          1e-7, 0, 1.0982735,
        ]),
        Pc = {
          [Kh]: (t) => t,
          [qh]: (t) => t.convertSRGBToLinear(),
          [Zh]: function (t) {
            return t.convertSRGBToLinear().applyMatrix3(wc);
          },
        },
        Ic = {
          [Kh]: (t) => t,
          [qh]: (t) => t.convertLinearToSRGB(),
          [Zh]: function (t) {
            return t.applyMatrix3(Rc).convertLinearToSRGB();
          },
        },
        Oc = {
          enabled: !0,
          get legacyMode() {
            return (
              console.warn(
                "THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150.",
              ),
              !this.enabled
            );
          },
          set legacyMode(t) {
            console.warn(
              "THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150.",
            ),
              (this.enabled = !t);
          },
          get workingColorSpace() {
            return Kh;
          },
          set workingColorSpace(t) {
            console.warn(
              "THREE.ColorManagement: .workingColorSpace is readonly.",
            );
          },
          convert: function (t, e, n) {
            if (!1 === this.enabled || e === n || !e || !n) return t;
            const r = Pc[e],
              i = Ic[n];
            if (void 0 === r || void 0 === i)
              throw new Error(
                `Unsupported color space conversion, "${e}" to "${n}".`,
              );
            return i(r(t));
          },
          fromWorkingColorSpace: function (t, e) {
            return this.convert(t, this.workingColorSpace, e);
          },
          toWorkingColorSpace: function (t, e) {
            return this.convert(t, e, this.workingColorSpace);
          },
        };
      let Cc;
      class Nc {
        static getDataURL(t) {
          if (/^data:/i.test(t.src)) return t.src;
          if ("undefined" == typeof HTMLCanvasElement) return t.src;
          let e;
          if (t instanceof HTMLCanvasElement) e = t;
          else {
            void 0 === Cc && (Cc = bc("canvas")),
              (Cc.width = t.width),
              (Cc.height = t.height);
            const n = Cc.getContext("2d");
            t instanceof ImageData
              ? n.putImageData(t, 0, 0)
              : n.drawImage(t, 0, 0, t.width, t.height),
              (e = Cc);
          }
          return e.width > 2048 || e.height > 2048
            ? (console.warn(
                "THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",
                t,
              ),
              e.toDataURL("image/jpeg", 0.6))
            : e.toDataURL("image/png");
        }
        static sRGBToLinear(t) {
          if (
            ("undefined" != typeof HTMLImageElement &&
              t instanceof HTMLImageElement) ||
            ("undefined" != typeof HTMLCanvasElement &&
              t instanceof HTMLCanvasElement) ||
            ("undefined" != typeof ImageBitmap && t instanceof ImageBitmap)
          ) {
            const e = bc("canvas");
            (e.width = t.width), (e.height = t.height);
            const n = e.getContext("2d");
            n.drawImage(t, 0, 0, t.width, t.height);
            const r = n.getImageData(0, 0, t.width, t.height),
              i = r.data;
            for (let t = 0; t < i.length; t++) i[t] = 255 * Mc(i[t] / 255);
            return n.putImageData(r, 0, 0), e;
          }
          if (t.data) {
            const e = t.data.slice(0);
            for (let t = 0; t < e.length; t++)
              e instanceof Uint8Array || e instanceof Uint8ClampedArray
                ? (e[t] = Math.floor(255 * Mc(e[t] / 255)))
                : (e[t] = Mc(e[t]));
            return { data: e, width: t.width, height: t.height };
          }
          return (
            console.warn(
              "THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.",
            ),
            t
          );
        }
      }
      let Lc = 0;
      class Dc {
        constructor(t = null) {
          (this.isSource = !0),
            Object.defineProperty(this, "id", { value: Lc++ }),
            (this.uuid = sc()),
            (this.data = t),
            (this.version = 0);
        }
        set needsUpdate(t) {
          !0 === t && this.version++;
        }
        toJSON(t) {
          const e = void 0 === t || "string" == typeof t;
          if (!e && void 0 !== t.images[this.uuid]) return t.images[this.uuid];
          const n = { uuid: this.uuid, url: "" },
            r = this.data;
          if (null !== r) {
            let t;
            if (Array.isArray(r)) {
              t = [];
              for (let e = 0, n = r.length; e < n; e++)
                r[e].isDataTexture ? t.push(Uc(r[e].image)) : t.push(Uc(r[e]));
            } else t = Uc(r);
            n.url = t;
          }
          return e || (t.images[this.uuid] = n), n;
        }
      }
      function Uc(t) {
        return ("undefined" != typeof HTMLImageElement &&
          t instanceof HTMLImageElement) ||
          ("undefined" != typeof HTMLCanvasElement &&
            t instanceof HTMLCanvasElement) ||
          ("undefined" != typeof ImageBitmap && t instanceof ImageBitmap)
          ? Nc.getDataURL(t)
          : t.data
            ? {
                data: Array.from(t.data),
                width: t.width,
                height: t.height,
                type: t.data.constructor.name,
              }
            : (console.warn("THREE.Texture: Unable to serialize Texture."), {});
      }
      let Fc = 0;
      class Bc extends rc {
        constructor(
          t = Bc.DEFAULT_IMAGE,
          e = Bc.DEFAULT_MAPPING,
          n = 1001,
          r = 1001,
          i = xh,
          o = Sh,
          a = Nh,
          s = Mh,
          l = Bc.DEFAULT_ANISOTROPY,
          u = "",
        ) {
          super(),
            (this.isTexture = !0),
            Object.defineProperty(this, "id", { value: Fc++ }),
            (this.uuid = sc()),
            (this.name = ""),
            (this.source = new Dc(t)),
            (this.mipmaps = []),
            (this.mapping = e),
            (this.channel = 0),
            (this.wrapS = n),
            (this.wrapT = r),
            (this.magFilter = i),
            (this.minFilter = o),
            (this.anisotropy = l),
            (this.format = a),
            (this.internalFormat = null),
            (this.type = s),
            (this.offset = new vc(0, 0)),
            (this.repeat = new vc(1, 1)),
            (this.center = new vc(0, 0)),
            (this.rotation = 0),
            (this.matrixAutoUpdate = !0),
            (this.matrix = new yc()),
            (this.generateMipmaps = !0),
            (this.premultiplyAlpha = !1),
            (this.flipY = !0),
            (this.unpackAlignment = 4),
            "string" == typeof u
              ? (this.colorSpace = u)
              : (Sc(
                  "THREE.Texture: Property .encoding has been replaced by .colorSpace.",
                ),
                (this.colorSpace = u === Yh ? qh : "")),
            (this.userData = {}),
            (this.version = 0),
            (this.onUpdate = null),
            (this.isRenderTargetTexture = !1),
            (this.needsPMREMUpdate = !1);
        }
        get image() {
          return this.source.data;
        }
        set image(t = null) {
          this.source.data = t;
        }
        updateMatrix() {
          this.matrix.setUvTransform(
            this.offset.x,
            this.offset.y,
            this.repeat.x,
            this.repeat.y,
            this.rotation,
            this.center.x,
            this.center.y,
          );
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(t) {
          return (
            (this.name = t.name),
            (this.source = t.source),
            (this.mipmaps = t.mipmaps.slice(0)),
            (this.mapping = t.mapping),
            (this.channel = t.channel),
            (this.wrapS = t.wrapS),
            (this.wrapT = t.wrapT),
            (this.magFilter = t.magFilter),
            (this.minFilter = t.minFilter),
            (this.anisotropy = t.anisotropy),
            (this.format = t.format),
            (this.internalFormat = t.internalFormat),
            (this.type = t.type),
            this.offset.copy(t.offset),
            this.repeat.copy(t.repeat),
            this.center.copy(t.center),
            (this.rotation = t.rotation),
            (this.matrixAutoUpdate = t.matrixAutoUpdate),
            this.matrix.copy(t.matrix),
            (this.generateMipmaps = t.generateMipmaps),
            (this.premultiplyAlpha = t.premultiplyAlpha),
            (this.flipY = t.flipY),
            (this.unpackAlignment = t.unpackAlignment),
            (this.colorSpace = t.colorSpace),
            (this.userData = JSON.parse(JSON.stringify(t.userData))),
            (this.needsUpdate = !0),
            this
          );
        }
        toJSON(t) {
          const e = void 0 === t || "string" == typeof t;
          if (!e && void 0 !== t.textures[this.uuid])
            return t.textures[this.uuid];
          const n = {
            metadata: {
              version: 4.6,
              type: "Texture",
              generator: "Texture.toJSON",
            },
            uuid: this.uuid,
            name: this.name,
            image: this.source.toJSON(t).uuid,
            mapping: this.mapping,
            channel: this.channel,
            repeat: [this.repeat.x, this.repeat.y],
            offset: [this.offset.x, this.offset.y],
            center: [this.center.x, this.center.y],
            rotation: this.rotation,
            wrap: [this.wrapS, this.wrapT],
            format: this.format,
            internalFormat: this.internalFormat,
            type: this.type,
            colorSpace: this.colorSpace,
            minFilter: this.minFilter,
            magFilter: this.magFilter,
            anisotropy: this.anisotropy,
            flipY: this.flipY,
            generateMipmaps: this.generateMipmaps,
            premultiplyAlpha: this.premultiplyAlpha,
            unpackAlignment: this.unpackAlignment,
          };
          return (
            Object.keys(this.userData).length > 0 &&
              (n.userData = this.userData),
            e || (t.textures[this.uuid] = n),
            n
          );
        }
        dispose() {
          this.dispatchEvent({ type: "dispose" });
        }
        transformUv(t) {
          if (300 !== this.mapping) return t;
          if ((t.applyMatrix3(this.matrix), t.x < 0 || t.x > 1))
            switch (this.wrapS) {
              case vh:
                t.x = t.x - Math.floor(t.x);
                break;
              case yh:
                t.x = t.x < 0 ? 0 : 1;
                break;
              case Eh:
                1 === Math.abs(Math.floor(t.x) % 2)
                  ? (t.x = Math.ceil(t.x) - t.x)
                  : (t.x = t.x - Math.floor(t.x));
            }
          if (t.y < 0 || t.y > 1)
            switch (this.wrapT) {
              case vh:
                t.y = t.y - Math.floor(t.y);
                break;
              case yh:
                t.y = t.y < 0 ? 0 : 1;
                break;
              case Eh:
                1 === Math.abs(Math.floor(t.y) % 2)
                  ? (t.y = Math.ceil(t.y) - t.y)
                  : (t.y = t.y - Math.floor(t.y));
            }
          return this.flipY && (t.y = 1 - t.y), t;
        }
        set needsUpdate(t) {
          !0 === t && (this.version++, (this.source.needsUpdate = !0));
        }
        get encoding() {
          return (
            Sc(
              "THREE.Texture: Property .encoding has been replaced by .colorSpace.",
            ),
            this.colorSpace === qh ? Yh : 3e3
          );
        }
        set encoding(t) {
          Sc(
            "THREE.Texture: Property .encoding has been replaced by .colorSpace.",
          ),
            (this.colorSpace = t === Yh ? qh : "");
        }
      }
      (Bc.DEFAULT_IMAGE = null),
        (Bc.DEFAULT_MAPPING = 300),
        (Bc.DEFAULT_ANISOTROPY = 1);
      class Gc {
        constructor(t = 0, e = 0, n = 0, r = 1) {
          (Gc.prototype.isVector4 = !0),
            (this.x = t),
            (this.y = e),
            (this.z = n),
            (this.w = r);
        }
        get width() {
          return this.z;
        }
        set width(t) {
          this.z = t;
        }
        get height() {
          return this.w;
        }
        set height(t) {
          this.w = t;
        }
        set(t, e, n, r) {
          return (this.x = t), (this.y = e), (this.z = n), (this.w = r), this;
        }
        setScalar(t) {
          return (this.x = t), (this.y = t), (this.z = t), (this.w = t), this;
        }
        setX(t) {
          return (this.x = t), this;
        }
        setY(t) {
          return (this.y = t), this;
        }
        setZ(t) {
          return (this.z = t), this;
        }
        setW(t) {
          return (this.w = t), this;
        }
        setComponent(t, e) {
          switch (t) {
            case 0:
              this.x = e;
              break;
            case 1:
              this.y = e;
              break;
            case 2:
              this.z = e;
              break;
            case 3:
              this.w = e;
              break;
            default:
              throw new Error("index is out of range: " + t);
          }
          return this;
        }
        getComponent(t) {
          switch (t) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            case 2:
              return this.z;
            case 3:
              return this.w;
            default:
              throw new Error("index is out of range: " + t);
          }
        }
        clone() {
          return new this.constructor(this.x, this.y, this.z, this.w);
        }
        copy(t) {
          return (
            (this.x = t.x),
            (this.y = t.y),
            (this.z = t.z),
            (this.w = void 0 !== t.w ? t.w : 1),
            this
          );
        }
        add(t) {
          return (
            (this.x += t.x),
            (this.y += t.y),
            (this.z += t.z),
            (this.w += t.w),
            this
          );
        }
        addScalar(t) {
          return (
            (this.x += t), (this.y += t), (this.z += t), (this.w += t), this
          );
        }
        addVectors(t, e) {
          return (
            (this.x = t.x + e.x),
            (this.y = t.y + e.y),
            (this.z = t.z + e.z),
            (this.w = t.w + e.w),
            this
          );
        }
        addScaledVector(t, e) {
          return (
            (this.x += t.x * e),
            (this.y += t.y * e),
            (this.z += t.z * e),
            (this.w += t.w * e),
            this
          );
        }
        sub(t) {
          return (
            (this.x -= t.x),
            (this.y -= t.y),
            (this.z -= t.z),
            (this.w -= t.w),
            this
          );
        }
        subScalar(t) {
          return (
            (this.x -= t), (this.y -= t), (this.z -= t), (this.w -= t), this
          );
        }
        subVectors(t, e) {
          return (
            (this.x = t.x - e.x),
            (this.y = t.y - e.y),
            (this.z = t.z - e.z),
            (this.w = t.w - e.w),
            this
          );
        }
        multiply(t) {
          return (
            (this.x *= t.x),
            (this.y *= t.y),
            (this.z *= t.z),
            (this.w *= t.w),
            this
          );
        }
        multiplyScalar(t) {
          return (
            (this.x *= t), (this.y *= t), (this.z *= t), (this.w *= t), this
          );
        }
        applyMatrix4(t) {
          const e = this.x,
            n = this.y,
            r = this.z,
            i = this.w,
            o = t.elements;
          return (
            (this.x = o[0] * e + o[4] * n + o[8] * r + o[12] * i),
            (this.y = o[1] * e + o[5] * n + o[9] * r + o[13] * i),
            (this.z = o[2] * e + o[6] * n + o[10] * r + o[14] * i),
            (this.w = o[3] * e + o[7] * n + o[11] * r + o[15] * i),
            this
          );
        }
        divideScalar(t) {
          return this.multiplyScalar(1 / t);
        }
        setAxisAngleFromQuaternion(t) {
          this.w = 2 * Math.acos(t.w);
          const e = Math.sqrt(1 - t.w * t.w);
          return (
            e < 1e-4
              ? ((this.x = 1), (this.y = 0), (this.z = 0))
              : ((this.x = t.x / e), (this.y = t.y / e), (this.z = t.z / e)),
            this
          );
        }
        setAxisAngleFromRotationMatrix(t) {
          let e, n, r, i;
          const o = 0.01,
            a = 0.1,
            s = t.elements,
            l = s[0],
            u = s[4],
            h = s[8],
            c = s[1],
            d = s[5],
            f = s[9],
            p = s[2],
            m = s[6],
            _ = s[10];
          if (
            Math.abs(u - c) < o &&
            Math.abs(h - p) < o &&
            Math.abs(f - m) < o
          ) {
            if (
              Math.abs(u + c) < a &&
              Math.abs(h + p) < a &&
              Math.abs(f + m) < a &&
              Math.abs(l + d + _ - 3) < a
            )
              return this.set(1, 0, 0, 0), this;
            e = Math.PI;
            const t = (l + 1) / 2,
              s = (d + 1) / 2,
              g = (_ + 1) / 2,
              v = (u + c) / 4,
              y = (h + p) / 4,
              E = (f + m) / 4;
            return (
              t > s && t > g
                ? t < o
                  ? ((n = 0), (r = 0.707106781), (i = 0.707106781))
                  : ((n = Math.sqrt(t)), (r = v / n), (i = y / n))
                : s > g
                  ? s < o
                    ? ((n = 0.707106781), (r = 0), (i = 0.707106781))
                    : ((r = Math.sqrt(s)), (n = v / r), (i = E / r))
                  : g < o
                    ? ((n = 0.707106781), (r = 0.707106781), (i = 0))
                    : ((i = Math.sqrt(g)), (n = y / i), (r = E / i)),
              this.set(n, r, i, e),
              this
            );
          }
          let g = Math.sqrt(
            (m - f) * (m - f) + (h - p) * (h - p) + (c - u) * (c - u),
          );
          return (
            Math.abs(g) < 0.001 && (g = 1),
            (this.x = (m - f) / g),
            (this.y = (h - p) / g),
            (this.z = (c - u) / g),
            (this.w = Math.acos((l + d + _ - 1) / 2)),
            this
          );
        }
        min(t) {
          return (
            (this.x = Math.min(this.x, t.x)),
            (this.y = Math.min(this.y, t.y)),
            (this.z = Math.min(this.z, t.z)),
            (this.w = Math.min(this.w, t.w)),
            this
          );
        }
        max(t) {
          return (
            (this.x = Math.max(this.x, t.x)),
            (this.y = Math.max(this.y, t.y)),
            (this.z = Math.max(this.z, t.z)),
            (this.w = Math.max(this.w, t.w)),
            this
          );
        }
        clamp(t, e) {
          return (
            (this.x = Math.max(t.x, Math.min(e.x, this.x))),
            (this.y = Math.max(t.y, Math.min(e.y, this.y))),
            (this.z = Math.max(t.z, Math.min(e.z, this.z))),
            (this.w = Math.max(t.w, Math.min(e.w, this.w))),
            this
          );
        }
        clampScalar(t, e) {
          return (
            (this.x = Math.max(t, Math.min(e, this.x))),
            (this.y = Math.max(t, Math.min(e, this.y))),
            (this.z = Math.max(t, Math.min(e, this.z))),
            (this.w = Math.max(t, Math.min(e, this.w))),
            this
          );
        }
        clampLength(t, e) {
          const n = this.length();
          return this.divideScalar(n || 1).multiplyScalar(
            Math.max(t, Math.min(e, n)),
          );
        }
        floor() {
          return (
            (this.x = Math.floor(this.x)),
            (this.y = Math.floor(this.y)),
            (this.z = Math.floor(this.z)),
            (this.w = Math.floor(this.w)),
            this
          );
        }
        ceil() {
          return (
            (this.x = Math.ceil(this.x)),
            (this.y = Math.ceil(this.y)),
            (this.z = Math.ceil(this.z)),
            (this.w = Math.ceil(this.w)),
            this
          );
        }
        round() {
          return (
            (this.x = Math.round(this.x)),
            (this.y = Math.round(this.y)),
            (this.z = Math.round(this.z)),
            (this.w = Math.round(this.w)),
            this
          );
        }
        roundToZero() {
          return (
            (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
            (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
            (this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
            (this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w)),
            this
          );
        }
        negate() {
          return (
            (this.x = -this.x),
            (this.y = -this.y),
            (this.z = -this.z),
            (this.w = -this.w),
            this
          );
        }
        dot(t) {
          return this.x * t.x + this.y * t.y + this.z * t.z + this.w * t.w;
        }
        lengthSq() {
          return (
            this.x * this.x +
            this.y * this.y +
            this.z * this.z +
            this.w * this.w
          );
        }
        length() {
          return Math.sqrt(
            this.x * this.x +
              this.y * this.y +
              this.z * this.z +
              this.w * this.w,
          );
        }
        manhattanLength() {
          return (
            Math.abs(this.x) +
            Math.abs(this.y) +
            Math.abs(this.z) +
            Math.abs(this.w)
          );
        }
        normalize() {
          return this.divideScalar(this.length() || 1);
        }
        setLength(t) {
          return this.normalize().multiplyScalar(t);
        }
        lerp(t, e) {
          return (
            (this.x += (t.x - this.x) * e),
            (this.y += (t.y - this.y) * e),
            (this.z += (t.z - this.z) * e),
            (this.w += (t.w - this.w) * e),
            this
          );
        }
        lerpVectors(t, e, n) {
          return (
            (this.x = t.x + (e.x - t.x) * n),
            (this.y = t.y + (e.y - t.y) * n),
            (this.z = t.z + (e.z - t.z) * n),
            (this.w = t.w + (e.w - t.w) * n),
            this
          );
        }
        equals(t) {
          return (
            t.x === this.x && t.y === this.y && t.z === this.z && t.w === this.w
          );
        }
        fromArray(t, e = 0) {
          return (
            (this.x = t[e]),
            (this.y = t[e + 1]),
            (this.z = t[e + 2]),
            (this.w = t[e + 3]),
            this
          );
        }
        toArray(t = [], e = 0) {
          return (
            (t[e] = this.x),
            (t[e + 1] = this.y),
            (t[e + 2] = this.z),
            (t[e + 3] = this.w),
            t
          );
        }
        fromBufferAttribute(t, e) {
          return (
            (this.x = t.getX(e)),
            (this.y = t.getY(e)),
            (this.z = t.getZ(e)),
            (this.w = t.getW(e)),
            this
          );
        }
        random() {
          return (
            (this.x = Math.random()),
            (this.y = Math.random()),
            (this.z = Math.random()),
            (this.w = Math.random()),
            this
          );
        }
        *[Symbol.iterator]() {
          yield this.x, yield this.y, yield this.z, yield this.w;
        }
      }
      class kc extends rc {
        constructor(t = 1, e = 1, n = {}) {
          super(),
            (this.isRenderTarget = !0),
            (this.width = t),
            (this.height = e),
            (this.depth = 1),
            (this.scissor = new Gc(0, 0, t, e)),
            (this.scissorTest = !1),
            (this.viewport = new Gc(0, 0, t, e));
          const r = { width: t, height: e, depth: 1 };
          void 0 !== n.encoding &&
            (Sc(
              "THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace.",
            ),
            (n.colorSpace = n.encoding === Yh ? qh : "")),
            (this.texture = new Bc(
              r,
              n.mapping,
              n.wrapS,
              n.wrapT,
              n.magFilter,
              n.minFilter,
              n.format,
              n.type,
              n.anisotropy,
              n.colorSpace,
            )),
            (this.texture.isRenderTargetTexture = !0),
            (this.texture.flipY = !1),
            (this.texture.generateMipmaps =
              void 0 !== n.generateMipmaps && n.generateMipmaps),
            (this.texture.internalFormat =
              void 0 !== n.internalFormat ? n.internalFormat : null),
            (this.texture.minFilter =
              void 0 !== n.minFilter ? n.minFilter : xh),
            (this.depthBuffer = void 0 === n.depthBuffer || n.depthBuffer),
            (this.stencilBuffer =
              void 0 !== n.stencilBuffer && n.stencilBuffer),
            (this.depthTexture =
              void 0 !== n.depthTexture ? n.depthTexture : null),
            (this.samples = void 0 !== n.samples ? n.samples : 0);
        }
        setSize(t, e, n = 1) {
          (this.width === t && this.height === e && this.depth === n) ||
            ((this.width = t),
            (this.height = e),
            (this.depth = n),
            (this.texture.image.width = t),
            (this.texture.image.height = e),
            (this.texture.image.depth = n),
            this.dispose()),
            this.viewport.set(0, 0, t, e),
            this.scissor.set(0, 0, t, e);
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(t) {
          (this.width = t.width),
            (this.height = t.height),
            (this.depth = t.depth),
            this.scissor.copy(t.scissor),
            (this.scissorTest = t.scissorTest),
            this.viewport.copy(t.viewport),
            (this.texture = t.texture.clone()),
            (this.texture.isRenderTargetTexture = !0);
          const e = Object.assign({}, t.texture.image);
          return (
            (this.texture.source = new Dc(e)),
            (this.depthBuffer = t.depthBuffer),
            (this.stencilBuffer = t.stencilBuffer),
            null !== t.depthTexture &&
              (this.depthTexture = t.depthTexture.clone()),
            (this.samples = t.samples),
            this
          );
        }
        dispose() {
          this.dispatchEvent({ type: "dispose" });
        }
      }
      class Hc extends kc {
        constructor(t = 1, e = 1, n = {}) {
          super(t, e, n), (this.isWebGLRenderTarget = !0);
        }
      }
      class zc extends Bc {
        constructor(t = null, e = 1, n = 1, r = 1) {
          super(null),
            (this.isDataArrayTexture = !0),
            (this.image = { data: t, width: e, height: n, depth: r }),
            (this.magFilter = Th),
            (this.minFilter = Th),
            (this.wrapR = yh),
            (this.generateMipmaps = !1),
            (this.flipY = !1),
            (this.unpackAlignment = 1);
        }
      }
      class Vc extends Bc {
        constructor(t = null, e = 1, n = 1, r = 1) {
          super(null),
            (this.isData3DTexture = !0),
            (this.image = { data: t, width: e, height: n, depth: r }),
            (this.magFilter = Th),
            (this.minFilter = Th),
            (this.wrapR = yh),
            (this.generateMipmaps = !1),
            (this.flipY = !1),
            (this.unpackAlignment = 1);
        }
      }
      class Xc {
        constructor(t = 0, e = 0, n = 0, r = 1) {
          (this.isQuaternion = !0),
            (this._x = t),
            (this._y = e),
            (this._z = n),
            (this._w = r);
        }
        static slerpFlat(t, e, n, r, i, o, a) {
          let s = n[r + 0],
            l = n[r + 1],
            u = n[r + 2],
            h = n[r + 3];
          const c = i[o + 0],
            d = i[o + 1],
            f = i[o + 2],
            p = i[o + 3];
          if (0 === a)
            return (
              (t[e + 0] = s),
              (t[e + 1] = l),
              (t[e + 2] = u),
              void (t[e + 3] = h)
            );
          if (1 === a)
            return (
              (t[e + 0] = c),
              (t[e + 1] = d),
              (t[e + 2] = f),
              void (t[e + 3] = p)
            );
          if (h !== p || s !== c || l !== d || u !== f) {
            let t = 1 - a;
            const e = s * c + l * d + u * f + h * p,
              n = e >= 0 ? 1 : -1,
              r = 1 - e * e;
            if (r > Number.EPSILON) {
              const i = Math.sqrt(r),
                o = Math.atan2(i, e * n);
              (t = Math.sin(t * o) / i), (a = Math.sin(a * o) / i);
            }
            const i = a * n;
            if (
              ((s = s * t + c * i),
              (l = l * t + d * i),
              (u = u * t + f * i),
              (h = h * t + p * i),
              t === 1 - a)
            ) {
              const t = 1 / Math.sqrt(s * s + l * l + u * u + h * h);
              (s *= t), (l *= t), (u *= t), (h *= t);
            }
          }
          (t[e] = s), (t[e + 1] = l), (t[e + 2] = u), (t[e + 3] = h);
        }
        static multiplyQuaternionsFlat(t, e, n, r, i, o) {
          const a = n[r],
            s = n[r + 1],
            l = n[r + 2],
            u = n[r + 3],
            h = i[o],
            c = i[o + 1],
            d = i[o + 2],
            f = i[o + 3];
          return (
            (t[e] = a * f + u * h + s * d - l * c),
            (t[e + 1] = s * f + u * c + l * h - a * d),
            (t[e + 2] = l * f + u * d + a * c - s * h),
            (t[e + 3] = u * f - a * h - s * c - l * d),
            t
          );
        }
        get x() {
          return this._x;
        }
        set x(t) {
          (this._x = t), this._onChangeCallback();
        }
        get y() {
          return this._y;
        }
        set y(t) {
          (this._y = t), this._onChangeCallback();
        }
        get z() {
          return this._z;
        }
        set z(t) {
          (this._z = t), this._onChangeCallback();
        }
        get w() {
          return this._w;
        }
        set w(t) {
          (this._w = t), this._onChangeCallback();
        }
        set(t, e, n, r) {
          return (
            (this._x = t),
            (this._y = e),
            (this._z = n),
            (this._w = r),
            this._onChangeCallback(),
            this
          );
        }
        clone() {
          return new this.constructor(this._x, this._y, this._z, this._w);
        }
        copy(t) {
          return (
            (this._x = t.x),
            (this._y = t.y),
            (this._z = t.z),
            (this._w = t.w),
            this._onChangeCallback(),
            this
          );
        }
        setFromEuler(t, e) {
          const n = t._x,
            r = t._y,
            i = t._z,
            o = t._order,
            a = Math.cos,
            s = Math.sin,
            l = a(n / 2),
            u = a(r / 2),
            h = a(i / 2),
            c = s(n / 2),
            d = s(r / 2),
            f = s(i / 2);
          switch (o) {
            case "XYZ":
              (this._x = c * u * h + l * d * f),
                (this._y = l * d * h - c * u * f),
                (this._z = l * u * f + c * d * h),
                (this._w = l * u * h - c * d * f);
              break;
            case "YXZ":
              (this._x = c * u * h + l * d * f),
                (this._y = l * d * h - c * u * f),
                (this._z = l * u * f - c * d * h),
                (this._w = l * u * h + c * d * f);
              break;
            case "ZXY":
              (this._x = c * u * h - l * d * f),
                (this._y = l * d * h + c * u * f),
                (this._z = l * u * f + c * d * h),
                (this._w = l * u * h - c * d * f);
              break;
            case "ZYX":
              (this._x = c * u * h - l * d * f),
                (this._y = l * d * h + c * u * f),
                (this._z = l * u * f - c * d * h),
                (this._w = l * u * h + c * d * f);
              break;
            case "YZX":
              (this._x = c * u * h + l * d * f),
                (this._y = l * d * h + c * u * f),
                (this._z = l * u * f - c * d * h),
                (this._w = l * u * h - c * d * f);
              break;
            case "XZY":
              (this._x = c * u * h - l * d * f),
                (this._y = l * d * h - c * u * f),
                (this._z = l * u * f + c * d * h),
                (this._w = l * u * h + c * d * f);
              break;
            default:
              console.warn(
                "THREE.Quaternion: .setFromEuler() encountered an unknown order: " +
                  o,
              );
          }
          return !1 !== e && this._onChangeCallback(), this;
        }
        setFromAxisAngle(t, e) {
          const n = e / 2,
            r = Math.sin(n);
          return (
            (this._x = t.x * r),
            (this._y = t.y * r),
            (this._z = t.z * r),
            (this._w = Math.cos(n)),
            this._onChangeCallback(),
            this
          );
        }
        setFromRotationMatrix(t) {
          const e = t.elements,
            n = e[0],
            r = e[4],
            i = e[8],
            o = e[1],
            a = e[5],
            s = e[9],
            l = e[2],
            u = e[6],
            h = e[10],
            c = n + a + h;
          if (c > 0) {
            const t = 0.5 / Math.sqrt(c + 1);
            (this._w = 0.25 / t),
              (this._x = (u - s) * t),
              (this._y = (i - l) * t),
              (this._z = (o - r) * t);
          } else if (n > a && n > h) {
            const t = 2 * Math.sqrt(1 + n - a - h);
            (this._w = (u - s) / t),
              (this._x = 0.25 * t),
              (this._y = (r + o) / t),
              (this._z = (i + l) / t);
          } else if (a > h) {
            const t = 2 * Math.sqrt(1 + a - n - h);
            (this._w = (i - l) / t),
              (this._x = (r + o) / t),
              (this._y = 0.25 * t),
              (this._z = (s + u) / t);
          } else {
            const t = 2 * Math.sqrt(1 + h - n - a);
            (this._w = (o - r) / t),
              (this._x = (i + l) / t),
              (this._y = (s + u) / t),
              (this._z = 0.25 * t);
          }
          return this._onChangeCallback(), this;
        }
        setFromUnitVectors(t, e) {
          let n = t.dot(e) + 1;
          return (
            n < Number.EPSILON
              ? ((n = 0),
                Math.abs(t.x) > Math.abs(t.z)
                  ? ((this._x = -t.y),
                    (this._y = t.x),
                    (this._z = 0),
                    (this._w = n))
                  : ((this._x = 0),
                    (this._y = -t.z),
                    (this._z = t.y),
                    (this._w = n)))
              : ((this._x = t.y * e.z - t.z * e.y),
                (this._y = t.z * e.x - t.x * e.z),
                (this._z = t.x * e.y - t.y * e.x),
                (this._w = n)),
            this.normalize()
          );
        }
        angleTo(t) {
          return 2 * Math.acos(Math.abs(lc(this.dot(t), -1, 1)));
        }
        rotateTowards(t, e) {
          const n = this.angleTo(t);
          if (0 === n) return this;
          const r = Math.min(1, e / n);
          return this.slerp(t, r), this;
        }
        identity() {
          return this.set(0, 0, 0, 1);
        }
        invert() {
          return this.conjugate();
        }
        conjugate() {
          return (
            (this._x *= -1),
            (this._y *= -1),
            (this._z *= -1),
            this._onChangeCallback(),
            this
          );
        }
        dot(t) {
          return (
            this._x * t._x + this._y * t._y + this._z * t._z + this._w * t._w
          );
        }
        lengthSq() {
          return (
            this._x * this._x +
            this._y * this._y +
            this._z * this._z +
            this._w * this._w
          );
        }
        length() {
          return Math.sqrt(
            this._x * this._x +
              this._y * this._y +
              this._z * this._z +
              this._w * this._w,
          );
        }
        normalize() {
          let t = this.length();
          return (
            0 === t
              ? ((this._x = 0), (this._y = 0), (this._z = 0), (this._w = 1))
              : ((t = 1 / t),
                (this._x = this._x * t),
                (this._y = this._y * t),
                (this._z = this._z * t),
                (this._w = this._w * t)),
            this._onChangeCallback(),
            this
          );
        }
        multiply(t) {
          return this.multiplyQuaternions(this, t);
        }
        premultiply(t) {
          return this.multiplyQuaternions(t, this);
        }
        multiplyQuaternions(t, e) {
          const n = t._x,
            r = t._y,
            i = t._z,
            o = t._w,
            a = e._x,
            s = e._y,
            l = e._z,
            u = e._w;
          return (
            (this._x = n * u + o * a + r * l - i * s),
            (this._y = r * u + o * s + i * a - n * l),
            (this._z = i * u + o * l + n * s - r * a),
            (this._w = o * u - n * a - r * s - i * l),
            this._onChangeCallback(),
            this
          );
        }
        slerp(t, e) {
          if (0 === e) return this;
          if (1 === e) return this.copy(t);
          const n = this._x,
            r = this._y,
            i = this._z,
            o = this._w;
          let a = o * t._w + n * t._x + r * t._y + i * t._z;
          if (
            (a < 0
              ? ((this._w = -t._w),
                (this._x = -t._x),
                (this._y = -t._y),
                (this._z = -t._z),
                (a = -a))
              : this.copy(t),
            a >= 1)
          )
            return (
              (this._w = o), (this._x = n), (this._y = r), (this._z = i), this
            );
          const s = 1 - a * a;
          if (s <= Number.EPSILON) {
            const t = 1 - e;
            return (
              (this._w = t * o + e * this._w),
              (this._x = t * n + e * this._x),
              (this._y = t * r + e * this._y),
              (this._z = t * i + e * this._z),
              this.normalize(),
              this._onChangeCallback(),
              this
            );
          }
          const l = Math.sqrt(s),
            u = Math.atan2(l, a),
            h = Math.sin((1 - e) * u) / l,
            c = Math.sin(e * u) / l;
          return (
            (this._w = o * h + this._w * c),
            (this._x = n * h + this._x * c),
            (this._y = r * h + this._y * c),
            (this._z = i * h + this._z * c),
            this._onChangeCallback(),
            this
          );
        }
        slerpQuaternions(t, e, n) {
          return this.copy(t).slerp(e, n);
        }
        random() {
          const t = Math.random(),
            e = Math.sqrt(1 - t),
            n = Math.sqrt(t),
            r = 2 * Math.PI * Math.random(),
            i = 2 * Math.PI * Math.random();
          return this.set(
            e * Math.cos(r),
            n * Math.sin(i),
            n * Math.cos(i),
            e * Math.sin(r),
          );
        }
        equals(t) {
          return (
            t._x === this._x &&
            t._y === this._y &&
            t._z === this._z &&
            t._w === this._w
          );
        }
        fromArray(t, e = 0) {
          return (
            (this._x = t[e]),
            (this._y = t[e + 1]),
            (this._z = t[e + 2]),
            (this._w = t[e + 3]),
            this._onChangeCallback(),
            this
          );
        }
        toArray(t = [], e = 0) {
          return (
            (t[e] = this._x),
            (t[e + 1] = this._y),
            (t[e + 2] = this._z),
            (t[e + 3] = this._w),
            t
          );
        }
        fromBufferAttribute(t, e) {
          return (
            (this._x = t.getX(e)),
            (this._y = t.getY(e)),
            (this._z = t.getZ(e)),
            (this._w = t.getW(e)),
            this
          );
        }
        toJSON() {
          return this.toArray();
        }
        _onChange(t) {
          return (this._onChangeCallback = t), this;
        }
        _onChangeCallback() {}
        *[Symbol.iterator]() {
          yield this._x, yield this._y, yield this._z, yield this._w;
        }
      }
      class Wc {
        constructor(t = 0, e = 0, n = 0) {
          (Wc.prototype.isVector3 = !0),
            (this.x = t),
            (this.y = e),
            (this.z = n);
        }
        set(t, e, n) {
          return (
            void 0 === n && (n = this.z),
            (this.x = t),
            (this.y = e),
            (this.z = n),
            this
          );
        }
        setScalar(t) {
          return (this.x = t), (this.y = t), (this.z = t), this;
        }
        setX(t) {
          return (this.x = t), this;
        }
        setY(t) {
          return (this.y = t), this;
        }
        setZ(t) {
          return (this.z = t), this;
        }
        setComponent(t, e) {
          switch (t) {
            case 0:
              this.x = e;
              break;
            case 1:
              this.y = e;
              break;
            case 2:
              this.z = e;
              break;
            default:
              throw new Error("index is out of range: " + t);
          }
          return this;
        }
        getComponent(t) {
          switch (t) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            case 2:
              return this.z;
            default:
              throw new Error("index is out of range: " + t);
          }
        }
        clone() {
          return new this.constructor(this.x, this.y, this.z);
        }
        copy(t) {
          return (this.x = t.x), (this.y = t.y), (this.z = t.z), this;
        }
        add(t) {
          return (this.x += t.x), (this.y += t.y), (this.z += t.z), this;
        }
        addScalar(t) {
          return (this.x += t), (this.y += t), (this.z += t), this;
        }
        addVectors(t, e) {
          return (
            (this.x = t.x + e.x),
            (this.y = t.y + e.y),
            (this.z = t.z + e.z),
            this
          );
        }
        addScaledVector(t, e) {
          return (
            (this.x += t.x * e), (this.y += t.y * e), (this.z += t.z * e), this
          );
        }
        sub(t) {
          return (this.x -= t.x), (this.y -= t.y), (this.z -= t.z), this;
        }
        subScalar(t) {
          return (this.x -= t), (this.y -= t), (this.z -= t), this;
        }
        subVectors(t, e) {
          return (
            (this.x = t.x - e.x),
            (this.y = t.y - e.y),
            (this.z = t.z - e.z),
            this
          );
        }
        multiply(t) {
          return (this.x *= t.x), (this.y *= t.y), (this.z *= t.z), this;
        }
        multiplyScalar(t) {
          return (this.x *= t), (this.y *= t), (this.z *= t), this;
        }
        multiplyVectors(t, e) {
          return (
            (this.x = t.x * e.x),
            (this.y = t.y * e.y),
            (this.z = t.z * e.z),
            this
          );
        }
        applyEuler(t) {
          return this.applyQuaternion(Yc.setFromEuler(t));
        }
        applyAxisAngle(t, e) {
          return this.applyQuaternion(Yc.setFromAxisAngle(t, e));
        }
        applyMatrix3(t) {
          const e = this.x,
            n = this.y,
            r = this.z,
            i = t.elements;
          return (
            (this.x = i[0] * e + i[3] * n + i[6] * r),
            (this.y = i[1] * e + i[4] * n + i[7] * r),
            (this.z = i[2] * e + i[5] * n + i[8] * r),
            this
          );
        }
        applyNormalMatrix(t) {
          return this.applyMatrix3(t).normalize();
        }
        applyMatrix4(t) {
          const e = this.x,
            n = this.y,
            r = this.z,
            i = t.elements,
            o = 1 / (i[3] * e + i[7] * n + i[11] * r + i[15]);
          return (
            (this.x = (i[0] * e + i[4] * n + i[8] * r + i[12]) * o),
            (this.y = (i[1] * e + i[5] * n + i[9] * r + i[13]) * o),
            (this.z = (i[2] * e + i[6] * n + i[10] * r + i[14]) * o),
            this
          );
        }
        applyQuaternion(t) {
          const e = this.x,
            n = this.y,
            r = this.z,
            i = t.x,
            o = t.y,
            a = t.z,
            s = t.w,
            l = s * e + o * r - a * n,
            u = s * n + a * e - i * r,
            h = s * r + i * n - o * e,
            c = -i * e - o * n - a * r;
          return (
            (this.x = l * s + c * -i + u * -a - h * -o),
            (this.y = u * s + c * -o + h * -i - l * -a),
            (this.z = h * s + c * -a + l * -o - u * -i),
            this
          );
        }
        project(t) {
          return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(
            t.projectionMatrix,
          );
        }
        unproject(t) {
          return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(
            t.matrixWorld,
          );
        }
        transformDirection(t) {
          const e = this.x,
            n = this.y,
            r = this.z,
            i = t.elements;
          return (
            (this.x = i[0] * e + i[4] * n + i[8] * r),
            (this.y = i[1] * e + i[5] * n + i[9] * r),
            (this.z = i[2] * e + i[6] * n + i[10] * r),
            this.normalize()
          );
        }
        divide(t) {
          return (this.x /= t.x), (this.y /= t.y), (this.z /= t.z), this;
        }
        divideScalar(t) {
          return this.multiplyScalar(1 / t);
        }
        min(t) {
          return (
            (this.x = Math.min(this.x, t.x)),
            (this.y = Math.min(this.y, t.y)),
            (this.z = Math.min(this.z, t.z)),
            this
          );
        }
        max(t) {
          return (
            (this.x = Math.max(this.x, t.x)),
            (this.y = Math.max(this.y, t.y)),
            (this.z = Math.max(this.z, t.z)),
            this
          );
        }
        clamp(t, e) {
          return (
            (this.x = Math.max(t.x, Math.min(e.x, this.x))),
            (this.y = Math.max(t.y, Math.min(e.y, this.y))),
            (this.z = Math.max(t.z, Math.min(e.z, this.z))),
            this
          );
        }
        clampScalar(t, e) {
          return (
            (this.x = Math.max(t, Math.min(e, this.x))),
            (this.y = Math.max(t, Math.min(e, this.y))),
            (this.z = Math.max(t, Math.min(e, this.z))),
            this
          );
        }
        clampLength(t, e) {
          const n = this.length();
          return this.divideScalar(n || 1).multiplyScalar(
            Math.max(t, Math.min(e, n)),
          );
        }
        floor() {
          return (
            (this.x = Math.floor(this.x)),
            (this.y = Math.floor(this.y)),
            (this.z = Math.floor(this.z)),
            this
          );
        }
        ceil() {
          return (
            (this.x = Math.ceil(this.x)),
            (this.y = Math.ceil(this.y)),
            (this.z = Math.ceil(this.z)),
            this
          );
        }
        round() {
          return (
            (this.x = Math.round(this.x)),
            (this.y = Math.round(this.y)),
            (this.z = Math.round(this.z)),
            this
          );
        }
        roundToZero() {
          return (
            (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
            (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
            (this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
            this
          );
        }
        negate() {
          return (
            (this.x = -this.x), (this.y = -this.y), (this.z = -this.z), this
          );
        }
        dot(t) {
          return this.x * t.x + this.y * t.y + this.z * t.z;
        }
        lengthSq() {
          return this.x * this.x + this.y * this.y + this.z * this.z;
        }
        length() {
          return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
        }
        manhattanLength() {
          return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
        }
        normalize() {
          return this.divideScalar(this.length() || 1);
        }
        setLength(t) {
          return this.normalize().multiplyScalar(t);
        }
        lerp(t, e) {
          return (
            (this.x += (t.x - this.x) * e),
            (this.y += (t.y - this.y) * e),
            (this.z += (t.z - this.z) * e),
            this
          );
        }
        lerpVectors(t, e, n) {
          return (
            (this.x = t.x + (e.x - t.x) * n),
            (this.y = t.y + (e.y - t.y) * n),
            (this.z = t.z + (e.z - t.z) * n),
            this
          );
        }
        cross(t) {
          return this.crossVectors(this, t);
        }
        crossVectors(t, e) {
          const n = t.x,
            r = t.y,
            i = t.z,
            o = e.x,
            a = e.y,
            s = e.z;
          return (
            (this.x = r * s - i * a),
            (this.y = i * o - n * s),
            (this.z = n * a - r * o),
            this
          );
        }
        projectOnVector(t) {
          const e = t.lengthSq();
          if (0 === e) return this.set(0, 0, 0);
          const n = t.dot(this) / e;
          return this.copy(t).multiplyScalar(n);
        }
        projectOnPlane(t) {
          return jc.copy(this).projectOnVector(t), this.sub(jc);
        }
        reflect(t) {
          return this.sub(jc.copy(t).multiplyScalar(2 * this.dot(t)));
        }
        angleTo(t) {
          const e = Math.sqrt(this.lengthSq() * t.lengthSq());
          if (0 === e) return Math.PI / 2;
          const n = this.dot(t) / e;
          return Math.acos(lc(n, -1, 1));
        }
        distanceTo(t) {
          return Math.sqrt(this.distanceToSquared(t));
        }
        distanceToSquared(t) {
          const e = this.x - t.x,
            n = this.y - t.y,
            r = this.z - t.z;
          return e * e + n * n + r * r;
        }
        manhattanDistanceTo(t) {
          return (
            Math.abs(this.x - t.x) +
            Math.abs(this.y - t.y) +
            Math.abs(this.z - t.z)
          );
        }
        setFromSpherical(t) {
          return this.setFromSphericalCoords(t.radius, t.phi, t.theta);
        }
        setFromSphericalCoords(t, e, n) {
          const r = Math.sin(e) * t;
          return (
            (this.x = r * Math.sin(n)),
            (this.y = Math.cos(e) * t),
            (this.z = r * Math.cos(n)),
            this
          );
        }
        setFromCylindrical(t) {
          return this.setFromCylindricalCoords(t.radius, t.theta, t.y);
        }
        setFromCylindricalCoords(t, e, n) {
          return (
            (this.x = t * Math.sin(e)),
            (this.y = n),
            (this.z = t * Math.cos(e)),
            this
          );
        }
        setFromMatrixPosition(t) {
          const e = t.elements;
          return (this.x = e[12]), (this.y = e[13]), (this.z = e[14]), this;
        }
        setFromMatrixScale(t) {
          const e = this.setFromMatrixColumn(t, 0).length(),
            n = this.setFromMatrixColumn(t, 1).length(),
            r = this.setFromMatrixColumn(t, 2).length();
          return (this.x = e), (this.y = n), (this.z = r), this;
        }
        setFromMatrixColumn(t, e) {
          return this.fromArray(t.elements, 4 * e);
        }
        setFromMatrix3Column(t, e) {
          return this.fromArray(t.elements, 3 * e);
        }
        setFromEuler(t) {
          return (this.x = t._x), (this.y = t._y), (this.z = t._z), this;
        }
        setFromColor(t) {
          return (this.x = t.r), (this.y = t.g), (this.z = t.b), this;
        }
        equals(t) {
          return t.x === this.x && t.y === this.y && t.z === this.z;
        }
        fromArray(t, e = 0) {
          return (
            (this.x = t[e]), (this.y = t[e + 1]), (this.z = t[e + 2]), this
          );
        }
        toArray(t = [], e = 0) {
          return (t[e] = this.x), (t[e + 1] = this.y), (t[e + 2] = this.z), t;
        }
        fromBufferAttribute(t, e) {
          return (
            (this.x = t.getX(e)),
            (this.y = t.getY(e)),
            (this.z = t.getZ(e)),
            this
          );
        }
        random() {
          return (
            (this.x = Math.random()),
            (this.y = Math.random()),
            (this.z = Math.random()),
            this
          );
        }
        randomDirection() {
          const t = 2 * (Math.random() - 0.5),
            e = Math.random() * Math.PI * 2,
            n = Math.sqrt(1 - t ** 2);
          return (
            (this.x = n * Math.cos(e)),
            (this.y = n * Math.sin(e)),
            (this.z = t),
            this
          );
        }
        *[Symbol.iterator]() {
          yield this.x, yield this.y, yield this.z;
        }
      }
      const jc = new Wc(),
        Yc = new Xc();
      class qc {
        constructor(
          t = new Wc(1 / 0, 1 / 0, 1 / 0),
          e = new Wc(-1 / 0, -1 / 0, -1 / 0),
        ) {
          (this.isBox3 = !0), (this.min = t), (this.max = e);
        }
        set(t, e) {
          return this.min.copy(t), this.max.copy(e), this;
        }
        setFromArray(t) {
          this.makeEmpty();
          for (let e = 0, n = t.length; e < n; e += 3)
            this.expandByPoint(Zc.fromArray(t, e));
          return this;
        }
        setFromBufferAttribute(t) {
          this.makeEmpty();
          for (let e = 0, n = t.count; e < n; e++)
            this.expandByPoint(Zc.fromBufferAttribute(t, e));
          return this;
        }
        setFromPoints(t) {
          this.makeEmpty();
          for (let e = 0, n = t.length; e < n; e++) this.expandByPoint(t[e]);
          return this;
        }
        setFromCenterAndSize(t, e) {
          const n = Zc.copy(e).multiplyScalar(0.5);
          return this.min.copy(t).sub(n), this.max.copy(t).add(n), this;
        }
        setFromObject(t, e = !1) {
          return this.makeEmpty(), this.expandByObject(t, e);
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(t) {
          return this.min.copy(t.min), this.max.copy(t.max), this;
        }
        makeEmpty() {
          return (
            (this.min.x = this.min.y = this.min.z = 1 / 0),
            (this.max.x = this.max.y = this.max.z = -1 / 0),
            this
          );
        }
        isEmpty() {
          return (
            this.max.x < this.min.x ||
            this.max.y < this.min.y ||
            this.max.z < this.min.z
          );
        }
        getCenter(t) {
          return this.isEmpty()
            ? t.set(0, 0, 0)
            : t.addVectors(this.min, this.max).multiplyScalar(0.5);
        }
        getSize(t) {
          return this.isEmpty()
            ? t.set(0, 0, 0)
            : t.subVectors(this.max, this.min);
        }
        expandByPoint(t) {
          return this.min.min(t), this.max.max(t), this;
        }
        expandByVector(t) {
          return this.min.sub(t), this.max.add(t), this;
        }
        expandByScalar(t) {
          return this.min.addScalar(-t), this.max.addScalar(t), this;
        }
        expandByObject(t, e = !1) {
          if ((t.updateWorldMatrix(!1, !1), void 0 !== t.boundingBox))
            null === t.boundingBox && t.computeBoundingBox(),
              Qc.copy(t.boundingBox),
              Qc.applyMatrix4(t.matrixWorld),
              this.union(Qc);
          else {
            const n = t.geometry;
            if (void 0 !== n)
              if (
                e &&
                void 0 !== n.attributes &&
                void 0 !== n.attributes.position
              ) {
                const e = n.attributes.position;
                for (let n = 0, r = e.count; n < r; n++)
                  Zc.fromBufferAttribute(e, n).applyMatrix4(t.matrixWorld),
                    this.expandByPoint(Zc);
              } else
                null === n.boundingBox && n.computeBoundingBox(),
                  Qc.copy(n.boundingBox),
                  Qc.applyMatrix4(t.matrixWorld),
                  this.union(Qc);
          }
          const n = t.children;
          for (let t = 0, r = n.length; t < r; t++)
            this.expandByObject(n[t], e);
          return this;
        }
        containsPoint(t) {
          return !(
            t.x < this.min.x ||
            t.x > this.max.x ||
            t.y < this.min.y ||
            t.y > this.max.y ||
            t.z < this.min.z ||
            t.z > this.max.z
          );
        }
        containsBox(t) {
          return (
            this.min.x <= t.min.x &&
            t.max.x <= this.max.x &&
            this.min.y <= t.min.y &&
            t.max.y <= this.max.y &&
            this.min.z <= t.min.z &&
            t.max.z <= this.max.z
          );
        }
        getParameter(t, e) {
          return e.set(
            (t.x - this.min.x) / (this.max.x - this.min.x),
            (t.y - this.min.y) / (this.max.y - this.min.y),
            (t.z - this.min.z) / (this.max.z - this.min.z),
          );
        }
        intersectsBox(t) {
          return !(
            t.max.x < this.min.x ||
            t.min.x > this.max.x ||
            t.max.y < this.min.y ||
            t.min.y > this.max.y ||
            t.max.z < this.min.z ||
            t.min.z > this.max.z
          );
        }
        intersectsSphere(t) {
          return (
            this.clampPoint(t.center, Zc),
            Zc.distanceToSquared(t.center) <= t.radius * t.radius
          );
        }
        intersectsPlane(t) {
          let e, n;
          return (
            t.normal.x > 0
              ? ((e = t.normal.x * this.min.x), (n = t.normal.x * this.max.x))
              : ((e = t.normal.x * this.max.x), (n = t.normal.x * this.min.x)),
            t.normal.y > 0
              ? ((e += t.normal.y * this.min.y), (n += t.normal.y * this.max.y))
              : ((e += t.normal.y * this.max.y),
                (n += t.normal.y * this.min.y)),
            t.normal.z > 0
              ? ((e += t.normal.z * this.min.z), (n += t.normal.z * this.max.z))
              : ((e += t.normal.z * this.max.z),
                (n += t.normal.z * this.min.z)),
            e <= -t.constant && n >= -t.constant
          );
        }
        intersectsTriangle(t) {
          if (this.isEmpty()) return !1;
          this.getCenter(id),
            od.subVectors(this.max, id),
            $c.subVectors(t.a, id),
            Jc.subVectors(t.b, id),
            td.subVectors(t.c, id),
            ed.subVectors(Jc, $c),
            nd.subVectors(td, Jc),
            rd.subVectors($c, td);
          let e = [
            0,
            -ed.z,
            ed.y,
            0,
            -nd.z,
            nd.y,
            0,
            -rd.z,
            rd.y,
            ed.z,
            0,
            -ed.x,
            nd.z,
            0,
            -nd.x,
            rd.z,
            0,
            -rd.x,
            -ed.y,
            ed.x,
            0,
            -nd.y,
            nd.x,
            0,
            -rd.y,
            rd.x,
            0,
          ];
          return (
            !!ld(e, $c, Jc, td, od) &&
            ((e = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
            !!ld(e, $c, Jc, td, od) &&
              (ad.crossVectors(ed, nd),
              (e = [ad.x, ad.y, ad.z]),
              ld(e, $c, Jc, td, od)))
          );
        }
        clampPoint(t, e) {
          return e.copy(t).clamp(this.min, this.max);
        }
        distanceToPoint(t) {
          return this.clampPoint(t, Zc).distanceTo(t);
        }
        getBoundingSphere(t) {
          return (
            this.isEmpty()
              ? t.makeEmpty()
              : (this.getCenter(t.center),
                (t.radius = 0.5 * this.getSize(Zc).length())),
            t
          );
        }
        intersect(t) {
          return (
            this.min.max(t.min),
            this.max.min(t.max),
            this.isEmpty() && this.makeEmpty(),
            this
          );
        }
        union(t) {
          return this.min.min(t.min), this.max.max(t.max), this;
        }
        applyMatrix4(t) {
          return (
            this.isEmpty() ||
              (Kc[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(t),
              Kc[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(t),
              Kc[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(t),
              Kc[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(t),
              Kc[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(t),
              Kc[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(t),
              Kc[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(t),
              Kc[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(t),
              this.setFromPoints(Kc)),
            this
          );
        }
        translate(t) {
          return this.min.add(t), this.max.add(t), this;
        }
        equals(t) {
          return t.min.equals(this.min) && t.max.equals(this.max);
        }
      }
      const Kc = [
          new Wc(),
          new Wc(),
          new Wc(),
          new Wc(),
          new Wc(),
          new Wc(),
          new Wc(),
          new Wc(),
        ],
        Zc = new Wc(),
        Qc = new qc(),
        $c = new Wc(),
        Jc = new Wc(),
        td = new Wc(),
        ed = new Wc(),
        nd = new Wc(),
        rd = new Wc(),
        id = new Wc(),
        od = new Wc(),
        ad = new Wc(),
        sd = new Wc();
      function ld(t, e, n, r, i) {
        for (let o = 0, a = t.length - 3; o <= a; o += 3) {
          sd.fromArray(t, o);
          const a =
              i.x * Math.abs(sd.x) +
              i.y * Math.abs(sd.y) +
              i.z * Math.abs(sd.z),
            s = e.dot(sd),
            l = n.dot(sd),
            u = r.dot(sd);
          if (Math.max(-Math.max(s, l, u), Math.min(s, l, u)) > a) return !1;
        }
        return !0;
      }
      const ud = new qc(),
        hd = new Wc(),
        cd = new Wc();
      class dd {
        constructor(t = new Wc(), e = -1) {
          (this.center = t), (this.radius = e);
        }
        set(t, e) {
          return this.center.copy(t), (this.radius = e), this;
        }
        setFromPoints(t, e) {
          const n = this.center;
          void 0 !== e ? n.copy(e) : ud.setFromPoints(t).getCenter(n);
          let r = 0;
          for (let e = 0, i = t.length; e < i; e++)
            r = Math.max(r, n.distanceToSquared(t[e]));
          return (this.radius = Math.sqrt(r)), this;
        }
        copy(t) {
          return this.center.copy(t.center), (this.radius = t.radius), this;
        }
        isEmpty() {
          return this.radius < 0;
        }
        makeEmpty() {
          return this.center.set(0, 0, 0), (this.radius = -1), this;
        }
        containsPoint(t) {
          return t.distanceToSquared(this.center) <= this.radius * this.radius;
        }
        distanceToPoint(t) {
          return t.distanceTo(this.center) - this.radius;
        }
        intersectsSphere(t) {
          const e = this.radius + t.radius;
          return t.center.distanceToSquared(this.center) <= e * e;
        }
        intersectsBox(t) {
          return t.intersectsSphere(this);
        }
        intersectsPlane(t) {
          return Math.abs(t.distanceToPoint(this.center)) <= this.radius;
        }
        clampPoint(t, e) {
          const n = this.center.distanceToSquared(t);
          return (
            e.copy(t),
            n > this.radius * this.radius &&
              (e.sub(this.center).normalize(),
              e.multiplyScalar(this.radius).add(this.center)),
            e
          );
        }
        getBoundingBox(t) {
          return this.isEmpty()
            ? (t.makeEmpty(), t)
            : (t.set(this.center, this.center),
              t.expandByScalar(this.radius),
              t);
        }
        applyMatrix4(t) {
          return (
            this.center.applyMatrix4(t),
            (this.radius = this.radius * t.getMaxScaleOnAxis()),
            this
          );
        }
        translate(t) {
          return this.center.add(t), this;
        }
        expandByPoint(t) {
          if (this.isEmpty())
            return this.center.copy(t), (this.radius = 0), this;
          hd.subVectors(t, this.center);
          const e = hd.lengthSq();
          if (e > this.radius * this.radius) {
            const t = Math.sqrt(e),
              n = 0.5 * (t - this.radius);
            this.center.addScaledVector(hd, n / t), (this.radius += n);
          }
          return this;
        }
        union(t) {
          return t.isEmpty()
            ? this
            : this.isEmpty()
              ? (this.copy(t), this)
              : (!0 === this.center.equals(t.center)
                  ? (this.radius = Math.max(this.radius, t.radius))
                  : (cd.subVectors(t.center, this.center).setLength(t.radius),
                    this.expandByPoint(hd.copy(t.center).add(cd)),
                    this.expandByPoint(hd.copy(t.center).sub(cd))),
                this);
        }
        equals(t) {
          return t.center.equals(this.center) && t.radius === this.radius;
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      const fd = new Wc(),
        pd = new Wc(),
        md = new Wc(),
        _d = new Wc(),
        gd = new Wc(),
        vd = new Wc(),
        yd = new Wc();
      class Ed {
        constructor(t = new Wc(), e = new Wc(0, 0, -1)) {
          (this.origin = t), (this.direction = e);
        }
        set(t, e) {
          return this.origin.copy(t), this.direction.copy(e), this;
        }
        copy(t) {
          return (
            this.origin.copy(t.origin), this.direction.copy(t.direction), this
          );
        }
        at(t, e) {
          return e.copy(this.origin).addScaledVector(this.direction, t);
        }
        lookAt(t) {
          return this.direction.copy(t).sub(this.origin).normalize(), this;
        }
        recast(t) {
          return this.origin.copy(this.at(t, fd)), this;
        }
        closestPointToPoint(t, e) {
          e.subVectors(t, this.origin);
          const n = e.dot(this.direction);
          return n < 0
            ? e.copy(this.origin)
            : e.copy(this.origin).addScaledVector(this.direction, n);
        }
        distanceToPoint(t) {
          return Math.sqrt(this.distanceSqToPoint(t));
        }
        distanceSqToPoint(t) {
          const e = fd.subVectors(t, this.origin).dot(this.direction);
          return e < 0
            ? this.origin.distanceToSquared(t)
            : (fd.copy(this.origin).addScaledVector(this.direction, e),
              fd.distanceToSquared(t));
        }
        distanceSqToSegment(t, e, n, r) {
          pd.copy(t).add(e).multiplyScalar(0.5),
            md.copy(e).sub(t).normalize(),
            _d.copy(this.origin).sub(pd);
          const i = 0.5 * t.distanceTo(e),
            o = -this.direction.dot(md),
            a = _d.dot(this.direction),
            s = -_d.dot(md),
            l = _d.lengthSq(),
            u = Math.abs(1 - o * o);
          let h, c, d, f;
          if (u > 0)
            if (((h = o * s - a), (c = o * a - s), (f = i * u), h >= 0))
              if (c >= -f)
                if (c <= f) {
                  const t = 1 / u;
                  (h *= t),
                    (c *= t),
                    (d = h * (h + o * c + 2 * a) + c * (o * h + c + 2 * s) + l);
                } else
                  (c = i),
                    (h = Math.max(0, -(o * c + a))),
                    (d = -h * h + c * (c + 2 * s) + l);
              else
                (c = -i),
                  (h = Math.max(0, -(o * c + a))),
                  (d = -h * h + c * (c + 2 * s) + l);
            else
              c <= -f
                ? ((h = Math.max(0, -(-o * i + a))),
                  (c = h > 0 ? -i : Math.min(Math.max(-i, -s), i)),
                  (d = -h * h + c * (c + 2 * s) + l))
                : c <= f
                  ? ((h = 0),
                    (c = Math.min(Math.max(-i, -s), i)),
                    (d = c * (c + 2 * s) + l))
                  : ((h = Math.max(0, -(o * i + a))),
                    (c = h > 0 ? i : Math.min(Math.max(-i, -s), i)),
                    (d = -h * h + c * (c + 2 * s) + l));
          else
            (c = o > 0 ? -i : i),
              (h = Math.max(0, -(o * c + a))),
              (d = -h * h + c * (c + 2 * s) + l);
          return (
            n && n.copy(this.origin).addScaledVector(this.direction, h),
            r && r.copy(pd).addScaledVector(md, c),
            d
          );
        }
        intersectSphere(t, e) {
          fd.subVectors(t.center, this.origin);
          const n = fd.dot(this.direction),
            r = fd.dot(fd) - n * n,
            i = t.radius * t.radius;
          if (r > i) return null;
          const o = Math.sqrt(i - r),
            a = n - o,
            s = n + o;
          return s < 0 ? null : a < 0 ? this.at(s, e) : this.at(a, e);
        }
        intersectsSphere(t) {
          return this.distanceSqToPoint(t.center) <= t.radius * t.radius;
        }
        distanceToPlane(t) {
          const e = t.normal.dot(this.direction);
          if (0 === e) return 0 === t.distanceToPoint(this.origin) ? 0 : null;
          const n = -(this.origin.dot(t.normal) + t.constant) / e;
          return n >= 0 ? n : null;
        }
        intersectPlane(t, e) {
          const n = this.distanceToPlane(t);
          return null === n ? null : this.at(n, e);
        }
        intersectsPlane(t) {
          const e = t.distanceToPoint(this.origin);
          return 0 === e || t.normal.dot(this.direction) * e < 0;
        }
        intersectBox(t, e) {
          let n, r, i, o, a, s;
          const l = 1 / this.direction.x,
            u = 1 / this.direction.y,
            h = 1 / this.direction.z,
            c = this.origin;
          return (
            l >= 0
              ? ((n = (t.min.x - c.x) * l), (r = (t.max.x - c.x) * l))
              : ((n = (t.max.x - c.x) * l), (r = (t.min.x - c.x) * l)),
            u >= 0
              ? ((i = (t.min.y - c.y) * u), (o = (t.max.y - c.y) * u))
              : ((i = (t.max.y - c.y) * u), (o = (t.min.y - c.y) * u)),
            n > o || i > r
              ? null
              : ((i > n || isNaN(n)) && (n = i),
                (o < r || isNaN(r)) && (r = o),
                h >= 0
                  ? ((a = (t.min.z - c.z) * h), (s = (t.max.z - c.z) * h))
                  : ((a = (t.max.z - c.z) * h), (s = (t.min.z - c.z) * h)),
                n > s || a > r
                  ? null
                  : ((a > n || n != n) && (n = a),
                    (s < r || r != r) && (r = s),
                    r < 0 ? null : this.at(n >= 0 ? n : r, e)))
          );
        }
        intersectsBox(t) {
          return null !== this.intersectBox(t, fd);
        }
        intersectTriangle(t, e, n, r, i) {
          gd.subVectors(e, t), vd.subVectors(n, t), yd.crossVectors(gd, vd);
          let o,
            a = this.direction.dot(yd);
          if (a > 0) {
            if (r) return null;
            o = 1;
          } else {
            if (!(a < 0)) return null;
            (o = -1), (a = -a);
          }
          _d.subVectors(this.origin, t);
          const s = o * this.direction.dot(vd.crossVectors(_d, vd));
          if (s < 0) return null;
          const l = o * this.direction.dot(gd.cross(_d));
          if (l < 0) return null;
          if (s + l > a) return null;
          const u = -o * _d.dot(yd);
          return u < 0 ? null : this.at(u / a, i);
        }
        applyMatrix4(t) {
          return (
            this.origin.applyMatrix4(t),
            this.direction.transformDirection(t),
            this
          );
        }
        equals(t) {
          return (
            t.origin.equals(this.origin) && t.direction.equals(this.direction)
          );
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      class Td {
        constructor(t, e, n, r, i, o, a, s, l, u, h, c, d, f, p, m) {
          (Td.prototype.isMatrix4 = !0),
            (this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
            void 0 !== t &&
              this.set(t, e, n, r, i, o, a, s, l, u, h, c, d, f, p, m);
        }
        set(t, e, n, r, i, o, a, s, l, u, h, c, d, f, p, m) {
          const _ = this.elements;
          return (
            (_[0] = t),
            (_[4] = e),
            (_[8] = n),
            (_[12] = r),
            (_[1] = i),
            (_[5] = o),
            (_[9] = a),
            (_[13] = s),
            (_[2] = l),
            (_[6] = u),
            (_[10] = h),
            (_[14] = c),
            (_[3] = d),
            (_[7] = f),
            (_[11] = p),
            (_[15] = m),
            this
          );
        }
        identity() {
          return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
        }
        clone() {
          return new Td().fromArray(this.elements);
        }
        copy(t) {
          const e = this.elements,
            n = t.elements;
          return (
            (e[0] = n[0]),
            (e[1] = n[1]),
            (e[2] = n[2]),
            (e[3] = n[3]),
            (e[4] = n[4]),
            (e[5] = n[5]),
            (e[6] = n[6]),
            (e[7] = n[7]),
            (e[8] = n[8]),
            (e[9] = n[9]),
            (e[10] = n[10]),
            (e[11] = n[11]),
            (e[12] = n[12]),
            (e[13] = n[13]),
            (e[14] = n[14]),
            (e[15] = n[15]),
            this
          );
        }
        copyPosition(t) {
          const e = this.elements,
            n = t.elements;
          return (e[12] = n[12]), (e[13] = n[13]), (e[14] = n[14]), this;
        }
        setFromMatrix3(t) {
          const e = t.elements;
          return (
            this.set(
              e[0],
              e[3],
              e[6],
              0,
              e[1],
              e[4],
              e[7],
              0,
              e[2],
              e[5],
              e[8],
              0,
              0,
              0,
              0,
              1,
            ),
            this
          );
        }
        extractBasis(t, e, n) {
          return (
            t.setFromMatrixColumn(this, 0),
            e.setFromMatrixColumn(this, 1),
            n.setFromMatrixColumn(this, 2),
            this
          );
        }
        makeBasis(t, e, n) {
          return (
            this.set(
              t.x,
              e.x,
              n.x,
              0,
              t.y,
              e.y,
              n.y,
              0,
              t.z,
              e.z,
              n.z,
              0,
              0,
              0,
              0,
              1,
            ),
            this
          );
        }
        extractRotation(t) {
          const e = this.elements,
            n = t.elements,
            r = 1 / bd.setFromMatrixColumn(t, 0).length(),
            i = 1 / bd.setFromMatrixColumn(t, 1).length(),
            o = 1 / bd.setFromMatrixColumn(t, 2).length();
          return (
            (e[0] = n[0] * r),
            (e[1] = n[1] * r),
            (e[2] = n[2] * r),
            (e[3] = 0),
            (e[4] = n[4] * i),
            (e[5] = n[5] * i),
            (e[6] = n[6] * i),
            (e[7] = 0),
            (e[8] = n[8] * o),
            (e[9] = n[9] * o),
            (e[10] = n[10] * o),
            (e[11] = 0),
            (e[12] = 0),
            (e[13] = 0),
            (e[14] = 0),
            (e[15] = 1),
            this
          );
        }
        makeRotationFromEuler(t) {
          const e = this.elements,
            n = t.x,
            r = t.y,
            i = t.z,
            o = Math.cos(n),
            a = Math.sin(n),
            s = Math.cos(r),
            l = Math.sin(r),
            u = Math.cos(i),
            h = Math.sin(i);
          if ("XYZ" === t.order) {
            const t = o * u,
              n = o * h,
              r = a * u,
              i = a * h;
            (e[0] = s * u),
              (e[4] = -s * h),
              (e[8] = l),
              (e[1] = n + r * l),
              (e[5] = t - i * l),
              (e[9] = -a * s),
              (e[2] = i - t * l),
              (e[6] = r + n * l),
              (e[10] = o * s);
          } else if ("YXZ" === t.order) {
            const t = s * u,
              n = s * h,
              r = l * u,
              i = l * h;
            (e[0] = t + i * a),
              (e[4] = r * a - n),
              (e[8] = o * l),
              (e[1] = o * h),
              (e[5] = o * u),
              (e[9] = -a),
              (e[2] = n * a - r),
              (e[6] = i + t * a),
              (e[10] = o * s);
          } else if ("ZXY" === t.order) {
            const t = s * u,
              n = s * h,
              r = l * u,
              i = l * h;
            (e[0] = t - i * a),
              (e[4] = -o * h),
              (e[8] = r + n * a),
              (e[1] = n + r * a),
              (e[5] = o * u),
              (e[9] = i - t * a),
              (e[2] = -o * l),
              (e[6] = a),
              (e[10] = o * s);
          } else if ("ZYX" === t.order) {
            const t = o * u,
              n = o * h,
              r = a * u,
              i = a * h;
            (e[0] = s * u),
              (e[4] = r * l - n),
              (e[8] = t * l + i),
              (e[1] = s * h),
              (e[5] = i * l + t),
              (e[9] = n * l - r),
              (e[2] = -l),
              (e[6] = a * s),
              (e[10] = o * s);
          } else if ("YZX" === t.order) {
            const t = o * s,
              n = o * l,
              r = a * s,
              i = a * l;
            (e[0] = s * u),
              (e[4] = i - t * h),
              (e[8] = r * h + n),
              (e[1] = h),
              (e[5] = o * u),
              (e[9] = -a * u),
              (e[2] = -l * u),
              (e[6] = n * h + r),
              (e[10] = t - i * h);
          } else if ("XZY" === t.order) {
            const t = o * s,
              n = o * l,
              r = a * s,
              i = a * l;
            (e[0] = s * u),
              (e[4] = -h),
              (e[8] = l * u),
              (e[1] = t * h + i),
              (e[5] = o * u),
              (e[9] = n * h - r),
              (e[2] = r * h - n),
              (e[6] = a * u),
              (e[10] = i * h + t);
          }
          return (
            (e[3] = 0),
            (e[7] = 0),
            (e[11] = 0),
            (e[12] = 0),
            (e[13] = 0),
            (e[14] = 0),
            (e[15] = 1),
            this
          );
        }
        makeRotationFromQuaternion(t) {
          return this.compose(Sd, t, Md);
        }
        lookAt(t, e, n) {
          const r = this.elements;
          return (
            wd.subVectors(t, e),
            0 === wd.lengthSq() && (wd.z = 1),
            wd.normalize(),
            Ad.crossVectors(n, wd),
            0 === Ad.lengthSq() &&
              (1 === Math.abs(n.z) ? (wd.x += 1e-4) : (wd.z += 1e-4),
              wd.normalize(),
              Ad.crossVectors(n, wd)),
            Ad.normalize(),
            Rd.crossVectors(wd, Ad),
            (r[0] = Ad.x),
            (r[4] = Rd.x),
            (r[8] = wd.x),
            (r[1] = Ad.y),
            (r[5] = Rd.y),
            (r[9] = wd.y),
            (r[2] = Ad.z),
            (r[6] = Rd.z),
            (r[10] = wd.z),
            this
          );
        }
        multiply(t) {
          return this.multiplyMatrices(this, t);
        }
        premultiply(t) {
          return this.multiplyMatrices(t, this);
        }
        multiplyMatrices(t, e) {
          const n = t.elements,
            r = e.elements,
            i = this.elements,
            o = n[0],
            a = n[4],
            s = n[8],
            l = n[12],
            u = n[1],
            h = n[5],
            c = n[9],
            d = n[13],
            f = n[2],
            p = n[6],
            m = n[10],
            _ = n[14],
            g = n[3],
            v = n[7],
            y = n[11],
            E = n[15],
            T = r[0],
            b = r[4],
            x = r[8],
            S = r[12],
            M = r[1],
            A = r[5],
            R = r[9],
            w = r[13],
            P = r[2],
            I = r[6],
            O = r[10],
            C = r[14],
            N = r[3],
            L = r[7],
            D = r[11],
            U = r[15];
          return (
            (i[0] = o * T + a * M + s * P + l * N),
            (i[4] = o * b + a * A + s * I + l * L),
            (i[8] = o * x + a * R + s * O + l * D),
            (i[12] = o * S + a * w + s * C + l * U),
            (i[1] = u * T + h * M + c * P + d * N),
            (i[5] = u * b + h * A + c * I + d * L),
            (i[9] = u * x + h * R + c * O + d * D),
            (i[13] = u * S + h * w + c * C + d * U),
            (i[2] = f * T + p * M + m * P + _ * N),
            (i[6] = f * b + p * A + m * I + _ * L),
            (i[10] = f * x + p * R + m * O + _ * D),
            (i[14] = f * S + p * w + m * C + _ * U),
            (i[3] = g * T + v * M + y * P + E * N),
            (i[7] = g * b + v * A + y * I + E * L),
            (i[11] = g * x + v * R + y * O + E * D),
            (i[15] = g * S + v * w + y * C + E * U),
            this
          );
        }
        multiplyScalar(t) {
          const e = this.elements;
          return (
            (e[0] *= t),
            (e[4] *= t),
            (e[8] *= t),
            (e[12] *= t),
            (e[1] *= t),
            (e[5] *= t),
            (e[9] *= t),
            (e[13] *= t),
            (e[2] *= t),
            (e[6] *= t),
            (e[10] *= t),
            (e[14] *= t),
            (e[3] *= t),
            (e[7] *= t),
            (e[11] *= t),
            (e[15] *= t),
            this
          );
        }
        determinant() {
          const t = this.elements,
            e = t[0],
            n = t[4],
            r = t[8],
            i = t[12],
            o = t[1],
            a = t[5],
            s = t[9],
            l = t[13],
            u = t[2],
            h = t[6],
            c = t[10],
            d = t[14];
          return (
            t[3] *
              (+i * s * h -
                r * l * h -
                i * a * c +
                n * l * c +
                r * a * d -
                n * s * d) +
            t[7] *
              (+e * s * d -
                e * l * c +
                i * o * c -
                r * o * d +
                r * l * u -
                i * s * u) +
            t[11] *
              (+e * l * h -
                e * a * d -
                i * o * h +
                n * o * d +
                i * a * u -
                n * l * u) +
            t[15] *
              (-r * a * u -
                e * s * h +
                e * a * c +
                r * o * h -
                n * o * c +
                n * s * u)
          );
        }
        transpose() {
          const t = this.elements;
          let e;
          return (
            (e = t[1]),
            (t[1] = t[4]),
            (t[4] = e),
            (e = t[2]),
            (t[2] = t[8]),
            (t[8] = e),
            (e = t[6]),
            (t[6] = t[9]),
            (t[9] = e),
            (e = t[3]),
            (t[3] = t[12]),
            (t[12] = e),
            (e = t[7]),
            (t[7] = t[13]),
            (t[13] = e),
            (e = t[11]),
            (t[11] = t[14]),
            (t[14] = e),
            this
          );
        }
        setPosition(t, e, n) {
          const r = this.elements;
          return (
            t.isVector3
              ? ((r[12] = t.x), (r[13] = t.y), (r[14] = t.z))
              : ((r[12] = t), (r[13] = e), (r[14] = n)),
            this
          );
        }
        invert() {
          const t = this.elements,
            e = t[0],
            n = t[1],
            r = t[2],
            i = t[3],
            o = t[4],
            a = t[5],
            s = t[6],
            l = t[7],
            u = t[8],
            h = t[9],
            c = t[10],
            d = t[11],
            f = t[12],
            p = t[13],
            m = t[14],
            _ = t[15],
            g =
              h * m * l -
              p * c * l +
              p * s * d -
              a * m * d -
              h * s * _ +
              a * c * _,
            v =
              f * c * l -
              u * m * l -
              f * s * d +
              o * m * d +
              u * s * _ -
              o * c * _,
            y =
              u * p * l -
              f * h * l +
              f * a * d -
              o * p * d -
              u * a * _ +
              o * h * _,
            E =
              f * h * s -
              u * p * s -
              f * a * c +
              o * p * c +
              u * a * m -
              o * h * m,
            T = e * g + n * v + r * y + i * E;
          if (0 === T)
            return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
          const b = 1 / T;
          return (
            (t[0] = g * b),
            (t[1] =
              (p * c * i -
                h * m * i -
                p * r * d +
                n * m * d +
                h * r * _ -
                n * c * _) *
              b),
            (t[2] =
              (a * m * i -
                p * s * i +
                p * r * l -
                n * m * l -
                a * r * _ +
                n * s * _) *
              b),
            (t[3] =
              (h * s * i -
                a * c * i -
                h * r * l +
                n * c * l +
                a * r * d -
                n * s * d) *
              b),
            (t[4] = v * b),
            (t[5] =
              (u * m * i -
                f * c * i +
                f * r * d -
                e * m * d -
                u * r * _ +
                e * c * _) *
              b),
            (t[6] =
              (f * s * i -
                o * m * i -
                f * r * l +
                e * m * l +
                o * r * _ -
                e * s * _) *
              b),
            (t[7] =
              (o * c * i -
                u * s * i +
                u * r * l -
                e * c * l -
                o * r * d +
                e * s * d) *
              b),
            (t[8] = y * b),
            (t[9] =
              (f * h * i -
                u * p * i -
                f * n * d +
                e * p * d +
                u * n * _ -
                e * h * _) *
              b),
            (t[10] =
              (o * p * i -
                f * a * i +
                f * n * l -
                e * p * l -
                o * n * _ +
                e * a * _) *
              b),
            (t[11] =
              (u * a * i -
                o * h * i -
                u * n * l +
                e * h * l +
                o * n * d -
                e * a * d) *
              b),
            (t[12] = E * b),
            (t[13] =
              (u * p * r -
                f * h * r +
                f * n * c -
                e * p * c -
                u * n * m +
                e * h * m) *
              b),
            (t[14] =
              (f * a * r -
                o * p * r -
                f * n * s +
                e * p * s +
                o * n * m -
                e * a * m) *
              b),
            (t[15] =
              (o * h * r -
                u * a * r +
                u * n * s -
                e * h * s -
                o * n * c +
                e * a * c) *
              b),
            this
          );
        }
        scale(t) {
          const e = this.elements,
            n = t.x,
            r = t.y,
            i = t.z;
          return (
            (e[0] *= n),
            (e[4] *= r),
            (e[8] *= i),
            (e[1] *= n),
            (e[5] *= r),
            (e[9] *= i),
            (e[2] *= n),
            (e[6] *= r),
            (e[10] *= i),
            (e[3] *= n),
            (e[7] *= r),
            (e[11] *= i),
            this
          );
        }
        getMaxScaleOnAxis() {
          const t = this.elements,
            e = t[0] * t[0] + t[1] * t[1] + t[2] * t[2],
            n = t[4] * t[4] + t[5] * t[5] + t[6] * t[6],
            r = t[8] * t[8] + t[9] * t[9] + t[10] * t[10];
          return Math.sqrt(Math.max(e, n, r));
        }
        makeTranslation(t, e, n) {
          return (
            t.isVector3
              ? this.set(1, 0, 0, t.x, 0, 1, 0, t.y, 0, 0, 1, t.z, 0, 0, 0, 1)
              : this.set(1, 0, 0, t, 0, 1, 0, e, 0, 0, 1, n, 0, 0, 0, 1),
            this
          );
        }
        makeRotationX(t) {
          const e = Math.cos(t),
            n = Math.sin(t);
          return (
            this.set(1, 0, 0, 0, 0, e, -n, 0, 0, n, e, 0, 0, 0, 0, 1), this
          );
        }
        makeRotationY(t) {
          const e = Math.cos(t),
            n = Math.sin(t);
          return (
            this.set(e, 0, n, 0, 0, 1, 0, 0, -n, 0, e, 0, 0, 0, 0, 1), this
          );
        }
        makeRotationZ(t) {
          const e = Math.cos(t),
            n = Math.sin(t);
          return (
            this.set(e, -n, 0, 0, n, e, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
          );
        }
        makeRotationAxis(t, e) {
          const n = Math.cos(e),
            r = Math.sin(e),
            i = 1 - n,
            o = t.x,
            a = t.y,
            s = t.z,
            l = i * o,
            u = i * a;
          return (
            this.set(
              l * o + n,
              l * a - r * s,
              l * s + r * a,
              0,
              l * a + r * s,
              u * a + n,
              u * s - r * o,
              0,
              l * s - r * a,
              u * s + r * o,
              i * s * s + n,
              0,
              0,
              0,
              0,
              1,
            ),
            this
          );
        }
        makeScale(t, e, n) {
          return this.set(t, 0, 0, 0, 0, e, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this;
        }
        makeShear(t, e, n, r, i, o) {
          return this.set(1, n, i, 0, t, 1, o, 0, e, r, 1, 0, 0, 0, 0, 1), this;
        }
        compose(t, e, n) {
          const r = this.elements,
            i = e._x,
            o = e._y,
            a = e._z,
            s = e._w,
            l = i + i,
            u = o + o,
            h = a + a,
            c = i * l,
            d = i * u,
            f = i * h,
            p = o * u,
            m = o * h,
            _ = a * h,
            g = s * l,
            v = s * u,
            y = s * h,
            E = n.x,
            T = n.y,
            b = n.z;
          return (
            (r[0] = (1 - (p + _)) * E),
            (r[1] = (d + y) * E),
            (r[2] = (f - v) * E),
            (r[3] = 0),
            (r[4] = (d - y) * T),
            (r[5] = (1 - (c + _)) * T),
            (r[6] = (m + g) * T),
            (r[7] = 0),
            (r[8] = (f + v) * b),
            (r[9] = (m - g) * b),
            (r[10] = (1 - (c + p)) * b),
            (r[11] = 0),
            (r[12] = t.x),
            (r[13] = t.y),
            (r[14] = t.z),
            (r[15] = 1),
            this
          );
        }
        decompose(t, e, n) {
          const r = this.elements;
          let i = bd.set(r[0], r[1], r[2]).length();
          const o = bd.set(r[4], r[5], r[6]).length(),
            a = bd.set(r[8], r[9], r[10]).length();
          this.determinant() < 0 && (i = -i),
            (t.x = r[12]),
            (t.y = r[13]),
            (t.z = r[14]),
            xd.copy(this);
          const s = 1 / i,
            l = 1 / o,
            u = 1 / a;
          return (
            (xd.elements[0] *= s),
            (xd.elements[1] *= s),
            (xd.elements[2] *= s),
            (xd.elements[4] *= l),
            (xd.elements[5] *= l),
            (xd.elements[6] *= l),
            (xd.elements[8] *= u),
            (xd.elements[9] *= u),
            (xd.elements[10] *= u),
            e.setFromRotationMatrix(xd),
            (n.x = i),
            (n.y = o),
            (n.z = a),
            this
          );
        }
        makePerspective(t, e, n, r, i, o, a = 2e3) {
          const s = this.elements,
            l = (2 * i) / (e - t),
            u = (2 * i) / (n - r),
            h = (e + t) / (e - t),
            c = (n + r) / (n - r);
          let d, f;
          if (a === ec) (d = -(o + i) / (o - i)), (f = (-2 * o * i) / (o - i));
          else {
            if (a !== nc)
              throw new Error(
                "THREE.Matrix4.makePerspective(): Invalid coordinate system: " +
                  a,
              );
            (d = -o / (o - i)), (f = (-o * i) / (o - i));
          }
          return (
            (s[0] = l),
            (s[4] = 0),
            (s[8] = h),
            (s[12] = 0),
            (s[1] = 0),
            (s[5] = u),
            (s[9] = c),
            (s[13] = 0),
            (s[2] = 0),
            (s[6] = 0),
            (s[10] = d),
            (s[14] = f),
            (s[3] = 0),
            (s[7] = 0),
            (s[11] = -1),
            (s[15] = 0),
            this
          );
        }
        makeOrthographic(t, e, n, r, i, o, a = 2e3) {
          const s = this.elements,
            l = 1 / (e - t),
            u = 1 / (n - r),
            h = 1 / (o - i),
            c = (e + t) * l,
            d = (n + r) * u;
          let f, p;
          if (a === ec) (f = (o + i) * h), (p = -2 * h);
          else {
            if (a !== nc)
              throw new Error(
                "THREE.Matrix4.makeOrthographic(): Invalid coordinate system: " +
                  a,
              );
            (f = i * h), (p = -1 * h);
          }
          return (
            (s[0] = 2 * l),
            (s[4] = 0),
            (s[8] = 0),
            (s[12] = -c),
            (s[1] = 0),
            (s[5] = 2 * u),
            (s[9] = 0),
            (s[13] = -d),
            (s[2] = 0),
            (s[6] = 0),
            (s[10] = p),
            (s[14] = -f),
            (s[3] = 0),
            (s[7] = 0),
            (s[11] = 0),
            (s[15] = 1),
            this
          );
        }
        equals(t) {
          const e = this.elements,
            n = t.elements;
          for (let t = 0; t < 16; t++) if (e[t] !== n[t]) return !1;
          return !0;
        }
        fromArray(t, e = 0) {
          for (let n = 0; n < 16; n++) this.elements[n] = t[n + e];
          return this;
        }
        toArray(t = [], e = 0) {
          const n = this.elements;
          return (
            (t[e] = n[0]),
            (t[e + 1] = n[1]),
            (t[e + 2] = n[2]),
            (t[e + 3] = n[3]),
            (t[e + 4] = n[4]),
            (t[e + 5] = n[5]),
            (t[e + 6] = n[6]),
            (t[e + 7] = n[7]),
            (t[e + 8] = n[8]),
            (t[e + 9] = n[9]),
            (t[e + 10] = n[10]),
            (t[e + 11] = n[11]),
            (t[e + 12] = n[12]),
            (t[e + 13] = n[13]),
            (t[e + 14] = n[14]),
            (t[e + 15] = n[15]),
            t
          );
        }
      }
      const bd = new Wc(),
        xd = new Td(),
        Sd = new Wc(0, 0, 0),
        Md = new Wc(1, 1, 1),
        Ad = new Wc(),
        Rd = new Wc(),
        wd = new Wc(),
        Pd = new Td(),
        Id = new Xc();
      class Od {
        constructor(t = 0, e = 0, n = 0, r = Od.DEFAULT_ORDER) {
          (this.isEuler = !0),
            (this._x = t),
            (this._y = e),
            (this._z = n),
            (this._order = r);
        }
        get x() {
          return this._x;
        }
        set x(t) {
          (this._x = t), this._onChangeCallback();
        }
        get y() {
          return this._y;
        }
        set y(t) {
          (this._y = t), this._onChangeCallback();
        }
        get z() {
          return this._z;
        }
        set z(t) {
          (this._z = t), this._onChangeCallback();
        }
        get order() {
          return this._order;
        }
        set order(t) {
          (this._order = t), this._onChangeCallback();
        }
        set(t, e, n, r = this._order) {
          return (
            (this._x = t),
            (this._y = e),
            (this._z = n),
            (this._order = r),
            this._onChangeCallback(),
            this
          );
        }
        clone() {
          return new this.constructor(this._x, this._y, this._z, this._order);
        }
        copy(t) {
          return (
            (this._x = t._x),
            (this._y = t._y),
            (this._z = t._z),
            (this._order = t._order),
            this._onChangeCallback(),
            this
          );
        }
        setFromRotationMatrix(t, e = this._order, n = !0) {
          const r = t.elements,
            i = r[0],
            o = r[4],
            a = r[8],
            s = r[1],
            l = r[5],
            u = r[9],
            h = r[2],
            c = r[6],
            d = r[10];
          switch (e) {
            case "XYZ":
              (this._y = Math.asin(lc(a, -1, 1))),
                Math.abs(a) < 0.9999999
                  ? ((this._x = Math.atan2(-u, d)),
                    (this._z = Math.atan2(-o, i)))
                  : ((this._x = Math.atan2(c, l)), (this._z = 0));
              break;
            case "YXZ":
              (this._x = Math.asin(-lc(u, -1, 1))),
                Math.abs(u) < 0.9999999
                  ? ((this._y = Math.atan2(a, d)), (this._z = Math.atan2(s, l)))
                  : ((this._y = Math.atan2(-h, i)), (this._z = 0));
              break;
            case "ZXY":
              (this._x = Math.asin(lc(c, -1, 1))),
                Math.abs(c) < 0.9999999
                  ? ((this._y = Math.atan2(-h, d)),
                    (this._z = Math.atan2(-o, l)))
                  : ((this._y = 0), (this._z = Math.atan2(s, i)));
              break;
            case "ZYX":
              (this._y = Math.asin(-lc(h, -1, 1))),
                Math.abs(h) < 0.9999999
                  ? ((this._x = Math.atan2(c, d)), (this._z = Math.atan2(s, i)))
                  : ((this._x = 0), (this._z = Math.atan2(-o, l)));
              break;
            case "YZX":
              (this._z = Math.asin(lc(s, -1, 1))),
                Math.abs(s) < 0.9999999
                  ? ((this._x = Math.atan2(-u, l)),
                    (this._y = Math.atan2(-h, i)))
                  : ((this._x = 0), (this._y = Math.atan2(a, d)));
              break;
            case "XZY":
              (this._z = Math.asin(-lc(o, -1, 1))),
                Math.abs(o) < 0.9999999
                  ? ((this._x = Math.atan2(c, l)), (this._y = Math.atan2(a, i)))
                  : ((this._x = Math.atan2(-u, d)), (this._y = 0));
              break;
            default:
              console.warn(
                "THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " +
                  e,
              );
          }
          return (this._order = e), !0 === n && this._onChangeCallback(), this;
        }
        setFromQuaternion(t, e, n) {
          return (
            Pd.makeRotationFromQuaternion(t),
            this.setFromRotationMatrix(Pd, e, n)
          );
        }
        setFromVector3(t, e = this._order) {
          return this.set(t.x, t.y, t.z, e);
        }
        reorder(t) {
          return Id.setFromEuler(this), this.setFromQuaternion(Id, t);
        }
        equals(t) {
          return (
            t._x === this._x &&
            t._y === this._y &&
            t._z === this._z &&
            t._order === this._order
          );
        }
        fromArray(t) {
          return (
            (this._x = t[0]),
            (this._y = t[1]),
            (this._z = t[2]),
            void 0 !== t[3] && (this._order = t[3]),
            this._onChangeCallback(),
            this
          );
        }
        toArray(t = [], e = 0) {
          return (
            (t[e] = this._x),
            (t[e + 1] = this._y),
            (t[e + 2] = this._z),
            (t[e + 3] = this._order),
            t
          );
        }
        _onChange(t) {
          return (this._onChangeCallback = t), this;
        }
        _onChangeCallback() {}
        *[Symbol.iterator]() {
          yield this._x, yield this._y, yield this._z, yield this._order;
        }
      }
      Od.DEFAULT_ORDER = "XYZ";
      class Cd {
        constructor() {
          this.mask = 1;
        }
        set(t) {
          this.mask = ((1 << t) | 0) >>> 0;
        }
        enable(t) {
          this.mask |= (1 << t) | 0;
        }
        enableAll() {
          this.mask = -1;
        }
        toggle(t) {
          this.mask ^= (1 << t) | 0;
        }
        disable(t) {
          this.mask &= ~((1 << t) | 0);
        }
        disableAll() {
          this.mask = 0;
        }
        test(t) {
          return 0 != (this.mask & t.mask);
        }
        isEnabled(t) {
          return 0 != (this.mask & ((1 << t) | 0));
        }
      }
      let Nd = 0;
      const Ld = new Wc(),
        Dd = new Xc(),
        Ud = new Td(),
        Fd = new Wc(),
        Bd = new Wc(),
        Gd = new Wc(),
        kd = new Xc(),
        Hd = new Wc(1, 0, 0),
        zd = new Wc(0, 1, 0),
        Vd = new Wc(0, 0, 1),
        Xd = { type: "added" },
        Wd = { type: "removed" };
      class jd extends rc {
        constructor() {
          super(),
            (this.isObject3D = !0),
            Object.defineProperty(this, "id", { value: Nd++ }),
            (this.uuid = sc()),
            (this.name = ""),
            (this.type = "Object3D"),
            (this.parent = null),
            (this.children = []),
            (this.up = jd.DEFAULT_UP.clone());
          const t = new Wc(),
            e = new Od(),
            n = new Xc(),
            r = new Wc(1, 1, 1);
          e._onChange(function () {
            n.setFromEuler(e, !1);
          }),
            n._onChange(function () {
              e.setFromQuaternion(n, void 0, !1);
            }),
            Object.defineProperties(this, {
              position: { configurable: !0, enumerable: !0, value: t },
              rotation: { configurable: !0, enumerable: !0, value: e },
              quaternion: { configurable: !0, enumerable: !0, value: n },
              scale: { configurable: !0, enumerable: !0, value: r },
              modelViewMatrix: { value: new Td() },
              normalMatrix: { value: new yc() },
            }),
            (this.matrix = new Td()),
            (this.matrixWorld = new Td()),
            (this.matrixAutoUpdate = jd.DEFAULT_MATRIX_AUTO_UPDATE),
            (this.matrixWorldNeedsUpdate = !1),
            (this.matrixWorldAutoUpdate = jd.DEFAULT_MATRIX_WORLD_AUTO_UPDATE),
            (this.layers = new Cd()),
            (this.visible = !0),
            (this.castShadow = !1),
            (this.receiveShadow = !1),
            (this.frustumCulled = !0),
            (this.renderOrder = 0),
            (this.animations = []),
            (this.userData = {});
        }
        onBeforeRender() {}
        onAfterRender() {}
        applyMatrix4(t) {
          this.matrixAutoUpdate && this.updateMatrix(),
            this.matrix.premultiply(t),
            this.matrix.decompose(this.position, this.quaternion, this.scale);
        }
        applyQuaternion(t) {
          return this.quaternion.premultiply(t), this;
        }
        setRotationFromAxisAngle(t, e) {
          this.quaternion.setFromAxisAngle(t, e);
        }
        setRotationFromEuler(t) {
          this.quaternion.setFromEuler(t, !0);
        }
        setRotationFromMatrix(t) {
          this.quaternion.setFromRotationMatrix(t);
        }
        setRotationFromQuaternion(t) {
          this.quaternion.copy(t);
        }
        rotateOnAxis(t, e) {
          return Dd.setFromAxisAngle(t, e), this.quaternion.multiply(Dd), this;
        }
        rotateOnWorldAxis(t, e) {
          return (
            Dd.setFromAxisAngle(t, e), this.quaternion.premultiply(Dd), this
          );
        }
        rotateX(t) {
          return this.rotateOnAxis(Hd, t);
        }
        rotateY(t) {
          return this.rotateOnAxis(zd, t);
        }
        rotateZ(t) {
          return this.rotateOnAxis(Vd, t);
        }
        translateOnAxis(t, e) {
          return (
            Ld.copy(t).applyQuaternion(this.quaternion),
            this.position.add(Ld.multiplyScalar(e)),
            this
          );
        }
        translateX(t) {
          return this.translateOnAxis(Hd, t);
        }
        translateY(t) {
          return this.translateOnAxis(zd, t);
        }
        translateZ(t) {
          return this.translateOnAxis(Vd, t);
        }
        localToWorld(t) {
          return (
            this.updateWorldMatrix(!0, !1), t.applyMatrix4(this.matrixWorld)
          );
        }
        worldToLocal(t) {
          return (
            this.updateWorldMatrix(!0, !1),
            t.applyMatrix4(Ud.copy(this.matrixWorld).invert())
          );
        }
        lookAt(t, e, n) {
          t.isVector3 ? Fd.copy(t) : Fd.set(t, e, n);
          const r = this.parent;
          this.updateWorldMatrix(!0, !1),
            Bd.setFromMatrixPosition(this.matrixWorld),
            this.isCamera || this.isLight
              ? Ud.lookAt(Bd, Fd, this.up)
              : Ud.lookAt(Fd, Bd, this.up),
            this.quaternion.setFromRotationMatrix(Ud),
            r &&
              (Ud.extractRotation(r.matrixWorld),
              Dd.setFromRotationMatrix(Ud),
              this.quaternion.premultiply(Dd.invert()));
        }
        add(t) {
          if (arguments.length > 1) {
            for (let t = 0; t < arguments.length; t++) this.add(arguments[t]);
            return this;
          }
          return t === this
            ? (console.error(
                "THREE.Object3D.add: object can't be added as a child of itself.",
                t,
              ),
              this)
            : (t && t.isObject3D
                ? (null !== t.parent && t.parent.remove(t),
                  (t.parent = this),
                  this.children.push(t),
                  t.dispatchEvent(Xd))
                : console.error(
                    "THREE.Object3D.add: object not an instance of THREE.Object3D.",
                    t,
                  ),
              this);
        }
        remove(t) {
          if (arguments.length > 1) {
            for (let t = 0; t < arguments.length; t++)
              this.remove(arguments[t]);
            return this;
          }
          const e = this.children.indexOf(t);
          return (
            -1 !== e &&
              ((t.parent = null),
              this.children.splice(e, 1),
              t.dispatchEvent(Wd)),
            this
          );
        }
        removeFromParent() {
          const t = this.parent;
          return null !== t && t.remove(this), this;
        }
        clear() {
          for (let t = 0; t < this.children.length; t++) {
            const e = this.children[t];
            (e.parent = null), e.dispatchEvent(Wd);
          }
          return (this.children.length = 0), this;
        }
        attach(t) {
          return (
            this.updateWorldMatrix(!0, !1),
            Ud.copy(this.matrixWorld).invert(),
            null !== t.parent &&
              (t.parent.updateWorldMatrix(!0, !1),
              Ud.multiply(t.parent.matrixWorld)),
            t.applyMatrix4(Ud),
            this.add(t),
            t.updateWorldMatrix(!1, !0),
            this
          );
        }
        getObjectById(t) {
          return this.getObjectByProperty("id", t);
        }
        getObjectByName(t) {
          return this.getObjectByProperty("name", t);
        }
        getObjectByProperty(t, e) {
          if (this[t] === e) return this;
          for (let n = 0, r = this.children.length; n < r; n++) {
            const r = this.children[n].getObjectByProperty(t, e);
            if (void 0 !== r) return r;
          }
        }
        getObjectsByProperty(t, e) {
          let n = [];
          this[t] === e && n.push(this);
          for (let r = 0, i = this.children.length; r < i; r++) {
            const i = this.children[r].getObjectsByProperty(t, e);
            i.length > 0 && (n = n.concat(i));
          }
          return n;
        }
        getWorldPosition(t) {
          return (
            this.updateWorldMatrix(!0, !1),
            t.setFromMatrixPosition(this.matrixWorld)
          );
        }
        getWorldQuaternion(t) {
          return (
            this.updateWorldMatrix(!0, !1),
            this.matrixWorld.decompose(Bd, t, Gd),
            t
          );
        }
        getWorldScale(t) {
          return (
            this.updateWorldMatrix(!0, !1),
            this.matrixWorld.decompose(Bd, kd, t),
            t
          );
        }
        getWorldDirection(t) {
          this.updateWorldMatrix(!0, !1);
          const e = this.matrixWorld.elements;
          return t.set(e[8], e[9], e[10]).normalize();
        }
        raycast() {}
        traverse(t) {
          t(this);
          const e = this.children;
          for (let n = 0, r = e.length; n < r; n++) e[n].traverse(t);
        }
        traverseVisible(t) {
          if (!1 === this.visible) return;
          t(this);
          const e = this.children;
          for (let n = 0, r = e.length; n < r; n++) e[n].traverseVisible(t);
        }
        traverseAncestors(t) {
          const e = this.parent;
          null !== e && (t(e), e.traverseAncestors(t));
        }
        updateMatrix() {
          this.matrix.compose(this.position, this.quaternion, this.scale),
            (this.matrixWorldNeedsUpdate = !0);
        }
        updateMatrixWorld(t) {
          this.matrixAutoUpdate && this.updateMatrix(),
            (this.matrixWorldNeedsUpdate || t) &&
              (null === this.parent
                ? this.matrixWorld.copy(this.matrix)
                : this.matrixWorld.multiplyMatrices(
                    this.parent.matrixWorld,
                    this.matrix,
                  ),
              (this.matrixWorldNeedsUpdate = !1),
              (t = !0));
          const e = this.children;
          for (let n = 0, r = e.length; n < r; n++) {
            const r = e[n];
            (!0 !== r.matrixWorldAutoUpdate && !0 !== t) ||
              r.updateMatrixWorld(t);
          }
        }
        updateWorldMatrix(t, e) {
          const n = this.parent;
          if (
            (!0 === t &&
              null !== n &&
              !0 === n.matrixWorldAutoUpdate &&
              n.updateWorldMatrix(!0, !1),
            this.matrixAutoUpdate && this.updateMatrix(),
            null === this.parent
              ? this.matrixWorld.copy(this.matrix)
              : this.matrixWorld.multiplyMatrices(
                  this.parent.matrixWorld,
                  this.matrix,
                ),
            !0 === e)
          ) {
            const t = this.children;
            for (let e = 0, n = t.length; e < n; e++) {
              const n = t[e];
              !0 === n.matrixWorldAutoUpdate && n.updateWorldMatrix(!1, !0);
            }
          }
        }
        toJSON(t) {
          const e = void 0 === t || "string" == typeof t,
            n = {};
          e &&
            ((t = {
              geometries: {},
              materials: {},
              textures: {},
              images: {},
              shapes: {},
              skeletons: {},
              animations: {},
              nodes: {},
            }),
            (n.metadata = {
              version: 4.6,
              type: "Object",
              generator: "Object3D.toJSON",
            }));
          const r = {};
          function i(e, n) {
            return void 0 === e[n.uuid] && (e[n.uuid] = n.toJSON(t)), n.uuid;
          }
          if (
            ((r.uuid = this.uuid),
            (r.type = this.type),
            "" !== this.name && (r.name = this.name),
            !0 === this.castShadow && (r.castShadow = !0),
            !0 === this.receiveShadow && (r.receiveShadow = !0),
            !1 === this.visible && (r.visible = !1),
            !1 === this.frustumCulled && (r.frustumCulled = !1),
            0 !== this.renderOrder && (r.renderOrder = this.renderOrder),
            Object.keys(this.userData).length > 0 &&
              (r.userData = this.userData),
            (r.layers = this.layers.mask),
            (r.matrix = this.matrix.toArray()),
            (r.up = this.up.toArray()),
            !1 === this.matrixAutoUpdate && (r.matrixAutoUpdate = !1),
            this.isInstancedMesh &&
              ((r.type = "InstancedMesh"),
              (r.count = this.count),
              (r.instanceMatrix = this.instanceMatrix.toJSON()),
              null !== this.instanceColor &&
                (r.instanceColor = this.instanceColor.toJSON())),
            this.isScene)
          )
            this.background &&
              (this.background.isColor
                ? (r.background = this.background.toJSON())
                : this.background.isTexture &&
                  (r.background = this.background.toJSON(t).uuid)),
              this.environment &&
                this.environment.isTexture &&
                !0 !== this.environment.isRenderTargetTexture &&
                (r.environment = this.environment.toJSON(t).uuid);
          else if (this.isMesh || this.isLine || this.isPoints) {
            r.geometry = i(t.geometries, this.geometry);
            const e = this.geometry.parameters;
            if (void 0 !== e && void 0 !== e.shapes) {
              const n = e.shapes;
              if (Array.isArray(n))
                for (let e = 0, r = n.length; e < r; e++) {
                  const r = n[e];
                  i(t.shapes, r);
                }
              else i(t.shapes, n);
            }
          }
          if (
            (this.isSkinnedMesh &&
              ((r.bindMode = this.bindMode),
              (r.bindMatrix = this.bindMatrix.toArray()),
              void 0 !== this.skeleton &&
                (i(t.skeletons, this.skeleton),
                (r.skeleton = this.skeleton.uuid))),
            void 0 !== this.material)
          )
            if (Array.isArray(this.material)) {
              const e = [];
              for (let n = 0, r = this.material.length; n < r; n++)
                e.push(i(t.materials, this.material[n]));
              r.material = e;
            } else r.material = i(t.materials, this.material);
          if (this.children.length > 0) {
            r.children = [];
            for (let e = 0; e < this.children.length; e++)
              r.children.push(this.children[e].toJSON(t).object);
          }
          if (this.animations.length > 0) {
            r.animations = [];
            for (let e = 0; e < this.animations.length; e++) {
              const n = this.animations[e];
              r.animations.push(i(t.animations, n));
            }
          }
          if (e) {
            const e = o(t.geometries),
              r = o(t.materials),
              i = o(t.textures),
              a = o(t.images),
              s = o(t.shapes),
              l = o(t.skeletons),
              u = o(t.animations),
              h = o(t.nodes);
            e.length > 0 && (n.geometries = e),
              r.length > 0 && (n.materials = r),
              i.length > 0 && (n.textures = i),
              a.length > 0 && (n.images = a),
              s.length > 0 && (n.shapes = s),
              l.length > 0 && (n.skeletons = l),
              u.length > 0 && (n.animations = u),
              h.length > 0 && (n.nodes = h);
          }
          return (n.object = r), n;
          function o(t) {
            const e = [];
            for (const n in t) {
              const r = t[n];
              delete r.metadata, e.push(r);
            }
            return e;
          }
        }
        clone(t) {
          return new this.constructor().copy(this, t);
        }
        copy(t, e = !0) {
          if (
            ((this.name = t.name),
            this.up.copy(t.up),
            this.position.copy(t.position),
            (this.rotation.order = t.rotation.order),
            this.quaternion.copy(t.quaternion),
            this.scale.copy(t.scale),
            this.matrix.copy(t.matrix),
            this.matrixWorld.copy(t.matrixWorld),
            (this.matrixAutoUpdate = t.matrixAutoUpdate),
            (this.matrixWorldNeedsUpdate = t.matrixWorldNeedsUpdate),
            (this.matrixWorldAutoUpdate = t.matrixWorldAutoUpdate),
            (this.layers.mask = t.layers.mask),
            (this.visible = t.visible),
            (this.castShadow = t.castShadow),
            (this.receiveShadow = t.receiveShadow),
            (this.frustumCulled = t.frustumCulled),
            (this.renderOrder = t.renderOrder),
            (this.animations = t.animations.slice()),
            (this.userData = JSON.parse(JSON.stringify(t.userData))),
            !0 === e)
          )
            for (let e = 0; e < t.children.length; e++) {
              const n = t.children[e];
              this.add(n.clone());
            }
          return this;
        }
      }
      (jd.DEFAULT_UP = new Wc(0, 1, 0)),
        (jd.DEFAULT_MATRIX_AUTO_UPDATE = !0),
        (jd.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = !0);
      const Yd = new Wc(),
        qd = new Wc(),
        Kd = new Wc(),
        Zd = new Wc(),
        Qd = new Wc(),
        $d = new Wc(),
        Jd = new Wc(),
        tf = new Wc(),
        ef = new Wc(),
        nf = new Wc();
      let rf = !1;
      class of {
        constructor(t = new Wc(), e = new Wc(), n = new Wc()) {
          (this.a = t), (this.b = e), (this.c = n);
        }
        static getNormal(t, e, n, r) {
          r.subVectors(n, e), Yd.subVectors(t, e), r.cross(Yd);
          const i = r.lengthSq();
          return i > 0 ? r.multiplyScalar(1 / Math.sqrt(i)) : r.set(0, 0, 0);
        }
        static getBarycoord(t, e, n, r, i) {
          Yd.subVectors(r, e), qd.subVectors(n, e), Kd.subVectors(t, e);
          const o = Yd.dot(Yd),
            a = Yd.dot(qd),
            s = Yd.dot(Kd),
            l = qd.dot(qd),
            u = qd.dot(Kd),
            h = o * l - a * a;
          if (0 === h) return i.set(-2, -1, -1);
          const c = 1 / h,
            d = (l * s - a * u) * c,
            f = (o * u - a * s) * c;
          return i.set(1 - d - f, f, d);
        }
        static containsPoint(t, e, n, r) {
          return (
            this.getBarycoord(t, e, n, r, Zd),
            Zd.x >= 0 && Zd.y >= 0 && Zd.x + Zd.y <= 1
          );
        }
        static getUV(t, e, n, r, i, o, a, s) {
          return (
            !1 === rf &&
              (console.warn(
                "THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation().",
              ),
              (rf = !0)),
            this.getInterpolation(t, e, n, r, i, o, a, s)
          );
        }
        static getInterpolation(t, e, n, r, i, o, a, s) {
          return (
            this.getBarycoord(t, e, n, r, Zd),
            s.setScalar(0),
            s.addScaledVector(i, Zd.x),
            s.addScaledVector(o, Zd.y),
            s.addScaledVector(a, Zd.z),
            s
          );
        }
        static isFrontFacing(t, e, n, r) {
          return (
            Yd.subVectors(n, e), qd.subVectors(t, e), Yd.cross(qd).dot(r) < 0
          );
        }
        set(t, e, n) {
          return this.a.copy(t), this.b.copy(e), this.c.copy(n), this;
        }
        setFromPointsAndIndices(t, e, n, r) {
          return this.a.copy(t[e]), this.b.copy(t[n]), this.c.copy(t[r]), this;
        }
        setFromAttributeAndIndices(t, e, n, r) {
          return (
            this.a.fromBufferAttribute(t, e),
            this.b.fromBufferAttribute(t, n),
            this.c.fromBufferAttribute(t, r),
            this
          );
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(t) {
          return this.a.copy(t.a), this.b.copy(t.b), this.c.copy(t.c), this;
        }
        getArea() {
          return (
            Yd.subVectors(this.c, this.b),
            qd.subVectors(this.a, this.b),
            0.5 * Yd.cross(qd).length()
          );
        }
        getMidpoint(t) {
          return t
            .addVectors(this.a, this.b)
            .add(this.c)
            .multiplyScalar(1 / 3);
        }
        getNormal(t) {
          return of.getNormal(this.a, this.b, this.c, t);
        }
        getPlane(t) {
          return t.setFromCoplanarPoints(this.a, this.b, this.c);
        }
        getBarycoord(t, e) {
          return of.getBarycoord(t, this.a, this.b, this.c, e);
        }
        getUV(t, e, n, r, i) {
          return (
            !1 === rf &&
              (console.warn(
                "THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation().",
              ),
              (rf = !0)),
            of.getInterpolation(t, this.a, this.b, this.c, e, n, r, i)
          );
        }
        getInterpolation(t, e, n, r, i) {
          return of.getInterpolation(t, this.a, this.b, this.c, e, n, r, i);
        }
        containsPoint(t) {
          return of.containsPoint(t, this.a, this.b, this.c);
        }
        isFrontFacing(t) {
          return of.isFrontFacing(this.a, this.b, this.c, t);
        }
        intersectsBox(t) {
          return t.intersectsTriangle(this);
        }
        closestPointToPoint(t, e) {
          const n = this.a,
            r = this.b,
            i = this.c;
          let o, a;
          Qd.subVectors(r, n), $d.subVectors(i, n), tf.subVectors(t, n);
          const s = Qd.dot(tf),
            l = $d.dot(tf);
          if (s <= 0 && l <= 0) return e.copy(n);
          ef.subVectors(t, r);
          const u = Qd.dot(ef),
            h = $d.dot(ef);
          if (u >= 0 && h <= u) return e.copy(r);
          const c = s * h - u * l;
          if (c <= 0 && s >= 0 && u <= 0)
            return (o = s / (s - u)), e.copy(n).addScaledVector(Qd, o);
          nf.subVectors(t, i);
          const d = Qd.dot(nf),
            f = $d.dot(nf);
          if (f >= 0 && d <= f) return e.copy(i);
          const p = d * l - s * f;
          if (p <= 0 && l >= 0 && f <= 0)
            return (a = l / (l - f)), e.copy(n).addScaledVector($d, a);
          const m = u * f - d * h;
          if (m <= 0 && h - u >= 0 && d - f >= 0)
            return (
              Jd.subVectors(i, r),
              (a = (h - u) / (h - u + (d - f))),
              e.copy(r).addScaledVector(Jd, a)
            );
          const _ = 1 / (m + p + c);
          return (
            (o = p * _),
            (a = c * _),
            e.copy(n).addScaledVector(Qd, o).addScaledVector($d, a)
          );
        }
        equals(t) {
          return t.a.equals(this.a) && t.b.equals(this.b) && t.c.equals(this.c);
        }
      }
      let af = 0;
      class sf extends rc {
        constructor() {
          super(),
            (this.isMaterial = !0),
            Object.defineProperty(this, "id", { value: af++ }),
            (this.uuid = sc()),
            (this.name = ""),
            (this.type = "Material"),
            (this.blending = 1),
            (this.side = eh),
            (this.vertexColors = !1),
            (this.opacity = 1),
            (this.transparent = !1),
            (this.alphaHash = !1),
            (this.blendSrc = 204),
            (this.blendDst = 205),
            (this.blendEquation = oh),
            (this.blendSrcAlpha = null),
            (this.blendDstAlpha = null),
            (this.blendEquationAlpha = null),
            (this.depthFunc = 3),
            (this.depthTest = !0),
            (this.depthWrite = !0),
            (this.stencilWriteMask = 255),
            (this.stencilFunc = 519),
            (this.stencilRef = 0),
            (this.stencilFuncMask = 255),
            (this.stencilFail = Qh),
            (this.stencilZFail = Qh),
            (this.stencilZPass = Qh),
            (this.stencilWrite = !1),
            (this.clippingPlanes = null),
            (this.clipIntersection = !1),
            (this.clipShadows = !1),
            (this.shadowSide = null),
            (this.colorWrite = !0),
            (this.precision = null),
            (this.polygonOffset = !1),
            (this.polygonOffsetFactor = 0),
            (this.polygonOffsetUnits = 0),
            (this.dithering = !1),
            (this.alphaToCoverage = !1),
            (this.premultipliedAlpha = !1),
            (this.forceSinglePass = !1),
            (this.visible = !0),
            (this.toneMapped = !0),
            (this.userData = {}),
            (this.version = 0),
            (this._alphaTest = 0);
        }
        get alphaTest() {
          return this._alphaTest;
        }
        set alphaTest(t) {
          this._alphaTest > 0 != t > 0 && this.version++, (this._alphaTest = t);
        }
        onBuild() {}
        onBeforeRender() {}
        onBeforeCompile() {}
        customProgramCacheKey() {
          return this.onBeforeCompile.toString();
        }
        setValues(t) {
          if (void 0 !== t)
            for (const e in t) {
              const n = t[e];
              if (void 0 === n) {
                console.warn(
                  `THREE.Material: parameter '${e}' has value of undefined.`,
                );
                continue;
              }
              const r = this[e];
              void 0 !== r
                ? r && r.isColor
                  ? r.set(n)
                  : r && r.isVector3 && n && n.isVector3
                    ? r.copy(n)
                    : (this[e] = n)
                : console.warn(
                    `THREE.Material: '${e}' is not a property of THREE.${this.type}.`,
                  );
            }
        }
        toJSON(t) {
          const e = void 0 === t || "string" == typeof t;
          e && (t = { textures: {}, images: {} });
          const n = {
            metadata: {
              version: 4.6,
              type: "Material",
              generator: "Material.toJSON",
            },
          };
          function r(t) {
            const e = [];
            for (const n in t) {
              const r = t[n];
              delete r.metadata, e.push(r);
            }
            return e;
          }
          if (
            ((n.uuid = this.uuid),
            (n.type = this.type),
            "" !== this.name && (n.name = this.name),
            this.color && this.color.isColor && (n.color = this.color.getHex()),
            void 0 !== this.roughness && (n.roughness = this.roughness),
            void 0 !== this.metalness && (n.metalness = this.metalness),
            void 0 !== this.sheen && (n.sheen = this.sheen),
            this.sheenColor &&
              this.sheenColor.isColor &&
              (n.sheenColor = this.sheenColor.getHex()),
            void 0 !== this.sheenRoughness &&
              (n.sheenRoughness = this.sheenRoughness),
            this.emissive &&
              this.emissive.isColor &&
              (n.emissive = this.emissive.getHex()),
            this.emissiveIntensity &&
              1 !== this.emissiveIntensity &&
              (n.emissiveIntensity = this.emissiveIntensity),
            this.specular &&
              this.specular.isColor &&
              (n.specular = this.specular.getHex()),
            void 0 !== this.specularIntensity &&
              (n.specularIntensity = this.specularIntensity),
            this.specularColor &&
              this.specularColor.isColor &&
              (n.specularColor = this.specularColor.getHex()),
            void 0 !== this.shininess && (n.shininess = this.shininess),
            void 0 !== this.clearcoat && (n.clearcoat = this.clearcoat),
            void 0 !== this.clearcoatRoughness &&
              (n.clearcoatRoughness = this.clearcoatRoughness),
            this.clearcoatMap &&
              this.clearcoatMap.isTexture &&
              (n.clearcoatMap = this.clearcoatMap.toJSON(t).uuid),
            this.clearcoatRoughnessMap &&
              this.clearcoatRoughnessMap.isTexture &&
              (n.clearcoatRoughnessMap =
                this.clearcoatRoughnessMap.toJSON(t).uuid),
            this.clearcoatNormalMap &&
              this.clearcoatNormalMap.isTexture &&
              ((n.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(t).uuid),
              (n.clearcoatNormalScale = this.clearcoatNormalScale.toArray())),
            void 0 !== this.iridescence && (n.iridescence = this.iridescence),
            void 0 !== this.iridescenceIOR &&
              (n.iridescenceIOR = this.iridescenceIOR),
            void 0 !== this.iridescenceThicknessRange &&
              (n.iridescenceThicknessRange = this.iridescenceThicknessRange),
            this.iridescenceMap &&
              this.iridescenceMap.isTexture &&
              (n.iridescenceMap = this.iridescenceMap.toJSON(t).uuid),
            this.iridescenceThicknessMap &&
              this.iridescenceThicknessMap.isTexture &&
              (n.iridescenceThicknessMap =
                this.iridescenceThicknessMap.toJSON(t).uuid),
            void 0 !== this.anisotropy && (n.anisotropy = this.anisotropy),
            void 0 !== this.anisotropyRotation &&
              (n.anisotropyRotation = this.anisotropyRotation),
            this.anisotropyMap &&
              this.anisotropyMap.isTexture &&
              (n.anisotropyMap = this.anisotropyMap.toJSON(t).uuid),
            this.map && this.map.isTexture && (n.map = this.map.toJSON(t).uuid),
            this.matcap &&
              this.matcap.isTexture &&
              (n.matcap = this.matcap.toJSON(t).uuid),
            this.alphaMap &&
              this.alphaMap.isTexture &&
              (n.alphaMap = this.alphaMap.toJSON(t).uuid),
            this.lightMap &&
              this.lightMap.isTexture &&
              ((n.lightMap = this.lightMap.toJSON(t).uuid),
              (n.lightMapIntensity = this.lightMapIntensity)),
            this.aoMap &&
              this.aoMap.isTexture &&
              ((n.aoMap = this.aoMap.toJSON(t).uuid),
              (n.aoMapIntensity = this.aoMapIntensity)),
            this.bumpMap &&
              this.bumpMap.isTexture &&
              ((n.bumpMap = this.bumpMap.toJSON(t).uuid),
              (n.bumpScale = this.bumpScale)),
            this.normalMap &&
              this.normalMap.isTexture &&
              ((n.normalMap = this.normalMap.toJSON(t).uuid),
              (n.normalMapType = this.normalMapType),
              (n.normalScale = this.normalScale.toArray())),
            this.displacementMap &&
              this.displacementMap.isTexture &&
              ((n.displacementMap = this.displacementMap.toJSON(t).uuid),
              (n.displacementScale = this.displacementScale),
              (n.displacementBias = this.displacementBias)),
            this.roughnessMap &&
              this.roughnessMap.isTexture &&
              (n.roughnessMap = this.roughnessMap.toJSON(t).uuid),
            this.metalnessMap &&
              this.metalnessMap.isTexture &&
              (n.metalnessMap = this.metalnessMap.toJSON(t).uuid),
            this.emissiveMap &&
              this.emissiveMap.isTexture &&
              (n.emissiveMap = this.emissiveMap.toJSON(t).uuid),
            this.specularMap &&
              this.specularMap.isTexture &&
              (n.specularMap = this.specularMap.toJSON(t).uuid),
            this.specularIntensityMap &&
              this.specularIntensityMap.isTexture &&
              (n.specularIntensityMap =
                this.specularIntensityMap.toJSON(t).uuid),
            this.specularColorMap &&
              this.specularColorMap.isTexture &&
              (n.specularColorMap = this.specularColorMap.toJSON(t).uuid),
            this.envMap &&
              this.envMap.isTexture &&
              ((n.envMap = this.envMap.toJSON(t).uuid),
              void 0 !== this.combine && (n.combine = this.combine)),
            void 0 !== this.envMapIntensity &&
              (n.envMapIntensity = this.envMapIntensity),
            void 0 !== this.reflectivity &&
              (n.reflectivity = this.reflectivity),
            void 0 !== this.refractionRatio &&
              (n.refractionRatio = this.refractionRatio),
            this.gradientMap &&
              this.gradientMap.isTexture &&
              (n.gradientMap = this.gradientMap.toJSON(t).uuid),
            void 0 !== this.transmission &&
              (n.transmission = this.transmission),
            this.transmissionMap &&
              this.transmissionMap.isTexture &&
              (n.transmissionMap = this.transmissionMap.toJSON(t).uuid),
            void 0 !== this.thickness && (n.thickness = this.thickness),
            this.thicknessMap &&
              this.thicknessMap.isTexture &&
              (n.thicknessMap = this.thicknessMap.toJSON(t).uuid),
            void 0 !== this.attenuationDistance &&
              this.attenuationDistance !== 1 / 0 &&
              (n.attenuationDistance = this.attenuationDistance),
            void 0 !== this.attenuationColor &&
              (n.attenuationColor = this.attenuationColor.getHex()),
            void 0 !== this.size && (n.size = this.size),
            null !== this.shadowSide && (n.shadowSide = this.shadowSide),
            void 0 !== this.sizeAttenuation &&
              (n.sizeAttenuation = this.sizeAttenuation),
            1 !== this.blending && (n.blending = this.blending),
            this.side !== eh && (n.side = this.side),
            this.vertexColors && (n.vertexColors = !0),
            this.opacity < 1 && (n.opacity = this.opacity),
            !0 === this.transparent && (n.transparent = this.transparent),
            (n.depthFunc = this.depthFunc),
            (n.depthTest = this.depthTest),
            (n.depthWrite = this.depthWrite),
            (n.colorWrite = this.colorWrite),
            (n.stencilWrite = this.stencilWrite),
            (n.stencilWriteMask = this.stencilWriteMask),
            (n.stencilFunc = this.stencilFunc),
            (n.stencilRef = this.stencilRef),
            (n.stencilFuncMask = this.stencilFuncMask),
            (n.stencilFail = this.stencilFail),
            (n.stencilZFail = this.stencilZFail),
            (n.stencilZPass = this.stencilZPass),
            void 0 !== this.rotation &&
              0 !== this.rotation &&
              (n.rotation = this.rotation),
            !0 === this.polygonOffset && (n.polygonOffset = !0),
            0 !== this.polygonOffsetFactor &&
              (n.polygonOffsetFactor = this.polygonOffsetFactor),
            0 !== this.polygonOffsetUnits &&
              (n.polygonOffsetUnits = this.polygonOffsetUnits),
            void 0 !== this.linewidth &&
              1 !== this.linewidth &&
              (n.linewidth = this.linewidth),
            void 0 !== this.dashSize && (n.dashSize = this.dashSize),
            void 0 !== this.gapSize && (n.gapSize = this.gapSize),
            void 0 !== this.scale && (n.scale = this.scale),
            !0 === this.dithering && (n.dithering = !0),
            this.alphaTest > 0 && (n.alphaTest = this.alphaTest),
            !0 === this.alphaHash && (n.alphaHash = this.alphaHash),
            !0 === this.alphaToCoverage &&
              (n.alphaToCoverage = this.alphaToCoverage),
            !0 === this.premultipliedAlpha &&
              (n.premultipliedAlpha = this.premultipliedAlpha),
            !0 === this.forceSinglePass &&
              (n.forceSinglePass = this.forceSinglePass),
            !0 === this.wireframe && (n.wireframe = this.wireframe),
            this.wireframeLinewidth > 1 &&
              (n.wireframeLinewidth = this.wireframeLinewidth),
            "round" !== this.wireframeLinecap &&
              (n.wireframeLinecap = this.wireframeLinecap),
            "round" !== this.wireframeLinejoin &&
              (n.wireframeLinejoin = this.wireframeLinejoin),
            !0 === this.flatShading && (n.flatShading = this.flatShading),
            !1 === this.visible && (n.visible = !1),
            !1 === this.toneMapped && (n.toneMapped = !1),
            !1 === this.fog && (n.fog = !1),
            Object.keys(this.userData).length > 0 &&
              (n.userData = this.userData),
            e)
          ) {
            const e = r(t.textures),
              i = r(t.images);
            e.length > 0 && (n.textures = e), i.length > 0 && (n.images = i);
          }
          return n;
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(t) {
          (this.name = t.name),
            (this.blending = t.blending),
            (this.side = t.side),
            (this.vertexColors = t.vertexColors),
            (this.opacity = t.opacity),
            (this.transparent = t.transparent),
            (this.blendSrc = t.blendSrc),
            (this.blendDst = t.blendDst),
            (this.blendEquation = t.blendEquation),
            (this.blendSrcAlpha = t.blendSrcAlpha),
            (this.blendDstAlpha = t.blendDstAlpha),
            (this.blendEquationAlpha = t.blendEquationAlpha),
            (this.depthFunc = t.depthFunc),
            (this.depthTest = t.depthTest),
            (this.depthWrite = t.depthWrite),
            (this.stencilWriteMask = t.stencilWriteMask),
            (this.stencilFunc = t.stencilFunc),
            (this.stencilRef = t.stencilRef),
            (this.stencilFuncMask = t.stencilFuncMask),
            (this.stencilFail = t.stencilFail),
            (this.stencilZFail = t.stencilZFail),
            (this.stencilZPass = t.stencilZPass),
            (this.stencilWrite = t.stencilWrite);
          const e = t.clippingPlanes;
          let n = null;
          if (null !== e) {
            const t = e.length;
            n = new Array(t);
            for (let r = 0; r !== t; ++r) n[r] = e[r].clone();
          }
          return (
            (this.clippingPlanes = n),
            (this.clipIntersection = t.clipIntersection),
            (this.clipShadows = t.clipShadows),
            (this.shadowSide = t.shadowSide),
            (this.colorWrite = t.colorWrite),
            (this.precision = t.precision),
            (this.polygonOffset = t.polygonOffset),
            (this.polygonOffsetFactor = t.polygonOffsetFactor),
            (this.polygonOffsetUnits = t.polygonOffsetUnits),
            (this.dithering = t.dithering),
            (this.alphaTest = t.alphaTest),
            (this.alphaHash = t.alphaHash),
            (this.alphaToCoverage = t.alphaToCoverage),
            (this.premultipliedAlpha = t.premultipliedAlpha),
            (this.forceSinglePass = t.forceSinglePass),
            (this.visible = t.visible),
            (this.toneMapped = t.toneMapped),
            (this.userData = JSON.parse(JSON.stringify(t.userData))),
            this
          );
        }
        dispose() {
          this.dispatchEvent({ type: "dispose" });
        }
        set needsUpdate(t) {
          !0 === t && this.version++;
        }
      }
      const lf = {
          aliceblue: 15792383,
          antiquewhite: 16444375,
          aqua: 65535,
          aquamarine: 8388564,
          azure: 15794175,
          beige: 16119260,
          bisque: 16770244,
          black: 0,
          blanchedalmond: 16772045,
          blue: 255,
          blueviolet: 9055202,
          brown: 10824234,
          burlywood: 14596231,
          cadetblue: 6266528,
          chartreuse: 8388352,
          chocolate: 13789470,
          coral: 16744272,
          cornflowerblue: 6591981,
          cornsilk: 16775388,
          crimson: 14423100,
          cyan: 65535,
          darkblue: 139,
          darkcyan: 35723,
          darkgoldenrod: 12092939,
          darkgray: 11119017,
          darkgreen: 25600,
          darkgrey: 11119017,
          darkkhaki: 12433259,
          darkmagenta: 9109643,
          darkolivegreen: 5597999,
          darkorange: 16747520,
          darkorchid: 10040012,
          darkred: 9109504,
          darksalmon: 15308410,
          darkseagreen: 9419919,
          darkslateblue: 4734347,
          darkslategray: 3100495,
          darkslategrey: 3100495,
          darkturquoise: 52945,
          darkviolet: 9699539,
          deeppink: 16716947,
          deepskyblue: 49151,
          dimgray: 6908265,
          dimgrey: 6908265,
          dodgerblue: 2003199,
          firebrick: 11674146,
          floralwhite: 16775920,
          forestgreen: 2263842,
          fuchsia: 16711935,
          gainsboro: 14474460,
          ghostwhite: 16316671,
          gold: 16766720,
          goldenrod: 14329120,
          gray: 8421504,
          green: 32768,
          greenyellow: 11403055,
          grey: 8421504,
          honeydew: 15794160,
          hotpink: 16738740,
          indianred: 13458524,
          indigo: 4915330,
          ivory: 16777200,
          khaki: 15787660,
          lavender: 15132410,
          lavenderblush: 16773365,
          lawngreen: 8190976,
          lemonchiffon: 16775885,
          lightblue: 11393254,
          lightcoral: 15761536,
          lightcyan: 14745599,
          lightgoldenrodyellow: 16448210,
          lightgray: 13882323,
          lightgreen: 9498256,
          lightgrey: 13882323,
          lightpink: 16758465,
          lightsalmon: 16752762,
          lightseagreen: 2142890,
          lightskyblue: 8900346,
          lightslategray: 7833753,
          lightslategrey: 7833753,
          lightsteelblue: 11584734,
          lightyellow: 16777184,
          lime: 65280,
          limegreen: 3329330,
          linen: 16445670,
          magenta: 16711935,
          maroon: 8388608,
          mediumaquamarine: 6737322,
          mediumblue: 205,
          mediumorchid: 12211667,
          mediumpurple: 9662683,
          mediumseagreen: 3978097,
          mediumslateblue: 8087790,
          mediumspringgreen: 64154,
          mediumturquoise: 4772300,
          mediumvioletred: 13047173,
          midnightblue: 1644912,
          mintcream: 16121850,
          mistyrose: 16770273,
          moccasin: 16770229,
          navajowhite: 16768685,
          navy: 128,
          oldlace: 16643558,
          olive: 8421376,
          olivedrab: 7048739,
          orange: 16753920,
          orangered: 16729344,
          orchid: 14315734,
          palegoldenrod: 15657130,
          palegreen: 10025880,
          paleturquoise: 11529966,
          palevioletred: 14381203,
          papayawhip: 16773077,
          peachpuff: 16767673,
          peru: 13468991,
          pink: 16761035,
          plum: 14524637,
          powderblue: 11591910,
          purple: 8388736,
          rebeccapurple: 6697881,
          red: 16711680,
          rosybrown: 12357519,
          royalblue: 4286945,
          saddlebrown: 9127187,
          salmon: 16416882,
          sandybrown: 16032864,
          seagreen: 3050327,
          seashell: 16774638,
          sienna: 10506797,
          silver: 12632256,
          skyblue: 8900331,
          slateblue: 6970061,
          slategray: 7372944,
          slategrey: 7372944,
          snow: 16775930,
          springgreen: 65407,
          steelblue: 4620980,
          tan: 13808780,
          teal: 32896,
          thistle: 14204888,
          tomato: 16737095,
          turquoise: 4251856,
          violet: 15631086,
          wheat: 16113331,
          white: 16777215,
          whitesmoke: 16119285,
          yellow: 16776960,
          yellowgreen: 10145074,
        },
        uf = { h: 0, s: 0, l: 0 },
        hf = { h: 0, s: 0, l: 0 };
      function cf(t, e, n) {
        return (
          n < 0 && (n += 1),
          n > 1 && (n -= 1),
          n < 1 / 6
            ? t + 6 * (e - t) * n
            : n < 0.5
              ? e
              : n < 2 / 3
                ? t + 6 * (e - t) * (2 / 3 - n)
                : t
        );
      }
      class df {
        constructor(t, e, n) {
          return (
            (this.isColor = !0),
            (this.r = 1),
            (this.g = 1),
            (this.b = 1),
            this.set(t, e, n)
          );
        }
        set(t, e, n) {
          if (void 0 === e && void 0 === n) {
            const e = t;
            e && e.isColor
              ? this.copy(e)
              : "number" == typeof e
                ? this.setHex(e)
                : "string" == typeof e && this.setStyle(e);
          } else this.setRGB(t, e, n);
          return this;
        }
        setScalar(t) {
          return (this.r = t), (this.g = t), (this.b = t), this;
        }
        setHex(t, e = qh) {
          return (
            (t = Math.floor(t)),
            (this.r = ((t >> 16) & 255) / 255),
            (this.g = ((t >> 8) & 255) / 255),
            (this.b = (255 & t) / 255),
            Oc.toWorkingColorSpace(this, e),
            this
          );
        }
        setRGB(t, e, n, r = Oc.workingColorSpace) {
          return (
            (this.r = t),
            (this.g = e),
            (this.b = n),
            Oc.toWorkingColorSpace(this, r),
            this
          );
        }
        setHSL(t, e, n, r = Oc.workingColorSpace) {
          if (((t = uc(t, 1)), (e = lc(e, 0, 1)), (n = lc(n, 0, 1)), 0 === e))
            this.r = this.g = this.b = n;
          else {
            const r = n <= 0.5 ? n * (1 + e) : n + e - n * e,
              i = 2 * n - r;
            (this.r = cf(i, r, t + 1 / 3)),
              (this.g = cf(i, r, t)),
              (this.b = cf(i, r, t - 1 / 3));
          }
          return Oc.toWorkingColorSpace(this, r), this;
        }
        setStyle(t, e = qh) {
          function n(e) {
            void 0 !== e &&
              parseFloat(e) < 1 &&
              console.warn(
                "THREE.Color: Alpha component of " + t + " will be ignored.",
              );
          }
          let r;
          if ((r = /^(\w+)\(([^\)]*)\)/.exec(t))) {
            let i;
            const o = r[1],
              a = r[2];
            switch (o) {
              case "rgb":
              case "rgba":
                if (
                  (i =
                    /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                      a,
                    ))
                )
                  return (
                    n(i[4]),
                    this.setRGB(
                      Math.min(255, parseInt(i[1], 10)) / 255,
                      Math.min(255, parseInt(i[2], 10)) / 255,
                      Math.min(255, parseInt(i[3], 10)) / 255,
                      e,
                    )
                  );
                if (
                  (i =
                    /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                      a,
                    ))
                )
                  return (
                    n(i[4]),
                    this.setRGB(
                      Math.min(100, parseInt(i[1], 10)) / 100,
                      Math.min(100, parseInt(i[2], 10)) / 100,
                      Math.min(100, parseInt(i[3], 10)) / 100,
                      e,
                    )
                  );
                break;
              case "hsl":
              case "hsla":
                if (
                  (i =
                    /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                      a,
                    ))
                )
                  return (
                    n(i[4]),
                    this.setHSL(
                      parseFloat(i[1]) / 360,
                      parseFloat(i[2]) / 100,
                      parseFloat(i[3]) / 100,
                      e,
                    )
                  );
                break;
              default:
                console.warn("THREE.Color: Unknown color model " + t);
            }
          } else if ((r = /^\#([A-Fa-f\d]+)$/.exec(t))) {
            const n = r[1],
              i = n.length;
            if (3 === i)
              return this.setRGB(
                parseInt(n.charAt(0), 16) / 15,
                parseInt(n.charAt(1), 16) / 15,
                parseInt(n.charAt(2), 16) / 15,
                e,
              );
            if (6 === i) return this.setHex(parseInt(n, 16), e);
            console.warn("THREE.Color: Invalid hex color " + t);
          } else if (t && t.length > 0) return this.setColorName(t, e);
          return this;
        }
        setColorName(t, e = qh) {
          const n = lf[t.toLowerCase()];
          return (
            void 0 !== n
              ? this.setHex(n, e)
              : console.warn("THREE.Color: Unknown color " + t),
            this
          );
        }
        clone() {
          return new this.constructor(this.r, this.g, this.b);
        }
        copy(t) {
          return (this.r = t.r), (this.g = t.g), (this.b = t.b), this;
        }
        copySRGBToLinear(t) {
          return (
            (this.r = Mc(t.r)), (this.g = Mc(t.g)), (this.b = Mc(t.b)), this
          );
        }
        copyLinearToSRGB(t) {
          return (
            (this.r = Ac(t.r)), (this.g = Ac(t.g)), (this.b = Ac(t.b)), this
          );
        }
        convertSRGBToLinear() {
          return this.copySRGBToLinear(this), this;
        }
        convertLinearToSRGB() {
          return this.copyLinearToSRGB(this), this;
        }
        getHex(t = qh) {
          return (
            Oc.fromWorkingColorSpace(ff.copy(this), t),
            65536 * Math.round(lc(255 * ff.r, 0, 255)) +
              256 * Math.round(lc(255 * ff.g, 0, 255)) +
              Math.round(lc(255 * ff.b, 0, 255))
          );
        }
        getHexString(t = qh) {
          return ("000000" + this.getHex(t).toString(16)).slice(-6);
        }
        getHSL(t, e = Oc.workingColorSpace) {
          Oc.fromWorkingColorSpace(ff.copy(this), e);
          const n = ff.r,
            r = ff.g,
            i = ff.b,
            o = Math.max(n, r, i),
            a = Math.min(n, r, i);
          let s, l;
          const u = (a + o) / 2;
          if (a === o) (s = 0), (l = 0);
          else {
            const t = o - a;
            switch (((l = u <= 0.5 ? t / (o + a) : t / (2 - o - a)), o)) {
              case n:
                s = (r - i) / t + (r < i ? 6 : 0);
                break;
              case r:
                s = (i - n) / t + 2;
                break;
              case i:
                s = (n - r) / t + 4;
            }
            s /= 6;
          }
          return (t.h = s), (t.s = l), (t.l = u), t;
        }
        getRGB(t, e = Oc.workingColorSpace) {
          return (
            Oc.fromWorkingColorSpace(ff.copy(this), e),
            (t.r = ff.r),
            (t.g = ff.g),
            (t.b = ff.b),
            t
          );
        }
        getStyle(t = qh) {
          Oc.fromWorkingColorSpace(ff.copy(this), t);
          const e = ff.r,
            n = ff.g,
            r = ff.b;
          return t !== qh
            ? `color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`
            : `rgb(${Math.round(255 * e)},${Math.round(255 * n)},${Math.round(255 * r)})`;
        }
        offsetHSL(t, e, n) {
          return (
            this.getHSL(uf),
            (uf.h += t),
            (uf.s += e),
            (uf.l += n),
            this.setHSL(uf.h, uf.s, uf.l),
            this
          );
        }
        add(t) {
          return (this.r += t.r), (this.g += t.g), (this.b += t.b), this;
        }
        addColors(t, e) {
          return (
            (this.r = t.r + e.r),
            (this.g = t.g + e.g),
            (this.b = t.b + e.b),
            this
          );
        }
        addScalar(t) {
          return (this.r += t), (this.g += t), (this.b += t), this;
        }
        sub(t) {
          return (
            (this.r = Math.max(0, this.r - t.r)),
            (this.g = Math.max(0, this.g - t.g)),
            (this.b = Math.max(0, this.b - t.b)),
            this
          );
        }
        multiply(t) {
          return (this.r *= t.r), (this.g *= t.g), (this.b *= t.b), this;
        }
        multiplyScalar(t) {
          return (this.r *= t), (this.g *= t), (this.b *= t), this;
        }
        lerp(t, e) {
          return (
            (this.r += (t.r - this.r) * e),
            (this.g += (t.g - this.g) * e),
            (this.b += (t.b - this.b) * e),
            this
          );
        }
        lerpColors(t, e, n) {
          return (
            (this.r = t.r + (e.r - t.r) * n),
            (this.g = t.g + (e.g - t.g) * n),
            (this.b = t.b + (e.b - t.b) * n),
            this
          );
        }
        lerpHSL(t, e) {
          this.getHSL(uf), t.getHSL(hf);
          const n = hc(uf.h, hf.h, e),
            r = hc(uf.s, hf.s, e),
            i = hc(uf.l, hf.l, e);
          return this.setHSL(n, r, i), this;
        }
        setFromVector3(t) {
          return (this.r = t.x), (this.g = t.y), (this.b = t.z), this;
        }
        applyMatrix3(t) {
          const e = this.r,
            n = this.g,
            r = this.b,
            i = t.elements;
          return (
            (this.r = i[0] * e + i[3] * n + i[6] * r),
            (this.g = i[1] * e + i[4] * n + i[7] * r),
            (this.b = i[2] * e + i[5] * n + i[8] * r),
            this
          );
        }
        equals(t) {
          return t.r === this.r && t.g === this.g && t.b === this.b;
        }
        fromArray(t, e = 0) {
          return (
            (this.r = t[e]), (this.g = t[e + 1]), (this.b = t[e + 2]), this
          );
        }
        toArray(t = [], e = 0) {
          return (t[e] = this.r), (t[e + 1] = this.g), (t[e + 2] = this.b), t;
        }
        fromBufferAttribute(t, e) {
          return (
            (this.r = t.getX(e)),
            (this.g = t.getY(e)),
            (this.b = t.getZ(e)),
            this
          );
        }
        toJSON() {
          return this.getHex();
        }
        *[Symbol.iterator]() {
          yield this.r, yield this.g, yield this.b;
        }
      }
      const ff = new df();
      df.NAMES = lf;
      class pf extends sf {
        constructor(t) {
          super(),
            (this.isMeshBasicMaterial = !0),
            (this.type = "MeshBasicMaterial"),
            (this.color = new df(16777215)),
            (this.map = null),
            (this.lightMap = null),
            (this.lightMapIntensity = 1),
            (this.aoMap = null),
            (this.aoMapIntensity = 1),
            (this.specularMap = null),
            (this.alphaMap = null),
            (this.envMap = null),
            (this.combine = ah),
            (this.reflectivity = 1),
            (this.refractionRatio = 0.98),
            (this.wireframe = !1),
            (this.wireframeLinewidth = 1),
            (this.wireframeLinecap = "round"),
            (this.wireframeLinejoin = "round"),
            (this.fog = !0),
            this.setValues(t);
        }
        copy(t) {
          return (
            super.copy(t),
            this.color.copy(t.color),
            (this.map = t.map),
            (this.lightMap = t.lightMap),
            (this.lightMapIntensity = t.lightMapIntensity),
            (this.aoMap = t.aoMap),
            (this.aoMapIntensity = t.aoMapIntensity),
            (this.specularMap = t.specularMap),
            (this.alphaMap = t.alphaMap),
            (this.envMap = t.envMap),
            (this.combine = t.combine),
            (this.reflectivity = t.reflectivity),
            (this.refractionRatio = t.refractionRatio),
            (this.wireframe = t.wireframe),
            (this.wireframeLinewidth = t.wireframeLinewidth),
            (this.wireframeLinecap = t.wireframeLinecap),
            (this.wireframeLinejoin = t.wireframeLinejoin),
            (this.fog = t.fog),
            this
          );
        }
      }
      const mf = new Wc(),
        _f = new vc();
      class gf {
        constructor(t, e, n = !1) {
          if (Array.isArray(t))
            throw new TypeError(
              "THREE.BufferAttribute: array should be a Typed Array.",
            );
          (this.isBufferAttribute = !0),
            (this.name = ""),
            (this.array = t),
            (this.itemSize = e),
            (this.count = void 0 !== t ? t.length / e : 0),
            (this.normalized = n),
            (this.usage = $h),
            (this.updateRange = { offset: 0, count: -1 }),
            (this.gpuType = wh),
            (this.version = 0);
        }
        onUploadCallback() {}
        set needsUpdate(t) {
          !0 === t && this.version++;
        }
        setUsage(t) {
          return (this.usage = t), this;
        }
        copy(t) {
          return (
            (this.name = t.name),
            (this.array = new t.array.constructor(t.array)),
            (this.itemSize = t.itemSize),
            (this.count = t.count),
            (this.normalized = t.normalized),
            (this.usage = t.usage),
            (this.gpuType = t.gpuType),
            this
          );
        }
        copyAt(t, e, n) {
          (t *= this.itemSize), (n *= e.itemSize);
          for (let r = 0, i = this.itemSize; r < i; r++)
            this.array[t + r] = e.array[n + r];
          return this;
        }
        copyArray(t) {
          return this.array.set(t), this;
        }
        applyMatrix3(t) {
          if (2 === this.itemSize)
            for (let e = 0, n = this.count; e < n; e++)
              _f.fromBufferAttribute(this, e),
                _f.applyMatrix3(t),
                this.setXY(e, _f.x, _f.y);
          else if (3 === this.itemSize)
            for (let e = 0, n = this.count; e < n; e++)
              mf.fromBufferAttribute(this, e),
                mf.applyMatrix3(t),
                this.setXYZ(e, mf.x, mf.y, mf.z);
          return this;
        }
        applyMatrix4(t) {
          for (let e = 0, n = this.count; e < n; e++)
            mf.fromBufferAttribute(this, e),
              mf.applyMatrix4(t),
              this.setXYZ(e, mf.x, mf.y, mf.z);
          return this;
        }
        applyNormalMatrix(t) {
          for (let e = 0, n = this.count; e < n; e++)
            mf.fromBufferAttribute(this, e),
              mf.applyNormalMatrix(t),
              this.setXYZ(e, mf.x, mf.y, mf.z);
          return this;
        }
        transformDirection(t) {
          for (let e = 0, n = this.count; e < n; e++)
            mf.fromBufferAttribute(this, e),
              mf.transformDirection(t),
              this.setXYZ(e, mf.x, mf.y, mf.z);
          return this;
        }
        set(t, e = 0) {
          return this.array.set(t, e), this;
        }
        getComponent(t, e) {
          let n = this.array[t * this.itemSize + e];
          return this.normalized && (n = fc(n, this.array)), n;
        }
        setComponent(t, e, n) {
          return (
            this.normalized && (n = pc(n, this.array)),
            (this.array[t * this.itemSize + e] = n),
            this
          );
        }
        getX(t) {
          let e = this.array[t * this.itemSize];
          return this.normalized && (e = fc(e, this.array)), e;
        }
        setX(t, e) {
          return (
            this.normalized && (e = pc(e, this.array)),
            (this.array[t * this.itemSize] = e),
            this
          );
        }
        getY(t) {
          let e = this.array[t * this.itemSize + 1];
          return this.normalized && (e = fc(e, this.array)), e;
        }
        setY(t, e) {
          return (
            this.normalized && (e = pc(e, this.array)),
            (this.array[t * this.itemSize + 1] = e),
            this
          );
        }
        getZ(t) {
          let e = this.array[t * this.itemSize + 2];
          return this.normalized && (e = fc(e, this.array)), e;
        }
        setZ(t, e) {
          return (
            this.normalized && (e = pc(e, this.array)),
            (this.array[t * this.itemSize + 2] = e),
            this
          );
        }
        getW(t) {
          let e = this.array[t * this.itemSize + 3];
          return this.normalized && (e = fc(e, this.array)), e;
        }
        setW(t, e) {
          return (
            this.normalized && (e = pc(e, this.array)),
            (this.array[t * this.itemSize + 3] = e),
            this
          );
        }
        setXY(t, e, n) {
          return (
            (t *= this.itemSize),
            this.normalized &&
              ((e = pc(e, this.array)), (n = pc(n, this.array))),
            (this.array[t + 0] = e),
            (this.array[t + 1] = n),
            this
          );
        }
        setXYZ(t, e, n, r) {
          return (
            (t *= this.itemSize),
            this.normalized &&
              ((e = pc(e, this.array)),
              (n = pc(n, this.array)),
              (r = pc(r, this.array))),
            (this.array[t + 0] = e),
            (this.array[t + 1] = n),
            (this.array[t + 2] = r),
            this
          );
        }
        setXYZW(t, e, n, r, i) {
          return (
            (t *= this.itemSize),
            this.normalized &&
              ((e = pc(e, this.array)),
              (n = pc(n, this.array)),
              (r = pc(r, this.array)),
              (i = pc(i, this.array))),
            (this.array[t + 0] = e),
            (this.array[t + 1] = n),
            (this.array[t + 2] = r),
            (this.array[t + 3] = i),
            this
          );
        }
        onUpload(t) {
          return (this.onUploadCallback = t), this;
        }
        clone() {
          return new this.constructor(this.array, this.itemSize).copy(this);
        }
        toJSON() {
          const t = {
            itemSize: this.itemSize,
            type: this.array.constructor.name,
            array: Array.from(this.array),
            normalized: this.normalized,
          };
          return (
            "" !== this.name && (t.name = this.name),
            this.usage !== $h && (t.usage = this.usage),
            (0 === this.updateRange.offset && -1 === this.updateRange.count) ||
              (t.updateRange = this.updateRange),
            t
          );
        }
      }
      class vf extends gf {
        constructor(t, e, n) {
          super(new Uint16Array(t), e, n);
        }
      }
      class yf extends gf {
        constructor(t, e, n) {
          super(new Uint32Array(t), e, n);
        }
      }
      class Ef extends gf {
        constructor(t, e, n) {
          super(new Float32Array(t), e, n);
        }
      }
      let Tf = 0;
      const bf = new Td(),
        xf = new jd(),
        Sf = new Wc(),
        Mf = new qc(),
        Af = new qc(),
        Rf = new Wc();
      class wf extends rc {
        constructor() {
          super(),
            (this.isBufferGeometry = !0),
            Object.defineProperty(this, "id", { value: Tf++ }),
            (this.uuid = sc()),
            (this.name = ""),
            (this.type = "BufferGeometry"),
            (this.index = null),
            (this.attributes = {}),
            (this.morphAttributes = {}),
            (this.morphTargetsRelative = !1),
            (this.groups = []),
            (this.boundingBox = null),
            (this.boundingSphere = null),
            (this.drawRange = { start: 0, count: 1 / 0 }),
            (this.userData = {});
        }
        getIndex() {
          return this.index;
        }
        setIndex(t) {
          return (
            Array.isArray(t)
              ? (this.index = new (Tc(t) ? yf : vf)(t, 1))
              : (this.index = t),
            this
          );
        }
        getAttribute(t) {
          return this.attributes[t];
        }
        setAttribute(t, e) {
          return (this.attributes[t] = e), this;
        }
        deleteAttribute(t) {
          return delete this.attributes[t], this;
        }
        hasAttribute(t) {
          return void 0 !== this.attributes[t];
        }
        addGroup(t, e, n = 0) {
          this.groups.push({ start: t, count: e, materialIndex: n });
        }
        clearGroups() {
          this.groups = [];
        }
        setDrawRange(t, e) {
          (this.drawRange.start = t), (this.drawRange.count = e);
        }
        applyMatrix4(t) {
          const e = this.attributes.position;
          void 0 !== e && (e.applyMatrix4(t), (e.needsUpdate = !0));
          const n = this.attributes.normal;
          if (void 0 !== n) {
            const e = new yc().getNormalMatrix(t);
            n.applyNormalMatrix(e), (n.needsUpdate = !0);
          }
          const r = this.attributes.tangent;
          return (
            void 0 !== r && (r.transformDirection(t), (r.needsUpdate = !0)),
            null !== this.boundingBox && this.computeBoundingBox(),
            null !== this.boundingSphere && this.computeBoundingSphere(),
            this
          );
        }
        applyQuaternion(t) {
          return bf.makeRotationFromQuaternion(t), this.applyMatrix4(bf), this;
        }
        rotateX(t) {
          return bf.makeRotationX(t), this.applyMatrix4(bf), this;
        }
        rotateY(t) {
          return bf.makeRotationY(t), this.applyMatrix4(bf), this;
        }
        rotateZ(t) {
          return bf.makeRotationZ(t), this.applyMatrix4(bf), this;
        }
        translate(t, e, n) {
          return bf.makeTranslation(t, e, n), this.applyMatrix4(bf), this;
        }
        scale(t, e, n) {
          return bf.makeScale(t, e, n), this.applyMatrix4(bf), this;
        }
        lookAt(t) {
          return (
            xf.lookAt(t), xf.updateMatrix(), this.applyMatrix4(xf.matrix), this
          );
        }
        center() {
          return (
            this.computeBoundingBox(),
            this.boundingBox.getCenter(Sf).negate(),
            this.translate(Sf.x, Sf.y, Sf.z),
            this
          );
        }
        setFromPoints(t) {
          const e = [];
          for (let n = 0, r = t.length; n < r; n++) {
            const r = t[n];
            e.push(r.x, r.y, r.z || 0);
          }
          return this.setAttribute("position", new Ef(e, 3)), this;
        }
        computeBoundingBox() {
          null === this.boundingBox && (this.boundingBox = new qc());
          const t = this.attributes.position,
            e = this.morphAttributes.position;
          if (t && t.isGLBufferAttribute)
            return (
              console.error(
                'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',
                this,
              ),
              void this.boundingBox.set(
                new Wc(-1 / 0, -1 / 0, -1 / 0),
                new Wc(1 / 0, 1 / 0, 1 / 0),
              )
            );
          if (void 0 !== t) {
            if ((this.boundingBox.setFromBufferAttribute(t), e))
              for (let t = 0, n = e.length; t < n; t++) {
                const n = e[t];
                Mf.setFromBufferAttribute(n),
                  this.morphTargetsRelative
                    ? (Rf.addVectors(this.boundingBox.min, Mf.min),
                      this.boundingBox.expandByPoint(Rf),
                      Rf.addVectors(this.boundingBox.max, Mf.max),
                      this.boundingBox.expandByPoint(Rf))
                    : (this.boundingBox.expandByPoint(Mf.min),
                      this.boundingBox.expandByPoint(Mf.max));
              }
          } else this.boundingBox.makeEmpty();
          (isNaN(this.boundingBox.min.x) ||
            isNaN(this.boundingBox.min.y) ||
            isNaN(this.boundingBox.min.z)) &&
            console.error(
              'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
              this,
            );
        }
        computeBoundingSphere() {
          null === this.boundingSphere && (this.boundingSphere = new dd());
          const t = this.attributes.position,
            e = this.morphAttributes.position;
          if (t && t.isGLBufferAttribute)
            return (
              console.error(
                'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
                this,
              ),
              void this.boundingSphere.set(new Wc(), 1 / 0)
            );
          if (t) {
            const n = this.boundingSphere.center;
            if ((Mf.setFromBufferAttribute(t), e))
              for (let t = 0, n = e.length; t < n; t++) {
                const n = e[t];
                Af.setFromBufferAttribute(n),
                  this.morphTargetsRelative
                    ? (Rf.addVectors(Mf.min, Af.min),
                      Mf.expandByPoint(Rf),
                      Rf.addVectors(Mf.max, Af.max),
                      Mf.expandByPoint(Rf))
                    : (Mf.expandByPoint(Af.min), Mf.expandByPoint(Af.max));
              }
            Mf.getCenter(n);
            let r = 0;
            for (let e = 0, i = t.count; e < i; e++)
              Rf.fromBufferAttribute(t, e),
                (r = Math.max(r, n.distanceToSquared(Rf)));
            if (e)
              for (let i = 0, o = e.length; i < o; i++) {
                const o = e[i],
                  a = this.morphTargetsRelative;
                for (let e = 0, i = o.count; e < i; e++)
                  Rf.fromBufferAttribute(o, e),
                    a && (Sf.fromBufferAttribute(t, e), Rf.add(Sf)),
                    (r = Math.max(r, n.distanceToSquared(Rf)));
              }
            (this.boundingSphere.radius = Math.sqrt(r)),
              isNaN(this.boundingSphere.radius) &&
                console.error(
                  'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
                  this,
                );
          }
        }
        computeTangents() {
          const t = this.index,
            e = this.attributes;
          if (
            null === t ||
            void 0 === e.position ||
            void 0 === e.normal ||
            void 0 === e.uv
          )
            return void console.error(
              "THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)",
            );
          const n = t.array,
            r = e.position.array,
            i = e.normal.array,
            o = e.uv.array,
            a = r.length / 3;
          !1 === this.hasAttribute("tangent") &&
            this.setAttribute("tangent", new gf(new Float32Array(4 * a), 4));
          const s = this.getAttribute("tangent").array,
            l = [],
            u = [];
          for (let t = 0; t < a; t++) (l[t] = new Wc()), (u[t] = new Wc());
          const h = new Wc(),
            c = new Wc(),
            d = new Wc(),
            f = new vc(),
            p = new vc(),
            m = new vc(),
            _ = new Wc(),
            g = new Wc();
          function v(t, e, n) {
            h.fromArray(r, 3 * t),
              c.fromArray(r, 3 * e),
              d.fromArray(r, 3 * n),
              f.fromArray(o, 2 * t),
              p.fromArray(o, 2 * e),
              m.fromArray(o, 2 * n),
              c.sub(h),
              d.sub(h),
              p.sub(f),
              m.sub(f);
            const i = 1 / (p.x * m.y - m.x * p.y);
            isFinite(i) &&
              (_.copy(c)
                .multiplyScalar(m.y)
                .addScaledVector(d, -p.y)
                .multiplyScalar(i),
              g
                .copy(d)
                .multiplyScalar(p.x)
                .addScaledVector(c, -m.x)
                .multiplyScalar(i),
              l[t].add(_),
              l[e].add(_),
              l[n].add(_),
              u[t].add(g),
              u[e].add(g),
              u[n].add(g));
          }
          let y = this.groups;
          0 === y.length && (y = [{ start: 0, count: n.length }]);
          for (let t = 0, e = y.length; t < e; ++t) {
            const e = y[t],
              r = e.start;
            for (let t = r, i = r + e.count; t < i; t += 3)
              v(n[t + 0], n[t + 1], n[t + 2]);
          }
          const E = new Wc(),
            T = new Wc(),
            b = new Wc(),
            x = new Wc();
          function S(t) {
            b.fromArray(i, 3 * t), x.copy(b);
            const e = l[t];
            E.copy(e),
              E.sub(b.multiplyScalar(b.dot(e))).normalize(),
              T.crossVectors(x, e);
            const n = T.dot(u[t]) < 0 ? -1 : 1;
            (s[4 * t] = E.x),
              (s[4 * t + 1] = E.y),
              (s[4 * t + 2] = E.z),
              (s[4 * t + 3] = n);
          }
          for (let t = 0, e = y.length; t < e; ++t) {
            const e = y[t],
              r = e.start;
            for (let t = r, i = r + e.count; t < i; t += 3)
              S(n[t + 0]), S(n[t + 1]), S(n[t + 2]);
          }
        }
        computeVertexNormals() {
          const t = this.index,
            e = this.getAttribute("position");
          if (void 0 !== e) {
            let n = this.getAttribute("normal");
            if (void 0 === n)
              (n = new gf(new Float32Array(3 * e.count), 3)),
                this.setAttribute("normal", n);
            else for (let t = 0, e = n.count; t < e; t++) n.setXYZ(t, 0, 0, 0);
            const r = new Wc(),
              i = new Wc(),
              o = new Wc(),
              a = new Wc(),
              s = new Wc(),
              l = new Wc(),
              u = new Wc(),
              h = new Wc();
            if (t)
              for (let c = 0, d = t.count; c < d; c += 3) {
                const d = t.getX(c + 0),
                  f = t.getX(c + 1),
                  p = t.getX(c + 2);
                r.fromBufferAttribute(e, d),
                  i.fromBufferAttribute(e, f),
                  o.fromBufferAttribute(e, p),
                  u.subVectors(o, i),
                  h.subVectors(r, i),
                  u.cross(h),
                  a.fromBufferAttribute(n, d),
                  s.fromBufferAttribute(n, f),
                  l.fromBufferAttribute(n, p),
                  a.add(u),
                  s.add(u),
                  l.add(u),
                  n.setXYZ(d, a.x, a.y, a.z),
                  n.setXYZ(f, s.x, s.y, s.z),
                  n.setXYZ(p, l.x, l.y, l.z);
              }
            else
              for (let t = 0, a = e.count; t < a; t += 3)
                r.fromBufferAttribute(e, t + 0),
                  i.fromBufferAttribute(e, t + 1),
                  o.fromBufferAttribute(e, t + 2),
                  u.subVectors(o, i),
                  h.subVectors(r, i),
                  u.cross(h),
                  n.setXYZ(t + 0, u.x, u.y, u.z),
                  n.setXYZ(t + 1, u.x, u.y, u.z),
                  n.setXYZ(t + 2, u.x, u.y, u.z);
            this.normalizeNormals(), (n.needsUpdate = !0);
          }
        }
        normalizeNormals() {
          const t = this.attributes.normal;
          for (let e = 0, n = t.count; e < n; e++)
            Rf.fromBufferAttribute(t, e),
              Rf.normalize(),
              t.setXYZ(e, Rf.x, Rf.y, Rf.z);
        }
        toNonIndexed() {
          function t(t, e) {
            const n = t.array,
              r = t.itemSize,
              i = t.normalized,
              o = new n.constructor(e.length * r);
            let a = 0,
              s = 0;
            for (let i = 0, l = e.length; i < l; i++) {
              a = t.isInterleavedBufferAttribute
                ? e[i] * t.data.stride + t.offset
                : e[i] * r;
              for (let t = 0; t < r; t++) o[s++] = n[a++];
            }
            return new gf(o, r, i);
          }
          if (null === this.index)
            return (
              console.warn(
                "THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.",
              ),
              this
            );
          const e = new wf(),
            n = this.index.array,
            r = this.attributes;
          for (const i in r) {
            const o = t(r[i], n);
            e.setAttribute(i, o);
          }
          const i = this.morphAttributes;
          for (const r in i) {
            const o = [],
              a = i[r];
            for (let e = 0, r = a.length; e < r; e++) {
              const r = t(a[e], n);
              o.push(r);
            }
            e.morphAttributes[r] = o;
          }
          e.morphTargetsRelative = this.morphTargetsRelative;
          const o = this.groups;
          for (let t = 0, n = o.length; t < n; t++) {
            const n = o[t];
            e.addGroup(n.start, n.count, n.materialIndex);
          }
          return e;
        }
        toJSON() {
          const t = {
            metadata: {
              version: 4.6,
              type: "BufferGeometry",
              generator: "BufferGeometry.toJSON",
            },
          };
          if (
            ((t.uuid = this.uuid),
            (t.type = this.type),
            "" !== this.name && (t.name = this.name),
            Object.keys(this.userData).length > 0 &&
              (t.userData = this.userData),
            void 0 !== this.parameters)
          ) {
            const e = this.parameters;
            for (const n in e) void 0 !== e[n] && (t[n] = e[n]);
            return t;
          }
          t.data = { attributes: {} };
          const e = this.index;
          null !== e &&
            (t.data.index = {
              type: e.array.constructor.name,
              array: Array.prototype.slice.call(e.array),
            });
          const n = this.attributes;
          for (const e in n) {
            const r = n[e];
            t.data.attributes[e] = r.toJSON(t.data);
          }
          const r = {};
          let i = !1;
          for (const e in this.morphAttributes) {
            const n = this.morphAttributes[e],
              o = [];
            for (let e = 0, r = n.length; e < r; e++) {
              const r = n[e];
              o.push(r.toJSON(t.data));
            }
            o.length > 0 && ((r[e] = o), (i = !0));
          }
          i &&
            ((t.data.morphAttributes = r),
            (t.data.morphTargetsRelative = this.morphTargetsRelative));
          const o = this.groups;
          o.length > 0 && (t.data.groups = JSON.parse(JSON.stringify(o)));
          const a = this.boundingSphere;
          return (
            null !== a &&
              (t.data.boundingSphere = {
                center: a.center.toArray(),
                radius: a.radius,
              }),
            t
          );
        }
        clone() {
          return new this.constructor().copy(this);
        }
        copy(t) {
          (this.index = null),
            (this.attributes = {}),
            (this.morphAttributes = {}),
            (this.groups = []),
            (this.boundingBox = null),
            (this.boundingSphere = null);
          const e = {};
          this.name = t.name;
          const n = t.index;
          null !== n && this.setIndex(n.clone(e));
          const r = t.attributes;
          for (const t in r) {
            const n = r[t];
            this.setAttribute(t, n.clone(e));
          }
          const i = t.morphAttributes;
          for (const t in i) {
            const n = [],
              r = i[t];
            for (let t = 0, i = r.length; t < i; t++) n.push(r[t].clone(e));
            this.morphAttributes[t] = n;
          }
          this.morphTargetsRelative = t.morphTargetsRelative;
          const o = t.groups;
          for (let t = 0, e = o.length; t < e; t++) {
            const e = o[t];
            this.addGroup(e.start, e.count, e.materialIndex);
          }
          const a = t.boundingBox;
          null !== a && (this.boundingBox = a.clone());
          const s = t.boundingSphere;
          return (
            null !== s && (this.boundingSphere = s.clone()),
            (this.drawRange.start = t.drawRange.start),
            (this.drawRange.count = t.drawRange.count),
            (this.userData = t.userData),
            this
          );
        }
        dispose() {
          this.dispatchEvent({ type: "dispose" });
        }
      }
      const Pf = new Td(),
        If = new Ed(),
        Of = new dd(),
        Cf = new Wc(),
        Nf = new Wc(),
        Lf = new Wc(),
        Df = new Wc(),
        Uf = new Wc(),
        Ff = new Wc(),
        Bf = new vc(),
        Gf = new vc(),
        kf = new vc(),
        Hf = new Wc(),
        zf = new Wc(),
        Vf = new Wc(),
        Xf = new Wc(),
        Wf = new Wc();
      class jf extends jd {
        constructor(t = new wf(), e = new pf()) {
          super(),
            (this.isMesh = !0),
            (this.type = "Mesh"),
            (this.geometry = t),
            (this.material = e),
            this.updateMorphTargets();
        }
        copy(t, e) {
          return (
            super.copy(t, e),
            void 0 !== t.morphTargetInfluences &&
              (this.morphTargetInfluences = t.morphTargetInfluences.slice()),
            void 0 !== t.morphTargetDictionary &&
              (this.morphTargetDictionary = Object.assign(
                {},
                t.morphTargetDictionary,
              )),
            (this.material = t.material),
            (this.geometry = t.geometry),
            this
          );
        }
        updateMorphTargets() {
          const t = this.geometry.morphAttributes,
            e = Object.keys(t);
          if (e.length > 0) {
            const n = t[e[0]];
            if (void 0 !== n) {
              (this.morphTargetInfluences = []),
                (this.morphTargetDictionary = {});
              for (let t = 0, e = n.length; t < e; t++) {
                const e = n[t].name || String(t);
                this.morphTargetInfluences.push(0),
                  (this.morphTargetDictionary[e] = t);
              }
            }
          }
        }
        getVertexPosition(t, e) {
          const n = this.geometry,
            r = n.attributes.position,
            i = n.morphAttributes.position,
            o = n.morphTargetsRelative;
          e.fromBufferAttribute(r, t);
          const a = this.morphTargetInfluences;
          if (i && a) {
            Ff.set(0, 0, 0);
            for (let n = 0, r = i.length; n < r; n++) {
              const r = a[n],
                s = i[n];
              0 !== r &&
                (Uf.fromBufferAttribute(s, t),
                o
                  ? Ff.addScaledVector(Uf, r)
                  : Ff.addScaledVector(Uf.sub(e), r));
            }
            e.add(Ff);
          }
          return e;
        }
        raycast(t, e) {
          const n = this.geometry,
            r = this.material,
            i = this.matrixWorld;
          if (void 0 !== r) {
            if (
              (null === n.boundingSphere && n.computeBoundingSphere(),
              Of.copy(n.boundingSphere),
              Of.applyMatrix4(i),
              If.copy(t.ray).recast(t.near),
              !1 === Of.containsPoint(If.origin))
            ) {
              if (null === If.intersectSphere(Of, Cf)) return;
              if (If.origin.distanceToSquared(Cf) > (t.far - t.near) ** 2)
                return;
            }
            Pf.copy(i).invert(),
              If.copy(t.ray).applyMatrix4(Pf),
              (null !== n.boundingBox &&
                !1 === If.intersectsBox(n.boundingBox)) ||
                this._computeIntersections(t, e, If);
          }
        }
        _computeIntersections(t, e, n) {
          let r;
          const i = this.geometry,
            o = this.material,
            a = i.index,
            s = i.attributes.position,
            l = i.attributes.uv,
            u = i.attributes.uv1,
            h = i.attributes.normal,
            c = i.groups,
            d = i.drawRange;
          if (null !== a)
            if (Array.isArray(o))
              for (let i = 0, s = c.length; i < s; i++) {
                const s = c[i],
                  f = o[s.materialIndex];
                for (
                  let i = Math.max(s.start, d.start),
                    o = Math.min(
                      a.count,
                      Math.min(s.start + s.count, d.start + d.count),
                    );
                  i < o;
                  i += 3
                )
                  (r = Yf(
                    this,
                    f,
                    t,
                    n,
                    l,
                    u,
                    h,
                    a.getX(i),
                    a.getX(i + 1),
                    a.getX(i + 2),
                  )),
                    r &&
                      ((r.faceIndex = Math.floor(i / 3)),
                      (r.face.materialIndex = s.materialIndex),
                      e.push(r));
              }
            else
              for (
                let i = Math.max(0, d.start),
                  s = Math.min(a.count, d.start + d.count);
                i < s;
                i += 3
              )
                (r = Yf(
                  this,
                  o,
                  t,
                  n,
                  l,
                  u,
                  h,
                  a.getX(i),
                  a.getX(i + 1),
                  a.getX(i + 2),
                )),
                  r && ((r.faceIndex = Math.floor(i / 3)), e.push(r));
          else if (void 0 !== s)
            if (Array.isArray(o))
              for (let i = 0, a = c.length; i < a; i++) {
                const a = c[i],
                  f = o[a.materialIndex];
                for (
                  let i = Math.max(a.start, d.start),
                    o = Math.min(
                      s.count,
                      Math.min(a.start + a.count, d.start + d.count),
                    );
                  i < o;
                  i += 3
                )
                  (r = Yf(this, f, t, n, l, u, h, i, i + 1, i + 2)),
                    r &&
                      ((r.faceIndex = Math.floor(i / 3)),
                      (r.face.materialIndex = a.materialIndex),
                      e.push(r));
              }
            else
              for (
                let i = Math.max(0, d.start),
                  a = Math.min(s.count, d.start + d.count);
                i < a;
                i += 3
              )
                (r = Yf(this, o, t, n, l, u, h, i, i + 1, i + 2)),
                  r && ((r.faceIndex = Math.floor(i / 3)), e.push(r));
        }
      }
      function Yf(t, e, n, r, i, o, a, s, l, u) {
        t.getVertexPosition(s, Nf),
          t.getVertexPosition(l, Lf),
          t.getVertexPosition(u, Df);
        const h = (function (t, e, n, r, i, o, a, s) {
          let l;
          if (
            ((l =
              e.side === nh
                ? r.intersectTriangle(a, o, i, !0, s)
                : r.intersectTriangle(i, o, a, e.side === eh, s)),
            null === l)
          )
            return null;
          Wf.copy(s), Wf.applyMatrix4(t.matrixWorld);
          const u = n.ray.origin.distanceTo(Wf);
          return u < n.near || u > n.far
            ? null
            : { distance: u, point: Wf.clone(), object: t };
        })(t, e, n, r, Nf, Lf, Df, Xf);
        if (h) {
          i &&
            (Bf.fromBufferAttribute(i, s),
            Gf.fromBufferAttribute(i, l),
            kf.fromBufferAttribute(i, u),
            (h.uv = of.getInterpolation(Xf, Nf, Lf, Df, Bf, Gf, kf, new vc()))),
            o &&
              (Bf.fromBufferAttribute(o, s),
              Gf.fromBufferAttribute(o, l),
              kf.fromBufferAttribute(o, u),
              (h.uv1 = of.getInterpolation(
                Xf,
                Nf,
                Lf,
                Df,
                Bf,
                Gf,
                kf,
                new vc(),
              )),
              (h.uv2 = h.uv1)),
            a &&
              (Hf.fromBufferAttribute(a, s),
              zf.fromBufferAttribute(a, l),
              Vf.fromBufferAttribute(a, u),
              (h.normal = of.getInterpolation(
                Xf,
                Nf,
                Lf,
                Df,
                Hf,
                zf,
                Vf,
                new Wc(),
              )),
              h.normal.dot(r.direction) > 0 && h.normal.multiplyScalar(-1));
          const t = { a: s, b: l, c: u, normal: new Wc(), materialIndex: 0 };
          of.getNormal(Nf, Lf, Df, t.normal), (h.face = t);
        }
        return h;
      }
      class qf extends wf {
        constructor(t = 1, e = 1, n = 1, r = 1, i = 1, o = 1) {
          super(),
            (this.type = "BoxGeometry"),
            (this.parameters = {
              width: t,
              height: e,
              depth: n,
              widthSegments: r,
              heightSegments: i,
              depthSegments: o,
            });
          const a = this;
          (r = Math.floor(r)), (i = Math.floor(i)), (o = Math.floor(o));
          const s = [],
            l = [],
            u = [],
            h = [];
          let c = 0,
            d = 0;
          function f(t, e, n, r, i, o, f, p, m, _, g) {
            const v = o / m,
              y = f / _,
              E = o / 2,
              T = f / 2,
              b = p / 2,
              x = m + 1,
              S = _ + 1;
            let M = 0,
              A = 0;
            const R = new Wc();
            for (let o = 0; o < S; o++) {
              const a = o * y - T;
              for (let s = 0; s < x; s++) {
                const c = s * v - E;
                (R[t] = c * r),
                  (R[e] = a * i),
                  (R[n] = b),
                  l.push(R.x, R.y, R.z),
                  (R[t] = 0),
                  (R[e] = 0),
                  (R[n] = p > 0 ? 1 : -1),
                  u.push(R.x, R.y, R.z),
                  h.push(s / m),
                  h.push(1 - o / _),
                  (M += 1);
              }
            }
            for (let t = 0; t < _; t++)
              for (let e = 0; e < m; e++) {
                const n = c + e + x * t,
                  r = c + e + x * (t + 1),
                  i = c + (e + 1) + x * (t + 1),
                  o = c + (e + 1) + x * t;
                s.push(n, r, o), s.push(r, i, o), (A += 6);
              }
            a.addGroup(d, A, g), (d += A), (c += M);
          }
          f("z", "y", "x", -1, -1, n, e, t, o, i, 0),
            f("z", "y", "x", 1, -1, n, e, -t, o, i, 1),
            f("x", "z", "y", 1, 1, t, n, e, r, o, 2),
            f("x", "z", "y", 1, -1, t, n, -e, r, o, 3),
            f("x", "y", "z", 1, -1, t, e, n, r, i, 4),
            f("x", "y", "z", -1, -1, t, e, -n, r, i, 5),
            this.setIndex(s),
            this.setAttribute("position", new Ef(l, 3)),
            this.setAttribute("normal", new Ef(u, 3)),
            this.setAttribute("uv", new Ef(h, 2));
        }
        copy(t) {
          return (
            super.copy(t),
            (this.parameters = Object.assign({}, t.parameters)),
            this
          );
        }
        static fromJSON(t) {
          return new qf(
            t.width,
            t.height,
            t.depth,
            t.widthSegments,
            t.heightSegments,
            t.depthSegments,
          );
        }
      }
      function Kf(t) {
        const e = {};
        for (const n in t) {
          e[n] = {};
          for (const r in t[n]) {
            const i = t[n][r];
            i &&
            (i.isColor ||
              i.isMatrix3 ||
              i.isMatrix4 ||
              i.isVector2 ||
              i.isVector3 ||
              i.isVector4 ||
              i.isTexture ||
              i.isQuaternion)
              ? i.isRenderTargetTexture
                ? (console.warn(
                    "UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms().",
                  ),
                  (e[n][r] = null))
                : (e[n][r] = i.clone())
              : Array.isArray(i)
                ? (e[n][r] = i.slice())
                : (e[n][r] = i);
          }
        }
        return e;
      }
      function Zf(t) {
        const e = {};
        for (let n = 0; n < t.length; n++) {
          const r = Kf(t[n]);
          for (const t in r) e[t] = r[t];
        }
        return e;
      }
      function Qf(t) {
        return null === t.getRenderTarget() ? t.outputColorSpace : Kh;
      }
      const $f = { clone: Kf, merge: Zf };
      class Jf extends sf {
        constructor(t) {
          super(),
            (this.isShaderMaterial = !0),
            (this.type = "ShaderMaterial"),
            (this.defines = {}),
            (this.uniforms = {}),
            (this.uniformsGroups = []),
            (this.vertexShader =
              "void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"),
            (this.fragmentShader =
              "void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}"),
            (this.linewidth = 1),
            (this.wireframe = !1),
            (this.wireframeLinewidth = 1),
            (this.fog = !1),
            (this.lights = !1),
            (this.clipping = !1),
            (this.forceSinglePass = !0),
            (this.extensions = {
              derivatives: !1,
              fragDepth: !1,
              drawBuffers: !1,
              shaderTextureLOD: !1,
            }),
            (this.defaultAttributeValues = {
              color: [1, 1, 1],
              uv: [0, 0],
              uv1: [0, 0],
            }),
            (this.index0AttributeName = void 0),
            (this.uniformsNeedUpdate = !1),
            (this.glslVersion = null),
            void 0 !== t && this.setValues(t);
        }
        copy(t) {
          return (
            super.copy(t),
            (this.fragmentShader = t.fragmentShader),
            (this.vertexShader = t.vertexShader),
            (this.uniforms = Kf(t.uniforms)),
            (this.uniformsGroups = (function (t) {
              const e = [];
              for (let n = 0; n < t.length; n++) e.push(t[n].clone());
              return e;
            })(t.uniformsGroups)),
            (this.defines = Object.assign({}, t.defines)),
            (this.wireframe = t.wireframe),
            (this.wireframeLinewidth = t.wireframeLinewidth),
            (this.fog = t.fog),
            (this.lights = t.lights),
            (this.clipping = t.clipping),
            (this.extensions = Object.assign({}, t.extensions)),
            (this.glslVersion = t.glslVersion),
            this
          );
        }
        toJSON(t) {
          const e = super.toJSON(t);
          (e.glslVersion = this.glslVersion), (e.uniforms = {});
          for (const n in this.uniforms) {
            const r = this.uniforms[n].value;
            r && r.isTexture
              ? (e.uniforms[n] = { type: "t", value: r.toJSON(t).uuid })
              : r && r.isColor
                ? (e.uniforms[n] = { type: "c", value: r.getHex() })
                : r && r.isVector2
                  ? (e.uniforms[n] = { type: "v2", value: r.toArray() })
                  : r && r.isVector3
                    ? (e.uniforms[n] = { type: "v3", value: r.toArray() })
                    : r && r.isVector4
                      ? (e.uniforms[n] = { type: "v4", value: r.toArray() })
                      : r && r.isMatrix3
                        ? (e.uniforms[n] = { type: "m3", value: r.toArray() })
                        : r && r.isMatrix4
                          ? (e.uniforms[n] = { type: "m4", value: r.toArray() })
                          : (e.uniforms[n] = { value: r });
          }
          Object.keys(this.defines).length > 0 && (e.defines = this.defines),
            (e.vertexShader = this.vertexShader),
            (e.fragmentShader = this.fragmentShader),
            (e.lights = this.lights),
            (e.clipping = this.clipping);
          const n = {};
          for (const t in this.extensions)
            !0 === this.extensions[t] && (n[t] = !0);
          return Object.keys(n).length > 0 && (e.extensions = n), e;
        }
      }
      class tp extends jd {
        constructor() {
          super(),
            (this.isCamera = !0),
            (this.type = "Camera"),
            (this.matrixWorldInverse = new Td()),
            (this.projectionMatrix = new Td()),
            (this.projectionMatrixInverse = new Td()),
            (this.coordinateSystem = ec);
        }
        copy(t, e) {
          return (
            super.copy(t, e),
            this.matrixWorldInverse.copy(t.matrixWorldInverse),
            this.projectionMatrix.copy(t.projectionMatrix),
            this.projectionMatrixInverse.copy(t.projectionMatrixInverse),
            (this.coordinateSystem = t.coordinateSystem),
            this
          );
        }
        getWorldDirection(t) {
          this.updateWorldMatrix(!0, !1);
          const e = this.matrixWorld.elements;
          return t.set(-e[8], -e[9], -e[10]).normalize();
        }
        updateMatrixWorld(t) {
          super.updateMatrixWorld(t),
            this.matrixWorldInverse.copy(this.matrixWorld).invert();
        }
        updateWorldMatrix(t, e) {
          super.updateWorldMatrix(t, e),
            this.matrixWorldInverse.copy(this.matrixWorld).invert();
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      class ep extends tp {
        constructor(t = 50, e = 1, n = 0.1, r = 2e3) {
          super(),
            (this.isPerspectiveCamera = !0),
            (this.type = "PerspectiveCamera"),
            (this.fov = t),
            (this.zoom = 1),
            (this.near = n),
            (this.far = r),
            (this.focus = 10),
            (this.aspect = e),
            (this.view = null),
            (this.filmGauge = 35),
            (this.filmOffset = 0),
            this.updateProjectionMatrix();
        }
        copy(t, e) {
          return (
            super.copy(t, e),
            (this.fov = t.fov),
            (this.zoom = t.zoom),
            (this.near = t.near),
            (this.far = t.far),
            (this.focus = t.focus),
            (this.aspect = t.aspect),
            (this.view = null === t.view ? null : Object.assign({}, t.view)),
            (this.filmGauge = t.filmGauge),
            (this.filmOffset = t.filmOffset),
            this
          );
        }
        setFocalLength(t) {
          const e = (0.5 * this.getFilmHeight()) / t;
          (this.fov = 2 * ac * Math.atan(e)), this.updateProjectionMatrix();
        }
        getFocalLength() {
          const t = Math.tan(0.5 * oc * this.fov);
          return (0.5 * this.getFilmHeight()) / t;
        }
        getEffectiveFOV() {
          return 2 * ac * Math.atan(Math.tan(0.5 * oc * this.fov) / this.zoom);
        }
        getFilmWidth() {
          return this.filmGauge * Math.min(this.aspect, 1);
        }
        getFilmHeight() {
          return this.filmGauge / Math.max(this.aspect, 1);
        }
        setViewOffset(t, e, n, r, i, o) {
          (this.aspect = t / e),
            null === this.view &&
              (this.view = {
                enabled: !0,
                fullWidth: 1,
                fullHeight: 1,
                offsetX: 0,
                offsetY: 0,
                width: 1,
                height: 1,
              }),
            (this.view.enabled = !0),
            (this.view.fullWidth = t),
            (this.view.fullHeight = e),
            (this.view.offsetX = n),
            (this.view.offsetY = r),
            (this.view.width = i),
            (this.view.height = o),
            this.updateProjectionMatrix();
        }
        clearViewOffset() {
          null !== this.view && (this.view.enabled = !1),
            this.updateProjectionMatrix();
        }
        updateProjectionMatrix() {
          const t = this.near;
          let e = (t * Math.tan(0.5 * oc * this.fov)) / this.zoom,
            n = 2 * e,
            r = this.aspect * n,
            i = -0.5 * r;
          const o = this.view;
          if (null !== this.view && this.view.enabled) {
            const t = o.fullWidth,
              a = o.fullHeight;
            (i += (o.offsetX * r) / t),
              (e -= (o.offsetY * n) / a),
              (r *= o.width / t),
              (n *= o.height / a);
          }
          const a = this.filmOffset;
          0 !== a && (i += (t * a) / this.getFilmWidth()),
            this.projectionMatrix.makePerspective(
              i,
              i + r,
              e,
              e - n,
              t,
              this.far,
              this.coordinateSystem,
            ),
            this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
        }
        toJSON(t) {
          const e = super.toJSON(t);
          return (
            (e.object.fov = this.fov),
            (e.object.zoom = this.zoom),
            (e.object.near = this.near),
            (e.object.far = this.far),
            (e.object.focus = this.focus),
            (e.object.aspect = this.aspect),
            null !== this.view &&
              (e.object.view = Object.assign({}, this.view)),
            (e.object.filmGauge = this.filmGauge),
            (e.object.filmOffset = this.filmOffset),
            e
          );
        }
      }
      const np = -90;
      class rp extends jd {
        constructor(t, e, n) {
          super(),
            (this.type = "CubeCamera"),
            (this.renderTarget = n),
            (this.coordinateSystem = null);
          const r = new ep(np, 1, t, e);
          (r.layers = this.layers), this.add(r);
          const i = new ep(np, 1, t, e);
          (i.layers = this.layers), this.add(i);
          const o = new ep(np, 1, t, e);
          (o.layers = this.layers), this.add(o);
          const a = new ep(np, 1, t, e);
          (a.layers = this.layers), this.add(a);
          const s = new ep(np, 1, t, e);
          (s.layers = this.layers), this.add(s);
          const l = new ep(np, 1, t, e);
          (l.layers = this.layers), this.add(l);
        }
        updateCoordinateSystem() {
          const t = this.coordinateSystem,
            e = this.children.concat(),
            [n, r, i, o, a, s] = e;
          for (const t of e) this.remove(t);
          if (t === ec)
            n.up.set(0, 1, 0),
              n.lookAt(1, 0, 0),
              r.up.set(0, 1, 0),
              r.lookAt(-1, 0, 0),
              i.up.set(0, 0, -1),
              i.lookAt(0, 1, 0),
              o.up.set(0, 0, 1),
              o.lookAt(0, -1, 0),
              a.up.set(0, 1, 0),
              a.lookAt(0, 0, 1),
              s.up.set(0, 1, 0),
              s.lookAt(0, 0, -1);
          else {
            if (t !== nc)
              throw new Error(
                "THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: " +
                  t,
              );
            n.up.set(0, -1, 0),
              n.lookAt(-1, 0, 0),
              r.up.set(0, -1, 0),
              r.lookAt(1, 0, 0),
              i.up.set(0, 0, 1),
              i.lookAt(0, 1, 0),
              o.up.set(0, 0, -1),
              o.lookAt(0, -1, 0),
              a.up.set(0, -1, 0),
              a.lookAt(0, 0, 1),
              s.up.set(0, -1, 0),
              s.lookAt(0, 0, -1);
          }
          for (const t of e) this.add(t), t.updateMatrixWorld();
        }
        update(t, e) {
          null === this.parent && this.updateMatrixWorld();
          const n = this.renderTarget;
          this.coordinateSystem !== t.coordinateSystem &&
            ((this.coordinateSystem = t.coordinateSystem),
            this.updateCoordinateSystem());
          const [r, i, o, a, s, l] = this.children,
            u = t.getRenderTarget(),
            h = t.xr.enabled;
          t.xr.enabled = !1;
          const c = n.texture.generateMipmaps;
          (n.texture.generateMipmaps = !1),
            t.setRenderTarget(n, 0),
            t.render(e, r),
            t.setRenderTarget(n, 1),
            t.render(e, i),
            t.setRenderTarget(n, 2),
            t.render(e, o),
            t.setRenderTarget(n, 3),
            t.render(e, a),
            t.setRenderTarget(n, 4),
            t.render(e, s),
            (n.texture.generateMipmaps = c),
            t.setRenderTarget(n, 5),
            t.render(e, l),
            t.setRenderTarget(u),
            (t.xr.enabled = h),
            (n.texture.needsPMREMUpdate = !0);
        }
      }
      class ip extends Bc {
        constructor(t, e, n, r, i, o, a, s, l, u) {
          super(
            (t = void 0 !== t ? t : []),
            (e = void 0 !== e ? e : mh),
            n,
            r,
            i,
            o,
            a,
            s,
            l,
            u,
          ),
            (this.isCubeTexture = !0),
            (this.flipY = !1);
        }
        get images() {
          return this.image;
        }
        set images(t) {
          this.image = t;
        }
      }
      class op extends Hc {
        constructor(t = 1, e = {}) {
          super(t, t, e), (this.isWebGLCubeRenderTarget = !0);
          const n = { width: t, height: t, depth: 1 },
            r = [n, n, n, n, n, n];
          void 0 !== e.encoding &&
            (Sc(
              "THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace.",
            ),
            (e.colorSpace = e.encoding === Yh ? qh : "")),
            (this.texture = new ip(
              r,
              e.mapping,
              e.wrapS,
              e.wrapT,
              e.magFilter,
              e.minFilter,
              e.format,
              e.type,
              e.anisotropy,
              e.colorSpace,
            )),
            (this.texture.isRenderTargetTexture = !0),
            (this.texture.generateMipmaps =
              void 0 !== e.generateMipmaps && e.generateMipmaps),
            (this.texture.minFilter =
              void 0 !== e.minFilter ? e.minFilter : xh);
        }
        fromEquirectangularTexture(t, e) {
          (this.texture.type = e.type),
            (this.texture.colorSpace = e.colorSpace),
            (this.texture.generateMipmaps = e.generateMipmaps),
            (this.texture.minFilter = e.minFilter),
            (this.texture.magFilter = e.magFilter);
          const n = { tEquirect: { value: null } },
            r =
              "\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",
            i =
              "\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",
            o = new qf(5, 5, 5),
            a = new Jf({
              name: "CubemapFromEquirect",
              uniforms: Kf(n),
              vertexShader: r,
              fragmentShader: i,
              side: nh,
              blending: ih,
            });
          a.uniforms.tEquirect.value = e;
          const s = new jf(o, a),
            l = e.minFilter;
          return (
            e.minFilter === Sh && (e.minFilter = xh),
            new rp(1, 10, this).update(t, s),
            (e.minFilter = l),
            s.geometry.dispose(),
            s.material.dispose(),
            this
          );
        }
        clear(t, e, n, r) {
          const i = t.getRenderTarget();
          for (let i = 0; i < 6; i++)
            t.setRenderTarget(this, i), t.clear(e, n, r);
          t.setRenderTarget(i);
        }
      }
      const ap = new Wc(),
        sp = new Wc(),
        lp = new yc();
      class up {
        constructor(t = new Wc(1, 0, 0), e = 0) {
          (this.isPlane = !0), (this.normal = t), (this.constant = e);
        }
        set(t, e) {
          return this.normal.copy(t), (this.constant = e), this;
        }
        setComponents(t, e, n, r) {
          return this.normal.set(t, e, n), (this.constant = r), this;
        }
        setFromNormalAndCoplanarPoint(t, e) {
          return (
            this.normal.copy(t), (this.constant = -e.dot(this.normal)), this
          );
        }
        setFromCoplanarPoints(t, e, n) {
          const r = ap.subVectors(n, e).cross(sp.subVectors(t, e)).normalize();
          return this.setFromNormalAndCoplanarPoint(r, t), this;
        }
        copy(t) {
          return this.normal.copy(t.normal), (this.constant = t.constant), this;
        }
        normalize() {
          const t = 1 / this.normal.length();
          return this.normal.multiplyScalar(t), (this.constant *= t), this;
        }
        negate() {
          return (this.constant *= -1), this.normal.negate(), this;
        }
        distanceToPoint(t) {
          return this.normal.dot(t) + this.constant;
        }
        distanceToSphere(t) {
          return this.distanceToPoint(t.center) - t.radius;
        }
        projectPoint(t, e) {
          return e
            .copy(t)
            .addScaledVector(this.normal, -this.distanceToPoint(t));
        }
        intersectLine(t, e) {
          const n = t.delta(ap),
            r = this.normal.dot(n);
          if (0 === r)
            return 0 === this.distanceToPoint(t.start) ? e.copy(t.start) : null;
          const i = -(t.start.dot(this.normal) + this.constant) / r;
          return i < 0 || i > 1 ? null : e.copy(t.start).addScaledVector(n, i);
        }
        intersectsLine(t) {
          const e = this.distanceToPoint(t.start),
            n = this.distanceToPoint(t.end);
          return (e < 0 && n > 0) || (n < 0 && e > 0);
        }
        intersectsBox(t) {
          return t.intersectsPlane(this);
        }
        intersectsSphere(t) {
          return t.intersectsPlane(this);
        }
        coplanarPoint(t) {
          return t.copy(this.normal).multiplyScalar(-this.constant);
        }
        applyMatrix4(t, e) {
          const n = e || lp.getNormalMatrix(t),
            r = this.coplanarPoint(ap).applyMatrix4(t),
            i = this.normal.applyMatrix3(n).normalize();
          return (this.constant = -r.dot(i)), this;
        }
        translate(t) {
          return (this.constant -= t.dot(this.normal)), this;
        }
        equals(t) {
          return t.normal.equals(this.normal) && t.constant === this.constant;
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      const hp = new dd(),
        cp = new Wc();
      class dp {
        constructor(
          t = new up(),
          e = new up(),
          n = new up(),
          r = new up(),
          i = new up(),
          o = new up(),
        ) {
          this.planes = [t, e, n, r, i, o];
        }
        set(t, e, n, r, i, o) {
          const a = this.planes;
          return (
            a[0].copy(t),
            a[1].copy(e),
            a[2].copy(n),
            a[3].copy(r),
            a[4].copy(i),
            a[5].copy(o),
            this
          );
        }
        copy(t) {
          const e = this.planes;
          for (let n = 0; n < 6; n++) e[n].copy(t.planes[n]);
          return this;
        }
        setFromProjectionMatrix(t, e = 2e3) {
          const n = this.planes,
            r = t.elements,
            i = r[0],
            o = r[1],
            a = r[2],
            s = r[3],
            l = r[4],
            u = r[5],
            h = r[6],
            c = r[7],
            d = r[8],
            f = r[9],
            p = r[10],
            m = r[11],
            _ = r[12],
            g = r[13],
            v = r[14],
            y = r[15];
          if (
            (n[0].setComponents(s - i, c - l, m - d, y - _).normalize(),
            n[1].setComponents(s + i, c + l, m + d, y + _).normalize(),
            n[2].setComponents(s + o, c + u, m + f, y + g).normalize(),
            n[3].setComponents(s - o, c - u, m - f, y - g).normalize(),
            n[4].setComponents(s - a, c - h, m - p, y - v).normalize(),
            e === ec)
          )
            n[5].setComponents(s + a, c + h, m + p, y + v).normalize();
          else {
            if (e !== nc)
              throw new Error(
                "THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: " +
                  e,
              );
            n[5].setComponents(a, h, p, v).normalize();
          }
          return this;
        }
        intersectsObject(t) {
          if (void 0 !== t.boundingSphere)
            null === t.boundingSphere && t.computeBoundingSphere(),
              hp.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);
          else {
            const e = t.geometry;
            null === e.boundingSphere && e.computeBoundingSphere(),
              hp.copy(e.boundingSphere).applyMatrix4(t.matrixWorld);
          }
          return this.intersectsSphere(hp);
        }
        intersectsSprite(t) {
          return (
            hp.center.set(0, 0, 0),
            (hp.radius = 0.7071067811865476),
            hp.applyMatrix4(t.matrixWorld),
            this.intersectsSphere(hp)
          );
        }
        intersectsSphere(t) {
          const e = this.planes,
            n = t.center,
            r = -t.radius;
          for (let t = 0; t < 6; t++)
            if (e[t].distanceToPoint(n) < r) return !1;
          return !0;
        }
        intersectsBox(t) {
          const e = this.planes;
          for (let n = 0; n < 6; n++) {
            const r = e[n];
            if (
              ((cp.x = r.normal.x > 0 ? t.max.x : t.min.x),
              (cp.y = r.normal.y > 0 ? t.max.y : t.min.y),
              (cp.z = r.normal.z > 0 ? t.max.z : t.min.z),
              r.distanceToPoint(cp) < 0)
            )
              return !1;
          }
          return !0;
        }
        containsPoint(t) {
          const e = this.planes;
          for (let n = 0; n < 6; n++)
            if (e[n].distanceToPoint(t) < 0) return !1;
          return !0;
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      function fp() {
        let t = null,
          e = !1,
          n = null,
          r = null;
        function i(e, o) {
          n(e, o), (r = t.requestAnimationFrame(i));
        }
        return {
          start: function () {
            !0 !== e &&
              null !== n &&
              ((r = t.requestAnimationFrame(i)), (e = !0));
          },
          stop: function () {
            t.cancelAnimationFrame(r), (e = !1);
          },
          setAnimationLoop: function (t) {
            n = t;
          },
          setContext: function (e) {
            t = e;
          },
        };
      }
      function pp(t, e) {
        const n = e.isWebGL2,
          r = new WeakMap();
        return {
          get: function (t) {
            return t.isInterleavedBufferAttribute && (t = t.data), r.get(t);
          },
          remove: function (e) {
            e.isInterleavedBufferAttribute && (e = e.data);
            const n = r.get(e);
            n && (t.deleteBuffer(n.buffer), r.delete(e));
          },
          update: function (e, i) {
            if (e.isGLBufferAttribute) {
              const t = r.get(e);
              return void (
                (!t || t.version < e.version) &&
                r.set(e, {
                  buffer: e.buffer,
                  type: e.type,
                  bytesPerElement: e.elementSize,
                  version: e.version,
                })
              );
            }
            e.isInterleavedBufferAttribute && (e = e.data);
            const o = r.get(e);
            void 0 === o
              ? r.set(
                  e,
                  (function (e, r) {
                    const i = e.array,
                      o = e.usage,
                      a = t.createBuffer();
                    let s;
                    if (
                      (t.bindBuffer(r, a),
                      t.bufferData(r, i, o),
                      e.onUploadCallback(),
                      i instanceof Float32Array)
                    )
                      s = t.FLOAT;
                    else if (i instanceof Uint16Array)
                      if (e.isFloat16BufferAttribute) {
                        if (!n)
                          throw new Error(
                            "THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.",
                          );
                        s = t.HALF_FLOAT;
                      } else s = t.UNSIGNED_SHORT;
                    else if (i instanceof Int16Array) s = t.SHORT;
                    else if (i instanceof Uint32Array) s = t.UNSIGNED_INT;
                    else if (i instanceof Int32Array) s = t.INT;
                    else if (i instanceof Int8Array) s = t.BYTE;
                    else if (i instanceof Uint8Array) s = t.UNSIGNED_BYTE;
                    else {
                      if (!(i instanceof Uint8ClampedArray))
                        throw new Error(
                          "THREE.WebGLAttributes: Unsupported buffer data format: " +
                            i,
                        );
                      s = t.UNSIGNED_BYTE;
                    }
                    return {
                      buffer: a,
                      type: s,
                      bytesPerElement: i.BYTES_PER_ELEMENT,
                      version: e.version,
                    };
                  })(e, i),
                )
              : o.version < e.version &&
                ((function (e, r, i) {
                  const o = r.array,
                    a = r.updateRange;
                  t.bindBuffer(i, e),
                    -1 === a.count
                      ? t.bufferSubData(i, 0, o)
                      : (n
                          ? t.bufferSubData(
                              i,
                              a.offset * o.BYTES_PER_ELEMENT,
                              o,
                              a.offset,
                              a.count,
                            )
                          : t.bufferSubData(
                              i,
                              a.offset * o.BYTES_PER_ELEMENT,
                              o.subarray(a.offset, a.offset + a.count),
                            ),
                        (a.count = -1)),
                    r.onUploadCallback();
                })(o.buffer, e, i),
                (o.version = e.version));
          },
        };
      }
      class mp extends wf {
        constructor(t = 1, e = 1, n = 1, r = 1) {
          super(),
            (this.type = "PlaneGeometry"),
            (this.parameters = {
              width: t,
              height: e,
              widthSegments: n,
              heightSegments: r,
            });
          const i = t / 2,
            o = e / 2,
            a = Math.floor(n),
            s = Math.floor(r),
            l = a + 1,
            u = s + 1,
            h = t / a,
            c = e / s,
            d = [],
            f = [],
            p = [],
            m = [];
          for (let t = 0; t < u; t++) {
            const e = t * c - o;
            for (let n = 0; n < l; n++) {
              const r = n * h - i;
              f.push(r, -e, 0),
                p.push(0, 0, 1),
                m.push(n / a),
                m.push(1 - t / s);
            }
          }
          for (let t = 0; t < s; t++)
            for (let e = 0; e < a; e++) {
              const n = e + l * t,
                r = e + l * (t + 1),
                i = e + 1 + l * (t + 1),
                o = e + 1 + l * t;
              d.push(n, r, o), d.push(r, i, o);
            }
          this.setIndex(d),
            this.setAttribute("position", new Ef(f, 3)),
            this.setAttribute("normal", new Ef(p, 3)),
            this.setAttribute("uv", new Ef(m, 2));
        }
        copy(t) {
          return (
            super.copy(t),
            (this.parameters = Object.assign({}, t.parameters)),
            this
          );
        }
        static fromJSON(t) {
          return new mp(t.width, t.height, t.widthSegments, t.heightSegments);
        }
      }
      const _p = {
          alphahash_fragment:
            "#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",
          alphahash_pars_fragment:
            "#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",
          alphamap_fragment:
            "#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",
          alphamap_pars_fragment:
            "#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
          alphatest_fragment:
            "#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",
          alphatest_pars_fragment:
            "#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",
          aomap_fragment:
            "#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",
          aomap_pars_fragment:
            "#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",
          begin_vertex:
            "vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",
          beginnormal_vertex:
            "vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",
          bsdfs:
            "float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",
          iridescence_fragment:
            "#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",
          bumpmap_pars_fragment:
            "#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
          clipping_planes_fragment:
            "#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
          clipping_planes_pars_fragment:
            "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",
          clipping_planes_pars_vertex:
            "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",
          clipping_planes_vertex:
            "#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",
          color_fragment:
            "#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",
          color_pars_fragment:
            "#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",
          color_pars_vertex:
            "#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
          color_vertex:
            "#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",
          common:
            "#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",
          cube_uv_reflection_fragment:
            "#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
          defaultnormal_vertex:
            "vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
          displacementmap_pars_vertex:
            "#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",
          displacementmap_vertex:
            "#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",
          emissivemap_fragment:
            "#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
          emissivemap_pars_fragment:
            "#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",
          colorspace_fragment:
            "gl_FragColor = linearToOutputTexel( gl_FragColor );",
          colorspace_pars_fragment:
            "vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",
          envmap_fragment:
            "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
          envmap_common_pars_fragment:
            "#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",
          envmap_pars_fragment:
            "#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
          envmap_pars_vertex:
            "#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",
          envmap_physical_pars_fragment:
            "#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",
          envmap_vertex:
            "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
          fog_vertex: "#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",
          fog_pars_vertex: "#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",
          fog_fragment:
            "#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",
          fog_pars_fragment:
            "#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
          gradientmap_pars_fragment:
            "#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",
          lightmap_fragment:
            "#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",
          lightmap_pars_fragment:
            "#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",
          lights_lambert_fragment:
            "LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",
          lights_lambert_pars_fragment:
            "varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",
          lights_pars_begin:
            "uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",
          lights_toon_fragment:
            "ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",
          lights_toon_pars_fragment:
            "varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",
          lights_phong_fragment:
            "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",
          lights_phong_pars_fragment:
            "varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",
          lights_physical_fragment:
            "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",
          lights_physical_pars_fragment:
            "struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
          lights_fragment_begin:
            "\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
          lights_fragment_maps:
            "#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",
          lights_fragment_end:
            "#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",
          logdepthbuf_fragment:
            "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",
          logdepthbuf_pars_fragment:
            "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
          logdepthbuf_pars_vertex:
            "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",
          logdepthbuf_vertex:
            "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
          map_fragment:
            "#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",
          map_pars_fragment: "#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",
          map_particle_fragment:
            "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
          map_particle_pars_fragment:
            "#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
          metalnessmap_fragment:
            "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",
          metalnessmap_pars_fragment:
            "#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
          morphcolor_vertex:
            "#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",
          morphnormal_vertex:
            "#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",
          morphtarget_pars_vertex:
            "#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",
          morphtarget_vertex:
            "#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",
          normal_fragment_begin:
            "float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
          normal_fragment_maps:
            "#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",
          normal_pars_fragment:
            "#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",
          normal_pars_vertex:
            "#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",
          normal_vertex:
            "#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",
          normalmap_pars_fragment:
            "#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",
          clearcoat_normal_fragment_begin:
            "#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",
          clearcoat_normal_fragment_maps:
            "#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",
          clearcoat_pars_fragment:
            "#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",
          iridescence_pars_fragment:
            "#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",
          opaque_fragment:
            "#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",
          packing:
            "vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",
          premultiplied_alpha_fragment:
            "#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",
          project_vertex:
            "vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",
          dithering_fragment:
            "#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",
          dithering_pars_fragment:
            "#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
          roughnessmap_fragment:
            "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",
          roughnessmap_pars_fragment:
            "#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",
          shadowmap_pars_fragment:
            "#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
          shadowmap_pars_vertex:
            "#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
          shadowmap_vertex:
            "#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",
          shadowmask_pars_fragment:
            "float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
          skinbase_vertex:
            "#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",
          skinning_pars_vertex:
            "#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",
          skinning_vertex:
            "#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",
          skinnormal_vertex:
            "#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
          specularmap_fragment:
            "float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",
          specularmap_pars_fragment:
            "#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",
          tonemapping_fragment:
            "#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",
          tonemapping_pars_fragment:
            "#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
          transmission_fragment:
            "#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",
          transmission_pars_fragment:
            "#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",
          uv_pars_fragment:
            "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",
          uv_pars_vertex:
            "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",
          uv_vertex:
            "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",
          worldpos_vertex:
            "#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
          background_vert:
            "varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",
          background_frag:
            "uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",
          backgroundCube_vert:
            "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",
          backgroundCube_frag:
            "#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",
          cube_vert:
            "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",
          cube_frag:
            "uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",
          depth_vert:
            "#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
          depth_frag:
            "#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
          distanceRGBA_vert:
            "#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
          distanceRGBA_frag:
            "#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
          equirect_vert:
            "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
          equirect_frag:
            "uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",
          linedashed_vert:
            "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
          linedashed_frag:
            "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
          meshbasic_vert:
            "#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
          meshbasic_frag:
            "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          meshlambert_vert:
            "#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
          meshlambert_frag:
            "#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          meshmatcap_vert:
            "#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
          meshmatcap_frag:
            "#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          meshnormal_vert:
            "#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
          meshnormal_frag:
            "#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",
          meshphong_vert:
            "#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
          meshphong_frag:
            "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          meshphysical_vert:
            "#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",
          meshphysical_frag:
            "#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          meshtoon_vert:
            "#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
          meshtoon_frag:
            "#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          points_vert:
            "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
          points_frag:
            "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
          shadow_vert:
            "#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
          shadow_frag:
            "uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",
          sprite_vert:
            "uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
          sprite_frag:
            "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",
        },
        gp = {
          common: {
            diffuse: { value: new df(16777215) },
            opacity: { value: 1 },
            map: { value: null },
            mapTransform: { value: new yc() },
            alphaMap: { value: null },
            alphaMapTransform: { value: new yc() },
            alphaTest: { value: 0 },
          },
          specularmap: {
            specularMap: { value: null },
            specularMapTransform: { value: new yc() },
          },
          envmap: {
            envMap: { value: null },
            flipEnvMap: { value: -1 },
            reflectivity: { value: 1 },
            ior: { value: 1.5 },
            refractionRatio: { value: 0.98 },
          },
          aomap: {
            aoMap: { value: null },
            aoMapIntensity: { value: 1 },
            aoMapTransform: { value: new yc() },
          },
          lightmap: {
            lightMap: { value: null },
            lightMapIntensity: { value: 1 },
            lightMapTransform: { value: new yc() },
          },
          bumpmap: {
            bumpMap: { value: null },
            bumpMapTransform: { value: new yc() },
            bumpScale: { value: 1 },
          },
          normalmap: {
            normalMap: { value: null },
            normalMapTransform: { value: new yc() },
            normalScale: { value: new vc(1, 1) },
          },
          displacementmap: {
            displacementMap: { value: null },
            displacementMapTransform: { value: new yc() },
            displacementScale: { value: 1 },
            displacementBias: { value: 0 },
          },
          emissivemap: {
            emissiveMap: { value: null },
            emissiveMapTransform: { value: new yc() },
          },
          metalnessmap: {
            metalnessMap: { value: null },
            metalnessMapTransform: { value: new yc() },
          },
          roughnessmap: {
            roughnessMap: { value: null },
            roughnessMapTransform: { value: new yc() },
          },
          gradientmap: { gradientMap: { value: null } },
          fog: {
            fogDensity: { value: 25e-5 },
            fogNear: { value: 1 },
            fogFar: { value: 2e3 },
            fogColor: { value: new df(16777215) },
          },
          lights: {
            ambientLightColor: { value: [] },
            lightProbe: { value: [] },
            directionalLights: {
              value: [],
              properties: { direction: {}, color: {} },
            },
            directionalLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {},
              },
            },
            directionalShadowMap: { value: [] },
            directionalShadowMatrix: { value: [] },
            spotLights: {
              value: [],
              properties: {
                color: {},
                position: {},
                direction: {},
                distance: {},
                coneCos: {},
                penumbraCos: {},
                decay: {},
              },
            },
            spotLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {},
              },
            },
            spotLightMap: { value: [] },
            spotShadowMap: { value: [] },
            spotLightMatrix: { value: [] },
            pointLights: {
              value: [],
              properties: { color: {}, position: {}, decay: {}, distance: {} },
            },
            pointLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {},
                shadowCameraNear: {},
                shadowCameraFar: {},
              },
            },
            pointShadowMap: { value: [] },
            pointShadowMatrix: { value: [] },
            hemisphereLights: {
              value: [],
              properties: { direction: {}, skyColor: {}, groundColor: {} },
            },
            rectAreaLights: {
              value: [],
              properties: { color: {}, position: {}, width: {}, height: {} },
            },
            ltc_1: { value: null },
            ltc_2: { value: null },
          },
          points: {
            diffuse: { value: new df(16777215) },
            opacity: { value: 1 },
            size: { value: 1 },
            scale: { value: 1 },
            map: { value: null },
            alphaMap: { value: null },
            alphaMapTransform: { value: new yc() },
            alphaTest: { value: 0 },
            uvTransform: { value: new yc() },
          },
          sprite: {
            diffuse: { value: new df(16777215) },
            opacity: { value: 1 },
            center: { value: new vc(0.5, 0.5) },
            rotation: { value: 0 },
            map: { value: null },
            mapTransform: { value: new yc() },
            alphaMap: { value: null },
            alphaMapTransform: { value: new yc() },
            alphaTest: { value: 0 },
          },
        },
        vp = {
          basic: {
            uniforms: Zf([
              gp.common,
              gp.specularmap,
              gp.envmap,
              gp.aomap,
              gp.lightmap,
              gp.fog,
            ]),
            vertexShader: _p.meshbasic_vert,
            fragmentShader: _p.meshbasic_frag,
          },
          lambert: {
            uniforms: Zf([
              gp.common,
              gp.specularmap,
              gp.envmap,
              gp.aomap,
              gp.lightmap,
              gp.emissivemap,
              gp.bumpmap,
              gp.normalmap,
              gp.displacementmap,
              gp.fog,
              gp.lights,
              { emissive: { value: new df(0) } },
            ]),
            vertexShader: _p.meshlambert_vert,
            fragmentShader: _p.meshlambert_frag,
          },
          phong: {
            uniforms: Zf([
              gp.common,
              gp.specularmap,
              gp.envmap,
              gp.aomap,
              gp.lightmap,
              gp.emissivemap,
              gp.bumpmap,
              gp.normalmap,
              gp.displacementmap,
              gp.fog,
              gp.lights,
              {
                emissive: { value: new df(0) },
                specular: { value: new df(1118481) },
                shininess: { value: 30 },
              },
            ]),
            vertexShader: _p.meshphong_vert,
            fragmentShader: _p.meshphong_frag,
          },
          standard: {
            uniforms: Zf([
              gp.common,
              gp.envmap,
              gp.aomap,
              gp.lightmap,
              gp.emissivemap,
              gp.bumpmap,
              gp.normalmap,
              gp.displacementmap,
              gp.roughnessmap,
              gp.metalnessmap,
              gp.fog,
              gp.lights,
              {
                emissive: { value: new df(0) },
                roughness: { value: 1 },
                metalness: { value: 0 },
                envMapIntensity: { value: 1 },
              },
            ]),
            vertexShader: _p.meshphysical_vert,
            fragmentShader: _p.meshphysical_frag,
          },
          toon: {
            uniforms: Zf([
              gp.common,
              gp.aomap,
              gp.lightmap,
              gp.emissivemap,
              gp.bumpmap,
              gp.normalmap,
              gp.displacementmap,
              gp.gradientmap,
              gp.fog,
              gp.lights,
              { emissive: { value: new df(0) } },
            ]),
            vertexShader: _p.meshtoon_vert,
            fragmentShader: _p.meshtoon_frag,
          },
          matcap: {
            uniforms: Zf([
              gp.common,
              gp.bumpmap,
              gp.normalmap,
              gp.displacementmap,
              gp.fog,
              { matcap: { value: null } },
            ]),
            vertexShader: _p.meshmatcap_vert,
            fragmentShader: _p.meshmatcap_frag,
          },
          points: {
            uniforms: Zf([gp.points, gp.fog]),
            vertexShader: _p.points_vert,
            fragmentShader: _p.points_frag,
          },
          dashed: {
            uniforms: Zf([
              gp.common,
              gp.fog,
              {
                scale: { value: 1 },
                dashSize: { value: 1 },
                totalSize: { value: 2 },
              },
            ]),
            vertexShader: _p.linedashed_vert,
            fragmentShader: _p.linedashed_frag,
          },
          depth: {
            uniforms: Zf([gp.common, gp.displacementmap]),
            vertexShader: _p.depth_vert,
            fragmentShader: _p.depth_frag,
          },
          normal: {
            uniforms: Zf([
              gp.common,
              gp.bumpmap,
              gp.normalmap,
              gp.displacementmap,
              { opacity: { value: 1 } },
            ]),
            vertexShader: _p.meshnormal_vert,
            fragmentShader: _p.meshnormal_frag,
          },
          sprite: {
            uniforms: Zf([gp.sprite, gp.fog]),
            vertexShader: _p.sprite_vert,
            fragmentShader: _p.sprite_frag,
          },
          background: {
            uniforms: {
              uvTransform: { value: new yc() },
              t2D: { value: null },
              backgroundIntensity: { value: 1 },
            },
            vertexShader: _p.background_vert,
            fragmentShader: _p.background_frag,
          },
          backgroundCube: {
            uniforms: {
              envMap: { value: null },
              flipEnvMap: { value: -1 },
              backgroundBlurriness: { value: 0 },
              backgroundIntensity: { value: 1 },
            },
            vertexShader: _p.backgroundCube_vert,
            fragmentShader: _p.backgroundCube_frag,
          },
          cube: {
            uniforms: {
              tCube: { value: null },
              tFlip: { value: -1 },
              opacity: { value: 1 },
            },
            vertexShader: _p.cube_vert,
            fragmentShader: _p.cube_frag,
          },
          equirect: {
            uniforms: { tEquirect: { value: null } },
            vertexShader: _p.equirect_vert,
            fragmentShader: _p.equirect_frag,
          },
          distanceRGBA: {
            uniforms: Zf([
              gp.common,
              gp.displacementmap,
              {
                referencePosition: { value: new Wc() },
                nearDistance: { value: 1 },
                farDistance: { value: 1e3 },
              },
            ]),
            vertexShader: _p.distanceRGBA_vert,
            fragmentShader: _p.distanceRGBA_frag,
          },
          shadow: {
            uniforms: Zf([
              gp.lights,
              gp.fog,
              { color: { value: new df(0) }, opacity: { value: 1 } },
            ]),
            vertexShader: _p.shadow_vert,
            fragmentShader: _p.shadow_frag,
          },
        };
      vp.physical = {
        uniforms: Zf([
          vp.standard.uniforms,
          {
            clearcoat: { value: 0 },
            clearcoatMap: { value: null },
            clearcoatMapTransform: { value: new yc() },
            clearcoatNormalMap: { value: null },
            clearcoatNormalMapTransform: { value: new yc() },
            clearcoatNormalScale: { value: new vc(1, 1) },
            clearcoatRoughness: { value: 0 },
            clearcoatRoughnessMap: { value: null },
            clearcoatRoughnessMapTransform: { value: new yc() },
            iridescence: { value: 0 },
            iridescenceMap: { value: null },
            iridescenceMapTransform: { value: new yc() },
            iridescenceIOR: { value: 1.3 },
            iridescenceThicknessMinimum: { value: 100 },
            iridescenceThicknessMaximum: { value: 400 },
            iridescenceThicknessMap: { value: null },
            iridescenceThicknessMapTransform: { value: new yc() },
            sheen: { value: 0 },
            sheenColor: { value: new df(0) },
            sheenColorMap: { value: null },
            sheenColorMapTransform: { value: new yc() },
            sheenRoughness: { value: 1 },
            sheenRoughnessMap: { value: null },
            sheenRoughnessMapTransform: { value: new yc() },
            transmission: { value: 0 },
            transmissionMap: { value: null },
            transmissionMapTransform: { value: new yc() },
            transmissionSamplerSize: { value: new vc() },
            transmissionSamplerMap: { value: null },
            thickness: { value: 0 },
            thicknessMap: { value: null },
            thicknessMapTransform: { value: new yc() },
            attenuationDistance: { value: 0 },
            attenuationColor: { value: new df(0) },
            specularColor: { value: new df(1, 1, 1) },
            specularColorMap: { value: null },
            specularColorMapTransform: { value: new yc() },
            specularIntensity: { value: 1 },
            specularIntensityMap: { value: null },
            specularIntensityMapTransform: { value: new yc() },
            anisotropyVector: { value: new vc() },
            anisotropyMap: { value: null },
            anisotropyMapTransform: { value: new yc() },
          },
        ]),
        vertexShader: _p.meshphysical_vert,
        fragmentShader: _p.meshphysical_frag,
      };
      const yp = { r: 0, b: 0, g: 0 };
      function Ep(t, e, n, r, i, o, a) {
        const s = new df(0);
        let l,
          u,
          h = !0 === o ? 0 : 1,
          c = null,
          d = 0,
          f = null;
        function p(e, n) {
          e.getRGB(yp, Qf(t)), r.buffers.color.setClear(yp.r, yp.g, yp.b, n, a);
        }
        return {
          getClearColor: function () {
            return s;
          },
          setClearColor: function (t, e = 1) {
            s.set(t), (h = e), p(s, h);
          },
          getClearAlpha: function () {
            return h;
          },
          setClearAlpha: function (t) {
            (h = t), p(s, h);
          },
          render: function (o, m) {
            let _ = !1,
              g = !0 === m.isScene ? m.background : null;
            switch (
              (g &&
                g.isTexture &&
                (g = (m.backgroundBlurriness > 0 ? n : e).get(g)),
              null === g ? p(s, h) : g && g.isColor && (p(g, 1), (_ = !0)),
              t.xr.getEnvironmentBlendMode())
            ) {
              case "opaque":
                _ = !0;
                break;
              case "additive":
                r.buffers.color.setClear(0, 0, 0, 1, a), (_ = !0);
                break;
              case "alpha-blend":
                r.buffers.color.setClear(0, 0, 0, 0, a), (_ = !0);
            }
            (t.autoClear || _) &&
              t.clear(t.autoClearColor, t.autoClearDepth, t.autoClearStencil),
              g && (g.isCubeTexture || g.mapping === gh)
                ? (void 0 === u &&
                    ((u = new jf(
                      new qf(1, 1, 1),
                      new Jf({
                        name: "BackgroundCubeMaterial",
                        uniforms: Kf(vp.backgroundCube.uniforms),
                        vertexShader: vp.backgroundCube.vertexShader,
                        fragmentShader: vp.backgroundCube.fragmentShader,
                        side: nh,
                        depthTest: !1,
                        depthWrite: !1,
                        fog: !1,
                      }),
                    )),
                    u.geometry.deleteAttribute("normal"),
                    u.geometry.deleteAttribute("uv"),
                    (u.onBeforeRender = function (t, e, n) {
                      this.matrixWorld.copyPosition(n.matrixWorld);
                    }),
                    Object.defineProperty(u.material, "envMap", {
                      get: function () {
                        return this.uniforms.envMap.value;
                      },
                    }),
                    i.update(u)),
                  (u.material.uniforms.envMap.value = g),
                  (u.material.uniforms.flipEnvMap.value =
                    g.isCubeTexture && !1 === g.isRenderTargetTexture ? -1 : 1),
                  (u.material.uniforms.backgroundBlurriness.value =
                    m.backgroundBlurriness),
                  (u.material.uniforms.backgroundIntensity.value =
                    m.backgroundIntensity),
                  (u.material.toneMapped = g.colorSpace !== qh),
                  (c === g && d === g.version && f === t.toneMapping) ||
                    ((u.material.needsUpdate = !0),
                    (c = g),
                    (d = g.version),
                    (f = t.toneMapping)),
                  u.layers.enableAll(),
                  o.unshift(u, u.geometry, u.material, 0, 0, null))
                : g &&
                  g.isTexture &&
                  (void 0 === l &&
                    ((l = new jf(
                      new mp(2, 2),
                      new Jf({
                        name: "BackgroundMaterial",
                        uniforms: Kf(vp.background.uniforms),
                        vertexShader: vp.background.vertexShader,
                        fragmentShader: vp.background.fragmentShader,
                        side: eh,
                        depthTest: !1,
                        depthWrite: !1,
                        fog: !1,
                      }),
                    )),
                    l.geometry.deleteAttribute("normal"),
                    Object.defineProperty(l.material, "map", {
                      get: function () {
                        return this.uniforms.t2D.value;
                      },
                    }),
                    i.update(l)),
                  (l.material.uniforms.t2D.value = g),
                  (l.material.uniforms.backgroundIntensity.value =
                    m.backgroundIntensity),
                  (l.material.toneMapped = g.colorSpace !== qh),
                  !0 === g.matrixAutoUpdate && g.updateMatrix(),
                  l.material.uniforms.uvTransform.value.copy(g.matrix),
                  (c === g && d === g.version && f === t.toneMapping) ||
                    ((l.material.needsUpdate = !0),
                    (c = g),
                    (d = g.version),
                    (f = t.toneMapping)),
                  l.layers.enableAll(),
                  o.unshift(l, l.geometry, l.material, 0, 0, null));
          },
        };
      }
      function Tp(t, e, n, r) {
        const i = t.getParameter(t.MAX_VERTEX_ATTRIBS),
          o = r.isWebGL2 ? null : e.get("OES_vertex_array_object"),
          a = r.isWebGL2 || null !== o,
          s = {},
          l = f(null);
        let u = l,
          h = !1;
        function c(e) {
          return r.isWebGL2 ? t.bindVertexArray(e) : o.bindVertexArrayOES(e);
        }
        function d(e) {
          return r.isWebGL2
            ? t.deleteVertexArray(e)
            : o.deleteVertexArrayOES(e);
        }
        function f(t) {
          const e = [],
            n = [],
            r = [];
          for (let t = 0; t < i; t++) (e[t] = 0), (n[t] = 0), (r[t] = 0);
          return {
            geometry: null,
            program: null,
            wireframe: !1,
            newAttributes: e,
            enabledAttributes: n,
            attributeDivisors: r,
            object: t,
            attributes: {},
            index: null,
          };
        }
        function p() {
          const t = u.newAttributes;
          for (let e = 0, n = t.length; e < n; e++) t[e] = 0;
        }
        function m(t) {
          _(t, 0);
        }
        function _(n, i) {
          const o = u.newAttributes,
            a = u.enabledAttributes,
            s = u.attributeDivisors;
          (o[n] = 1),
            0 === a[n] && (t.enableVertexAttribArray(n), (a[n] = 1)),
            s[n] !== i &&
              ((r.isWebGL2 ? t : e.get("ANGLE_instanced_arrays"))[
                r.isWebGL2 ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"
              ](n, i),
              (s[n] = i));
        }
        function g() {
          const e = u.newAttributes,
            n = u.enabledAttributes;
          for (let r = 0, i = n.length; r < i; r++)
            n[r] !== e[r] && (t.disableVertexAttribArray(r), (n[r] = 0));
        }
        function v(e, n, r, i, o, a, s) {
          !0 === s
            ? t.vertexAttribIPointer(e, n, r, o, a)
            : t.vertexAttribPointer(e, n, r, i, o, a);
        }
        function y() {
          E(), (h = !0), u !== l && ((u = l), c(u.object));
        }
        function E() {
          (l.geometry = null), (l.program = null), (l.wireframe = !1);
        }
        return {
          setup: function (i, l, d, y, E) {
            let T = !1;
            if (a) {
              const e = (function (e, n, i) {
                const a = !0 === i.wireframe;
                let l = s[e.id];
                void 0 === l && ((l = {}), (s[e.id] = l));
                let u = l[n.id];
                void 0 === u && ((u = {}), (l[n.id] = u));
                let h = u[a];
                return (
                  void 0 === h &&
                    ((h = f(
                      r.isWebGL2
                        ? t.createVertexArray()
                        : o.createVertexArrayOES(),
                    )),
                    (u[a] = h)),
                  h
                );
              })(y, d, l);
              u !== e && ((u = e), c(u.object)),
                (T = (function (t, e, n, r) {
                  const i = u.attributes,
                    o = e.attributes;
                  let a = 0;
                  const s = n.getAttributes();
                  for (const e in s)
                    if (s[e].location >= 0) {
                      const n = i[e];
                      let r = o[e];
                      if (
                        (void 0 === r &&
                          ("instanceMatrix" === e &&
                            t.instanceMatrix &&
                            (r = t.instanceMatrix),
                          "instanceColor" === e &&
                            t.instanceColor &&
                            (r = t.instanceColor)),
                        void 0 === n)
                      )
                        return !0;
                      if (n.attribute !== r) return !0;
                      if (r && n.data !== r.data) return !0;
                      a++;
                    }
                  return u.attributesNum !== a || u.index !== r;
                })(i, y, d, E)),
                T &&
                  (function (t, e, n, r) {
                    const i = {},
                      o = e.attributes;
                    let a = 0;
                    const s = n.getAttributes();
                    for (const e in s)
                      if (s[e].location >= 0) {
                        let n = o[e];
                        void 0 === n &&
                          ("instanceMatrix" === e &&
                            t.instanceMatrix &&
                            (n = t.instanceMatrix),
                          "instanceColor" === e &&
                            t.instanceColor &&
                            (n = t.instanceColor));
                        const r = {};
                        (r.attribute = n),
                          n && n.data && (r.data = n.data),
                          (i[e] = r),
                          a++;
                      }
                    (u.attributes = i), (u.attributesNum = a), (u.index = r);
                  })(i, y, d, E);
            } else {
              const t = !0 === l.wireframe;
              (u.geometry === y.id &&
                u.program === d.id &&
                u.wireframe === t) ||
                ((u.geometry = y.id),
                (u.program = d.id),
                (u.wireframe = t),
                (T = !0));
            }
            null !== E && n.update(E, t.ELEMENT_ARRAY_BUFFER),
              (T || h) &&
                ((h = !1),
                (function (i, o, a, s) {
                  if (
                    !1 === r.isWebGL2 &&
                    (i.isInstancedMesh || s.isInstancedBufferGeometry) &&
                    null === e.get("ANGLE_instanced_arrays")
                  )
                    return;
                  p();
                  const l = s.attributes,
                    u = a.getAttributes(),
                    h = o.defaultAttributeValues;
                  for (const e in u) {
                    const o = u[e];
                    if (o.location >= 0) {
                      let a = l[e];
                      if (
                        (void 0 === a &&
                          ("instanceMatrix" === e &&
                            i.instanceMatrix &&
                            (a = i.instanceMatrix),
                          "instanceColor" === e &&
                            i.instanceColor &&
                            (a = i.instanceColor)),
                        void 0 !== a)
                      ) {
                        const e = a.normalized,
                          l = a.itemSize,
                          u = n.get(a);
                        if (void 0 === u) continue;
                        const h = u.buffer,
                          c = u.type,
                          d = u.bytesPerElement,
                          f =
                            !0 === r.isWebGL2 &&
                            (c === t.INT ||
                              c === t.UNSIGNED_INT ||
                              1013 === a.gpuType);
                        if (a.isInterleavedBufferAttribute) {
                          const n = a.data,
                            r = n.stride,
                            u = a.offset;
                          if (n.isInstancedInterleavedBuffer) {
                            for (let t = 0; t < o.locationSize; t++)
                              _(o.location + t, n.meshPerAttribute);
                            !0 !== i.isInstancedMesh &&
                              void 0 === s._maxInstanceCount &&
                              (s._maxInstanceCount =
                                n.meshPerAttribute * n.count);
                          } else
                            for (let t = 0; t < o.locationSize; t++)
                              m(o.location + t);
                          t.bindBuffer(t.ARRAY_BUFFER, h);
                          for (let t = 0; t < o.locationSize; t++)
                            v(
                              o.location + t,
                              l / o.locationSize,
                              c,
                              e,
                              r * d,
                              (u + (l / o.locationSize) * t) * d,
                              f,
                            );
                        } else {
                          if (a.isInstancedBufferAttribute) {
                            for (let t = 0; t < o.locationSize; t++)
                              _(o.location + t, a.meshPerAttribute);
                            !0 !== i.isInstancedMesh &&
                              void 0 === s._maxInstanceCount &&
                              (s._maxInstanceCount =
                                a.meshPerAttribute * a.count);
                          } else
                            for (let t = 0; t < o.locationSize; t++)
                              m(o.location + t);
                          t.bindBuffer(t.ARRAY_BUFFER, h);
                          for (let t = 0; t < o.locationSize; t++)
                            v(
                              o.location + t,
                              l / o.locationSize,
                              c,
                              e,
                              l * d,
                              (l / o.locationSize) * t * d,
                              f,
                            );
                        }
                      } else if (void 0 !== h) {
                        const n = h[e];
                        if (void 0 !== n)
                          switch (n.length) {
                            case 2:
                              t.vertexAttrib2fv(o.location, n);
                              break;
                            case 3:
                              t.vertexAttrib3fv(o.location, n);
                              break;
                            case 4:
                              t.vertexAttrib4fv(o.location, n);
                              break;
                            default:
                              t.vertexAttrib1fv(o.location, n);
                          }
                      }
                    }
                  }
                  g();
                })(i, l, d, y),
                null !== E &&
                  t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, n.get(E).buffer));
          },
          reset: y,
          resetDefaultState: E,
          dispose: function () {
            y();
            for (const t in s) {
              const e = s[t];
              for (const t in e) {
                const n = e[t];
                for (const t in n) d(n[t].object), delete n[t];
                delete e[t];
              }
              delete s[t];
            }
          },
          releaseStatesOfGeometry: function (t) {
            if (void 0 === s[t.id]) return;
            const e = s[t.id];
            for (const t in e) {
              const n = e[t];
              for (const t in n) d(n[t].object), delete n[t];
              delete e[t];
            }
            delete s[t.id];
          },
          releaseStatesOfProgram: function (t) {
            for (const e in s) {
              const n = s[e];
              if (void 0 === n[t.id]) continue;
              const r = n[t.id];
              for (const t in r) d(r[t].object), delete r[t];
              delete n[t.id];
            }
          },
          initAttributes: p,
          enableAttribute: m,
          disableUnusedAttributes: g,
        };
      }
      function bp(t, e, n, r) {
        const i = r.isWebGL2;
        let o;
        (this.setMode = function (t) {
          o = t;
        }),
          (this.render = function (e, r) {
            t.drawArrays(o, e, r), n.update(r, o, 1);
          }),
          (this.renderInstances = function (r, a, s) {
            if (0 === s) return;
            let l, u;
            if (i) (l = t), (u = "drawArraysInstanced");
            else if (
              ((l = e.get("ANGLE_instanced_arrays")),
              (u = "drawArraysInstancedANGLE"),
              null === l)
            )
              return void console.error(
                "THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.",
              );
            l[u](o, r, a, s), n.update(a, o, s);
          });
      }
      function xp(t, e, n) {
        let r;
        function i(e) {
          if ("highp" === e) {
            if (
              t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_FLOAT)
                .precision > 0 &&
              t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT)
                .precision > 0
            )
              return "highp";
            e = "mediump";
          }
          return "mediump" === e &&
            t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.MEDIUM_FLOAT)
              .precision > 0 &&
            t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.MEDIUM_FLOAT)
              .precision > 0
            ? "mediump"
            : "lowp";
        }
        const o =
          "undefined" != typeof WebGL2RenderingContext &&
          "WebGL2RenderingContext" === t.constructor.name;
        let a = void 0 !== n.precision ? n.precision : "highp";
        const s = i(a);
        s !== a &&
          (console.warn(
            "THREE.WebGLRenderer:",
            a,
            "not supported, using",
            s,
            "instead.",
          ),
          (a = s));
        const l = o || e.has("WEBGL_draw_buffers"),
          u = !0 === n.logarithmicDepthBuffer,
          h = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),
          c = t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
          d = t.getParameter(t.MAX_TEXTURE_SIZE),
          f = t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),
          p = t.getParameter(t.MAX_VERTEX_ATTRIBS),
          m = t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),
          _ = t.getParameter(t.MAX_VARYING_VECTORS),
          g = t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),
          v = c > 0,
          y = o || e.has("OES_texture_float");
        return {
          isWebGL2: o,
          drawBuffers: l,
          getMaxAnisotropy: function () {
            if (void 0 !== r) return r;
            if (!0 === e.has("EXT_texture_filter_anisotropic")) {
              const n = e.get("EXT_texture_filter_anisotropic");
              r = t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
            } else r = 0;
            return r;
          },
          getMaxPrecision: i,
          precision: a,
          logarithmicDepthBuffer: u,
          maxTextures: h,
          maxVertexTextures: c,
          maxTextureSize: d,
          maxCubemapSize: f,
          maxAttributes: p,
          maxVertexUniforms: m,
          maxVaryings: _,
          maxFragmentUniforms: g,
          vertexTextures: v,
          floatFragmentTextures: y,
          floatVertexTextures: v && y,
          maxSamples: o ? t.getParameter(t.MAX_SAMPLES) : 0,
        };
      }
      function Sp(t) {
        const e = this;
        let n = null,
          r = 0,
          i = !1,
          o = !1;
        const a = new up(),
          s = new yc(),
          l = { value: null, needsUpdate: !1 };
        function u(t, n, r, i) {
          const o = null !== t ? t.length : 0;
          let u = null;
          if (0 !== o) {
            if (((u = l.value), !0 !== i || null === u)) {
              const e = r + 4 * o,
                i = n.matrixWorldInverse;
              s.getNormalMatrix(i),
                (null === u || u.length < e) && (u = new Float32Array(e));
              for (let e = 0, n = r; e !== o; ++e, n += 4)
                a.copy(t[e]).applyMatrix4(i, s),
                  a.normal.toArray(u, n),
                  (u[n + 3] = a.constant);
            }
            (l.value = u), (l.needsUpdate = !0);
          }
          return (e.numPlanes = o), (e.numIntersection = 0), u;
        }
        (this.uniform = l),
          (this.numPlanes = 0),
          (this.numIntersection = 0),
          (this.init = function (t, e) {
            const n = 0 !== t.length || e || 0 !== r || i;
            return (i = e), (r = t.length), n;
          }),
          (this.beginShadows = function () {
            (o = !0), u(null);
          }),
          (this.endShadows = function () {
            o = !1;
          }),
          (this.setGlobalState = function (t, e) {
            n = u(t, e, 0);
          }),
          (this.setState = function (a, s, h) {
            const c = a.clippingPlanes,
              d = a.clipIntersection,
              f = a.clipShadows,
              p = t.get(a);
            if (!i || null === c || 0 === c.length || (o && !f))
              o
                ? u(null)
                : (l.value !== n && ((l.value = n), (l.needsUpdate = r > 0)),
                  (e.numPlanes = r),
                  (e.numIntersection = 0));
            else {
              const t = o ? 0 : r,
                e = 4 * t;
              let i = p.clippingState || null;
              (l.value = i), (i = u(c, s, e, h));
              for (let t = 0; t !== e; ++t) i[t] = n[t];
              (p.clippingState = i),
                (this.numIntersection = d ? this.numPlanes : 0),
                (this.numPlanes += t);
            }
          });
      }
      function Mp(t) {
        let e = new WeakMap();
        function n(t, e) {
          return (
            303 === e ? (t.mapping = mh) : 304 === e && (t.mapping = _h), t
          );
        }
        function r(t) {
          const n = t.target;
          n.removeEventListener("dispose", r);
          const i = e.get(n);
          void 0 !== i && (e.delete(n), i.dispose());
        }
        return {
          get: function (i) {
            if (i && i.isTexture && !1 === i.isRenderTargetTexture) {
              const o = i.mapping;
              if (303 === o || 304 === o) {
                if (e.has(i)) return n(e.get(i).texture, i.mapping);
                {
                  const o = i.image;
                  if (o && o.height > 0) {
                    const a = new op(o.height / 2);
                    return (
                      a.fromEquirectangularTexture(t, i),
                      e.set(i, a),
                      i.addEventListener("dispose", r),
                      n(a.texture, i.mapping)
                    );
                  }
                  return null;
                }
              }
            }
            return i;
          },
          dispose: function () {
            e = new WeakMap();
          },
        };
      }
      class Ap extends tp {
        constructor(t = -1, e = 1, n = 1, r = -1, i = 0.1, o = 2e3) {
          super(),
            (this.isOrthographicCamera = !0),
            (this.type = "OrthographicCamera"),
            (this.zoom = 1),
            (this.view = null),
            (this.left = t),
            (this.right = e),
            (this.top = n),
            (this.bottom = r),
            (this.near = i),
            (this.far = o),
            this.updateProjectionMatrix();
        }
        copy(t, e) {
          return (
            super.copy(t, e),
            (this.left = t.left),
            (this.right = t.right),
            (this.top = t.top),
            (this.bottom = t.bottom),
            (this.near = t.near),
            (this.far = t.far),
            (this.zoom = t.zoom),
            (this.view = null === t.view ? null : Object.assign({}, t.view)),
            this
          );
        }
        setViewOffset(t, e, n, r, i, o) {
          null === this.view &&
            (this.view = {
              enabled: !0,
              fullWidth: 1,
              fullHeight: 1,
              offsetX: 0,
              offsetY: 0,
              width: 1,
              height: 1,
            }),
            (this.view.enabled = !0),
            (this.view.fullWidth = t),
            (this.view.fullHeight = e),
            (this.view.offsetX = n),
            (this.view.offsetY = r),
            (this.view.width = i),
            (this.view.height = o),
            this.updateProjectionMatrix();
        }
        clearViewOffset() {
          null !== this.view && (this.view.enabled = !1),
            this.updateProjectionMatrix();
        }
        updateProjectionMatrix() {
          const t = (this.right - this.left) / (2 * this.zoom),
            e = (this.top - this.bottom) / (2 * this.zoom),
            n = (this.right + this.left) / 2,
            r = (this.top + this.bottom) / 2;
          let i = n - t,
            o = n + t,
            a = r + e,
            s = r - e;
          if (null !== this.view && this.view.enabled) {
            const t =
                (this.right - this.left) / this.view.fullWidth / this.zoom,
              e = (this.top - this.bottom) / this.view.fullHeight / this.zoom;
            (i += t * this.view.offsetX),
              (o = i + t * this.view.width),
              (a -= e * this.view.offsetY),
              (s = a - e * this.view.height);
          }
          this.projectionMatrix.makeOrthographic(
            i,
            o,
            a,
            s,
            this.near,
            this.far,
            this.coordinateSystem,
          ),
            this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
        }
        toJSON(t) {
          const e = super.toJSON(t);
          return (
            (e.object.zoom = this.zoom),
            (e.object.left = this.left),
            (e.object.right = this.right),
            (e.object.top = this.top),
            (e.object.bottom = this.bottom),
            (e.object.near = this.near),
            (e.object.far = this.far),
            null !== this.view &&
              (e.object.view = Object.assign({}, this.view)),
            e
          );
        }
      }
      const Rp = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582],
        wp = 20,
        Pp = new Ap(),
        Ip = new df();
      let Op = null;
      const Cp = (1 + Math.sqrt(5)) / 2,
        Np = 1 / Cp,
        Lp = [
          new Wc(1, 1, 1),
          new Wc(-1, 1, 1),
          new Wc(1, 1, -1),
          new Wc(-1, 1, -1),
          new Wc(0, Cp, Np),
          new Wc(0, Cp, -Np),
          new Wc(Np, 0, Cp),
          new Wc(-Np, 0, Cp),
          new Wc(Cp, Np, 0),
          new Wc(-Cp, Np, 0),
        ];
      class Dp {
        constructor(t) {
          (this._renderer = t),
            (this._pingPongRenderTarget = null),
            (this._lodMax = 0),
            (this._cubeSize = 0),
            (this._lodPlanes = []),
            (this._sizeLods = []),
            (this._sigmas = []),
            (this._blurMaterial = null),
            (this._cubemapMaterial = null),
            (this._equirectMaterial = null),
            this._compileMaterial(this._blurMaterial);
        }
        fromScene(t, e = 0, n = 0.1, r = 100) {
          (Op = this._renderer.getRenderTarget()), this._setSize(256);
          const i = this._allocateTargets();
          return (
            (i.depthBuffer = !0),
            this._sceneToCubeUV(t, n, r, i),
            e > 0 && this._blur(i, 0, 0, e),
            this._applyPMREM(i),
            this._cleanup(i),
            i
          );
        }
        fromEquirectangular(t, e = null) {
          return this._fromTexture(t, e);
        }
        fromCubemap(t, e = null) {
          return this._fromTexture(t, e);
        }
        compileCubemapShader() {
          null === this._cubemapMaterial &&
            ((this._cubemapMaterial = Gp()),
            this._compileMaterial(this._cubemapMaterial));
        }
        compileEquirectangularShader() {
          null === this._equirectMaterial &&
            ((this._equirectMaterial = Bp()),
            this._compileMaterial(this._equirectMaterial));
        }
        dispose() {
          this._dispose(),
            null !== this._cubemapMaterial && this._cubemapMaterial.dispose(),
            null !== this._equirectMaterial && this._equirectMaterial.dispose();
        }
        _setSize(t) {
          (this._lodMax = Math.floor(Math.log2(t))),
            (this._cubeSize = Math.pow(2, this._lodMax));
        }
        _dispose() {
          null !== this._blurMaterial && this._blurMaterial.dispose(),
            null !== this._pingPongRenderTarget &&
              this._pingPongRenderTarget.dispose();
          for (let t = 0; t < this._lodPlanes.length; t++)
            this._lodPlanes[t].dispose();
        }
        _cleanup(t) {
          this._renderer.setRenderTarget(Op),
            (t.scissorTest = !1),
            Fp(t, 0, 0, t.width, t.height);
        }
        _fromTexture(t, e) {
          t.mapping === mh || t.mapping === _h
            ? this._setSize(
                0 === t.image.length
                  ? 16
                  : t.image[0].width || t.image[0].image.width,
              )
            : this._setSize(t.image.width / 4),
            (Op = this._renderer.getRenderTarget());
          const n = e || this._allocateTargets();
          return (
            this._textureToCubeUV(t, n),
            this._applyPMREM(n),
            this._cleanup(n),
            n
          );
        }
        _allocateTargets() {
          const t = 3 * Math.max(this._cubeSize, 112),
            e = 4 * this._cubeSize,
            n = {
              magFilter: xh,
              minFilter: xh,
              generateMipmaps: !1,
              type: Ph,
              format: Nh,
              colorSpace: Kh,
              depthBuffer: !1,
            },
            r = Up(t, e, n);
          if (
            null === this._pingPongRenderTarget ||
            this._pingPongRenderTarget.width !== t ||
            this._pingPongRenderTarget.height !== e
          ) {
            null !== this._pingPongRenderTarget && this._dispose(),
              (this._pingPongRenderTarget = Up(t, e, n));
            const { _lodMax: r } = this;
            ({
              sizeLods: this._sizeLods,
              lodPlanes: this._lodPlanes,
              sigmas: this._sigmas,
            } = (function (t) {
              const e = [],
                n = [],
                r = [];
              let i = t;
              const o = t - 4 + 1 + Rp.length;
              for (let a = 0; a < o; a++) {
                const o = Math.pow(2, i);
                n.push(o);
                let s = 1 / o;
                a > t - 4 ? (s = Rp[a - t + 4 - 1]) : 0 === a && (s = 0),
                  r.push(s);
                const l = 1 / (o - 2),
                  u = -l,
                  h = 1 + l,
                  c = [u, u, h, u, h, h, u, u, h, h, u, h],
                  d = 6,
                  f = 6,
                  p = 3,
                  m = 2,
                  _ = 1,
                  g = new Float32Array(p * f * d),
                  v = new Float32Array(m * f * d),
                  y = new Float32Array(_ * f * d);
                for (let t = 0; t < d; t++) {
                  const e = ((t % 3) * 2) / 3 - 1,
                    n = t > 2 ? 0 : -1,
                    r = [
                      e,
                      n,
                      0,
                      e + 2 / 3,
                      n,
                      0,
                      e + 2 / 3,
                      n + 1,
                      0,
                      e,
                      n,
                      0,
                      e + 2 / 3,
                      n + 1,
                      0,
                      e,
                      n + 1,
                      0,
                    ];
                  g.set(r, p * f * t), v.set(c, m * f * t);
                  const i = [t, t, t, t, t, t];
                  y.set(i, _ * f * t);
                }
                const E = new wf();
                E.setAttribute("position", new gf(g, p)),
                  E.setAttribute("uv", new gf(v, m)),
                  E.setAttribute("faceIndex", new gf(y, _)),
                  e.push(E),
                  i > 4 && i--;
              }
              return { lodPlanes: e, sizeLods: n, sigmas: r };
            })(r)),
              (this._blurMaterial = (function (t, e, n) {
                const r = new Float32Array(wp),
                  i = new Wc(0, 1, 0);
                return new Jf({
                  name: "SphericalGaussianBlur",
                  defines: {
                    n: wp,
                    CUBEUV_TEXEL_WIDTH: 1 / e,
                    CUBEUV_TEXEL_HEIGHT: 1 / n,
                    CUBEUV_MAX_MIP: `${t}.0`,
                  },
                  uniforms: {
                    envMap: { value: null },
                    samples: { value: 1 },
                    weights: { value: r },
                    latitudinal: { value: !1 },
                    dTheta: { value: 0 },
                    mipInt: { value: 0 },
                    poleAxis: { value: i },
                  },
                  vertexShader:
                    "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
                  fragmentShader:
                    "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",
                  blending: ih,
                  depthTest: !1,
                  depthWrite: !1,
                });
              })(r, t, e));
          }
          return r;
        }
        _compileMaterial(t) {
          const e = new jf(this._lodPlanes[0], t);
          this._renderer.compile(e, Pp);
        }
        _sceneToCubeUV(t, e, n, r) {
          const i = new ep(90, 1, e, n),
            o = [1, -1, 1, 1, 1, 1],
            a = [1, 1, 1, -1, -1, -1],
            s = this._renderer,
            l = s.autoClear,
            u = s.toneMapping;
          s.getClearColor(Ip), (s.toneMapping = uh), (s.autoClear = !1);
          const h = new pf({
              name: "PMREM.Background",
              side: nh,
              depthWrite: !1,
              depthTest: !1,
            }),
            c = new jf(new qf(), h);
          let d = !1;
          const f = t.background;
          f
            ? f.isColor && (h.color.copy(f), (t.background = null), (d = !0))
            : (h.color.copy(Ip), (d = !0));
          for (let e = 0; e < 6; e++) {
            const n = e % 3;
            0 === n
              ? (i.up.set(0, o[e], 0), i.lookAt(a[e], 0, 0))
              : 1 === n
                ? (i.up.set(0, 0, o[e]), i.lookAt(0, a[e], 0))
                : (i.up.set(0, o[e], 0), i.lookAt(0, 0, a[e]));
            const l = this._cubeSize;
            Fp(r, n * l, e > 2 ? l : 0, l, l),
              s.setRenderTarget(r),
              d && s.render(c, i),
              s.render(t, i);
          }
          c.geometry.dispose(),
            c.material.dispose(),
            (s.toneMapping = u),
            (s.autoClear = l),
            (t.background = f);
        }
        _textureToCubeUV(t, e) {
          const n = this._renderer,
            r = t.mapping === mh || t.mapping === _h;
          r
            ? (null === this._cubemapMaterial && (this._cubemapMaterial = Gp()),
              (this._cubemapMaterial.uniforms.flipEnvMap.value =
                !1 === t.isRenderTargetTexture ? -1 : 1))
            : null === this._equirectMaterial &&
              (this._equirectMaterial = Bp());
          const i = r ? this._cubemapMaterial : this._equirectMaterial,
            o = new jf(this._lodPlanes[0], i);
          i.uniforms.envMap.value = t;
          const a = this._cubeSize;
          Fp(e, 0, 0, 3 * a, 2 * a), n.setRenderTarget(e), n.render(o, Pp);
        }
        _applyPMREM(t) {
          const e = this._renderer,
            n = e.autoClear;
          e.autoClear = !1;
          for (let e = 1; e < this._lodPlanes.length; e++) {
            const n = Math.sqrt(
                this._sigmas[e] * this._sigmas[e] -
                  this._sigmas[e - 1] * this._sigmas[e - 1],
              ),
              r = Lp[(e - 1) % Lp.length];
            this._blur(t, e - 1, e, n, r);
          }
          e.autoClear = n;
        }
        _blur(t, e, n, r, i) {
          const o = this._pingPongRenderTarget;
          this._halfBlur(t, o, e, n, r, "latitudinal", i),
            this._halfBlur(o, t, n, n, r, "longitudinal", i);
        }
        _halfBlur(t, e, n, r, i, o, a) {
          const s = this._renderer,
            l = this._blurMaterial;
          "latitudinal" !== o &&
            "longitudinal" !== o &&
            console.error(
              "blur direction must be either latitudinal or longitudinal!",
            );
          const u = new jf(this._lodPlanes[r], l),
            h = l.uniforms,
            c = this._sizeLods[n] - 1,
            d = isFinite(i) ? Math.PI / (2 * c) : (2 * Math.PI) / 39,
            f = i / d,
            p = isFinite(i) ? 1 + Math.floor(3 * f) : wp;
          p > wp &&
            console.warn(
              `sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`,
            );
          const m = [];
          let _ = 0;
          for (let t = 0; t < wp; ++t) {
            const e = t / f,
              n = Math.exp((-e * e) / 2);
            m.push(n), 0 === t ? (_ += n) : t < p && (_ += 2 * n);
          }
          for (let t = 0; t < m.length; t++) m[t] = m[t] / _;
          (h.envMap.value = t.texture),
            (h.samples.value = p),
            (h.weights.value = m),
            (h.latitudinal.value = "latitudinal" === o),
            a && (h.poleAxis.value = a);
          const { _lodMax: g } = this;
          (h.dTheta.value = d), (h.mipInt.value = g - n);
          const v = this._sizeLods[r];
          Fp(
            e,
            3 * v * (r > g - 4 ? r - g + 4 : 0),
            4 * (this._cubeSize - v),
            3 * v,
            2 * v,
          ),
            s.setRenderTarget(e),
            s.render(u, Pp);
        }
      }
      function Up(t, e, n) {
        const r = new Hc(t, e, n);
        return (
          (r.texture.mapping = gh),
          (r.texture.name = "PMREM.cubeUv"),
          (r.scissorTest = !0),
          r
        );
      }
      function Fp(t, e, n, r, i) {
        t.viewport.set(e, n, r, i), t.scissor.set(e, n, r, i);
      }
      function Bp() {
        return new Jf({
          name: "EquirectangularToCubeUV",
          uniforms: { envMap: { value: null } },
          vertexShader:
            "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
          fragmentShader:
            "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",
          blending: ih,
          depthTest: !1,
          depthWrite: !1,
        });
      }
      function Gp() {
        return new Jf({
          name: "CubemapToCubeUV",
          uniforms: { envMap: { value: null }, flipEnvMap: { value: -1 } },
          vertexShader:
            "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
          fragmentShader:
            "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",
          blending: ih,
          depthTest: !1,
          depthWrite: !1,
        });
      }
      function kp(t) {
        let e = new WeakMap(),
          n = null;
        function r(t) {
          const n = t.target;
          n.removeEventListener("dispose", r);
          const i = e.get(n);
          void 0 !== i && (e.delete(n), i.dispose());
        }
        return {
          get: function (i) {
            if (i && i.isTexture) {
              const o = i.mapping,
                a = 303 === o || 304 === o,
                s = o === mh || o === _h;
              if (a || s) {
                if (i.isRenderTargetTexture && !0 === i.needsPMREMUpdate) {
                  i.needsPMREMUpdate = !1;
                  let r = e.get(i);
                  return (
                    null === n && (n = new Dp(t)),
                    (r = a ? n.fromEquirectangular(i, r) : n.fromCubemap(i, r)),
                    e.set(i, r),
                    r.texture
                  );
                }
                if (e.has(i)) return e.get(i).texture;
                {
                  const o = i.image;
                  if (
                    (a && o && o.height > 0) ||
                    (s &&
                      o &&
                      (function (t) {
                        let e = 0;
                        for (let n = 0; n < 6; n++) void 0 !== t[n] && e++;
                        return 6 === e;
                      })(o))
                  ) {
                    null === n && (n = new Dp(t));
                    const o = a ? n.fromEquirectangular(i) : n.fromCubemap(i);
                    return (
                      e.set(i, o), i.addEventListener("dispose", r), o.texture
                    );
                  }
                  return null;
                }
              }
            }
            return i;
          },
          dispose: function () {
            (e = new WeakMap()), null !== n && (n.dispose(), (n = null));
          },
        };
      }
      function Hp(t) {
        const e = {};
        function n(n) {
          if (void 0 !== e[n]) return e[n];
          let r;
          switch (n) {
            case "WEBGL_depth_texture":
              r =
                t.getExtension("WEBGL_depth_texture") ||
                t.getExtension("MOZ_WEBGL_depth_texture") ||
                t.getExtension("WEBKIT_WEBGL_depth_texture");
              break;
            case "EXT_texture_filter_anisotropic":
              r =
                t.getExtension("EXT_texture_filter_anisotropic") ||
                t.getExtension("MOZ_EXT_texture_filter_anisotropic") ||
                t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
              break;
            case "WEBGL_compressed_texture_s3tc":
              r =
                t.getExtension("WEBGL_compressed_texture_s3tc") ||
                t.getExtension("MOZ_WEBGL_compressed_texture_s3tc") ||
                t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
              break;
            case "WEBGL_compressed_texture_pvrtc":
              r =
                t.getExtension("WEBGL_compressed_texture_pvrtc") ||
                t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
              break;
            default:
              r = t.getExtension(n);
          }
          return (e[n] = r), r;
        }
        return {
          has: function (t) {
            return null !== n(t);
          },
          init: function (t) {
            t.isWebGL2
              ? n("EXT_color_buffer_float")
              : (n("WEBGL_depth_texture"),
                n("OES_texture_float"),
                n("OES_texture_half_float"),
                n("OES_texture_half_float_linear"),
                n("OES_standard_derivatives"),
                n("OES_element_index_uint"),
                n("OES_vertex_array_object"),
                n("ANGLE_instanced_arrays")),
              n("OES_texture_float_linear"),
              n("EXT_color_buffer_half_float"),
              n("WEBGL_multisampled_render_to_texture");
          },
          get: function (t) {
            const e = n(t);
            return (
              null === e &&
                console.warn(
                  "THREE.WebGLRenderer: " + t + " extension not supported.",
                ),
              e
            );
          },
        };
      }
      function zp(t, e, n, r) {
        const i = {},
          o = new WeakMap();
        function a(t) {
          const s = t.target;
          null !== s.index && e.remove(s.index);
          for (const t in s.attributes) e.remove(s.attributes[t]);
          for (const t in s.morphAttributes) {
            const n = s.morphAttributes[t];
            for (let t = 0, r = n.length; t < r; t++) e.remove(n[t]);
          }
          s.removeEventListener("dispose", a), delete i[s.id];
          const l = o.get(s);
          l && (e.remove(l), o.delete(s)),
            r.releaseStatesOfGeometry(s),
            !0 === s.isInstancedBufferGeometry && delete s._maxInstanceCount,
            n.memory.geometries--;
        }
        function s(t) {
          const n = [],
            r = t.index,
            i = t.attributes.position;
          let a = 0;
          if (null !== r) {
            const t = r.array;
            a = r.version;
            for (let e = 0, r = t.length; e < r; e += 3) {
              const r = t[e + 0],
                i = t[e + 1],
                o = t[e + 2];
              n.push(r, i, i, o, o, r);
            }
          } else {
            if (void 0 === i) return;
            {
              const t = i.array;
              a = i.version;
              for (let e = 0, r = t.length / 3 - 1; e < r; e += 3) {
                const t = e + 0,
                  r = e + 1,
                  i = e + 2;
                n.push(t, r, r, i, i, t);
              }
            }
          }
          const s = new (Tc(n) ? yf : vf)(n, 1);
          s.version = a;
          const l = o.get(t);
          l && e.remove(l), o.set(t, s);
        }
        return {
          get: function (t, e) {
            return (
              !0 === i[e.id] ||
                (e.addEventListener("dispose", a),
                (i[e.id] = !0),
                n.memory.geometries++),
              e
            );
          },
          update: function (n) {
            const r = n.attributes;
            for (const n in r) e.update(r[n], t.ARRAY_BUFFER);
            const i = n.morphAttributes;
            for (const n in i) {
              const r = i[n];
              for (let n = 0, i = r.length; n < i; n++)
                e.update(r[n], t.ARRAY_BUFFER);
            }
          },
          getWireframeAttribute: function (t) {
            const e = o.get(t);
            if (e) {
              const n = t.index;
              null !== n && e.version < n.version && s(t);
            } else s(t);
            return o.get(t);
          },
        };
      }
      function Vp(t, e, n, r) {
        const i = r.isWebGL2;
        let o, a, s;
        (this.setMode = function (t) {
          o = t;
        }),
          (this.setIndex = function (t) {
            (a = t.type), (s = t.bytesPerElement);
          }),
          (this.render = function (e, r) {
            t.drawElements(o, r, a, e * s), n.update(r, o, 1);
          }),
          (this.renderInstances = function (r, l, u) {
            if (0 === u) return;
            let h, c;
            if (i) (h = t), (c = "drawElementsInstanced");
            else if (
              ((h = e.get("ANGLE_instanced_arrays")),
              (c = "drawElementsInstancedANGLE"),
              null === h)
            )
              return void console.error(
                "THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.",
              );
            h[c](o, l, a, r * s, u), n.update(l, o, u);
          });
      }
      function Xp(t) {
        const e = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 };
        return {
          memory: { geometries: 0, textures: 0 },
          render: e,
          programs: null,
          autoReset: !0,
          reset: function () {
            (e.calls = 0), (e.triangles = 0), (e.points = 0), (e.lines = 0);
          },
          update: function (n, r, i) {
            switch ((e.calls++, r)) {
              case t.TRIANGLES:
                e.triangles += i * (n / 3);
                break;
              case t.LINES:
                e.lines += i * (n / 2);
                break;
              case t.LINE_STRIP:
                e.lines += i * (n - 1);
                break;
              case t.LINE_LOOP:
                e.lines += i * n;
                break;
              case t.POINTS:
                e.points += i * n;
                break;
              default:
                console.error("THREE.WebGLInfo: Unknown draw mode:", r);
            }
          },
        };
      }
      function Wp(t, e) {
        return t[0] - e[0];
      }
      function jp(t, e) {
        return Math.abs(e[1]) - Math.abs(t[1]);
      }
      function Yp(t, e, n) {
        const r = {},
          i = new Float32Array(8),
          o = new WeakMap(),
          a = new Gc(),
          s = [];
        for (let t = 0; t < 8; t++) s[t] = [t, 0];
        return {
          update: function (l, u, h) {
            const c = l.morphTargetInfluences;
            if (!0 === e.isWebGL2) {
              const d =
                  u.morphAttributes.position ||
                  u.morphAttributes.normal ||
                  u.morphAttributes.color,
                f = void 0 !== d ? d.length : 0;
              let p = o.get(u);
              if (void 0 === p || p.count !== f) {
                void 0 !== p && p.texture.dispose();
                const g = void 0 !== u.morphAttributes.position,
                  v = void 0 !== u.morphAttributes.normal,
                  y = void 0 !== u.morphAttributes.color,
                  E = u.morphAttributes.position || [],
                  T = u.morphAttributes.normal || [],
                  b = u.morphAttributes.color || [];
                let x = 0;
                !0 === g && (x = 1), !0 === v && (x = 2), !0 === y && (x = 3);
                let S = u.attributes.position.count * x,
                  M = 1;
                S > e.maxTextureSize &&
                  ((M = Math.ceil(S / e.maxTextureSize)),
                  (S = e.maxTextureSize));
                const A = new Float32Array(S * M * 4 * f),
                  R = new zc(A, S, M, f);
                (R.type = wh), (R.needsUpdate = !0);
                const w = 4 * x;
                for (let I = 0; I < f; I++) {
                  const O = E[I],
                    C = T[I],
                    N = b[I],
                    L = S * M * 4 * I;
                  for (let D = 0; D < O.count; D++) {
                    const U = D * w;
                    !0 === g &&
                      (a.fromBufferAttribute(O, D),
                      (A[L + U + 0] = a.x),
                      (A[L + U + 1] = a.y),
                      (A[L + U + 2] = a.z),
                      (A[L + U + 3] = 0)),
                      !0 === v &&
                        (a.fromBufferAttribute(C, D),
                        (A[L + U + 4] = a.x),
                        (A[L + U + 5] = a.y),
                        (A[L + U + 6] = a.z),
                        (A[L + U + 7] = 0)),
                      !0 === y &&
                        (a.fromBufferAttribute(N, D),
                        (A[L + U + 8] = a.x),
                        (A[L + U + 9] = a.y),
                        (A[L + U + 10] = a.z),
                        (A[L + U + 11] = 4 === N.itemSize ? a.w : 1));
                  }
                }
                function P() {
                  R.dispose(), o.delete(u), u.removeEventListener("dispose", P);
                }
                (p = { count: f, texture: R, size: new vc(S, M) }),
                  o.set(u, p),
                  u.addEventListener("dispose", P);
              }
              let m = 0;
              for (let F = 0; F < c.length; F++) m += c[F];
              const _ = u.morphTargetsRelative ? 1 : 1 - m;
              h.getUniforms().setValue(t, "morphTargetBaseInfluence", _),
                h.getUniforms().setValue(t, "morphTargetInfluences", c),
                h
                  .getUniforms()
                  .setValue(t, "morphTargetsTexture", p.texture, n),
                h.getUniforms().setValue(t, "morphTargetsTextureSize", p.size);
            } else {
              const B = void 0 === c ? 0 : c.length;
              let G = r[u.id];
              if (void 0 === G || G.length !== B) {
                G = [];
                for (let X = 0; X < B; X++) G[X] = [X, 0];
                r[u.id] = G;
              }
              for (let W = 0; W < B; W++) {
                const j = G[W];
                (j[0] = W), (j[1] = c[W]);
              }
              G.sort(jp);
              for (let Y = 0; Y < 8; Y++)
                Y < B && G[Y][1]
                  ? ((s[Y][0] = G[Y][0]), (s[Y][1] = G[Y][1]))
                  : ((s[Y][0] = Number.MAX_SAFE_INTEGER), (s[Y][1] = 0));
              s.sort(Wp);
              const k = u.morphAttributes.position,
                H = u.morphAttributes.normal;
              let z = 0;
              for (let q = 0; q < 8; q++) {
                const K = s[q],
                  Z = K[0],
                  Q = K[1];
                Z !== Number.MAX_SAFE_INTEGER && Q
                  ? (k &&
                      u.getAttribute("morphTarget" + q) !== k[Z] &&
                      u.setAttribute("morphTarget" + q, k[Z]),
                    H &&
                      u.getAttribute("morphNormal" + q) !== H[Z] &&
                      u.setAttribute("morphNormal" + q, H[Z]),
                    (i[q] = Q),
                    (z += Q))
                  : (k &&
                      !0 === u.hasAttribute("morphTarget" + q) &&
                      u.deleteAttribute("morphTarget" + q),
                    H &&
                      !0 === u.hasAttribute("morphNormal" + q) &&
                      u.deleteAttribute("morphNormal" + q),
                    (i[q] = 0));
              }
              const V = u.morphTargetsRelative ? 1 : 1 - z;
              h.getUniforms().setValue(t, "morphTargetBaseInfluence", V),
                h.getUniforms().setValue(t, "morphTargetInfluences", i);
            }
          },
        };
      }
      function qp(t, e, n, r) {
        let i = new WeakMap();
        function o(t) {
          const e = t.target;
          e.removeEventListener("dispose", o),
            n.remove(e.instanceMatrix),
            null !== e.instanceColor && n.remove(e.instanceColor);
        }
        return {
          update: function (a) {
            const s = r.render.frame,
              l = a.geometry,
              u = e.get(a, l);
            if (
              (i.get(u) !== s && (e.update(u), i.set(u, s)),
              a.isInstancedMesh &&
                (!1 === a.hasEventListener("dispose", o) &&
                  a.addEventListener("dispose", o),
                i.get(a) !== s &&
                  (n.update(a.instanceMatrix, t.ARRAY_BUFFER),
                  null !== a.instanceColor &&
                    n.update(a.instanceColor, t.ARRAY_BUFFER),
                  i.set(a, s))),
              a.isSkinnedMesh)
            ) {
              const t = a.skeleton;
              i.get(t) !== s && (t.update(), i.set(t, s));
            }
            return u;
          },
          dispose: function () {
            i = new WeakMap();
          },
        };
      }
      const Kp = new Bc(),
        Zp = new zc(),
        Qp = new Vc(),
        $p = new ip(),
        Jp = [],
        tm = [],
        em = new Float32Array(16),
        nm = new Float32Array(9),
        rm = new Float32Array(4);
      function im(t, e, n) {
        const r = t[0];
        if (r <= 0 || r > 0) return t;
        const i = e * n;
        let o = Jp[i];
        if (
          (void 0 === o && ((o = new Float32Array(i)), (Jp[i] = o)), 0 !== e)
        ) {
          r.toArray(o, 0);
          for (let r = 1, i = 0; r !== e; ++r) (i += n), t[r].toArray(o, i);
        }
        return o;
      }
      function om(t, e) {
        if (t.length !== e.length) return !1;
        for (let n = 0, r = t.length; n < r; n++) if (t[n] !== e[n]) return !1;
        return !0;
      }
      function am(t, e) {
        for (let n = 0, r = e.length; n < r; n++) t[n] = e[n];
      }
      function sm(t, e) {
        let n = tm[e];
        void 0 === n && ((n = new Int32Array(e)), (tm[e] = n));
        for (let r = 0; r !== e; ++r) n[r] = t.allocateTextureUnit();
        return n;
      }
      function lm(t, e) {
        const n = this.cache;
        n[0] !== e && (t.uniform1f(this.addr, e), (n[0] = e));
      }
      function um(t, e) {
        const n = this.cache;
        if (void 0 !== e.x)
          (n[0] === e.x && n[1] === e.y) ||
            (t.uniform2f(this.addr, e.x, e.y), (n[0] = e.x), (n[1] = e.y));
        else {
          if (om(n, e)) return;
          t.uniform2fv(this.addr, e), am(n, e);
        }
      }
      function hm(t, e) {
        const n = this.cache;
        if (void 0 !== e.x)
          (n[0] === e.x && n[1] === e.y && n[2] === e.z) ||
            (t.uniform3f(this.addr, e.x, e.y, e.z),
            (n[0] = e.x),
            (n[1] = e.y),
            (n[2] = e.z));
        else if (void 0 !== e.r)
          (n[0] === e.r && n[1] === e.g && n[2] === e.b) ||
            (t.uniform3f(this.addr, e.r, e.g, e.b),
            (n[0] = e.r),
            (n[1] = e.g),
            (n[2] = e.b));
        else {
          if (om(n, e)) return;
          t.uniform3fv(this.addr, e), am(n, e);
        }
      }
      function cm(t, e) {
        const n = this.cache;
        if (void 0 !== e.x)
          (n[0] === e.x && n[1] === e.y && n[2] === e.z && n[3] === e.w) ||
            (t.uniform4f(this.addr, e.x, e.y, e.z, e.w),
            (n[0] = e.x),
            (n[1] = e.y),
            (n[2] = e.z),
            (n[3] = e.w));
        else {
          if (om(n, e)) return;
          t.uniform4fv(this.addr, e), am(n, e);
        }
      }
      function dm(t, e) {
        const n = this.cache,
          r = e.elements;
        if (void 0 === r) {
          if (om(n, e)) return;
          t.uniformMatrix2fv(this.addr, !1, e), am(n, e);
        } else {
          if (om(n, r)) return;
          rm.set(r), t.uniformMatrix2fv(this.addr, !1, rm), am(n, r);
        }
      }
      function fm(t, e) {
        const n = this.cache,
          r = e.elements;
        if (void 0 === r) {
          if (om(n, e)) return;
          t.uniformMatrix3fv(this.addr, !1, e), am(n, e);
        } else {
          if (om(n, r)) return;
          nm.set(r), t.uniformMatrix3fv(this.addr, !1, nm), am(n, r);
        }
      }
      function pm(t, e) {
        const n = this.cache,
          r = e.elements;
        if (void 0 === r) {
          if (om(n, e)) return;
          t.uniformMatrix4fv(this.addr, !1, e), am(n, e);
        } else {
          if (om(n, r)) return;
          em.set(r), t.uniformMatrix4fv(this.addr, !1, em), am(n, r);
        }
      }
      function mm(t, e) {
        const n = this.cache;
        n[0] !== e && (t.uniform1i(this.addr, e), (n[0] = e));
      }
      function _m(t, e) {
        const n = this.cache;
        if (void 0 !== e.x)
          (n[0] === e.x && n[1] === e.y) ||
            (t.uniform2i(this.addr, e.x, e.y), (n[0] = e.x), (n[1] = e.y));
        else {
          if (om(n, e)) return;
          t.uniform2iv(this.addr, e), am(n, e);
        }
      }
      function gm(t, e) {
        const n = this.cache;
        if (void 0 !== e.x)
          (n[0] === e.x && n[1] === e.y && n[2] === e.z) ||
            (t.uniform3i(this.addr, e.x, e.y, e.z),
            (n[0] = e.x),
            (n[1] = e.y),
            (n[2] = e.z));
        else {
          if (om(n, e)) return;
          t.uniform3iv(this.addr, e), am(n, e);
        }
      }
      function vm(t, e) {
        const n = this.cache;
        if (void 0 !== e.x)
          (n[0] === e.x && n[1] === e.y && n[2] === e.z && n[3] === e.w) ||
            (t.uniform4i(this.addr, e.x, e.y, e.z, e.w),
            (n[0] = e.x),
            (n[1] = e.y),
            (n[2] = e.z),
            (n[3] = e.w));
        else {
          if (om(n, e)) return;
          t.uniform4iv(this.addr, e), am(n, e);
        }
      }
      function ym(t, e) {
        const n = this.cache;
        n[0] !== e && (t.uniform1ui(this.addr, e), (n[0] = e));
      }
      function Em(t, e) {
        const n = this.cache;
        if (void 0 !== e.x)
          (n[0] === e.x && n[1] === e.y) ||
            (t.uniform2ui(this.addr, e.x, e.y), (n[0] = e.x), (n[1] = e.y));
        else {
          if (om(n, e)) return;
          t.uniform2uiv(this.addr, e), am(n, e);
        }
      }
      function Tm(t, e) {
        const n = this.cache;
        if (void 0 !== e.x)
          (n[0] === e.x && n[1] === e.y && n[2] === e.z) ||
            (t.uniform3ui(this.addr, e.x, e.y, e.z),
            (n[0] = e.x),
            (n[1] = e.y),
            (n[2] = e.z));
        else {
          if (om(n, e)) return;
          t.uniform3uiv(this.addr, e), am(n, e);
        }
      }
      function bm(t, e) {
        const n = this.cache;
        if (void 0 !== e.x)
          (n[0] === e.x && n[1] === e.y && n[2] === e.z && n[3] === e.w) ||
            (t.uniform4ui(this.addr, e.x, e.y, e.z, e.w),
            (n[0] = e.x),
            (n[1] = e.y),
            (n[2] = e.z),
            (n[3] = e.w));
        else {
          if (om(n, e)) return;
          t.uniform4uiv(this.addr, e), am(n, e);
        }
      }
      function xm(t, e, n) {
        const r = this.cache,
          i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), (r[0] = i)),
          n.setTexture2D(e || Kp, i);
      }
      function Sm(t, e, n) {
        const r = this.cache,
          i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), (r[0] = i)),
          n.setTexture3D(e || Qp, i);
      }
      function Mm(t, e, n) {
        const r = this.cache,
          i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), (r[0] = i)),
          n.setTextureCube(e || $p, i);
      }
      function Am(t, e, n) {
        const r = this.cache,
          i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), (r[0] = i)),
          n.setTexture2DArray(e || Zp, i);
      }
      function Rm(t, e) {
        t.uniform1fv(this.addr, e);
      }
      function wm(t, e) {
        const n = im(e, this.size, 2);
        t.uniform2fv(this.addr, n);
      }
      function Pm(t, e) {
        const n = im(e, this.size, 3);
        t.uniform3fv(this.addr, n);
      }
      function Im(t, e) {
        const n = im(e, this.size, 4);
        t.uniform4fv(this.addr, n);
      }
      function Om(t, e) {
        const n = im(e, this.size, 4);
        t.uniformMatrix2fv(this.addr, !1, n);
      }
      function Cm(t, e) {
        const n = im(e, this.size, 9);
        t.uniformMatrix3fv(this.addr, !1, n);
      }
      function Nm(t, e) {
        const n = im(e, this.size, 16);
        t.uniformMatrix4fv(this.addr, !1, n);
      }
      function Lm(t, e) {
        t.uniform1iv(this.addr, e);
      }
      function Dm(t, e) {
        t.uniform2iv(this.addr, e);
      }
      function Um(t, e) {
        t.uniform3iv(this.addr, e);
      }
      function Fm(t, e) {
        t.uniform4iv(this.addr, e);
      }
      function Bm(t, e) {
        t.uniform1uiv(this.addr, e);
      }
      function Gm(t, e) {
        t.uniform2uiv(this.addr, e);
      }
      function km(t, e) {
        t.uniform3uiv(this.addr, e);
      }
      function Hm(t, e) {
        t.uniform4uiv(this.addr, e);
      }
      function zm(t, e, n) {
        const r = this.cache,
          i = e.length,
          o = sm(n, i);
        om(r, o) || (t.uniform1iv(this.addr, o), am(r, o));
        for (let t = 0; t !== i; ++t) n.setTexture2D(e[t] || Kp, o[t]);
      }
      function Vm(t, e, n) {
        const r = this.cache,
          i = e.length,
          o = sm(n, i);
        om(r, o) || (t.uniform1iv(this.addr, o), am(r, o));
        for (let t = 0; t !== i; ++t) n.setTexture3D(e[t] || Qp, o[t]);
      }
      function Xm(t, e, n) {
        const r = this.cache,
          i = e.length,
          o = sm(n, i);
        om(r, o) || (t.uniform1iv(this.addr, o), am(r, o));
        for (let t = 0; t !== i; ++t) n.setTextureCube(e[t] || $p, o[t]);
      }
      function Wm(t, e, n) {
        const r = this.cache,
          i = e.length,
          o = sm(n, i);
        om(r, o) || (t.uniform1iv(this.addr, o), am(r, o));
        for (let t = 0; t !== i; ++t) n.setTexture2DArray(e[t] || Zp, o[t]);
      }
      class jm {
        constructor(t, e, n) {
          (this.id = t),
            (this.addr = n),
            (this.cache = []),
            (this.setValue = (function (t) {
              switch (t) {
                case 5126:
                  return lm;
                case 35664:
                  return um;
                case 35665:
                  return hm;
                case 35666:
                  return cm;
                case 35674:
                  return dm;
                case 35675:
                  return fm;
                case 35676:
                  return pm;
                case 5124:
                case 35670:
                  return mm;
                case 35667:
                case 35671:
                  return _m;
                case 35668:
                case 35672:
                  return gm;
                case 35669:
                case 35673:
                  return vm;
                case 5125:
                  return ym;
                case 36294:
                  return Em;
                case 36295:
                  return Tm;
                case 36296:
                  return bm;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                  return xm;
                case 35679:
                case 36299:
                case 36307:
                  return Sm;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                  return Mm;
                case 36289:
                case 36303:
                case 36311:
                case 36292:
                  return Am;
              }
            })(e.type));
        }
      }
      class Ym {
        constructor(t, e, n) {
          (this.id = t),
            (this.addr = n),
            (this.cache = []),
            (this.size = e.size),
            (this.setValue = (function (t) {
              switch (t) {
                case 5126:
                  return Rm;
                case 35664:
                  return wm;
                case 35665:
                  return Pm;
                case 35666:
                  return Im;
                case 35674:
                  return Om;
                case 35675:
                  return Cm;
                case 35676:
                  return Nm;
                case 5124:
                case 35670:
                  return Lm;
                case 35667:
                case 35671:
                  return Dm;
                case 35668:
                case 35672:
                  return Um;
                case 35669:
                case 35673:
                  return Fm;
                case 5125:
                  return Bm;
                case 36294:
                  return Gm;
                case 36295:
                  return km;
                case 36296:
                  return Hm;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                  return zm;
                case 35679:
                case 36299:
                case 36307:
                  return Vm;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                  return Xm;
                case 36289:
                case 36303:
                case 36311:
                case 36292:
                  return Wm;
              }
            })(e.type));
        }
      }
      class qm {
        constructor(t) {
          (this.id = t), (this.seq = []), (this.map = {});
        }
        setValue(t, e, n) {
          const r = this.seq;
          for (let i = 0, o = r.length; i !== o; ++i) {
            const o = r[i];
            o.setValue(t, e[o.id], n);
          }
        }
      }
      const Km = /(\w+)(\])?(\[|\.)?/g;
      function Zm(t, e) {
        t.seq.push(e), (t.map[e.id] = e);
      }
      function Qm(t, e, n) {
        const r = t.name,
          i = r.length;
        for (Km.lastIndex = 0; ; ) {
          const o = Km.exec(r),
            a = Km.lastIndex;
          let s = o[1];
          const l = "]" === o[2],
            u = o[3];
          if ((l && (s |= 0), void 0 === u || ("[" === u && a + 2 === i))) {
            Zm(n, void 0 === u ? new jm(s, t, e) : new Ym(s, t, e));
            break;
          }
          {
            let t = n.map[s];
            void 0 === t && ((t = new qm(s)), Zm(n, t)), (n = t);
          }
        }
      }
      class $m {
        constructor(t, e) {
          (this.seq = []), (this.map = {});
          const n = t.getProgramParameter(e, t.ACTIVE_UNIFORMS);
          for (let r = 0; r < n; ++r) {
            const n = t.getActiveUniform(e, r);
            Qm(n, t.getUniformLocation(e, n.name), this);
          }
        }
        setValue(t, e, n, r) {
          const i = this.map[e];
          void 0 !== i && i.setValue(t, n, r);
        }
        setOptional(t, e, n) {
          const r = e[n];
          void 0 !== r && this.setValue(t, n, r);
        }
        static upload(t, e, n, r) {
          for (let i = 0, o = e.length; i !== o; ++i) {
            const o = e[i],
              a = n[o.id];
            !1 !== a.needsUpdate && o.setValue(t, a.value, r);
          }
        }
        static seqWithValue(t, e) {
          const n = [];
          for (let r = 0, i = t.length; r !== i; ++r) {
            const i = t[r];
            i.id in e && n.push(i);
          }
          return n;
        }
      }
      function Jm(t, e, n) {
        const r = t.createShader(e);
        return t.shaderSource(r, n), t.compileShader(r), r;
      }
      let t_ = 0;
      function e_(t, e, n) {
        const r = t.getShaderParameter(e, t.COMPILE_STATUS),
          i = t.getShaderInfoLog(e).trim();
        if (r && "" === i) return "";
        const o = /ERROR: 0:(\d+)/.exec(i);
        if (o) {
          const r = parseInt(o[1]);
          return (
            n.toUpperCase() +
            "\n\n" +
            i +
            "\n\n" +
            (function (t, e) {
              const n = t.split("\n"),
                r = [],
                i = Math.max(e - 6, 0),
                o = Math.min(e + 6, n.length);
              for (let t = i; t < o; t++) {
                const i = t + 1;
                r.push(`${i === e ? ">" : " "} ${i}: ${n[t]}`);
              }
              return r.join("\n");
            })(t.getShaderSource(e), r)
          );
        }
        return i;
      }
      function n_(t, e) {
        const n = (function (t) {
          switch (t) {
            case Kh:
              return ["Linear", "( value )"];
            case qh:
              return ["sRGB", "( value )"];
            default:
              return (
                console.warn("THREE.WebGLProgram: Unsupported color space:", t),
                ["Linear", "( value )"]
              );
          }
        })(e);
        return (
          "vec4 " + t + "( vec4 value ) { return LinearTo" + n[0] + n[1] + "; }"
        );
      }
      function r_(t, e) {
        let n;
        switch (e) {
          case hh:
            n = "Linear";
            break;
          case ch:
            n = "Reinhard";
            break;
          case dh:
            n = "OptimizedCineon";
            break;
          case fh:
            n = "ACESFilmic";
            break;
          case ph:
            n = "Custom";
            break;
          default:
            console.warn("THREE.WebGLProgram: Unsupported toneMapping:", e),
              (n = "Linear");
        }
        return (
          "vec3 " +
          t +
          "( vec3 color ) { return " +
          n +
          "ToneMapping( color ); }"
        );
      }
      function i_(t) {
        return "" !== t;
      }
      function o_(t, e) {
        const n =
          e.numSpotLightShadows +
          e.numSpotLightMaps -
          e.numSpotLightShadowsWithMaps;
        return t
          .replace(/NUM_DIR_LIGHTS/g, e.numDirLights)
          .replace(/NUM_SPOT_LIGHTS/g, e.numSpotLights)
          .replace(/NUM_SPOT_LIGHT_MAPS/g, e.numSpotLightMaps)
          .replace(/NUM_SPOT_LIGHT_COORDS/g, n)
          .replace(/NUM_RECT_AREA_LIGHTS/g, e.numRectAreaLights)
          .replace(/NUM_POINT_LIGHTS/g, e.numPointLights)
          .replace(/NUM_HEMI_LIGHTS/g, e.numHemiLights)
          .replace(/NUM_DIR_LIGHT_SHADOWS/g, e.numDirLightShadows)
          .replace(
            /NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,
            e.numSpotLightShadowsWithMaps,
          )
          .replace(/NUM_SPOT_LIGHT_SHADOWS/g, e.numSpotLightShadows)
          .replace(/NUM_POINT_LIGHT_SHADOWS/g, e.numPointLightShadows);
      }
      function a_(t, e) {
        return t
          .replace(/NUM_CLIPPING_PLANES/g, e.numClippingPlanes)
          .replace(
            /UNION_CLIPPING_PLANES/g,
            e.numClippingPlanes - e.numClipIntersection,
          );
      }
      const s_ = /^[ \t]*#include +<([\w\d./]+)>/gm;
      function l_(t) {
        return t.replace(s_, h_);
      }
      const u_ = new Map([
        ["encodings_fragment", "colorspace_fragment"],
        ["encodings_pars_fragment", "colorspace_pars_fragment"],
        ["output_fragment", "opaque_fragment"],
      ]);
      function h_(t, e) {
        let n = _p[e];
        if (void 0 === n) {
          const t = u_.get(e);
          if (void 0 === t)
            throw new Error("Can not resolve #include <" + e + ">");
          (n = _p[t]),
            console.warn(
              'THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',
              e,
              t,
            );
        }
        return l_(n);
      }
      const c_ =
        /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
      function d_(t) {
        return t.replace(c_, f_);
      }
      function f_(t, e, n, r) {
        let i = "";
        for (let t = parseInt(e); t < parseInt(n); t++)
          i += r
            .replace(/\[\s*i\s*\]/g, "[ " + t + " ]")
            .replace(/UNROLLED_LOOP_INDEX/g, t);
        return i;
      }
      function p_(t) {
        let e =
          "precision " +
          t.precision +
          " float;\nprecision " +
          t.precision +
          " int;";
        return (
          "highp" === t.precision
            ? (e += "\n#define HIGH_PRECISION")
            : "mediump" === t.precision
              ? (e += "\n#define MEDIUM_PRECISION")
              : "lowp" === t.precision && (e += "\n#define LOW_PRECISION"),
          e
        );
      }
      function m_(t, e, n, r) {
        const i = t.getContext(),
          o = n.defines;
        let a = n.vertexShader,
          s = n.fragmentShader;
        const l = (function (t) {
            let e = "SHADOWMAP_TYPE_BASIC";
            return (
              t.shadowMapType === $u
                ? (e = "SHADOWMAP_TYPE_PCF")
                : t.shadowMapType === Ju
                  ? (e = "SHADOWMAP_TYPE_PCF_SOFT")
                  : t.shadowMapType === th && (e = "SHADOWMAP_TYPE_VSM"),
              e
            );
          })(n),
          u = (function (t) {
            let e = "ENVMAP_TYPE_CUBE";
            if (t.envMap)
              switch (t.envMapMode) {
                case mh:
                case _h:
                  e = "ENVMAP_TYPE_CUBE";
                  break;
                case gh:
                  e = "ENVMAP_TYPE_CUBE_UV";
              }
            return e;
          })(n),
          h = (function (t) {
            let e = "ENVMAP_MODE_REFLECTION";
            return (
              t.envMap && t.envMapMode === _h && (e = "ENVMAP_MODE_REFRACTION"),
              e
            );
          })(n),
          c = (function (t) {
            let e = "ENVMAP_BLENDING_NONE";
            if (t.envMap)
              switch (t.combine) {
                case ah:
                  e = "ENVMAP_BLENDING_MULTIPLY";
                  break;
                case sh:
                  e = "ENVMAP_BLENDING_MIX";
                  break;
                case lh:
                  e = "ENVMAP_BLENDING_ADD";
              }
            return e;
          })(n),
          d = (function (t) {
            const e = t.envMapCubeUVHeight;
            if (null === e) return null;
            const n = Math.log2(e) - 2,
              r = 1 / e;
            return {
              texelWidth: 1 / (3 * Math.max(Math.pow(2, n), 112)),
              texelHeight: r,
              maxMip: n,
            };
          })(n),
          f = n.isWebGL2
            ? ""
            : (function (t) {
                return [
                  t.extensionDerivatives ||
                  t.envMapCubeUVHeight ||
                  t.bumpMap ||
                  t.normalMapTangentSpace ||
                  t.clearcoatNormalMap ||
                  t.flatShading ||
                  "physical" === t.shaderID
                    ? "#extension GL_OES_standard_derivatives : enable"
                    : "",
                  (t.extensionFragDepth || t.logarithmicDepthBuffer) &&
                  t.rendererExtensionFragDepth
                    ? "#extension GL_EXT_frag_depth : enable"
                    : "",
                  t.extensionDrawBuffers && t.rendererExtensionDrawBuffers
                    ? "#extension GL_EXT_draw_buffers : require"
                    : "",
                  (t.extensionShaderTextureLOD || t.envMap || t.transmission) &&
                  t.rendererExtensionShaderTextureLod
                    ? "#extension GL_EXT_shader_texture_lod : enable"
                    : "",
                ]
                  .filter(i_)
                  .join("\n");
              })(n),
          p = (function (t) {
            const e = [];
            for (const n in t) {
              const r = t[n];
              !1 !== r && e.push("#define " + n + " " + r);
            }
            return e.join("\n");
          })(o),
          m = i.createProgram();
        let _,
          g,
          v = n.glslVersion ? "#version " + n.glslVersion + "\n" : "";
        n.isRawShaderMaterial
          ? ((_ = [
              "#define SHADER_TYPE " + n.shaderType,
              "#define SHADER_NAME " + n.shaderName,
              p,
            ]
              .filter(i_)
              .join("\n")),
            _.length > 0 && (_ += "\n"),
            (g = [
              f,
              "#define SHADER_TYPE " + n.shaderType,
              "#define SHADER_NAME " + n.shaderName,
              p,
            ]
              .filter(i_)
              .join("\n")),
            g.length > 0 && (g += "\n"))
          : ((_ = [
              p_(n),
              "#define SHADER_TYPE " + n.shaderType,
              "#define SHADER_NAME " + n.shaderName,
              p,
              n.instancing ? "#define USE_INSTANCING" : "",
              n.instancingColor ? "#define USE_INSTANCING_COLOR" : "",
              n.useFog && n.fog ? "#define USE_FOG" : "",
              n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "",
              n.map ? "#define USE_MAP" : "",
              n.envMap ? "#define USE_ENVMAP" : "",
              n.envMap ? "#define " + h : "",
              n.lightMap ? "#define USE_LIGHTMAP" : "",
              n.aoMap ? "#define USE_AOMAP" : "",
              n.bumpMap ? "#define USE_BUMPMAP" : "",
              n.normalMap ? "#define USE_NORMALMAP" : "",
              n.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
              n.normalMapTangentSpace
                ? "#define USE_NORMALMAP_TANGENTSPACE"
                : "",
              n.displacementMap ? "#define USE_DISPLACEMENTMAP" : "",
              n.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
              n.anisotropyMap ? "#define USE_ANISOTROPYMAP" : "",
              n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
              n.clearcoatRoughnessMap
                ? "#define USE_CLEARCOAT_ROUGHNESSMAP"
                : "",
              n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
              n.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
              n.iridescenceThicknessMap
                ? "#define USE_IRIDESCENCE_THICKNESSMAP"
                : "",
              n.specularMap ? "#define USE_SPECULARMAP" : "",
              n.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
              n.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
              n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
              n.metalnessMap ? "#define USE_METALNESSMAP" : "",
              n.alphaMap ? "#define USE_ALPHAMAP" : "",
              n.alphaHash ? "#define USE_ALPHAHASH" : "",
              n.transmission ? "#define USE_TRANSMISSION" : "",
              n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
              n.thicknessMap ? "#define USE_THICKNESSMAP" : "",
              n.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
              n.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
              n.mapUv ? "#define MAP_UV " + n.mapUv : "",
              n.alphaMapUv ? "#define ALPHAMAP_UV " + n.alphaMapUv : "",
              n.lightMapUv ? "#define LIGHTMAP_UV " + n.lightMapUv : "",
              n.aoMapUv ? "#define AOMAP_UV " + n.aoMapUv : "",
              n.emissiveMapUv
                ? "#define EMISSIVEMAP_UV " + n.emissiveMapUv
                : "",
              n.bumpMapUv ? "#define BUMPMAP_UV " + n.bumpMapUv : "",
              n.normalMapUv ? "#define NORMALMAP_UV " + n.normalMapUv : "",
              n.displacementMapUv
                ? "#define DISPLACEMENTMAP_UV " + n.displacementMapUv
                : "",
              n.metalnessMapUv
                ? "#define METALNESSMAP_UV " + n.metalnessMapUv
                : "",
              n.roughnessMapUv
                ? "#define ROUGHNESSMAP_UV " + n.roughnessMapUv
                : "",
              n.anisotropyMapUv
                ? "#define ANISOTROPYMAP_UV " + n.anisotropyMapUv
                : "",
              n.clearcoatMapUv
                ? "#define CLEARCOATMAP_UV " + n.clearcoatMapUv
                : "",
              n.clearcoatNormalMapUv
                ? "#define CLEARCOAT_NORMALMAP_UV " + n.clearcoatNormalMapUv
                : "",
              n.clearcoatRoughnessMapUv
                ? "#define CLEARCOAT_ROUGHNESSMAP_UV " +
                  n.clearcoatRoughnessMapUv
                : "",
              n.iridescenceMapUv
                ? "#define IRIDESCENCEMAP_UV " + n.iridescenceMapUv
                : "",
              n.iridescenceThicknessMapUv
                ? "#define IRIDESCENCE_THICKNESSMAP_UV " +
                  n.iridescenceThicknessMapUv
                : "",
              n.sheenColorMapUv
                ? "#define SHEEN_COLORMAP_UV " + n.sheenColorMapUv
                : "",
              n.sheenRoughnessMapUv
                ? "#define SHEEN_ROUGHNESSMAP_UV " + n.sheenRoughnessMapUv
                : "",
              n.specularMapUv
                ? "#define SPECULARMAP_UV " + n.specularMapUv
                : "",
              n.specularColorMapUv
                ? "#define SPECULAR_COLORMAP_UV " + n.specularColorMapUv
                : "",
              n.specularIntensityMapUv
                ? "#define SPECULAR_INTENSITYMAP_UV " + n.specularIntensityMapUv
                : "",
              n.transmissionMapUv
                ? "#define TRANSMISSIONMAP_UV " + n.transmissionMapUv
                : "",
              n.thicknessMapUv
                ? "#define THICKNESSMAP_UV " + n.thicknessMapUv
                : "",
              n.vertexTangents && !1 === n.flatShading
                ? "#define USE_TANGENT"
                : "",
              n.vertexColors ? "#define USE_COLOR" : "",
              n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
              n.vertexUv1s ? "#define USE_UV1" : "",
              n.vertexUv2s ? "#define USE_UV2" : "",
              n.vertexUv3s ? "#define USE_UV3" : "",
              n.pointsUvs ? "#define USE_POINTS_UV" : "",
              n.flatShading ? "#define FLAT_SHADED" : "",
              n.skinning ? "#define USE_SKINNING" : "",
              n.morphTargets ? "#define USE_MORPHTARGETS" : "",
              n.morphNormals && !1 === n.flatShading
                ? "#define USE_MORPHNORMALS"
                : "",
              n.morphColors && n.isWebGL2 ? "#define USE_MORPHCOLORS" : "",
              n.morphTargetsCount > 0 && n.isWebGL2
                ? "#define MORPHTARGETS_TEXTURE"
                : "",
              n.morphTargetsCount > 0 && n.isWebGL2
                ? "#define MORPHTARGETS_TEXTURE_STRIDE " + n.morphTextureStride
                : "",
              n.morphTargetsCount > 0 && n.isWebGL2
                ? "#define MORPHTARGETS_COUNT " + n.morphTargetsCount
                : "",
              n.doubleSided ? "#define DOUBLE_SIDED" : "",
              n.flipSided ? "#define FLIP_SIDED" : "",
              n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
              n.shadowMapEnabled ? "#define " + l : "",
              n.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "",
              n.useLegacyLights ? "#define LEGACY_LIGHTS" : "",
              n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
              n.logarithmicDepthBuffer && n.rendererExtensionFragDepth
                ? "#define USE_LOGDEPTHBUF_EXT"
                : "",
              "uniform mat4 modelMatrix;",
              "uniform mat4 modelViewMatrix;",
              "uniform mat4 projectionMatrix;",
              "uniform mat4 viewMatrix;",
              "uniform mat3 normalMatrix;",
              "uniform vec3 cameraPosition;",
              "uniform bool isOrthographic;",
              "#ifdef USE_INSTANCING",
              "\tattribute mat4 instanceMatrix;",
              "#endif",
              "#ifdef USE_INSTANCING_COLOR",
              "\tattribute vec3 instanceColor;",
              "#endif",
              "attribute vec3 position;",
              "attribute vec3 normal;",
              "attribute vec2 uv;",
              "#ifdef USE_UV1",
              "\tattribute vec2 uv1;",
              "#endif",
              "#ifdef USE_UV2",
              "\tattribute vec2 uv2;",
              "#endif",
              "#ifdef USE_UV3",
              "\tattribute vec2 uv3;",
              "#endif",
              "#ifdef USE_TANGENT",
              "\tattribute vec4 tangent;",
              "#endif",
              "#if defined( USE_COLOR_ALPHA )",
              "\tattribute vec4 color;",
              "#elif defined( USE_COLOR )",
              "\tattribute vec3 color;",
              "#endif",
              "#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )",
              "\tattribute vec3 morphTarget0;",
              "\tattribute vec3 morphTarget1;",
              "\tattribute vec3 morphTarget2;",
              "\tattribute vec3 morphTarget3;",
              "\t#ifdef USE_MORPHNORMALS",
              "\t\tattribute vec3 morphNormal0;",
              "\t\tattribute vec3 morphNormal1;",
              "\t\tattribute vec3 morphNormal2;",
              "\t\tattribute vec3 morphNormal3;",
              "\t#else",
              "\t\tattribute vec3 morphTarget4;",
              "\t\tattribute vec3 morphTarget5;",
              "\t\tattribute vec3 morphTarget6;",
              "\t\tattribute vec3 morphTarget7;",
              "\t#endif",
              "#endif",
              "#ifdef USE_SKINNING",
              "\tattribute vec4 skinIndex;",
              "\tattribute vec4 skinWeight;",
              "#endif",
              "\n",
            ]
              .filter(i_)
              .join("\n")),
            (g = [
              f,
              p_(n),
              "#define SHADER_TYPE " + n.shaderType,
              "#define SHADER_NAME " + n.shaderName,
              p,
              n.useFog && n.fog ? "#define USE_FOG" : "",
              n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "",
              n.map ? "#define USE_MAP" : "",
              n.matcap ? "#define USE_MATCAP" : "",
              n.envMap ? "#define USE_ENVMAP" : "",
              n.envMap ? "#define " + u : "",
              n.envMap ? "#define " + h : "",
              n.envMap ? "#define " + c : "",
              d ? "#define CUBEUV_TEXEL_WIDTH " + d.texelWidth : "",
              d ? "#define CUBEUV_TEXEL_HEIGHT " + d.texelHeight : "",
              d ? "#define CUBEUV_MAX_MIP " + d.maxMip + ".0" : "",
              n.lightMap ? "#define USE_LIGHTMAP" : "",
              n.aoMap ? "#define USE_AOMAP" : "",
              n.bumpMap ? "#define USE_BUMPMAP" : "",
              n.normalMap ? "#define USE_NORMALMAP" : "",
              n.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
              n.normalMapTangentSpace
                ? "#define USE_NORMALMAP_TANGENTSPACE"
                : "",
              n.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
              n.anisotropy ? "#define USE_ANISOTROPY" : "",
              n.anisotropyMap ? "#define USE_ANISOTROPYMAP" : "",
              n.clearcoat ? "#define USE_CLEARCOAT" : "",
              n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
              n.clearcoatRoughnessMap
                ? "#define USE_CLEARCOAT_ROUGHNESSMAP"
                : "",
              n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
              n.iridescence ? "#define USE_IRIDESCENCE" : "",
              n.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
              n.iridescenceThicknessMap
                ? "#define USE_IRIDESCENCE_THICKNESSMAP"
                : "",
              n.specularMap ? "#define USE_SPECULARMAP" : "",
              n.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
              n.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
              n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
              n.metalnessMap ? "#define USE_METALNESSMAP" : "",
              n.alphaMap ? "#define USE_ALPHAMAP" : "",
              n.alphaTest ? "#define USE_ALPHATEST" : "",
              n.alphaHash ? "#define USE_ALPHAHASH" : "",
              n.sheen ? "#define USE_SHEEN" : "",
              n.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
              n.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
              n.transmission ? "#define USE_TRANSMISSION" : "",
              n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
              n.thicknessMap ? "#define USE_THICKNESSMAP" : "",
              n.vertexTangents && !1 === n.flatShading
                ? "#define USE_TANGENT"
                : "",
              n.vertexColors || n.instancingColor ? "#define USE_COLOR" : "",
              n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
              n.vertexUv1s ? "#define USE_UV1" : "",
              n.vertexUv2s ? "#define USE_UV2" : "",
              n.vertexUv3s ? "#define USE_UV3" : "",
              n.pointsUvs ? "#define USE_POINTS_UV" : "",
              n.gradientMap ? "#define USE_GRADIENTMAP" : "",
              n.flatShading ? "#define FLAT_SHADED" : "",
              n.doubleSided ? "#define DOUBLE_SIDED" : "",
              n.flipSided ? "#define FLIP_SIDED" : "",
              n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
              n.shadowMapEnabled ? "#define " + l : "",
              n.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "",
              n.useLegacyLights ? "#define LEGACY_LIGHTS" : "",
              n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
              n.logarithmicDepthBuffer && n.rendererExtensionFragDepth
                ? "#define USE_LOGDEPTHBUF_EXT"
                : "",
              "uniform mat4 viewMatrix;",
              "uniform vec3 cameraPosition;",
              "uniform bool isOrthographic;",
              n.toneMapping !== uh ? "#define TONE_MAPPING" : "",
              n.toneMapping !== uh ? _p.tonemapping_pars_fragment : "",
              n.toneMapping !== uh ? r_("toneMapping", n.toneMapping) : "",
              n.dithering ? "#define DITHERING" : "",
              n.opaque ? "#define OPAQUE" : "",
              _p.colorspace_pars_fragment,
              n_("linearToOutputTexel", n.outputColorSpace),
              n.useDepthPacking
                ? "#define DEPTH_PACKING " + n.depthPacking
                : "",
              "\n",
            ]
              .filter(i_)
              .join("\n"))),
          (a = l_(a)),
          (a = o_(a, n)),
          (a = a_(a, n)),
          (s = l_(s)),
          (s = o_(s, n)),
          (s = a_(s, n)),
          (a = d_(a)),
          (s = d_(s)),
          n.isWebGL2 &&
            !0 !== n.isRawShaderMaterial &&
            ((v = "#version 300 es\n"),
            (_ =
              [
                "precision mediump sampler2DArray;",
                "#define attribute in",
                "#define varying out",
                "#define texture2D texture",
              ].join("\n") +
              "\n" +
              _),
            (g =
              [
                "#define varying in",
                n.glslVersion === Jh
                  ? ""
                  : "layout(location = 0) out highp vec4 pc_fragColor;",
                n.glslVersion === Jh ? "" : "#define gl_FragColor pc_fragColor",
                "#define gl_FragDepthEXT gl_FragDepth",
                "#define texture2D texture",
                "#define textureCube texture",
                "#define texture2DProj textureProj",
                "#define texture2DLodEXT textureLod",
                "#define texture2DProjLodEXT textureProjLod",
                "#define textureCubeLodEXT textureLod",
                "#define texture2DGradEXT textureGrad",
                "#define texture2DProjGradEXT textureProjGrad",
                "#define textureCubeGradEXT textureGrad",
              ].join("\n") +
              "\n" +
              g));
        const y = v + _ + a,
          E = v + g + s,
          T = Jm(i, i.VERTEX_SHADER, y),
          b = Jm(i, i.FRAGMENT_SHADER, E);
        if (
          (i.attachShader(m, T),
          i.attachShader(m, b),
          void 0 !== n.index0AttributeName
            ? i.bindAttribLocation(m, 0, n.index0AttributeName)
            : !0 === n.morphTargets && i.bindAttribLocation(m, 0, "position"),
          i.linkProgram(m),
          t.debug.checkShaderErrors)
        ) {
          const e = i.getProgramInfoLog(m).trim(),
            n = i.getShaderInfoLog(T).trim(),
            r = i.getShaderInfoLog(b).trim();
          let o = !0,
            a = !0;
          if (!1 === i.getProgramParameter(m, i.LINK_STATUS))
            if (((o = !1), "function" == typeof t.debug.onShaderError))
              t.debug.onShaderError(i, m, T, b);
            else {
              const t = e_(i, T, "vertex"),
                n = e_(i, b, "fragment");
              console.error(
                "THREE.WebGLProgram: Shader Error " +
                  i.getError() +
                  " - VALIDATE_STATUS " +
                  i.getProgramParameter(m, i.VALIDATE_STATUS) +
                  "\n\nProgram Info Log: " +
                  e +
                  "\n" +
                  t +
                  "\n" +
                  n,
              );
            }
          else
            "" !== e
              ? console.warn("THREE.WebGLProgram: Program Info Log:", e)
              : ("" !== n && "" !== r) || (a = !1);
          a &&
            (this.diagnostics = {
              runnable: o,
              programLog: e,
              vertexShader: { log: n, prefix: _ },
              fragmentShader: { log: r, prefix: g },
            });
        }
        let x, S;
        return (
          i.deleteShader(T),
          i.deleteShader(b),
          (this.getUniforms = function () {
            return void 0 === x && (x = new $m(i, m)), x;
          }),
          (this.getAttributes = function () {
            return (
              void 0 === S &&
                (S = (function (t, e) {
                  const n = {},
                    r = t.getProgramParameter(e, t.ACTIVE_ATTRIBUTES);
                  for (let i = 0; i < r; i++) {
                    const r = t.getActiveAttrib(e, i),
                      o = r.name;
                    let a = 1;
                    r.type === t.FLOAT_MAT2 && (a = 2),
                      r.type === t.FLOAT_MAT3 && (a = 3),
                      r.type === t.FLOAT_MAT4 && (a = 4),
                      (n[o] = {
                        type: r.type,
                        location: t.getAttribLocation(e, o),
                        locationSize: a,
                      });
                  }
                  return n;
                })(i, m)),
              S
            );
          }),
          (this.destroy = function () {
            r.releaseStatesOfProgram(this),
              i.deleteProgram(m),
              (this.program = void 0);
          }),
          (this.type = n.shaderType),
          (this.name = n.shaderName),
          (this.id = t_++),
          (this.cacheKey = e),
          (this.usedTimes = 1),
          (this.program = m),
          (this.vertexShader = T),
          (this.fragmentShader = b),
          this
        );
      }
      let __ = 0;
      class g_ {
        constructor() {
          (this.shaderCache = new Map()), (this.materialCache = new Map());
        }
        update(t) {
          const e = t.vertexShader,
            n = t.fragmentShader,
            r = this._getShaderStage(e),
            i = this._getShaderStage(n),
            o = this._getShaderCacheForMaterial(t);
          return (
            !1 === o.has(r) && (o.add(r), r.usedTimes++),
            !1 === o.has(i) && (o.add(i), i.usedTimes++),
            this
          );
        }
        remove(t) {
          const e = this.materialCache.get(t);
          for (const t of e)
            t.usedTimes--, 0 === t.usedTimes && this.shaderCache.delete(t.code);
          return this.materialCache.delete(t), this;
        }
        getVertexShaderID(t) {
          return this._getShaderStage(t.vertexShader).id;
        }
        getFragmentShaderID(t) {
          return this._getShaderStage(t.fragmentShader).id;
        }
        dispose() {
          this.shaderCache.clear(), this.materialCache.clear();
        }
        _getShaderCacheForMaterial(t) {
          const e = this.materialCache;
          let n = e.get(t);
          return void 0 === n && ((n = new Set()), e.set(t, n)), n;
        }
        _getShaderStage(t) {
          const e = this.shaderCache;
          let n = e.get(t);
          return void 0 === n && ((n = new v_(t)), e.set(t, n)), n;
        }
      }
      class v_ {
        constructor(t) {
          (this.id = __++), (this.code = t), (this.usedTimes = 0);
        }
      }
      function y_(t, e, n, r, i, o, a) {
        const s = new Cd(),
          l = new g_(),
          u = [],
          h = i.isWebGL2,
          c = i.logarithmicDepthBuffer,
          d = i.vertexTextures;
        let f = i.precision;
        const p = {
          MeshDepthMaterial: "depth",
          MeshDistanceMaterial: "distanceRGBA",
          MeshNormalMaterial: "normal",
          MeshBasicMaterial: "basic",
          MeshLambertMaterial: "lambert",
          MeshPhongMaterial: "phong",
          MeshToonMaterial: "toon",
          MeshStandardMaterial: "physical",
          MeshPhysicalMaterial: "physical",
          MeshMatcapMaterial: "matcap",
          LineBasicMaterial: "basic",
          LineDashedMaterial: "dashed",
          PointsMaterial: "points",
          ShadowMaterial: "shadow",
          SpriteMaterial: "sprite",
        };
        function m(t) {
          return 0 === t ? "uv" : `uv${t}`;
        }
        return {
          getParameters: function (o, s, u, _, g) {
            const v = _.fog,
              y = g.geometry,
              E = o.isMeshStandardMaterial ? _.environment : null,
              T = (o.isMeshStandardMaterial ? n : e).get(o.envMap || E),
              b = T && T.mapping === gh ? T.image.height : null,
              x = p[o.type];
            null !== o.precision &&
              ((f = i.getMaxPrecision(o.precision)),
              f !== o.precision &&
                console.warn(
                  "THREE.WebGLProgram.getParameters:",
                  o.precision,
                  "not supported, using",
                  f,
                  "instead.",
                ));
            const S =
                y.morphAttributes.position ||
                y.morphAttributes.normal ||
                y.morphAttributes.color,
              M = void 0 !== S ? S.length : 0;
            let A,
              R,
              w,
              P,
              I = 0;
            if (
              (void 0 !== y.morphAttributes.position && (I = 1),
              void 0 !== y.morphAttributes.normal && (I = 2),
              void 0 !== y.morphAttributes.color && (I = 3),
              x)
            ) {
              const t = vp[x];
              (A = t.vertexShader), (R = t.fragmentShader);
            } else
              (A = o.vertexShader),
                (R = o.fragmentShader),
                l.update(o),
                (w = l.getVertexShaderID(o)),
                (P = l.getFragmentShaderID(o));
            const O = t.getRenderTarget(),
              C = !0 === g.isInstancedMesh,
              N = !!o.map,
              L = !!o.matcap,
              D = !!T,
              U = !!o.aoMap,
              F = !!o.lightMap,
              B = !!o.bumpMap,
              G = !!o.normalMap,
              k = !!o.displacementMap,
              H = !!o.emissiveMap,
              z = !!o.metalnessMap,
              V = !!o.roughnessMap,
              X = o.anisotropy > 0,
              W = o.clearcoat > 0,
              j = o.iridescence > 0,
              Y = o.sheen > 0,
              q = o.transmission > 0,
              K = X && !!o.anisotropyMap,
              Z = W && !!o.clearcoatMap,
              Q = W && !!o.clearcoatNormalMap,
              $ = W && !!o.clearcoatRoughnessMap,
              J = j && !!o.iridescenceMap,
              tt = j && !!o.iridescenceThicknessMap,
              et = Y && !!o.sheenColorMap,
              nt = Y && !!o.sheenRoughnessMap,
              rt = !!o.specularMap,
              it = !!o.specularColorMap,
              ot = !!o.specularIntensityMap,
              at = q && !!o.transmissionMap,
              st = q && !!o.thicknessMap,
              lt = !!o.gradientMap,
              ut = !!o.alphaMap,
              ht = o.alphaTest > 0,
              ct = !!o.alphaHash,
              dt = !!o.extensions,
              ft = !!y.attributes.uv1,
              pt = !!y.attributes.uv2,
              mt = !!y.attributes.uv3;
            let _t = uh;
            return (
              o.toneMapped &&
                ((null !== O && !0 !== O.isXRRenderTarget) ||
                  (_t = t.toneMapping)),
              {
                isWebGL2: h,
                shaderID: x,
                shaderType: o.type,
                shaderName: o.name,
                vertexShader: A,
                fragmentShader: R,
                defines: o.defines,
                customVertexShaderID: w,
                customFragmentShaderID: P,
                isRawShaderMaterial: !0 === o.isRawShaderMaterial,
                glslVersion: o.glslVersion,
                precision: f,
                instancing: C,
                instancingColor: C && null !== g.instanceColor,
                supportsVertexTextures: d,
                outputColorSpace:
                  null === O
                    ? t.outputColorSpace
                    : !0 === O.isXRRenderTarget
                      ? O.texture.colorSpace
                      : Kh,
                map: N,
                matcap: L,
                envMap: D,
                envMapMode: D && T.mapping,
                envMapCubeUVHeight: b,
                aoMap: U,
                lightMap: F,
                bumpMap: B,
                normalMap: G,
                displacementMap: d && k,
                emissiveMap: H,
                normalMapObjectSpace: G && 1 === o.normalMapType,
                normalMapTangentSpace: G && 0 === o.normalMapType,
                metalnessMap: z,
                roughnessMap: V,
                anisotropy: X,
                anisotropyMap: K,
                clearcoat: W,
                clearcoatMap: Z,
                clearcoatNormalMap: Q,
                clearcoatRoughnessMap: $,
                iridescence: j,
                iridescenceMap: J,
                iridescenceThicknessMap: tt,
                sheen: Y,
                sheenColorMap: et,
                sheenRoughnessMap: nt,
                specularMap: rt,
                specularColorMap: it,
                specularIntensityMap: ot,
                transmission: q,
                transmissionMap: at,
                thicknessMap: st,
                gradientMap: lt,
                opaque: !1 === o.transparent && 1 === o.blending,
                alphaMap: ut,
                alphaTest: ht,
                alphaHash: ct,
                combine: o.combine,
                mapUv: N && m(o.map.channel),
                aoMapUv: U && m(o.aoMap.channel),
                lightMapUv: F && m(o.lightMap.channel),
                bumpMapUv: B && m(o.bumpMap.channel),
                normalMapUv: G && m(o.normalMap.channel),
                displacementMapUv: k && m(o.displacementMap.channel),
                emissiveMapUv: H && m(o.emissiveMap.channel),
                metalnessMapUv: z && m(o.metalnessMap.channel),
                roughnessMapUv: V && m(o.roughnessMap.channel),
                anisotropyMapUv: K && m(o.anisotropyMap.channel),
                clearcoatMapUv: Z && m(o.clearcoatMap.channel),
                clearcoatNormalMapUv: Q && m(o.clearcoatNormalMap.channel),
                clearcoatRoughnessMapUv:
                  $ && m(o.clearcoatRoughnessMap.channel),
                iridescenceMapUv: J && m(o.iridescenceMap.channel),
                iridescenceThicknessMapUv:
                  tt && m(o.iridescenceThicknessMap.channel),
                sheenColorMapUv: et && m(o.sheenColorMap.channel),
                sheenRoughnessMapUv: nt && m(o.sheenRoughnessMap.channel),
                specularMapUv: rt && m(o.specularMap.channel),
                specularColorMapUv: it && m(o.specularColorMap.channel),
                specularIntensityMapUv: ot && m(o.specularIntensityMap.channel),
                transmissionMapUv: at && m(o.transmissionMap.channel),
                thicknessMapUv: st && m(o.thicknessMap.channel),
                alphaMapUv: ut && m(o.alphaMap.channel),
                vertexTangents: !!y.attributes.tangent && (G || X),
                vertexColors: o.vertexColors,
                vertexAlphas:
                  !0 === o.vertexColors &&
                  !!y.attributes.color &&
                  4 === y.attributes.color.itemSize,
                vertexUv1s: ft,
                vertexUv2s: pt,
                vertexUv3s: mt,
                pointsUvs: !0 === g.isPoints && !!y.attributes.uv && (N || ut),
                fog: !!v,
                useFog: !0 === o.fog,
                fogExp2: v && v.isFogExp2,
                flatShading: !0 === o.flatShading,
                sizeAttenuation: !0 === o.sizeAttenuation,
                logarithmicDepthBuffer: c,
                skinning: !0 === g.isSkinnedMesh,
                morphTargets: void 0 !== y.morphAttributes.position,
                morphNormals: void 0 !== y.morphAttributes.normal,
                morphColors: void 0 !== y.morphAttributes.color,
                morphTargetsCount: M,
                morphTextureStride: I,
                numDirLights: s.directional.length,
                numPointLights: s.point.length,
                numSpotLights: s.spot.length,
                numSpotLightMaps: s.spotLightMap.length,
                numRectAreaLights: s.rectArea.length,
                numHemiLights: s.hemi.length,
                numDirLightShadows: s.directionalShadowMap.length,
                numPointLightShadows: s.pointShadowMap.length,
                numSpotLightShadows: s.spotShadowMap.length,
                numSpotLightShadowsWithMaps: s.numSpotLightShadowsWithMaps,
                numClippingPlanes: a.numPlanes,
                numClipIntersection: a.numIntersection,
                dithering: o.dithering,
                shadowMapEnabled: t.shadowMap.enabled && u.length > 0,
                shadowMapType: t.shadowMap.type,
                toneMapping: _t,
                useLegacyLights: t._useLegacyLights,
                premultipliedAlpha: o.premultipliedAlpha,
                doubleSided: o.side === rh,
                flipSided: o.side === nh,
                useDepthPacking: o.depthPacking >= 0,
                depthPacking: o.depthPacking || 0,
                index0AttributeName: o.index0AttributeName,
                extensionDerivatives: dt && !0 === o.extensions.derivatives,
                extensionFragDepth: dt && !0 === o.extensions.fragDepth,
                extensionDrawBuffers: dt && !0 === o.extensions.drawBuffers,
                extensionShaderTextureLOD:
                  dt && !0 === o.extensions.shaderTextureLOD,
                rendererExtensionFragDepth: h || r.has("EXT_frag_depth"),
                rendererExtensionDrawBuffers: h || r.has("WEBGL_draw_buffers"),
                rendererExtensionShaderTextureLod:
                  h || r.has("EXT_shader_texture_lod"),
                customProgramCacheKey: o.customProgramCacheKey(),
              }
            );
          },
          getProgramCacheKey: function (e) {
            const n = [];
            if (
              (e.shaderID
                ? n.push(e.shaderID)
                : (n.push(e.customVertexShaderID),
                  n.push(e.customFragmentShaderID)),
              void 0 !== e.defines)
            )
              for (const t in e.defines) n.push(t), n.push(e.defines[t]);
            return (
              !1 === e.isRawShaderMaterial &&
                ((function (t, e) {
                  t.push(e.precision),
                    t.push(e.outputColorSpace),
                    t.push(e.envMapMode),
                    t.push(e.envMapCubeUVHeight),
                    t.push(e.mapUv),
                    t.push(e.alphaMapUv),
                    t.push(e.lightMapUv),
                    t.push(e.aoMapUv),
                    t.push(e.bumpMapUv),
                    t.push(e.normalMapUv),
                    t.push(e.displacementMapUv),
                    t.push(e.emissiveMapUv),
                    t.push(e.metalnessMapUv),
                    t.push(e.roughnessMapUv),
                    t.push(e.anisotropyMapUv),
                    t.push(e.clearcoatMapUv),
                    t.push(e.clearcoatNormalMapUv),
                    t.push(e.clearcoatRoughnessMapUv),
                    t.push(e.iridescenceMapUv),
                    t.push(e.iridescenceThicknessMapUv),
                    t.push(e.sheenColorMapUv),
                    t.push(e.sheenRoughnessMapUv),
                    t.push(e.specularMapUv),
                    t.push(e.specularColorMapUv),
                    t.push(e.specularIntensityMapUv),
                    t.push(e.transmissionMapUv),
                    t.push(e.thicknessMapUv),
                    t.push(e.combine),
                    t.push(e.fogExp2),
                    t.push(e.sizeAttenuation),
                    t.push(e.morphTargetsCount),
                    t.push(e.morphAttributeCount),
                    t.push(e.numDirLights),
                    t.push(e.numPointLights),
                    t.push(e.numSpotLights),
                    t.push(e.numSpotLightMaps),
                    t.push(e.numHemiLights),
                    t.push(e.numRectAreaLights),
                    t.push(e.numDirLightShadows),
                    t.push(e.numPointLightShadows),
                    t.push(e.numSpotLightShadows),
                    t.push(e.numSpotLightShadowsWithMaps),
                    t.push(e.shadowMapType),
                    t.push(e.toneMapping),
                    t.push(e.numClippingPlanes),
                    t.push(e.numClipIntersection),
                    t.push(e.depthPacking);
                })(n, e),
                (function (t, e) {
                  s.disableAll(),
                    e.isWebGL2 && s.enable(0),
                    e.supportsVertexTextures && s.enable(1),
                    e.instancing && s.enable(2),
                    e.instancingColor && s.enable(3),
                    e.matcap && s.enable(4),
                    e.envMap && s.enable(5),
                    e.normalMapObjectSpace && s.enable(6),
                    e.normalMapTangentSpace && s.enable(7),
                    e.clearcoat && s.enable(8),
                    e.iridescence && s.enable(9),
                    e.alphaTest && s.enable(10),
                    e.vertexColors && s.enable(11),
                    e.vertexAlphas && s.enable(12),
                    e.vertexUv1s && s.enable(13),
                    e.vertexUv2s && s.enable(14),
                    e.vertexUv3s && s.enable(15),
                    e.vertexTangents && s.enable(16),
                    e.anisotropy && s.enable(17),
                    t.push(s.mask),
                    s.disableAll(),
                    e.fog && s.enable(0),
                    e.useFog && s.enable(1),
                    e.flatShading && s.enable(2),
                    e.logarithmicDepthBuffer && s.enable(3),
                    e.skinning && s.enable(4),
                    e.morphTargets && s.enable(5),
                    e.morphNormals && s.enable(6),
                    e.morphColors && s.enable(7),
                    e.premultipliedAlpha && s.enable(8),
                    e.shadowMapEnabled && s.enable(9),
                    e.useLegacyLights && s.enable(10),
                    e.doubleSided && s.enable(11),
                    e.flipSided && s.enable(12),
                    e.useDepthPacking && s.enable(13),
                    e.dithering && s.enable(14),
                    e.transmission && s.enable(15),
                    e.sheen && s.enable(16),
                    e.opaque && s.enable(17),
                    e.pointsUvs && s.enable(18),
                    t.push(s.mask);
                })(n, e),
                n.push(t.outputColorSpace)),
              n.push(e.customProgramCacheKey),
              n.join()
            );
          },
          getUniforms: function (t) {
            const e = p[t.type];
            let n;
            if (e) {
              const t = vp[e];
              n = $f.clone(t.uniforms);
            } else n = t.uniforms;
            return n;
          },
          acquireProgram: function (e, n) {
            let r;
            for (let t = 0, e = u.length; t < e; t++) {
              const e = u[t];
              if (e.cacheKey === n) {
                (r = e), ++r.usedTimes;
                break;
              }
            }
            return void 0 === r && ((r = new m_(t, n, e, o)), u.push(r)), r;
          },
          releaseProgram: function (t) {
            if (0 == --t.usedTimes) {
              const e = u.indexOf(t);
              (u[e] = u[u.length - 1]), u.pop(), t.destroy();
            }
          },
          releaseShaderCache: function (t) {
            l.remove(t);
          },
          programs: u,
          dispose: function () {
            l.dispose();
          },
        };
      }
      function E_() {
        let t = new WeakMap();
        return {
          get: function (e) {
            let n = t.get(e);
            return void 0 === n && ((n = {}), t.set(e, n)), n;
          },
          remove: function (e) {
            t.delete(e);
          },
          update: function (e, n, r) {
            t.get(e)[n] = r;
          },
          dispose: function () {
            t = new WeakMap();
          },
        };
      }
      function T_(t, e) {
        return t.groupOrder !== e.groupOrder
          ? t.groupOrder - e.groupOrder
          : t.renderOrder !== e.renderOrder
            ? t.renderOrder - e.renderOrder
            : t.material.id !== e.material.id
              ? t.material.id - e.material.id
              : t.z !== e.z
                ? t.z - e.z
                : t.id - e.id;
      }
      function b_(t, e) {
        return t.groupOrder !== e.groupOrder
          ? t.groupOrder - e.groupOrder
          : t.renderOrder !== e.renderOrder
            ? t.renderOrder - e.renderOrder
            : t.z !== e.z
              ? e.z - t.z
              : t.id - e.id;
      }
      function x_() {
        const t = [];
        let e = 0;
        const n = [],
          r = [],
          i = [];
        function o(n, r, i, o, a, s) {
          let l = t[e];
          return (
            void 0 === l
              ? ((l = {
                  id: n.id,
                  object: n,
                  geometry: r,
                  material: i,
                  groupOrder: o,
                  renderOrder: n.renderOrder,
                  z: a,
                  group: s,
                }),
                (t[e] = l))
              : ((l.id = n.id),
                (l.object = n),
                (l.geometry = r),
                (l.material = i),
                (l.groupOrder = o),
                (l.renderOrder = n.renderOrder),
                (l.z = a),
                (l.group = s)),
            e++,
            l
          );
        }
        return {
          opaque: n,
          transmissive: r,
          transparent: i,
          init: function () {
            (e = 0), (n.length = 0), (r.length = 0), (i.length = 0);
          },
          push: function (t, e, a, s, l, u) {
            const h = o(t, e, a, s, l, u);
            a.transmission > 0
              ? r.push(h)
              : !0 === a.transparent
                ? i.push(h)
                : n.push(h);
          },
          unshift: function (t, e, a, s, l, u) {
            const h = o(t, e, a, s, l, u);
            a.transmission > 0
              ? r.unshift(h)
              : !0 === a.transparent
                ? i.unshift(h)
                : n.unshift(h);
          },
          finish: function () {
            for (let n = e, r = t.length; n < r; n++) {
              const e = t[n];
              if (null === e.id) break;
              (e.id = null),
                (e.object = null),
                (e.geometry = null),
                (e.material = null),
                (e.group = null);
            }
          },
          sort: function (t, e) {
            n.length > 1 && n.sort(t || T_),
              r.length > 1 && r.sort(e || b_),
              i.length > 1 && i.sort(e || b_);
          },
        };
      }
      function S_() {
        let t = new WeakMap();
        return {
          get: function (e, n) {
            const r = t.get(e);
            let i;
            return (
              void 0 === r
                ? ((i = new x_()), t.set(e, [i]))
                : n >= r.length
                  ? ((i = new x_()), r.push(i))
                  : (i = r[n]),
              i
            );
          },
          dispose: function () {
            t = new WeakMap();
          },
        };
      }
      function M_() {
        const t = {};
        return {
          get: function (e) {
            if (void 0 !== t[e.id]) return t[e.id];
            let n;
            switch (e.type) {
              case "DirectionalLight":
                n = { direction: new Wc(), color: new df() };
                break;
              case "SpotLight":
                n = {
                  position: new Wc(),
                  direction: new Wc(),
                  color: new df(),
                  distance: 0,
                  coneCos: 0,
                  penumbraCos: 0,
                  decay: 0,
                };
                break;
              case "PointLight":
                n = {
                  position: new Wc(),
                  color: new df(),
                  distance: 0,
                  decay: 0,
                };
                break;
              case "HemisphereLight":
                n = {
                  direction: new Wc(),
                  skyColor: new df(),
                  groundColor: new df(),
                };
                break;
              case "RectAreaLight":
                n = {
                  color: new df(),
                  position: new Wc(),
                  halfWidth: new Wc(),
                  halfHeight: new Wc(),
                };
            }
            return (t[e.id] = n), n;
          },
        };
      }
      let A_ = 0;
      function R_(t, e) {
        return (
          (e.castShadow ? 2 : 0) -
          (t.castShadow ? 2 : 0) +
          (e.map ? 1 : 0) -
          (t.map ? 1 : 0)
        );
      }
      function w_(t, e) {
        const n = new M_(),
          r = (function () {
            const t = {};
            return {
              get: function (e) {
                if (void 0 !== t[e.id]) return t[e.id];
                let n;
                switch (e.type) {
                  case "DirectionalLight":
                  case "SpotLight":
                    n = {
                      shadowBias: 0,
                      shadowNormalBias: 0,
                      shadowRadius: 1,
                      shadowMapSize: new vc(),
                    };
                    break;
                  case "PointLight":
                    n = {
                      shadowBias: 0,
                      shadowNormalBias: 0,
                      shadowRadius: 1,
                      shadowMapSize: new vc(),
                      shadowCameraNear: 1,
                      shadowCameraFar: 1e3,
                    };
                }
                return (t[e.id] = n), n;
              },
            };
          })(),
          i = {
            version: 0,
            hash: {
              directionalLength: -1,
              pointLength: -1,
              spotLength: -1,
              rectAreaLength: -1,
              hemiLength: -1,
              numDirectionalShadows: -1,
              numPointShadows: -1,
              numSpotShadows: -1,
              numSpotMaps: -1,
            },
            ambient: [0, 0, 0],
            probe: [],
            directional: [],
            directionalShadow: [],
            directionalShadowMap: [],
            directionalShadowMatrix: [],
            spot: [],
            spotLightMap: [],
            spotShadow: [],
            spotShadowMap: [],
            spotLightMatrix: [],
            rectArea: [],
            rectAreaLTC1: null,
            rectAreaLTC2: null,
            point: [],
            pointShadow: [],
            pointShadowMap: [],
            pointShadowMatrix: [],
            hemi: [],
            numSpotLightShadowsWithMaps: 0,
          };
        for (let t = 0; t < 9; t++) i.probe.push(new Wc());
        const o = new Wc(),
          a = new Td(),
          s = new Td();
        return {
          setup: function (o, a) {
            let s = 0,
              l = 0,
              u = 0;
            for (let t = 0; t < 9; t++) i.probe[t].set(0, 0, 0);
            let h = 0,
              c = 0,
              d = 0,
              f = 0,
              p = 0,
              m = 0,
              _ = 0,
              g = 0,
              v = 0,
              y = 0;
            o.sort(R_);
            const E = !0 === a ? Math.PI : 1;
            for (let t = 0, e = o.length; t < e; t++) {
              const e = o[t],
                a = e.color,
                T = e.intensity,
                b = e.distance,
                x = e.shadow && e.shadow.map ? e.shadow.map.texture : null;
              if (e.isAmbientLight)
                (s += a.r * T * E), (l += a.g * T * E), (u += a.b * T * E);
              else if (e.isLightProbe)
                for (let t = 0; t < 9; t++)
                  i.probe[t].addScaledVector(e.sh.coefficients[t], T);
              else if (e.isDirectionalLight) {
                const t = n.get(e);
                if (
                  (t.color.copy(e.color).multiplyScalar(e.intensity * E),
                  e.castShadow)
                ) {
                  const t = e.shadow,
                    n = r.get(e);
                  (n.shadowBias = t.bias),
                    (n.shadowNormalBias = t.normalBias),
                    (n.shadowRadius = t.radius),
                    (n.shadowMapSize = t.mapSize),
                    (i.directionalShadow[h] = n),
                    (i.directionalShadowMap[h] = x),
                    (i.directionalShadowMatrix[h] = e.shadow.matrix),
                    m++;
                }
                (i.directional[h] = t), h++;
              } else if (e.isSpotLight) {
                const t = n.get(e);
                t.position.setFromMatrixPosition(e.matrixWorld),
                  t.color.copy(a).multiplyScalar(T * E),
                  (t.distance = b),
                  (t.coneCos = Math.cos(e.angle)),
                  (t.penumbraCos = Math.cos(e.angle * (1 - e.penumbra))),
                  (t.decay = e.decay),
                  (i.spot[d] = t);
                const o = e.shadow;
                if (
                  (e.map &&
                    ((i.spotLightMap[v] = e.map),
                    v++,
                    o.updateMatrices(e),
                    e.castShadow && y++),
                  (i.spotLightMatrix[d] = o.matrix),
                  e.castShadow)
                ) {
                  const t = r.get(e);
                  (t.shadowBias = o.bias),
                    (t.shadowNormalBias = o.normalBias),
                    (t.shadowRadius = o.radius),
                    (t.shadowMapSize = o.mapSize),
                    (i.spotShadow[d] = t),
                    (i.spotShadowMap[d] = x),
                    g++;
                }
                d++;
              } else if (e.isRectAreaLight) {
                const t = n.get(e);
                t.color.copy(a).multiplyScalar(T),
                  t.halfWidth.set(0.5 * e.width, 0, 0),
                  t.halfHeight.set(0, 0.5 * e.height, 0),
                  (i.rectArea[f] = t),
                  f++;
              } else if (e.isPointLight) {
                const t = n.get(e);
                if (
                  (t.color.copy(e.color).multiplyScalar(e.intensity * E),
                  (t.distance = e.distance),
                  (t.decay = e.decay),
                  e.castShadow)
                ) {
                  const t = e.shadow,
                    n = r.get(e);
                  (n.shadowBias = t.bias),
                    (n.shadowNormalBias = t.normalBias),
                    (n.shadowRadius = t.radius),
                    (n.shadowMapSize = t.mapSize),
                    (n.shadowCameraNear = t.camera.near),
                    (n.shadowCameraFar = t.camera.far),
                    (i.pointShadow[c] = n),
                    (i.pointShadowMap[c] = x),
                    (i.pointShadowMatrix[c] = e.shadow.matrix),
                    _++;
                }
                (i.point[c] = t), c++;
              } else if (e.isHemisphereLight) {
                const t = n.get(e);
                t.skyColor.copy(e.color).multiplyScalar(T * E),
                  t.groundColor.copy(e.groundColor).multiplyScalar(T * E),
                  (i.hemi[p] = t),
                  p++;
              }
            }
            f > 0 &&
              (e.isWebGL2 || !0 === t.has("OES_texture_float_linear")
                ? ((i.rectAreaLTC1 = gp.LTC_FLOAT_1),
                  (i.rectAreaLTC2 = gp.LTC_FLOAT_2))
                : !0 === t.has("OES_texture_half_float_linear")
                  ? ((i.rectAreaLTC1 = gp.LTC_HALF_1),
                    (i.rectAreaLTC2 = gp.LTC_HALF_2))
                  : console.error(
                      "THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.",
                    )),
              (i.ambient[0] = s),
              (i.ambient[1] = l),
              (i.ambient[2] = u);
            const T = i.hash;
            (T.directionalLength === h &&
              T.pointLength === c &&
              T.spotLength === d &&
              T.rectAreaLength === f &&
              T.hemiLength === p &&
              T.numDirectionalShadows === m &&
              T.numPointShadows === _ &&
              T.numSpotShadows === g &&
              T.numSpotMaps === v) ||
              ((i.directional.length = h),
              (i.spot.length = d),
              (i.rectArea.length = f),
              (i.point.length = c),
              (i.hemi.length = p),
              (i.directionalShadow.length = m),
              (i.directionalShadowMap.length = m),
              (i.pointShadow.length = _),
              (i.pointShadowMap.length = _),
              (i.spotShadow.length = g),
              (i.spotShadowMap.length = g),
              (i.directionalShadowMatrix.length = m),
              (i.pointShadowMatrix.length = _),
              (i.spotLightMatrix.length = g + v - y),
              (i.spotLightMap.length = v),
              (i.numSpotLightShadowsWithMaps = y),
              (T.directionalLength = h),
              (T.pointLength = c),
              (T.spotLength = d),
              (T.rectAreaLength = f),
              (T.hemiLength = p),
              (T.numDirectionalShadows = m),
              (T.numPointShadows = _),
              (T.numSpotShadows = g),
              (T.numSpotMaps = v),
              (i.version = A_++));
          },
          setupView: function (t, e) {
            let n = 0,
              r = 0,
              l = 0,
              u = 0,
              h = 0;
            const c = e.matrixWorldInverse;
            for (let e = 0, d = t.length; e < d; e++) {
              const d = t[e];
              if (d.isDirectionalLight) {
                const t = i.directional[n];
                t.direction.setFromMatrixPosition(d.matrixWorld),
                  o.setFromMatrixPosition(d.target.matrixWorld),
                  t.direction.sub(o),
                  t.direction.transformDirection(c),
                  n++;
              } else if (d.isSpotLight) {
                const t = i.spot[l];
                t.position.setFromMatrixPosition(d.matrixWorld),
                  t.position.applyMatrix4(c),
                  t.direction.setFromMatrixPosition(d.matrixWorld),
                  o.setFromMatrixPosition(d.target.matrixWorld),
                  t.direction.sub(o),
                  t.direction.transformDirection(c),
                  l++;
              } else if (d.isRectAreaLight) {
                const t = i.rectArea[u];
                t.position.setFromMatrixPosition(d.matrixWorld),
                  t.position.applyMatrix4(c),
                  s.identity(),
                  a.copy(d.matrixWorld),
                  a.premultiply(c),
                  s.extractRotation(a),
                  t.halfWidth.set(0.5 * d.width, 0, 0),
                  t.halfHeight.set(0, 0.5 * d.height, 0),
                  t.halfWidth.applyMatrix4(s),
                  t.halfHeight.applyMatrix4(s),
                  u++;
              } else if (d.isPointLight) {
                const t = i.point[r];
                t.position.setFromMatrixPosition(d.matrixWorld),
                  t.position.applyMatrix4(c),
                  r++;
              } else if (d.isHemisphereLight) {
                const t = i.hemi[h];
                t.direction.setFromMatrixPosition(d.matrixWorld),
                  t.direction.transformDirection(c),
                  h++;
              }
            }
          },
          state: i,
        };
      }
      function P_(t, e) {
        const n = new w_(t, e),
          r = [],
          i = [];
        return {
          init: function () {
            (r.length = 0), (i.length = 0);
          },
          state: { lightsArray: r, shadowsArray: i, lights: n },
          setupLights: function (t) {
            n.setup(r, t);
          },
          setupLightsView: function (t) {
            n.setupView(r, t);
          },
          pushLight: function (t) {
            r.push(t);
          },
          pushShadow: function (t) {
            i.push(t);
          },
        };
      }
      function I_(t, e) {
        let n = new WeakMap();
        return {
          get: function (r, i = 0) {
            const o = n.get(r);
            let a;
            return (
              void 0 === o
                ? ((a = new P_(t, e)), n.set(r, [a]))
                : i >= o.length
                  ? ((a = new P_(t, e)), o.push(a))
                  : (a = o[i]),
              a
            );
          },
          dispose: function () {
            n = new WeakMap();
          },
        };
      }
      class O_ extends sf {
        constructor(t) {
          super(),
            (this.isMeshDepthMaterial = !0),
            (this.type = "MeshDepthMaterial"),
            (this.depthPacking = 3200),
            (this.map = null),
            (this.alphaMap = null),
            (this.displacementMap = null),
            (this.displacementScale = 1),
            (this.displacementBias = 0),
            (this.wireframe = !1),
            (this.wireframeLinewidth = 1),
            this.setValues(t);
        }
        copy(t) {
          return (
            super.copy(t),
            (this.depthPacking = t.depthPacking),
            (this.map = t.map),
            (this.alphaMap = t.alphaMap),
            (this.displacementMap = t.displacementMap),
            (this.displacementScale = t.displacementScale),
            (this.displacementBias = t.displacementBias),
            (this.wireframe = t.wireframe),
            (this.wireframeLinewidth = t.wireframeLinewidth),
            this
          );
        }
      }
      class C_ extends sf {
        constructor(t) {
          super(),
            (this.isMeshDistanceMaterial = !0),
            (this.type = "MeshDistanceMaterial"),
            (this.map = null),
            (this.alphaMap = null),
            (this.displacementMap = null),
            (this.displacementScale = 1),
            (this.displacementBias = 0),
            this.setValues(t);
        }
        copy(t) {
          return (
            super.copy(t),
            (this.map = t.map),
            (this.alphaMap = t.alphaMap),
            (this.displacementMap = t.displacementMap),
            (this.displacementScale = t.displacementScale),
            (this.displacementBias = t.displacementBias),
            this
          );
        }
      }
      function N_(t, e, n) {
        let r = new dp();
        const i = new vc(),
          o = new vc(),
          a = new Gc(),
          s = new O_({ depthPacking: 3201 }),
          l = new C_(),
          u = {},
          h = n.maxTextureSize,
          c = { [eh]: nh, [nh]: eh, [rh]: rh },
          d = new Jf({
            defines: { VSM_SAMPLES: 8 },
            uniforms: {
              shadow_pass: { value: null },
              resolution: { value: new vc() },
              radius: { value: 4 },
            },
            vertexShader:
              "void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",
            fragmentShader:
              "uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",
          }),
          f = d.clone();
        f.defines.HORIZONTAL_PASS = 1;
        const p = new wf();
        p.setAttribute(
          "position",
          new gf(new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]), 3),
        );
        const m = new jf(p, d),
          _ = this;
        (this.enabled = !1),
          (this.autoUpdate = !0),
          (this.needsUpdate = !1),
          (this.type = $u);
        let g = this.type;
        function v(n, r) {
          const o = e.update(m);
          d.defines.VSM_SAMPLES !== n.blurSamples &&
            ((d.defines.VSM_SAMPLES = n.blurSamples),
            (f.defines.VSM_SAMPLES = n.blurSamples),
            (d.needsUpdate = !0),
            (f.needsUpdate = !0)),
            null === n.mapPass && (n.mapPass = new Hc(i.x, i.y)),
            (d.uniforms.shadow_pass.value = n.map.texture),
            (d.uniforms.resolution.value = n.mapSize),
            (d.uniforms.radius.value = n.radius),
            t.setRenderTarget(n.mapPass),
            t.clear(),
            t.renderBufferDirect(r, null, o, d, m, null),
            (f.uniforms.shadow_pass.value = n.mapPass.texture),
            (f.uniforms.resolution.value = n.mapSize),
            (f.uniforms.radius.value = n.radius),
            t.setRenderTarget(n.map),
            t.clear(),
            t.renderBufferDirect(r, null, o, f, m, null);
        }
        function y(e, n, r, i) {
          let o = null;
          const a =
            !0 === r.isPointLight
              ? e.customDistanceMaterial
              : e.customDepthMaterial;
          if (void 0 !== a) o = a;
          else if (
            ((o = !0 === r.isPointLight ? l : s),
            (t.localClippingEnabled &&
              !0 === n.clipShadows &&
              Array.isArray(n.clippingPlanes) &&
              0 !== n.clippingPlanes.length) ||
              (n.displacementMap && 0 !== n.displacementScale) ||
              (n.alphaMap && n.alphaTest > 0) ||
              (n.map && n.alphaTest > 0))
          ) {
            const t = o.uuid,
              e = n.uuid;
            let r = u[t];
            void 0 === r && ((r = {}), (u[t] = r));
            let i = r[e];
            void 0 === i && ((i = o.clone()), (r[e] = i)), (o = i);
          }
          return (
            (o.visible = n.visible),
            (o.wireframe = n.wireframe),
            (o.side =
              i === th
                ? null !== n.shadowSide
                  ? n.shadowSide
                  : n.side
                : null !== n.shadowSide
                  ? n.shadowSide
                  : c[n.side]),
            (o.alphaMap = n.alphaMap),
            (o.alphaTest = n.alphaTest),
            (o.map = n.map),
            (o.clipShadows = n.clipShadows),
            (o.clippingPlanes = n.clippingPlanes),
            (o.clipIntersection = n.clipIntersection),
            (o.displacementMap = n.displacementMap),
            (o.displacementScale = n.displacementScale),
            (o.displacementBias = n.displacementBias),
            (o.wireframeLinewidth = n.wireframeLinewidth),
            (o.linewidth = n.linewidth),
            !0 === r.isPointLight &&
              !0 === o.isMeshDistanceMaterial &&
              (t.properties.get(o).light = r),
            o
          );
        }
        function E(n, i, o, a, s) {
          if (!1 === n.visible) return;
          if (
            n.layers.test(i.layers) &&
            (n.isMesh || n.isLine || n.isPoints) &&
            (n.castShadow || (n.receiveShadow && s === th)) &&
            (!n.frustumCulled || r.intersectsObject(n))
          ) {
            n.modelViewMatrix.multiplyMatrices(
              o.matrixWorldInverse,
              n.matrixWorld,
            );
            const r = e.update(n),
              i = n.material;
            if (Array.isArray(i)) {
              const e = r.groups;
              for (let l = 0, u = e.length; l < u; l++) {
                const u = e[l],
                  h = i[u.materialIndex];
                if (h && h.visible) {
                  const e = y(n, h, a, s);
                  t.renderBufferDirect(o, null, r, e, n, u);
                }
              }
            } else if (i.visible) {
              const e = y(n, i, a, s);
              t.renderBufferDirect(o, null, r, e, n, null);
            }
          }
          const l = n.children;
          for (let t = 0, e = l.length; t < e; t++) E(l[t], i, o, a, s);
        }
        this.render = function (e, n, s) {
          if (!1 === _.enabled) return;
          if (!1 === _.autoUpdate && !1 === _.needsUpdate) return;
          if (0 === e.length) return;
          const l = t.getRenderTarget(),
            u = t.getActiveCubeFace(),
            c = t.getActiveMipmapLevel(),
            d = t.state;
          d.setBlending(ih),
            d.buffers.color.setClear(1, 1, 1, 1),
            d.buffers.depth.setTest(!0),
            d.setScissorTest(!1);
          const f = g !== th && this.type === th,
            p = g === th && this.type !== th;
          for (let l = 0, u = e.length; l < u; l++) {
            const u = e[l],
              c = u.shadow;
            if (void 0 === c) {
              console.warn("THREE.WebGLShadowMap:", u, "has no shadow.");
              continue;
            }
            if (!1 === c.autoUpdate && !1 === c.needsUpdate) continue;
            i.copy(c.mapSize);
            const m = c.getFrameExtents();
            if (
              (i.multiply(m),
              o.copy(c.mapSize),
              (i.x > h || i.y > h) &&
                (i.x > h &&
                  ((o.x = Math.floor(h / m.x)),
                  (i.x = o.x * m.x),
                  (c.mapSize.x = o.x)),
                i.y > h &&
                  ((o.y = Math.floor(h / m.y)),
                  (i.y = o.y * m.y),
                  (c.mapSize.y = o.y))),
              null === c.map || !0 === f || !0 === p)
            ) {
              const t =
                this.type !== th ? { minFilter: Th, magFilter: Th } : {};
              null !== c.map && c.map.dispose(),
                (c.map = new Hc(i.x, i.y, t)),
                (c.map.texture.name = u.name + ".shadowMap"),
                c.camera.updateProjectionMatrix();
            }
            t.setRenderTarget(c.map), t.clear();
            const _ = c.getViewportCount();
            for (let t = 0; t < _; t++) {
              const e = c.getViewport(t);
              a.set(o.x * e.x, o.y * e.y, o.x * e.z, o.y * e.w),
                d.viewport(a),
                c.updateMatrices(u, t),
                (r = c.getFrustum()),
                E(n, s, c.camera, u, this.type);
            }
            !0 !== c.isPointLightShadow && this.type === th && v(c, s),
              (c.needsUpdate = !1);
          }
          (g = this.type), (_.needsUpdate = !1), t.setRenderTarget(l, u, c);
        };
      }
      function L_(t, e, n) {
        const r = n.isWebGL2,
          i = new (function () {
            let e = !1;
            const n = new Gc();
            let r = null;
            const i = new Gc(0, 0, 0, 0);
            return {
              setMask: function (n) {
                r === n || e || (t.colorMask(n, n, n, n), (r = n));
              },
              setLocked: function (t) {
                e = t;
              },
              setClear: function (e, r, o, a, s) {
                !0 === s && ((e *= a), (r *= a), (o *= a)),
                  n.set(e, r, o, a),
                  !1 === i.equals(n) && (t.clearColor(e, r, o, a), i.copy(n));
              },
              reset: function () {
                (e = !1), (r = null), i.set(-1, 0, 0, 0);
              },
            };
          })(),
          o = new (function () {
            let e = !1,
              n = null,
              r = null,
              i = null;
            return {
              setTest: function (e) {
                e ? k(t.DEPTH_TEST) : H(t.DEPTH_TEST);
              },
              setMask: function (r) {
                n === r || e || (t.depthMask(r), (n = r));
              },
              setFunc: function (e) {
                if (r !== e) {
                  switch (e) {
                    case 0:
                      t.depthFunc(t.NEVER);
                      break;
                    case 1:
                      t.depthFunc(t.ALWAYS);
                      break;
                    case 2:
                      t.depthFunc(t.LESS);
                      break;
                    case 3:
                    default:
                      t.depthFunc(t.LEQUAL);
                      break;
                    case 4:
                      t.depthFunc(t.EQUAL);
                      break;
                    case 5:
                      t.depthFunc(t.GEQUAL);
                      break;
                    case 6:
                      t.depthFunc(t.GREATER);
                      break;
                    case 7:
                      t.depthFunc(t.NOTEQUAL);
                  }
                  r = e;
                }
              },
              setLocked: function (t) {
                e = t;
              },
              setClear: function (e) {
                i !== e && (t.clearDepth(e), (i = e));
              },
              reset: function () {
                (e = !1), (n = null), (r = null), (i = null);
              },
            };
          })(),
          a = new (function () {
            let e = !1,
              n = null,
              r = null,
              i = null,
              o = null,
              a = null,
              s = null,
              l = null,
              u = null;
            return {
              setTest: function (n) {
                e || (n ? k(t.STENCIL_TEST) : H(t.STENCIL_TEST));
              },
              setMask: function (r) {
                n === r || e || (t.stencilMask(r), (n = r));
              },
              setFunc: function (e, n, a) {
                (r === e && i === n && o === a) ||
                  (t.stencilFunc(e, n, a), (r = e), (i = n), (o = a));
              },
              setOp: function (e, n, r) {
                (a === e && s === n && l === r) ||
                  (t.stencilOp(e, n, r), (a = e), (s = n), (l = r));
              },
              setLocked: function (t) {
                e = t;
              },
              setClear: function (e) {
                u !== e && (t.clearStencil(e), (u = e));
              },
              reset: function () {
                (e = !1),
                  (n = null),
                  (r = null),
                  (i = null),
                  (o = null),
                  (a = null),
                  (s = null),
                  (l = null),
                  (u = null);
              },
            };
          })(),
          s = new WeakMap(),
          l = new WeakMap();
        let u = {},
          h = {},
          c = new WeakMap(),
          d = [],
          f = null,
          p = !1,
          m = null,
          _ = null,
          g = null,
          v = null,
          y = null,
          E = null,
          T = null,
          b = !1,
          x = null,
          S = null,
          M = null,
          A = null,
          R = null;
        const w = t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
        let P = !1,
          I = 0;
        const O = t.getParameter(t.VERSION);
        -1 !== O.indexOf("WebGL")
          ? ((I = parseFloat(/^WebGL (\d)/.exec(O)[1])), (P = I >= 1))
          : -1 !== O.indexOf("OpenGL ES") &&
            ((I = parseFloat(/^OpenGL ES (\d)/.exec(O)[1])), (P = I >= 2));
        let C = null,
          N = {};
        const L = t.getParameter(t.SCISSOR_BOX),
          D = t.getParameter(t.VIEWPORT),
          U = new Gc().fromArray(L),
          F = new Gc().fromArray(D);
        function B(e, n, i, o) {
          const a = new Uint8Array(4),
            s = t.createTexture();
          t.bindTexture(e, s),
            t.texParameteri(e, t.TEXTURE_MIN_FILTER, t.NEAREST),
            t.texParameteri(e, t.TEXTURE_MAG_FILTER, t.NEAREST);
          for (let s = 0; s < i; s++)
            !r || (e !== t.TEXTURE_3D && e !== t.TEXTURE_2D_ARRAY)
              ? t.texImage2D(
                  n + s,
                  0,
                  t.RGBA,
                  1,
                  1,
                  0,
                  t.RGBA,
                  t.UNSIGNED_BYTE,
                  a,
                )
              : t.texImage3D(
                  n,
                  0,
                  t.RGBA,
                  1,
                  1,
                  o,
                  0,
                  t.RGBA,
                  t.UNSIGNED_BYTE,
                  a,
                );
          return s;
        }
        const G = {};
        function k(e) {
          !0 !== u[e] && (t.enable(e), (u[e] = !0));
        }
        function H(e) {
          !1 !== u[e] && (t.disable(e), (u[e] = !1));
        }
        (G[t.TEXTURE_2D] = B(t.TEXTURE_2D, t.TEXTURE_2D, 1)),
          (G[t.TEXTURE_CUBE_MAP] = B(
            t.TEXTURE_CUBE_MAP,
            t.TEXTURE_CUBE_MAP_POSITIVE_X,
            6,
          )),
          r &&
            ((G[t.TEXTURE_2D_ARRAY] = B(
              t.TEXTURE_2D_ARRAY,
              t.TEXTURE_2D_ARRAY,
              1,
              1,
            )),
            (G[t.TEXTURE_3D] = B(t.TEXTURE_3D, t.TEXTURE_3D, 1, 1))),
          i.setClear(0, 0, 0, 1),
          o.setClear(1),
          a.setClear(0),
          k(t.DEPTH_TEST),
          o.setFunc(3),
          W(!1),
          j(1),
          k(t.CULL_FACE),
          X(ih);
        const z = {
          [oh]: t.FUNC_ADD,
          101: t.FUNC_SUBTRACT,
          102: t.FUNC_REVERSE_SUBTRACT,
        };
        if (r) (z[103] = t.MIN), (z[104] = t.MAX);
        else {
          const t = e.get("EXT_blend_minmax");
          null !== t && ((z[103] = t.MIN_EXT), (z[104] = t.MAX_EXT));
        }
        const V = {
          200: t.ZERO,
          201: t.ONE,
          202: t.SRC_COLOR,
          204: t.SRC_ALPHA,
          210: t.SRC_ALPHA_SATURATE,
          208: t.DST_COLOR,
          206: t.DST_ALPHA,
          203: t.ONE_MINUS_SRC_COLOR,
          205: t.ONE_MINUS_SRC_ALPHA,
          209: t.ONE_MINUS_DST_COLOR,
          207: t.ONE_MINUS_DST_ALPHA,
        };
        function X(e, n, r, i, o, a, s, l) {
          if (e !== ih) {
            if ((!1 === p && (k(t.BLEND), (p = !0)), 5 === e))
              (o = o || n),
                (a = a || r),
                (s = s || i),
                (n === _ && o === y) ||
                  (t.blendEquationSeparate(z[n], z[o]), (_ = n), (y = o)),
                (r === g && i === v && a === E && s === T) ||
                  (t.blendFuncSeparate(V[r], V[i], V[a], V[s]),
                  (g = r),
                  (v = i),
                  (E = a),
                  (T = s)),
                (m = e),
                (b = !1);
            else if (e !== m || l !== b) {
              if (
                ((_ === oh && y === oh) ||
                  (t.blendEquation(t.FUNC_ADD), (_ = oh), (y = oh)),
                l)
              )
                switch (e) {
                  case 1:
                    t.blendFuncSeparate(
                      t.ONE,
                      t.ONE_MINUS_SRC_ALPHA,
                      t.ONE,
                      t.ONE_MINUS_SRC_ALPHA,
                    );
                    break;
                  case 2:
                    t.blendFunc(t.ONE, t.ONE);
                    break;
                  case 3:
                    t.blendFuncSeparate(
                      t.ZERO,
                      t.ONE_MINUS_SRC_COLOR,
                      t.ZERO,
                      t.ONE,
                    );
                    break;
                  case 4:
                    t.blendFuncSeparate(
                      t.ZERO,
                      t.SRC_COLOR,
                      t.ZERO,
                      t.SRC_ALPHA,
                    );
                    break;
                  default:
                    console.error("THREE.WebGLState: Invalid blending: ", e);
                }
              else
                switch (e) {
                  case 1:
                    t.blendFuncSeparate(
                      t.SRC_ALPHA,
                      t.ONE_MINUS_SRC_ALPHA,
                      t.ONE,
                      t.ONE_MINUS_SRC_ALPHA,
                    );
                    break;
                  case 2:
                    t.blendFunc(t.SRC_ALPHA, t.ONE);
                    break;
                  case 3:
                    t.blendFuncSeparate(
                      t.ZERO,
                      t.ONE_MINUS_SRC_COLOR,
                      t.ZERO,
                      t.ONE,
                    );
                    break;
                  case 4:
                    t.blendFunc(t.ZERO, t.SRC_COLOR);
                    break;
                  default:
                    console.error("THREE.WebGLState: Invalid blending: ", e);
                }
              (g = null), (v = null), (E = null), (T = null), (m = e), (b = l);
            }
          } else !0 === p && (H(t.BLEND), (p = !1));
        }
        function W(e) {
          x !== e && (e ? t.frontFace(t.CW) : t.frontFace(t.CCW), (x = e));
        }
        function j(e) {
          0 !== e
            ? (k(t.CULL_FACE),
              e !== S &&
                (1 === e
                  ? t.cullFace(t.BACK)
                  : 2 === e
                    ? t.cullFace(t.FRONT)
                    : t.cullFace(t.FRONT_AND_BACK)))
            : H(t.CULL_FACE),
            (S = e);
        }
        function Y(e, n, r) {
          e
            ? (k(t.POLYGON_OFFSET_FILL),
              (A === n && R === r) || (t.polygonOffset(n, r), (A = n), (R = r)))
            : H(t.POLYGON_OFFSET_FILL);
        }
        return {
          buffers: { color: i, depth: o, stencil: a },
          enable: k,
          disable: H,
          bindFramebuffer: function (e, n) {
            return (
              h[e] !== n &&
              (t.bindFramebuffer(e, n),
              (h[e] = n),
              r &&
                (e === t.DRAW_FRAMEBUFFER && (h[t.FRAMEBUFFER] = n),
                e === t.FRAMEBUFFER && (h[t.DRAW_FRAMEBUFFER] = n)),
              !0)
            );
          },
          drawBuffers: function (r, i) {
            let o = d,
              a = !1;
            if (r)
              if (
                ((o = c.get(i)),
                void 0 === o && ((o = []), c.set(i, o)),
                r.isWebGLMultipleRenderTargets)
              ) {
                const e = r.texture;
                if (o.length !== e.length || o[0] !== t.COLOR_ATTACHMENT0) {
                  for (let n = 0, r = e.length; n < r; n++)
                    o[n] = t.COLOR_ATTACHMENT0 + n;
                  (o.length = e.length), (a = !0);
                }
              } else
                o[0] !== t.COLOR_ATTACHMENT0 &&
                  ((o[0] = t.COLOR_ATTACHMENT0), (a = !0));
            else o[0] !== t.BACK && ((o[0] = t.BACK), (a = !0));
            a &&
              (n.isWebGL2
                ? t.drawBuffers(o)
                : e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o));
          },
          useProgram: function (e) {
            return f !== e && (t.useProgram(e), (f = e), !0);
          },
          setBlending: X,
          setMaterial: function (e, n) {
            e.side === rh ? H(t.CULL_FACE) : k(t.CULL_FACE);
            let r = e.side === nh;
            n && (r = !r),
              W(r),
              1 === e.blending && !1 === e.transparent
                ? X(ih)
                : X(
                    e.blending,
                    e.blendEquation,
                    e.blendSrc,
                    e.blendDst,
                    e.blendEquationAlpha,
                    e.blendSrcAlpha,
                    e.blendDstAlpha,
                    e.premultipliedAlpha,
                  ),
              o.setFunc(e.depthFunc),
              o.setTest(e.depthTest),
              o.setMask(e.depthWrite),
              i.setMask(e.colorWrite);
            const s = e.stencilWrite;
            a.setTest(s),
              s &&
                (a.setMask(e.stencilWriteMask),
                a.setFunc(e.stencilFunc, e.stencilRef, e.stencilFuncMask),
                a.setOp(e.stencilFail, e.stencilZFail, e.stencilZPass)),
              Y(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits),
              !0 === e.alphaToCoverage
                ? k(t.SAMPLE_ALPHA_TO_COVERAGE)
                : H(t.SAMPLE_ALPHA_TO_COVERAGE);
          },
          setFlipSided: W,
          setCullFace: j,
          setLineWidth: function (e) {
            e !== M && (P && t.lineWidth(e), (M = e));
          },
          setPolygonOffset: Y,
          setScissorTest: function (e) {
            e ? k(t.SCISSOR_TEST) : H(t.SCISSOR_TEST);
          },
          activeTexture: function (e) {
            void 0 === e && (e = t.TEXTURE0 + w - 1),
              C !== e && (t.activeTexture(e), (C = e));
          },
          bindTexture: function (e, n, r) {
            void 0 === r && (r = null === C ? t.TEXTURE0 + w - 1 : C);
            let i = N[r];
            void 0 === i &&
              ((i = { type: void 0, texture: void 0 }), (N[r] = i)),
              (i.type === e && i.texture === n) ||
                (C !== r && (t.activeTexture(r), (C = r)),
                t.bindTexture(e, n || G[e]),
                (i.type = e),
                (i.texture = n));
          },
          unbindTexture: function () {
            const e = N[C];
            void 0 !== e &&
              void 0 !== e.type &&
              (t.bindTexture(e.type, null),
              (e.type = void 0),
              (e.texture = void 0));
          },
          compressedTexImage2D: function () {
            try {
              t.compressedTexImage2D.apply(t, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          compressedTexImage3D: function () {
            try {
              t.compressedTexImage3D.apply(t, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          texImage2D: function () {
            try {
              t.texImage2D.apply(t, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          texImage3D: function () {
            try {
              t.texImage3D.apply(t, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          updateUBOMapping: function (e, n) {
            let r = l.get(n);
            void 0 === r && ((r = new WeakMap()), l.set(n, r));
            let i = r.get(e);
            void 0 === i &&
              ((i = t.getUniformBlockIndex(n, e.name)), r.set(e, i));
          },
          uniformBlockBinding: function (e, n) {
            const r = l.get(n).get(e);
            s.get(n) !== r &&
              (t.uniformBlockBinding(n, r, e.__bindingPointIndex), s.set(n, r));
          },
          texStorage2D: function () {
            try {
              t.texStorage2D.apply(t, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          texStorage3D: function () {
            try {
              t.texStorage3D.apply(t, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          texSubImage2D: function () {
            try {
              t.texSubImage2D.apply(t, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          texSubImage3D: function () {
            try {
              t.texSubImage3D.apply(t, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          compressedTexSubImage2D: function () {
            try {
              t.compressedTexSubImage2D.apply(t, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          compressedTexSubImage3D: function () {
            try {
              t.compressedTexSubImage3D.apply(t, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          scissor: function (e) {
            !1 === U.equals(e) && (t.scissor(e.x, e.y, e.z, e.w), U.copy(e));
          },
          viewport: function (e) {
            !1 === F.equals(e) && (t.viewport(e.x, e.y, e.z, e.w), F.copy(e));
          },
          reset: function () {
            t.disable(t.BLEND),
              t.disable(t.CULL_FACE),
              t.disable(t.DEPTH_TEST),
              t.disable(t.POLYGON_OFFSET_FILL),
              t.disable(t.SCISSOR_TEST),
              t.disable(t.STENCIL_TEST),
              t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),
              t.blendEquation(t.FUNC_ADD),
              t.blendFunc(t.ONE, t.ZERO),
              t.blendFuncSeparate(t.ONE, t.ZERO, t.ONE, t.ZERO),
              t.colorMask(!0, !0, !0, !0),
              t.clearColor(0, 0, 0, 0),
              t.depthMask(!0),
              t.depthFunc(t.LESS),
              t.clearDepth(1),
              t.stencilMask(4294967295),
              t.stencilFunc(t.ALWAYS, 0, 4294967295),
              t.stencilOp(t.KEEP, t.KEEP, t.KEEP),
              t.clearStencil(0),
              t.cullFace(t.BACK),
              t.frontFace(t.CCW),
              t.polygonOffset(0, 0),
              t.activeTexture(t.TEXTURE0),
              t.bindFramebuffer(t.FRAMEBUFFER, null),
              !0 === r &&
                (t.bindFramebuffer(t.DRAW_FRAMEBUFFER, null),
                t.bindFramebuffer(t.READ_FRAMEBUFFER, null)),
              t.useProgram(null),
              t.lineWidth(1),
              t.scissor(0, 0, t.canvas.width, t.canvas.height),
              t.viewport(0, 0, t.canvas.width, t.canvas.height),
              (u = {}),
              (C = null),
              (N = {}),
              (h = {}),
              (c = new WeakMap()),
              (d = []),
              (f = null),
              (p = !1),
              (m = null),
              (_ = null),
              (g = null),
              (v = null),
              (y = null),
              (E = null),
              (T = null),
              (b = !1),
              (x = null),
              (S = null),
              (M = null),
              (A = null),
              (R = null),
              U.set(0, 0, t.canvas.width, t.canvas.height),
              F.set(0, 0, t.canvas.width, t.canvas.height),
              i.reset(),
              o.reset(),
              a.reset();
          },
        };
      }
      function D_(t, e, n, r, i, o, a) {
        const s = i.isWebGL2,
          l = i.maxTextures,
          u = i.maxCubemapSize,
          h = i.maxTextureSize,
          c = i.maxSamples,
          d = e.has("WEBGL_multisampled_render_to_texture")
            ? e.get("WEBGL_multisampled_render_to_texture")
            : null,
          f =
            "undefined" != typeof navigator &&
            /OculusBrowser/g.test(navigator.userAgent),
          p = new WeakMap();
        let m;
        const _ = new WeakMap();
        let g = !1;
        try {
          g =
            "undefined" != typeof OffscreenCanvas &&
            null !== new OffscreenCanvas(1, 1).getContext("2d");
        } catch (t) {}
        function v(t, e) {
          return g ? new OffscreenCanvas(t, e) : bc("canvas");
        }
        function y(t, e, n, r) {
          let i = 1;
          if (
            ((t.width > r || t.height > r) &&
              (i = r / Math.max(t.width, t.height)),
            i < 1 || !0 === e)
          ) {
            if (
              ("undefined" != typeof HTMLImageElement &&
                t instanceof HTMLImageElement) ||
              ("undefined" != typeof HTMLCanvasElement &&
                t instanceof HTMLCanvasElement) ||
              ("undefined" != typeof ImageBitmap && t instanceof ImageBitmap)
            ) {
              const r = e ? dc : Math.floor,
                o = r(i * t.width),
                a = r(i * t.height);
              void 0 === m && (m = v(o, a));
              const s = n ? v(o, a) : m;
              return (
                (s.width = o),
                (s.height = a),
                s.getContext("2d").drawImage(t, 0, 0, o, a),
                console.warn(
                  "THREE.WebGLRenderer: Texture has been resized from (" +
                    t.width +
                    "x" +
                    t.height +
                    ") to (" +
                    o +
                    "x" +
                    a +
                    ").",
                ),
                s
              );
            }
            return (
              "data" in t &&
                console.warn(
                  "THREE.WebGLRenderer: Image in DataTexture is too big (" +
                    t.width +
                    "x" +
                    t.height +
                    ").",
                ),
              t
            );
          }
          return t;
        }
        function E(t) {
          return cc(t.width) && cc(t.height);
        }
        function T(t, e) {
          return (
            t.generateMipmaps && e && t.minFilter !== Th && t.minFilter !== xh
          );
        }
        function b(e) {
          t.generateMipmap(e);
        }
        function x(n, r, i, o, a = !1) {
          if (!1 === s) return r;
          if (null !== n) {
            if (void 0 !== t[n]) return t[n];
            console.warn(
              "THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" +
                n +
                "'",
            );
          }
          let l = r;
          return (
            r === t.RED &&
              (i === t.FLOAT && (l = t.R32F),
              i === t.HALF_FLOAT && (l = t.R16F),
              i === t.UNSIGNED_BYTE && (l = t.R8)),
            r === t.RED_INTEGER &&
              (i === t.UNSIGNED_BYTE && (l = t.R8UI),
              i === t.UNSIGNED_SHORT && (l = t.R16UI),
              i === t.UNSIGNED_INT && (l = t.R32UI),
              i === t.BYTE && (l = t.R8I),
              i === t.SHORT && (l = t.R16I),
              i === t.INT && (l = t.R32I)),
            r === t.RG &&
              (i === t.FLOAT && (l = t.RG32F),
              i === t.HALF_FLOAT && (l = t.RG16F),
              i === t.UNSIGNED_BYTE && (l = t.RG8)),
            r === t.RGBA &&
              (i === t.FLOAT && (l = t.RGBA32F),
              i === t.HALF_FLOAT && (l = t.RGBA16F),
              i === t.UNSIGNED_BYTE &&
                (l = o === qh && !1 === a ? t.SRGB8_ALPHA8 : t.RGBA8),
              i === t.UNSIGNED_SHORT_4_4_4_4 && (l = t.RGBA4),
              i === t.UNSIGNED_SHORT_5_5_5_1 && (l = t.RGB5_A1)),
            (l !== t.R16F &&
              l !== t.R32F &&
              l !== t.RG16F &&
              l !== t.RG32F &&
              l !== t.RGBA16F &&
              l !== t.RGBA32F) ||
              e.get("EXT_color_buffer_float"),
            l
          );
        }
        function S(t, e, n) {
          return !0 === T(t, n) ||
            (t.isFramebufferTexture && t.minFilter !== Th && t.minFilter !== xh)
            ? Math.log2(Math.max(e.width, e.height)) + 1
            : void 0 !== t.mipmaps && t.mipmaps.length > 0
              ? t.mipmaps.length
              : t.isCompressedTexture && Array.isArray(t.image)
                ? e.mipmaps.length
                : 1;
        }
        function M(e) {
          return e === Th || 1004 === e || e === bh ? t.NEAREST : t.LINEAR;
        }
        function A(t) {
          const e = t.target;
          e.removeEventListener("dispose", A),
            (function (t) {
              const e = r.get(t);
              if (void 0 === e.__webglInit) return;
              const n = t.source,
                i = _.get(n);
              if (i) {
                const r = i[e.__cacheKey];
                r.usedTimes--,
                  0 === r.usedTimes && w(t),
                  0 === Object.keys(i).length && _.delete(n);
              }
              r.remove(t);
            })(e),
            e.isVideoTexture && p.delete(e);
        }
        function R(e) {
          const n = e.target;
          n.removeEventListener("dispose", R),
            (function (e) {
              const n = e.texture,
                i = r.get(e),
                o = r.get(n);
              if (
                (void 0 !== o.__webglTexture &&
                  (t.deleteTexture(o.__webglTexture), a.memory.textures--),
                e.depthTexture && e.depthTexture.dispose(),
                e.isWebGLCubeRenderTarget)
              )
                for (let e = 0; e < 6; e++) {
                  if (Array.isArray(i.__webglFramebuffer[e]))
                    for (let n = 0; n < i.__webglFramebuffer[e].length; n++)
                      t.deleteFramebuffer(i.__webglFramebuffer[e][n]);
                  else t.deleteFramebuffer(i.__webglFramebuffer[e]);
                  i.__webglDepthbuffer &&
                    t.deleteRenderbuffer(i.__webglDepthbuffer[e]);
                }
              else {
                if (Array.isArray(i.__webglFramebuffer))
                  for (let e = 0; e < i.__webglFramebuffer.length; e++)
                    t.deleteFramebuffer(i.__webglFramebuffer[e]);
                else t.deleteFramebuffer(i.__webglFramebuffer);
                if (
                  (i.__webglDepthbuffer &&
                    t.deleteRenderbuffer(i.__webglDepthbuffer),
                  i.__webglMultisampledFramebuffer &&
                    t.deleteFramebuffer(i.__webglMultisampledFramebuffer),
                  i.__webglColorRenderbuffer)
                )
                  for (let e = 0; e < i.__webglColorRenderbuffer.length; e++)
                    i.__webglColorRenderbuffer[e] &&
                      t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);
                i.__webglDepthRenderbuffer &&
                  t.deleteRenderbuffer(i.__webglDepthRenderbuffer);
              }
              if (e.isWebGLMultipleRenderTargets)
                for (let e = 0, i = n.length; e < i; e++) {
                  const i = r.get(n[e]);
                  i.__webglTexture &&
                    (t.deleteTexture(i.__webglTexture), a.memory.textures--),
                    r.remove(n[e]);
                }
              r.remove(n), r.remove(e);
            })(n);
        }
        function w(e) {
          const n = r.get(e);
          t.deleteTexture(n.__webglTexture);
          const i = e.source;
          delete _.get(i)[n.__cacheKey], a.memory.textures--;
        }
        let P = 0;
        function I(e, i) {
          const o = r.get(e);
          if (
            (e.isVideoTexture &&
              (function (t) {
                const e = a.render.frame;
                p.get(t) !== e && (p.set(t, e), t.update());
              })(e),
            !1 === e.isRenderTargetTexture &&
              e.version > 0 &&
              o.__version !== e.version)
          ) {
            const t = e.image;
            if (null === t)
              console.warn(
                "THREE.WebGLRenderer: Texture marked for update but no image data found.",
              );
            else {
              if (!1 !== t.complete) return void U(o, e, i);
              console.warn(
                "THREE.WebGLRenderer: Texture marked for update but image is incomplete",
              );
            }
          }
          n.bindTexture(t.TEXTURE_2D, o.__webglTexture, t.TEXTURE0 + i);
        }
        const O = {
            [vh]: t.REPEAT,
            [yh]: t.CLAMP_TO_EDGE,
            [Eh]: t.MIRRORED_REPEAT,
          },
          C = {
            [Th]: t.NEAREST,
            1004: t.NEAREST_MIPMAP_NEAREST,
            [bh]: t.NEAREST_MIPMAP_LINEAR,
            [xh]: t.LINEAR,
            1007: t.LINEAR_MIPMAP_NEAREST,
            [Sh]: t.LINEAR_MIPMAP_LINEAR,
          },
          N = {
            512: t.NEVER,
            519: t.ALWAYS,
            513: t.LESS,
            515: t.LEQUAL,
            514: t.EQUAL,
            518: t.GEQUAL,
            516: t.GREATER,
            517: t.NOTEQUAL,
          };
        function L(n, o, a) {
          if (
            (a
              ? (t.texParameteri(n, t.TEXTURE_WRAP_S, O[o.wrapS]),
                t.texParameteri(n, t.TEXTURE_WRAP_T, O[o.wrapT]),
                (n !== t.TEXTURE_3D && n !== t.TEXTURE_2D_ARRAY) ||
                  t.texParameteri(n, t.TEXTURE_WRAP_R, O[o.wrapR]),
                t.texParameteri(n, t.TEXTURE_MAG_FILTER, C[o.magFilter]),
                t.texParameteri(n, t.TEXTURE_MIN_FILTER, C[o.minFilter]))
              : (t.texParameteri(n, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE),
                t.texParameteri(n, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE),
                (n !== t.TEXTURE_3D && n !== t.TEXTURE_2D_ARRAY) ||
                  t.texParameteri(n, t.TEXTURE_WRAP_R, t.CLAMP_TO_EDGE),
                (o.wrapS === yh && o.wrapT === yh) ||
                  console.warn(
                    "THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",
                  ),
                t.texParameteri(n, t.TEXTURE_MAG_FILTER, M(o.magFilter)),
                t.texParameteri(n, t.TEXTURE_MIN_FILTER, M(o.minFilter)),
                o.minFilter !== Th &&
                  o.minFilter !== xh &&
                  console.warn(
                    "THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",
                  )),
            o.compareFunction &&
              (t.texParameteri(
                n,
                t.TEXTURE_COMPARE_MODE,
                t.COMPARE_REF_TO_TEXTURE,
              ),
              t.texParameteri(n, t.TEXTURE_COMPARE_FUNC, N[o.compareFunction])),
            !0 === e.has("EXT_texture_filter_anisotropic"))
          ) {
            const a = e.get("EXT_texture_filter_anisotropic");
            if (o.magFilter === Th) return;
            if (o.minFilter !== bh && o.minFilter !== Sh) return;
            if (o.type === wh && !1 === e.has("OES_texture_float_linear"))
              return;
            if (
              !1 === s &&
              o.type === Ph &&
              !1 === e.has("OES_texture_half_float_linear")
            )
              return;
            (o.anisotropy > 1 || r.get(o).__currentAnisotropy) &&
              (t.texParameterf(
                n,
                a.TEXTURE_MAX_ANISOTROPY_EXT,
                Math.min(o.anisotropy, i.getMaxAnisotropy()),
              ),
              (r.get(o).__currentAnisotropy = o.anisotropy));
          }
        }
        function D(e, n) {
          let r = !1;
          void 0 === e.__webglInit &&
            ((e.__webglInit = !0), n.addEventListener("dispose", A));
          const i = n.source;
          let o = _.get(i);
          void 0 === o && ((o = {}), _.set(i, o));
          const s = (function (t) {
            const e = [];
            return (
              e.push(t.wrapS),
              e.push(t.wrapT),
              e.push(t.wrapR || 0),
              e.push(t.magFilter),
              e.push(t.minFilter),
              e.push(t.anisotropy),
              e.push(t.internalFormat),
              e.push(t.format),
              e.push(t.type),
              e.push(t.generateMipmaps),
              e.push(t.premultiplyAlpha),
              e.push(t.flipY),
              e.push(t.unpackAlignment),
              e.push(t.colorSpace),
              e.join()
            );
          })(n);
          if (s !== e.__cacheKey) {
            void 0 === o[s] &&
              ((o[s] = { texture: t.createTexture(), usedTimes: 0 }),
              a.memory.textures++,
              (r = !0)),
              o[s].usedTimes++;
            const i = o[e.__cacheKey];
            void 0 !== i &&
              (o[e.__cacheKey].usedTimes--, 0 === i.usedTimes && w(n)),
              (e.__cacheKey = s),
              (e.__webglTexture = o[s].texture);
          }
          return r;
        }
        function U(e, i, a) {
          let l = t.TEXTURE_2D;
          (i.isDataArrayTexture || i.isCompressedArrayTexture) &&
            (l = t.TEXTURE_2D_ARRAY),
            i.isData3DTexture && (l = t.TEXTURE_3D);
          const u = D(e, i),
            c = i.source;
          n.bindTexture(l, e.__webglTexture, t.TEXTURE0 + a);
          const d = r.get(c);
          if (c.version !== d.__version || !0 === u) {
            n.activeTexture(t.TEXTURE0 + a),
              t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL, i.flipY),
              t.pixelStorei(
                t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                i.premultiplyAlpha,
              ),
              t.pixelStorei(t.UNPACK_ALIGNMENT, i.unpackAlignment),
              t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL, t.NONE);
            const e =
              (function (t) {
                return (
                  !s &&
                  (t.wrapS !== yh ||
                    t.wrapT !== yh ||
                    (t.minFilter !== Th && t.minFilter !== xh))
                );
              })(i) && !1 === E(i.image);
            let r = y(i.image, e, !1, h);
            r = z(i, r);
            const f = E(r) || s,
              p = o.convert(i.format, i.colorSpace);
            let m,
              _ = o.convert(i.type),
              g = x(i.internalFormat, p, _, i.colorSpace);
            L(l, i, f);
            const v = i.mipmaps,
              M = s && !0 !== i.isVideoTexture,
              A = void 0 === d.__version || !0 === u,
              R = S(i, r, f);
            if (i.isDepthTexture)
              (g = t.DEPTH_COMPONENT),
                s
                  ? (g =
                      i.type === wh
                        ? t.DEPTH_COMPONENT32F
                        : i.type === Rh
                          ? t.DEPTH_COMPONENT24
                          : i.type === Ch
                            ? t.DEPTH24_STENCIL8
                            : t.DEPTH_COMPONENT16)
                  : i.type === wh &&
                    console.error(
                      "WebGLRenderer: Floating point depth texture requires WebGL2.",
                    ),
                i.format === Lh &&
                  g === t.DEPTH_COMPONENT &&
                  i.type !== Ah &&
                  i.type !== Rh &&
                  (console.warn(
                    "THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.",
                  ),
                  (i.type = Rh),
                  (_ = o.convert(i.type))),
                i.format === Dh &&
                  g === t.DEPTH_COMPONENT &&
                  ((g = t.DEPTH_STENCIL),
                  i.type !== Ch &&
                    (console.warn(
                      "THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.",
                    ),
                    (i.type = Ch),
                    (_ = o.convert(i.type)))),
                A &&
                  (M
                    ? n.texStorage2D(t.TEXTURE_2D, 1, g, r.width, r.height)
                    : n.texImage2D(
                        t.TEXTURE_2D,
                        0,
                        g,
                        r.width,
                        r.height,
                        0,
                        p,
                        _,
                        null,
                      ));
            else if (i.isDataTexture)
              if (v.length > 0 && f) {
                M &&
                  A &&
                  n.texStorage2D(t.TEXTURE_2D, R, g, v[0].width, v[0].height);
                for (let e = 0, r = v.length; e < r; e++)
                  (m = v[e]),
                    M
                      ? n.texSubImage2D(
                          t.TEXTURE_2D,
                          e,
                          0,
                          0,
                          m.width,
                          m.height,
                          p,
                          _,
                          m.data,
                        )
                      : n.texImage2D(
                          t.TEXTURE_2D,
                          e,
                          g,
                          m.width,
                          m.height,
                          0,
                          p,
                          _,
                          m.data,
                        );
                i.generateMipmaps = !1;
              } else
                M
                  ? (A && n.texStorage2D(t.TEXTURE_2D, R, g, r.width, r.height),
                    n.texSubImage2D(
                      t.TEXTURE_2D,
                      0,
                      0,
                      0,
                      r.width,
                      r.height,
                      p,
                      _,
                      r.data,
                    ))
                  : n.texImage2D(
                      t.TEXTURE_2D,
                      0,
                      g,
                      r.width,
                      r.height,
                      0,
                      p,
                      _,
                      r.data,
                    );
            else if (i.isCompressedTexture)
              if (i.isCompressedArrayTexture) {
                M &&
                  A &&
                  n.texStorage3D(
                    t.TEXTURE_2D_ARRAY,
                    R,
                    g,
                    v[0].width,
                    v[0].height,
                    r.depth,
                  );
                for (let e = 0, o = v.length; e < o; e++)
                  (m = v[e]),
                    i.format !== Nh
                      ? null !== p
                        ? M
                          ? n.compressedTexSubImage3D(
                              t.TEXTURE_2D_ARRAY,
                              e,
                              0,
                              0,
                              0,
                              m.width,
                              m.height,
                              r.depth,
                              p,
                              m.data,
                              0,
                              0,
                            )
                          : n.compressedTexImage3D(
                              t.TEXTURE_2D_ARRAY,
                              e,
                              g,
                              m.width,
                              m.height,
                              r.depth,
                              0,
                              m.data,
                              0,
                              0,
                            )
                        : console.warn(
                            "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()",
                          )
                      : M
                        ? n.texSubImage3D(
                            t.TEXTURE_2D_ARRAY,
                            e,
                            0,
                            0,
                            0,
                            m.width,
                            m.height,
                            r.depth,
                            p,
                            _,
                            m.data,
                          )
                        : n.texImage3D(
                            t.TEXTURE_2D_ARRAY,
                            e,
                            g,
                            m.width,
                            m.height,
                            r.depth,
                            0,
                            p,
                            _,
                            m.data,
                          );
              } else {
                M &&
                  A &&
                  n.texStorage2D(t.TEXTURE_2D, R, g, v[0].width, v[0].height);
                for (let e = 0, r = v.length; e < r; e++)
                  (m = v[e]),
                    i.format !== Nh
                      ? null !== p
                        ? M
                          ? n.compressedTexSubImage2D(
                              t.TEXTURE_2D,
                              e,
                              0,
                              0,
                              m.width,
                              m.height,
                              p,
                              m.data,
                            )
                          : n.compressedTexImage2D(
                              t.TEXTURE_2D,
                              e,
                              g,
                              m.width,
                              m.height,
                              0,
                              m.data,
                            )
                        : console.warn(
                            "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()",
                          )
                      : M
                        ? n.texSubImage2D(
                            t.TEXTURE_2D,
                            e,
                            0,
                            0,
                            m.width,
                            m.height,
                            p,
                            _,
                            m.data,
                          )
                        : n.texImage2D(
                            t.TEXTURE_2D,
                            e,
                            g,
                            m.width,
                            m.height,
                            0,
                            p,
                            _,
                            m.data,
                          );
              }
            else if (i.isDataArrayTexture)
              M
                ? (A &&
                    n.texStorage3D(
                      t.TEXTURE_2D_ARRAY,
                      R,
                      g,
                      r.width,
                      r.height,
                      r.depth,
                    ),
                  n.texSubImage3D(
                    t.TEXTURE_2D_ARRAY,
                    0,
                    0,
                    0,
                    0,
                    r.width,
                    r.height,
                    r.depth,
                    p,
                    _,
                    r.data,
                  ))
                : n.texImage3D(
                    t.TEXTURE_2D_ARRAY,
                    0,
                    g,
                    r.width,
                    r.height,
                    r.depth,
                    0,
                    p,
                    _,
                    r.data,
                  );
            else if (i.isData3DTexture)
              M
                ? (A &&
                    n.texStorage3D(
                      t.TEXTURE_3D,
                      R,
                      g,
                      r.width,
                      r.height,
                      r.depth,
                    ),
                  n.texSubImage3D(
                    t.TEXTURE_3D,
                    0,
                    0,
                    0,
                    0,
                    r.width,
                    r.height,
                    r.depth,
                    p,
                    _,
                    r.data,
                  ))
                : n.texImage3D(
                    t.TEXTURE_3D,
                    0,
                    g,
                    r.width,
                    r.height,
                    r.depth,
                    0,
                    p,
                    _,
                    r.data,
                  );
            else if (i.isFramebufferTexture) {
              if (A)
                if (M) n.texStorage2D(t.TEXTURE_2D, R, g, r.width, r.height);
                else {
                  let e = r.width,
                    i = r.height;
                  for (let r = 0; r < R; r++)
                    n.texImage2D(t.TEXTURE_2D, r, g, e, i, 0, p, _, null),
                      (e >>= 1),
                      (i >>= 1);
                }
            } else if (v.length > 0 && f) {
              M &&
                A &&
                n.texStorage2D(t.TEXTURE_2D, R, g, v[0].width, v[0].height);
              for (let e = 0, r = v.length; e < r; e++)
                (m = v[e]),
                  M
                    ? n.texSubImage2D(t.TEXTURE_2D, e, 0, 0, p, _, m)
                    : n.texImage2D(t.TEXTURE_2D, e, g, p, _, m);
              i.generateMipmaps = !1;
            } else
              M
                ? (A && n.texStorage2D(t.TEXTURE_2D, R, g, r.width, r.height),
                  n.texSubImage2D(t.TEXTURE_2D, 0, 0, 0, p, _, r))
                : n.texImage2D(t.TEXTURE_2D, 0, g, p, _, r);
            T(i, f) && b(l),
              (d.__version = c.version),
              i.onUpdate && i.onUpdate(i);
          }
          e.__version = i.version;
        }
        function F(e, i, a, s, l, u) {
          const h = o.convert(a.format, a.colorSpace),
            c = o.convert(a.type),
            f = x(a.internalFormat, h, c, a.colorSpace);
          if (!r.get(i).__hasExternalTextures) {
            const e = Math.max(1, i.width >> u),
              r = Math.max(1, i.height >> u);
            l === t.TEXTURE_3D || l === t.TEXTURE_2D_ARRAY
              ? n.texImage3D(l, u, f, e, r, i.depth, 0, h, c, null)
              : n.texImage2D(l, u, f, e, r, 0, h, c, null);
          }
          n.bindFramebuffer(t.FRAMEBUFFER, e),
            H(i)
              ? d.framebufferTexture2DMultisampleEXT(
                  t.FRAMEBUFFER,
                  s,
                  l,
                  r.get(a).__webglTexture,
                  0,
                  k(i),
                )
              : (l === t.TEXTURE_2D ||
                  (l >= t.TEXTURE_CUBE_MAP_POSITIVE_X &&
                    l <= t.TEXTURE_CUBE_MAP_NEGATIVE_Z)) &&
                t.framebufferTexture2D(
                  t.FRAMEBUFFER,
                  s,
                  l,
                  r.get(a).__webglTexture,
                  u,
                ),
            n.bindFramebuffer(t.FRAMEBUFFER, null);
        }
        function B(e, n, r) {
          if (
            (t.bindRenderbuffer(t.RENDERBUFFER, e),
            n.depthBuffer && !n.stencilBuffer)
          ) {
            let i = t.DEPTH_COMPONENT16;
            if (r || H(n)) {
              const e = n.depthTexture;
              e &&
                e.isDepthTexture &&
                (e.type === wh
                  ? (i = t.DEPTH_COMPONENT32F)
                  : e.type === Rh && (i = t.DEPTH_COMPONENT24));
              const r = k(n);
              H(n)
                ? d.renderbufferStorageMultisampleEXT(
                    t.RENDERBUFFER,
                    r,
                    i,
                    n.width,
                    n.height,
                  )
                : t.renderbufferStorageMultisample(
                    t.RENDERBUFFER,
                    r,
                    i,
                    n.width,
                    n.height,
                  );
            } else t.renderbufferStorage(t.RENDERBUFFER, i, n.width, n.height);
            t.framebufferRenderbuffer(
              t.FRAMEBUFFER,
              t.DEPTH_ATTACHMENT,
              t.RENDERBUFFER,
              e,
            );
          } else if (n.depthBuffer && n.stencilBuffer) {
            const i = k(n);
            r && !1 === H(n)
              ? t.renderbufferStorageMultisample(
                  t.RENDERBUFFER,
                  i,
                  t.DEPTH24_STENCIL8,
                  n.width,
                  n.height,
                )
              : H(n)
                ? d.renderbufferStorageMultisampleEXT(
                    t.RENDERBUFFER,
                    i,
                    t.DEPTH24_STENCIL8,
                    n.width,
                    n.height,
                  )
                : t.renderbufferStorage(
                    t.RENDERBUFFER,
                    t.DEPTH_STENCIL,
                    n.width,
                    n.height,
                  ),
              t.framebufferRenderbuffer(
                t.FRAMEBUFFER,
                t.DEPTH_STENCIL_ATTACHMENT,
                t.RENDERBUFFER,
                e,
              );
          } else {
            const e =
              !0 === n.isWebGLMultipleRenderTargets ? n.texture : [n.texture];
            for (let i = 0; i < e.length; i++) {
              const a = e[i],
                s = o.convert(a.format, a.colorSpace),
                l = o.convert(a.type),
                u = x(a.internalFormat, s, l, a.colorSpace),
                h = k(n);
              r && !1 === H(n)
                ? t.renderbufferStorageMultisample(
                    t.RENDERBUFFER,
                    h,
                    u,
                    n.width,
                    n.height,
                  )
                : H(n)
                  ? d.renderbufferStorageMultisampleEXT(
                      t.RENDERBUFFER,
                      h,
                      u,
                      n.width,
                      n.height,
                    )
                  : t.renderbufferStorage(t.RENDERBUFFER, u, n.width, n.height);
            }
          }
          t.bindRenderbuffer(t.RENDERBUFFER, null);
        }
        function G(e) {
          const i = r.get(e),
            o = !0 === e.isWebGLCubeRenderTarget;
          if (e.depthTexture && !i.__autoAllocateDepthBuffer) {
            if (o)
              throw new Error(
                "target.depthTexture not supported in Cube render targets",
              );
            !(function (e, i) {
              if (i && i.isWebGLCubeRenderTarget)
                throw new Error(
                  "Depth Texture with cube render targets is not supported",
                );
              if (
                (n.bindFramebuffer(t.FRAMEBUFFER, e),
                !i.depthTexture || !i.depthTexture.isDepthTexture)
              )
                throw new Error(
                  "renderTarget.depthTexture must be an instance of THREE.DepthTexture",
                );
              (r.get(i.depthTexture).__webglTexture &&
                i.depthTexture.image.width === i.width &&
                i.depthTexture.image.height === i.height) ||
                ((i.depthTexture.image.width = i.width),
                (i.depthTexture.image.height = i.height),
                (i.depthTexture.needsUpdate = !0)),
                I(i.depthTexture, 0);
              const o = r.get(i.depthTexture).__webglTexture,
                a = k(i);
              if (i.depthTexture.format === Lh)
                H(i)
                  ? d.framebufferTexture2DMultisampleEXT(
                      t.FRAMEBUFFER,
                      t.DEPTH_ATTACHMENT,
                      t.TEXTURE_2D,
                      o,
                      0,
                      a,
                    )
                  : t.framebufferTexture2D(
                      t.FRAMEBUFFER,
                      t.DEPTH_ATTACHMENT,
                      t.TEXTURE_2D,
                      o,
                      0,
                    );
              else {
                if (i.depthTexture.format !== Dh)
                  throw new Error("Unknown depthTexture format");
                H(i)
                  ? d.framebufferTexture2DMultisampleEXT(
                      t.FRAMEBUFFER,
                      t.DEPTH_STENCIL_ATTACHMENT,
                      t.TEXTURE_2D,
                      o,
                      0,
                      a,
                    )
                  : t.framebufferTexture2D(
                      t.FRAMEBUFFER,
                      t.DEPTH_STENCIL_ATTACHMENT,
                      t.TEXTURE_2D,
                      o,
                      0,
                    );
              }
            })(i.__webglFramebuffer, e);
          } else if (o) {
            i.__webglDepthbuffer = [];
            for (let r = 0; r < 6; r++)
              n.bindFramebuffer(t.FRAMEBUFFER, i.__webglFramebuffer[r]),
                (i.__webglDepthbuffer[r] = t.createRenderbuffer()),
                B(i.__webglDepthbuffer[r], e, !1);
          } else
            n.bindFramebuffer(t.FRAMEBUFFER, i.__webglFramebuffer),
              (i.__webglDepthbuffer = t.createRenderbuffer()),
              B(i.__webglDepthbuffer, e, !1);
          n.bindFramebuffer(t.FRAMEBUFFER, null);
        }
        function k(t) {
          return Math.min(c, t.samples);
        }
        function H(t) {
          const n = r.get(t);
          return (
            s &&
            t.samples > 0 &&
            !0 === e.has("WEBGL_multisampled_render_to_texture") &&
            !1 !== n.__useRenderToTexture
          );
        }
        function z(t, n) {
          const r = t.colorSpace,
            i = t.format,
            o = t.type;
          return (
            !0 === t.isCompressedTexture ||
              t.format === tc ||
              (r !== Kh &&
                "" !== r &&
                (r === qh
                  ? !1 === s
                    ? !0 === e.has("EXT_sRGB") && i === Nh
                      ? ((t.format = tc),
                        (t.minFilter = xh),
                        (t.generateMipmaps = !1))
                      : (n = Nc.sRGBToLinear(n))
                    : (i === Nh && o === Mh) ||
                      console.warn(
                        "THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.",
                      )
                  : console.error(
                      "THREE.WebGLTextures: Unsupported texture color space:",
                      r,
                    ))),
            n
          );
        }
        (this.allocateTextureUnit = function () {
          const t = P;
          return (
            t >= l &&
              console.warn(
                "THREE.WebGLTextures: Trying to use " +
                  t +
                  " texture units while this GPU supports only " +
                  l,
              ),
            (P += 1),
            t
          );
        }),
          (this.resetTextureUnits = function () {
            P = 0;
          }),
          (this.setTexture2D = I),
          (this.setTexture2DArray = function (e, i) {
            const o = r.get(e);
            e.version > 0 && o.__version !== e.version
              ? U(o, e, i)
              : n.bindTexture(
                  t.TEXTURE_2D_ARRAY,
                  o.__webglTexture,
                  t.TEXTURE0 + i,
                );
          }),
          (this.setTexture3D = function (e, i) {
            const o = r.get(e);
            e.version > 0 && o.__version !== e.version
              ? U(o, e, i)
              : n.bindTexture(t.TEXTURE_3D, o.__webglTexture, t.TEXTURE0 + i);
          }),
          (this.setTextureCube = function (e, i) {
            const a = r.get(e);
            e.version > 0 && a.__version !== e.version
              ? (function (e, i, a) {
                  if (6 !== i.image.length) return;
                  const l = D(e, i),
                    h = i.source;
                  n.bindTexture(
                    t.TEXTURE_CUBE_MAP,
                    e.__webglTexture,
                    t.TEXTURE0 + a,
                  );
                  const c = r.get(h);
                  if (h.version !== c.__version || !0 === l) {
                    n.activeTexture(t.TEXTURE0 + a),
                      t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL, i.flipY),
                      t.pixelStorei(
                        t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                        i.premultiplyAlpha,
                      ),
                      t.pixelStorei(t.UNPACK_ALIGNMENT, i.unpackAlignment),
                      t.pixelStorei(
                        t.UNPACK_COLORSPACE_CONVERSION_WEBGL,
                        t.NONE,
                      );
                    const e =
                        i.isCompressedTexture || i.image[0].isCompressedTexture,
                      r = i.image[0] && i.image[0].isDataTexture,
                      d = [];
                    for (let t = 0; t < 6; t++)
                      (d[t] =
                        e || r
                          ? r
                            ? i.image[t].image
                            : i.image[t]
                          : y(i.image[t], !1, !0, u)),
                        (d[t] = z(i, d[t]));
                    const f = d[0],
                      p = E(f) || s,
                      m = o.convert(i.format, i.colorSpace),
                      _ = o.convert(i.type),
                      g = x(i.internalFormat, m, _, i.colorSpace),
                      v = s && !0 !== i.isVideoTexture,
                      M = void 0 === c.__version || !0 === l;
                    let A,
                      R = S(i, f, p);
                    if ((L(t.TEXTURE_CUBE_MAP, i, p), e)) {
                      v &&
                        M &&
                        n.texStorage2D(
                          t.TEXTURE_CUBE_MAP,
                          R,
                          g,
                          f.width,
                          f.height,
                        );
                      for (let e = 0; e < 6; e++) {
                        A = d[e].mipmaps;
                        for (let r = 0; r < A.length; r++) {
                          const o = A[r];
                          i.format !== Nh
                            ? null !== m
                              ? v
                                ? n.compressedTexSubImage2D(
                                    t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                    r,
                                    0,
                                    0,
                                    o.width,
                                    o.height,
                                    m,
                                    o.data,
                                  )
                                : n.compressedTexImage2D(
                                    t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                    r,
                                    g,
                                    o.width,
                                    o.height,
                                    0,
                                    o.data,
                                  )
                              : console.warn(
                                  "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()",
                                )
                            : v
                              ? n.texSubImage2D(
                                  t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                  r,
                                  0,
                                  0,
                                  o.width,
                                  o.height,
                                  m,
                                  _,
                                  o.data,
                                )
                              : n.texImage2D(
                                  t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                  r,
                                  g,
                                  o.width,
                                  o.height,
                                  0,
                                  m,
                                  _,
                                  o.data,
                                );
                        }
                      }
                    } else {
                      (A = i.mipmaps),
                        v &&
                          M &&
                          (A.length > 0 && R++,
                          n.texStorage2D(
                            t.TEXTURE_CUBE_MAP,
                            R,
                            g,
                            d[0].width,
                            d[0].height,
                          ));
                      for (let e = 0; e < 6; e++)
                        if (r) {
                          v
                            ? n.texSubImage2D(
                                t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                0,
                                0,
                                0,
                                d[e].width,
                                d[e].height,
                                m,
                                _,
                                d[e].data,
                              )
                            : n.texImage2D(
                                t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                0,
                                g,
                                d[e].width,
                                d[e].height,
                                0,
                                m,
                                _,
                                d[e].data,
                              );
                          for (let r = 0; r < A.length; r++) {
                            const i = A[r].image[e].image;
                            v
                              ? n.texSubImage2D(
                                  t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                  r + 1,
                                  0,
                                  0,
                                  i.width,
                                  i.height,
                                  m,
                                  _,
                                  i.data,
                                )
                              : n.texImage2D(
                                  t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                  r + 1,
                                  g,
                                  i.width,
                                  i.height,
                                  0,
                                  m,
                                  _,
                                  i.data,
                                );
                          }
                        } else {
                          v
                            ? n.texSubImage2D(
                                t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                0,
                                0,
                                0,
                                m,
                                _,
                                d[e],
                              )
                            : n.texImage2D(
                                t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                0,
                                g,
                                m,
                                _,
                                d[e],
                              );
                          for (let r = 0; r < A.length; r++) {
                            const i = A[r];
                            v
                              ? n.texSubImage2D(
                                  t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                  r + 1,
                                  0,
                                  0,
                                  m,
                                  _,
                                  i.image[e],
                                )
                              : n.texImage2D(
                                  t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                                  r + 1,
                                  g,
                                  m,
                                  _,
                                  i.image[e],
                                );
                          }
                        }
                    }
                    T(i, p) && b(t.TEXTURE_CUBE_MAP),
                      (c.__version = h.version),
                      i.onUpdate && i.onUpdate(i);
                  }
                  e.__version = i.version;
                })(a, e, i)
              : n.bindTexture(
                  t.TEXTURE_CUBE_MAP,
                  a.__webglTexture,
                  t.TEXTURE0 + i,
                );
          }),
          (this.rebindTextures = function (e, n, i) {
            const o = r.get(e);
            void 0 !== n &&
              F(
                o.__webglFramebuffer,
                e,
                e.texture,
                t.COLOR_ATTACHMENT0,
                t.TEXTURE_2D,
                0,
              ),
              void 0 !== i && G(e);
          }),
          (this.setupRenderTarget = function (e) {
            const l = e.texture,
              u = r.get(e),
              h = r.get(l);
            e.addEventListener("dispose", R),
              !0 !== e.isWebGLMultipleRenderTargets &&
                (void 0 === h.__webglTexture &&
                  (h.__webglTexture = t.createTexture()),
                (h.__version = l.version),
                a.memory.textures++);
            const c = !0 === e.isWebGLCubeRenderTarget,
              d = !0 === e.isWebGLMultipleRenderTargets,
              f = E(e) || s;
            if (c) {
              u.__webglFramebuffer = [];
              for (let e = 0; e < 6; e++)
                if (s && l.mipmaps && l.mipmaps.length > 0) {
                  u.__webglFramebuffer[e] = [];
                  for (let n = 0; n < l.mipmaps.length; n++)
                    u.__webglFramebuffer[e][n] = t.createFramebuffer();
                } else u.__webglFramebuffer[e] = t.createFramebuffer();
            } else {
              if (s && l.mipmaps && l.mipmaps.length > 0) {
                u.__webglFramebuffer = [];
                for (let e = 0; e < l.mipmaps.length; e++)
                  u.__webglFramebuffer[e] = t.createFramebuffer();
              } else u.__webglFramebuffer = t.createFramebuffer();
              if (d)
                if (i.drawBuffers) {
                  const n = e.texture;
                  for (let e = 0, i = n.length; e < i; e++) {
                    const i = r.get(n[e]);
                    void 0 === i.__webglTexture &&
                      ((i.__webglTexture = t.createTexture()),
                      a.memory.textures++);
                  }
                } else
                  console.warn(
                    "THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.",
                  );
              if (s && e.samples > 0 && !1 === H(e)) {
                const r = d ? l : [l];
                (u.__webglMultisampledFramebuffer = t.createFramebuffer()),
                  (u.__webglColorRenderbuffer = []),
                  n.bindFramebuffer(
                    t.FRAMEBUFFER,
                    u.__webglMultisampledFramebuffer,
                  );
                for (let n = 0; n < r.length; n++) {
                  const i = r[n];
                  (u.__webglColorRenderbuffer[n] = t.createRenderbuffer()),
                    t.bindRenderbuffer(
                      t.RENDERBUFFER,
                      u.__webglColorRenderbuffer[n],
                    );
                  const a = o.convert(i.format, i.colorSpace),
                    s = o.convert(i.type),
                    l = x(
                      i.internalFormat,
                      a,
                      s,
                      i.colorSpace,
                      !0 === e.isXRRenderTarget,
                    ),
                    h = k(e);
                  t.renderbufferStorageMultisample(
                    t.RENDERBUFFER,
                    h,
                    l,
                    e.width,
                    e.height,
                  ),
                    t.framebufferRenderbuffer(
                      t.FRAMEBUFFER,
                      t.COLOR_ATTACHMENT0 + n,
                      t.RENDERBUFFER,
                      u.__webglColorRenderbuffer[n],
                    );
                }
                t.bindRenderbuffer(t.RENDERBUFFER, null),
                  e.depthBuffer &&
                    ((u.__webglDepthRenderbuffer = t.createRenderbuffer()),
                    B(u.__webglDepthRenderbuffer, e, !0)),
                  n.bindFramebuffer(t.FRAMEBUFFER, null);
              }
            }
            if (c) {
              n.bindTexture(t.TEXTURE_CUBE_MAP, h.__webglTexture),
                L(t.TEXTURE_CUBE_MAP, l, f);
              for (let n = 0; n < 6; n++)
                if (s && l.mipmaps && l.mipmaps.length > 0)
                  for (let r = 0; r < l.mipmaps.length; r++)
                    F(
                      u.__webglFramebuffer[n][r],
                      e,
                      l,
                      t.COLOR_ATTACHMENT0,
                      t.TEXTURE_CUBE_MAP_POSITIVE_X + n,
                      r,
                    );
                else
                  F(
                    u.__webglFramebuffer[n],
                    e,
                    l,
                    t.COLOR_ATTACHMENT0,
                    t.TEXTURE_CUBE_MAP_POSITIVE_X + n,
                    0,
                  );
              T(l, f) && b(t.TEXTURE_CUBE_MAP), n.unbindTexture();
            } else if (d) {
              const i = e.texture;
              for (let o = 0, a = i.length; o < a; o++) {
                const a = i[o],
                  s = r.get(a);
                n.bindTexture(t.TEXTURE_2D, s.__webglTexture),
                  L(t.TEXTURE_2D, a, f),
                  F(
                    u.__webglFramebuffer,
                    e,
                    a,
                    t.COLOR_ATTACHMENT0 + o,
                    t.TEXTURE_2D,
                    0,
                  ),
                  T(a, f) && b(t.TEXTURE_2D);
              }
              n.unbindTexture();
            } else {
              let r = t.TEXTURE_2D;
              if (
                ((e.isWebGL3DRenderTarget || e.isWebGLArrayRenderTarget) &&
                  (s
                    ? (r = e.isWebGL3DRenderTarget
                        ? t.TEXTURE_3D
                        : t.TEXTURE_2D_ARRAY)
                    : console.error(
                        "THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.",
                      )),
                n.bindTexture(r, h.__webglTexture),
                L(r, l, f),
                s && l.mipmaps && l.mipmaps.length > 0)
              )
                for (let n = 0; n < l.mipmaps.length; n++)
                  F(u.__webglFramebuffer[n], e, l, t.COLOR_ATTACHMENT0, r, n);
              else F(u.__webglFramebuffer, e, l, t.COLOR_ATTACHMENT0, r, 0);
              T(l, f) && b(r), n.unbindTexture();
            }
            e.depthBuffer && G(e);
          }),
          (this.updateRenderTargetMipmap = function (e) {
            const i = E(e) || s,
              o =
                !0 === e.isWebGLMultipleRenderTargets ? e.texture : [e.texture];
            for (let a = 0, s = o.length; a < s; a++) {
              const s = o[a];
              if (T(s, i)) {
                const i = e.isWebGLCubeRenderTarget
                    ? t.TEXTURE_CUBE_MAP
                    : t.TEXTURE_2D,
                  o = r.get(s).__webglTexture;
                n.bindTexture(i, o), b(i), n.unbindTexture();
              }
            }
          }),
          (this.updateMultisampleRenderTarget = function (e) {
            if (s && e.samples > 0 && !1 === H(e)) {
              const i = e.isWebGLMultipleRenderTargets
                  ? e.texture
                  : [e.texture],
                o = e.width,
                a = e.height;
              let s = t.COLOR_BUFFER_BIT;
              const l = [],
                u = e.stencilBuffer
                  ? t.DEPTH_STENCIL_ATTACHMENT
                  : t.DEPTH_ATTACHMENT,
                h = r.get(e),
                c = !0 === e.isWebGLMultipleRenderTargets;
              if (c)
                for (let e = 0; e < i.length; e++)
                  n.bindFramebuffer(
                    t.FRAMEBUFFER,
                    h.__webglMultisampledFramebuffer,
                  ),
                    t.framebufferRenderbuffer(
                      t.FRAMEBUFFER,
                      t.COLOR_ATTACHMENT0 + e,
                      t.RENDERBUFFER,
                      null,
                    ),
                    n.bindFramebuffer(t.FRAMEBUFFER, h.__webglFramebuffer),
                    t.framebufferTexture2D(
                      t.DRAW_FRAMEBUFFER,
                      t.COLOR_ATTACHMENT0 + e,
                      t.TEXTURE_2D,
                      null,
                      0,
                    );
              n.bindFramebuffer(
                t.READ_FRAMEBUFFER,
                h.__webglMultisampledFramebuffer,
              ),
                n.bindFramebuffer(t.DRAW_FRAMEBUFFER, h.__webglFramebuffer);
              for (let n = 0; n < i.length; n++) {
                l.push(t.COLOR_ATTACHMENT0 + n), e.depthBuffer && l.push(u);
                const d =
                  void 0 !== h.__ignoreDepthValues && h.__ignoreDepthValues;
                if (
                  (!1 === d &&
                    (e.depthBuffer && (s |= t.DEPTH_BUFFER_BIT),
                    e.stencilBuffer && (s |= t.STENCIL_BUFFER_BIT)),
                  c &&
                    t.framebufferRenderbuffer(
                      t.READ_FRAMEBUFFER,
                      t.COLOR_ATTACHMENT0,
                      t.RENDERBUFFER,
                      h.__webglColorRenderbuffer[n],
                    ),
                  !0 === d &&
                    (t.invalidateFramebuffer(t.READ_FRAMEBUFFER, [u]),
                    t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER, [u])),
                  c)
                ) {
                  const e = r.get(i[n]).__webglTexture;
                  t.framebufferTexture2D(
                    t.DRAW_FRAMEBUFFER,
                    t.COLOR_ATTACHMENT0,
                    t.TEXTURE_2D,
                    e,
                    0,
                  );
                }
                t.blitFramebuffer(0, 0, o, a, 0, 0, o, a, s, t.NEAREST),
                  f && t.invalidateFramebuffer(t.READ_FRAMEBUFFER, l);
              }
              if (
                (n.bindFramebuffer(t.READ_FRAMEBUFFER, null),
                n.bindFramebuffer(t.DRAW_FRAMEBUFFER, null),
                c)
              )
                for (let e = 0; e < i.length; e++) {
                  n.bindFramebuffer(
                    t.FRAMEBUFFER,
                    h.__webglMultisampledFramebuffer,
                  ),
                    t.framebufferRenderbuffer(
                      t.FRAMEBUFFER,
                      t.COLOR_ATTACHMENT0 + e,
                      t.RENDERBUFFER,
                      h.__webglColorRenderbuffer[e],
                    );
                  const o = r.get(i[e]).__webglTexture;
                  n.bindFramebuffer(t.FRAMEBUFFER, h.__webglFramebuffer),
                    t.framebufferTexture2D(
                      t.DRAW_FRAMEBUFFER,
                      t.COLOR_ATTACHMENT0 + e,
                      t.TEXTURE_2D,
                      o,
                      0,
                    );
                }
              n.bindFramebuffer(
                t.DRAW_FRAMEBUFFER,
                h.__webglMultisampledFramebuffer,
              );
            }
          }),
          (this.setupDepthRenderbuffer = G),
          (this.setupFrameBufferTexture = F),
          (this.useMultisampledRTT = H);
      }
      function U_(t, e, n) {
        const r = n.isWebGL2;
        return {
          convert: function (n, i = "") {
            let o;
            if (n === Mh) return t.UNSIGNED_BYTE;
            if (n === Ih) return t.UNSIGNED_SHORT_4_4_4_4;
            if (n === Oh) return t.UNSIGNED_SHORT_5_5_5_1;
            if (1010 === n) return t.BYTE;
            if (1011 === n) return t.SHORT;
            if (n === Ah) return t.UNSIGNED_SHORT;
            if (1013 === n) return t.INT;
            if (n === Rh) return t.UNSIGNED_INT;
            if (n === wh) return t.FLOAT;
            if (n === Ph)
              return r
                ? t.HALF_FLOAT
                : ((o = e.get("OES_texture_half_float")),
                  null !== o ? o.HALF_FLOAT_OES : null);
            if (1021 === n) return t.ALPHA;
            if (n === Nh) return t.RGBA;
            if (1024 === n) return t.LUMINANCE;
            if (1025 === n) return t.LUMINANCE_ALPHA;
            if (n === Lh) return t.DEPTH_COMPONENT;
            if (n === Dh) return t.DEPTH_STENCIL;
            if (n === tc)
              return (
                (o = e.get("EXT_sRGB")), null !== o ? o.SRGB_ALPHA_EXT : null
              );
            if (1028 === n) return t.RED;
            if (n === Uh) return t.RED_INTEGER;
            if (1030 === n) return t.RG;
            if (n === Fh) return t.RG_INTEGER;
            if (n === Bh) return t.RGBA_INTEGER;
            if (n === Gh || n === kh || n === Hh || n === zh)
              if (i === qh) {
                if (
                  ((o = e.get("WEBGL_compressed_texture_s3tc_srgb")),
                  null === o)
                )
                  return null;
                if (n === Gh) return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;
                if (n === kh) return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
                if (n === Hh) return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
                if (n === zh) return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
              } else {
                if (((o = e.get("WEBGL_compressed_texture_s3tc")), null === o))
                  return null;
                if (n === Gh) return o.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (n === kh) return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (n === Hh) return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (n === zh) return o.COMPRESSED_RGBA_S3TC_DXT5_EXT;
              }
            if (35840 === n || 35841 === n || 35842 === n || 35843 === n) {
              if (((o = e.get("WEBGL_compressed_texture_pvrtc")), null === o))
                return null;
              if (35840 === n) return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
              if (35841 === n) return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
              if (35842 === n) return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
              if (35843 === n) return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
            }
            if (36196 === n)
              return (
                (o = e.get("WEBGL_compressed_texture_etc1")),
                null !== o ? o.COMPRESSED_RGB_ETC1_WEBGL : null
              );
            if (37492 === n || 37496 === n) {
              if (((o = e.get("WEBGL_compressed_texture_etc")), null === o))
                return null;
              if (37492 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ETC2
                  : o.COMPRESSED_RGB8_ETC2;
              if (37496 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC
                  : o.COMPRESSED_RGBA8_ETC2_EAC;
            }
            if (
              37808 === n ||
              37809 === n ||
              37810 === n ||
              37811 === n ||
              37812 === n ||
              37813 === n ||
              37814 === n ||
              37815 === n ||
              37816 === n ||
              37817 === n ||
              37818 === n ||
              37819 === n ||
              37820 === n ||
              37821 === n
            ) {
              if (((o = e.get("WEBGL_compressed_texture_astc")), null === o))
                return null;
              if (37808 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR
                  : o.COMPRESSED_RGBA_ASTC_4x4_KHR;
              if (37809 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR
                  : o.COMPRESSED_RGBA_ASTC_5x4_KHR;
              if (37810 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR
                  : o.COMPRESSED_RGBA_ASTC_5x5_KHR;
              if (37811 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR
                  : o.COMPRESSED_RGBA_ASTC_6x5_KHR;
              if (37812 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR
                  : o.COMPRESSED_RGBA_ASTC_6x6_KHR;
              if (37813 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR
                  : o.COMPRESSED_RGBA_ASTC_8x5_KHR;
              if (37814 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR
                  : o.COMPRESSED_RGBA_ASTC_8x6_KHR;
              if (37815 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR
                  : o.COMPRESSED_RGBA_ASTC_8x8_KHR;
              if (37816 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR
                  : o.COMPRESSED_RGBA_ASTC_10x5_KHR;
              if (37817 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR
                  : o.COMPRESSED_RGBA_ASTC_10x6_KHR;
              if (37818 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR
                  : o.COMPRESSED_RGBA_ASTC_10x8_KHR;
              if (37819 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR
                  : o.COMPRESSED_RGBA_ASTC_10x10_KHR;
              if (37820 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR
                  : o.COMPRESSED_RGBA_ASTC_12x10_KHR;
              if (37821 === n)
                return i === qh
                  ? o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR
                  : o.COMPRESSED_RGBA_ASTC_12x12_KHR;
            }
            if (n === Vh) {
              if (((o = e.get("EXT_texture_compression_bptc")), null === o))
                return null;
              if (n === Vh)
                return i === qh
                  ? o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT
                  : o.COMPRESSED_RGBA_BPTC_UNORM_EXT;
            }
            if (36283 === n || 36284 === n || 36285 === n || 36286 === n) {
              if (((o = e.get("EXT_texture_compression_rgtc")), null === o))
                return null;
              if (n === Vh) return o.COMPRESSED_RED_RGTC1_EXT;
              if (36284 === n) return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;
              if (36285 === n) return o.COMPRESSED_RED_GREEN_RGTC2_EXT;
              if (36286 === n) return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;
            }
            return n === Ch
              ? r
                ? t.UNSIGNED_INT_24_8
                : ((o = e.get("WEBGL_depth_texture")),
                  null !== o ? o.UNSIGNED_INT_24_8_WEBGL : null)
              : void 0 !== t[n]
                ? t[n]
                : null;
          },
        };
      }
      class F_ extends ep {
        constructor(t = []) {
          super(), (this.isArrayCamera = !0), (this.cameras = t);
        }
      }
      class B_ extends jd {
        constructor() {
          super(), (this.isGroup = !0), (this.type = "Group");
        }
      }
      const G_ = { type: "move" };
      class k_ {
        constructor() {
          (this._targetRay = null), (this._grip = null), (this._hand = null);
        }
        getHandSpace() {
          return (
            null === this._hand &&
              ((this._hand = new B_()),
              (this._hand.matrixAutoUpdate = !1),
              (this._hand.visible = !1),
              (this._hand.joints = {}),
              (this._hand.inputState = { pinching: !1 })),
            this._hand
          );
        }
        getTargetRaySpace() {
          return (
            null === this._targetRay &&
              ((this._targetRay = new B_()),
              (this._targetRay.matrixAutoUpdate = !1),
              (this._targetRay.visible = !1),
              (this._targetRay.hasLinearVelocity = !1),
              (this._targetRay.linearVelocity = new Wc()),
              (this._targetRay.hasAngularVelocity = !1),
              (this._targetRay.angularVelocity = new Wc())),
            this._targetRay
          );
        }
        getGripSpace() {
          return (
            null === this._grip &&
              ((this._grip = new B_()),
              (this._grip.matrixAutoUpdate = !1),
              (this._grip.visible = !1),
              (this._grip.hasLinearVelocity = !1),
              (this._grip.linearVelocity = new Wc()),
              (this._grip.hasAngularVelocity = !1),
              (this._grip.angularVelocity = new Wc())),
            this._grip
          );
        }
        dispatchEvent(t) {
          return (
            null !== this._targetRay && this._targetRay.dispatchEvent(t),
            null !== this._grip && this._grip.dispatchEvent(t),
            null !== this._hand && this._hand.dispatchEvent(t),
            this
          );
        }
        connect(t) {
          if (t && t.hand) {
            const e = this._hand;
            if (e) for (const n of t.hand.values()) this._getHandJoint(e, n);
          }
          return this.dispatchEvent({ type: "connected", data: t }), this;
        }
        disconnect(t) {
          return (
            this.dispatchEvent({ type: "disconnected", data: t }),
            null !== this._targetRay && (this._targetRay.visible = !1),
            null !== this._grip && (this._grip.visible = !1),
            null !== this._hand && (this._hand.visible = !1),
            this
          );
        }
        update(t, e, n) {
          let r = null,
            i = null,
            o = null;
          const a = this._targetRay,
            s = this._grip,
            l = this._hand;
          if (t && "visible-blurred" !== e.session.visibilityState) {
            if (l && t.hand) {
              o = !0;
              for (const r of t.hand.values()) {
                const t = e.getJointPose(r, n),
                  i = this._getHandJoint(l, r);
                null !== t &&
                  (i.matrix.fromArray(t.transform.matrix),
                  i.matrix.decompose(i.position, i.rotation, i.scale),
                  (i.matrixWorldNeedsUpdate = !0),
                  (i.jointRadius = t.radius)),
                  (i.visible = null !== t);
              }
              const r = l.joints["index-finger-tip"],
                i = l.joints["thumb-tip"],
                a = r.position.distanceTo(i.position),
                s = 0.02,
                u = 0.005;
              l.inputState.pinching && a > s + u
                ? ((l.inputState.pinching = !1),
                  this.dispatchEvent({
                    type: "pinchend",
                    handedness: t.handedness,
                    target: this,
                  }))
                : !l.inputState.pinching &&
                  a <= s - u &&
                  ((l.inputState.pinching = !0),
                  this.dispatchEvent({
                    type: "pinchstart",
                    handedness: t.handedness,
                    target: this,
                  }));
            } else
              null !== s &&
                t.gripSpace &&
                ((i = e.getPose(t.gripSpace, n)),
                null !== i &&
                  (s.matrix.fromArray(i.transform.matrix),
                  s.matrix.decompose(s.position, s.rotation, s.scale),
                  (s.matrixWorldNeedsUpdate = !0),
                  i.linearVelocity
                    ? ((s.hasLinearVelocity = !0),
                      s.linearVelocity.copy(i.linearVelocity))
                    : (s.hasLinearVelocity = !1),
                  i.angularVelocity
                    ? ((s.hasAngularVelocity = !0),
                      s.angularVelocity.copy(i.angularVelocity))
                    : (s.hasAngularVelocity = !1)));
            null !== a &&
              ((r = e.getPose(t.targetRaySpace, n)),
              null === r && null !== i && (r = i),
              null !== r &&
                (a.matrix.fromArray(r.transform.matrix),
                a.matrix.decompose(a.position, a.rotation, a.scale),
                (a.matrixWorldNeedsUpdate = !0),
                r.linearVelocity
                  ? ((a.hasLinearVelocity = !0),
                    a.linearVelocity.copy(r.linearVelocity))
                  : (a.hasLinearVelocity = !1),
                r.angularVelocity
                  ? ((a.hasAngularVelocity = !0),
                    a.angularVelocity.copy(r.angularVelocity))
                  : (a.hasAngularVelocity = !1),
                this.dispatchEvent(G_)));
          }
          return (
            null !== a && (a.visible = null !== r),
            null !== s && (s.visible = null !== i),
            null !== l && (l.visible = null !== o),
            this
          );
        }
        _getHandJoint(t, e) {
          if (void 0 === t.joints[e.jointName]) {
            const n = new B_();
            (n.matrixAutoUpdate = !1),
              (n.visible = !1),
              (t.joints[e.jointName] = n),
              t.add(n);
          }
          return t.joints[e.jointName];
        }
      }
      class H_ extends Bc {
        constructor(t, e, n, r, i, o, a, s, l, u) {
          if ((u = void 0 !== u ? u : Lh) !== Lh && u !== Dh)
            throw new Error(
              "DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat",
            );
          void 0 === n && u === Lh && (n = Rh),
            void 0 === n && u === Dh && (n = Ch),
            super(null, r, i, o, a, s, u, n, l),
            (this.isDepthTexture = !0),
            (this.image = { width: t, height: e }),
            (this.magFilter = void 0 !== a ? a : Th),
            (this.minFilter = void 0 !== s ? s : Th),
            (this.flipY = !1),
            (this.generateMipmaps = !1),
            (this.compareFunction = null);
        }
        copy(t) {
          return (
            super.copy(t), (this.compareFunction = t.compareFunction), this
          );
        }
        toJSON(t) {
          const e = super.toJSON(t);
          return (
            null !== this.compareFunction &&
              (e.compareFunction = this.compareFunction),
            e
          );
        }
      }
      class z_ extends rc {
        constructor(t, e) {
          super();
          const n = this;
          let r = null,
            i = 1,
            o = null,
            a = "local-floor",
            s = 1,
            l = null,
            u = null,
            h = null,
            c = null,
            d = null,
            f = null;
          const p = e.getContextAttributes();
          let m = null,
            _ = null;
          const g = [],
            v = [],
            y = new ep();
          y.layers.enable(1), (y.viewport = new Gc());
          const E = new ep();
          E.layers.enable(2), (E.viewport = new Gc());
          const T = [y, E],
            b = new F_();
          b.layers.enable(1), b.layers.enable(2);
          let x = null,
            S = null;
          function M(t) {
            const e = v.indexOf(t.inputSource);
            if (-1 === e) return;
            const n = g[e];
            void 0 !== n &&
              (n.update(t.inputSource, t.frame, l || o),
              n.dispatchEvent({ type: t.type, data: t.inputSource }));
          }
          function A() {
            r.removeEventListener("select", M),
              r.removeEventListener("selectstart", M),
              r.removeEventListener("selectend", M),
              r.removeEventListener("squeeze", M),
              r.removeEventListener("squeezestart", M),
              r.removeEventListener("squeezeend", M),
              r.removeEventListener("end", A),
              r.removeEventListener("inputsourceschange", R);
            for (let t = 0; t < g.length; t++) {
              const e = v[t];
              null !== e && ((v[t] = null), g[t].disconnect(e));
            }
            (x = null),
              (S = null),
              t.setRenderTarget(m),
              (d = null),
              (c = null),
              (h = null),
              (r = null),
              (_ = null),
              C.stop(),
              (n.isPresenting = !1),
              n.dispatchEvent({ type: "sessionend" });
          }
          function R(t) {
            for (let e = 0; e < t.removed.length; e++) {
              const n = t.removed[e],
                r = v.indexOf(n);
              r >= 0 && ((v[r] = null), g[r].disconnect(n));
            }
            for (let e = 0; e < t.added.length; e++) {
              const n = t.added[e];
              let r = v.indexOf(n);
              if (-1 === r) {
                for (let t = 0; t < g.length; t++) {
                  if (t >= v.length) {
                    v.push(n), (r = t);
                    break;
                  }
                  if (null === v[t]) {
                    (v[t] = n), (r = t);
                    break;
                  }
                }
                if (-1 === r) break;
              }
              const i = g[r];
              i && i.connect(n);
            }
          }
          (this.cameraAutoUpdate = !0),
            (this.enabled = !1),
            (this.isPresenting = !1),
            (this.getController = function (t) {
              let e = g[t];
              return (
                void 0 === e && ((e = new k_()), (g[t] = e)),
                e.getTargetRaySpace()
              );
            }),
            (this.getControllerGrip = function (t) {
              let e = g[t];
              return (
                void 0 === e && ((e = new k_()), (g[t] = e)), e.getGripSpace()
              );
            }),
            (this.getHand = function (t) {
              let e = g[t];
              return (
                void 0 === e && ((e = new k_()), (g[t] = e)), e.getHandSpace()
              );
            }),
            (this.setFramebufferScaleFactor = function (t) {
              (i = t),
                !0 === n.isPresenting &&
                  console.warn(
                    "THREE.WebXRManager: Cannot change framebuffer scale while presenting.",
                  );
            }),
            (this.setReferenceSpaceType = function (t) {
              (a = t),
                !0 === n.isPresenting &&
                  console.warn(
                    "THREE.WebXRManager: Cannot change reference space type while presenting.",
                  );
            }),
            (this.getReferenceSpace = function () {
              return l || o;
            }),
            (this.setReferenceSpace = function (t) {
              l = t;
            }),
            (this.getBaseLayer = function () {
              return null !== c ? c : d;
            }),
            (this.getBinding = function () {
              return h;
            }),
            (this.getFrame = function () {
              return f;
            }),
            (this.getSession = function () {
              return r;
            }),
            (this.setSession = async function (u) {
              if (((r = u), null !== r)) {
                if (
                  ((m = t.getRenderTarget()),
                  r.addEventListener("select", M),
                  r.addEventListener("selectstart", M),
                  r.addEventListener("selectend", M),
                  r.addEventListener("squeeze", M),
                  r.addEventListener("squeezestart", M),
                  r.addEventListener("squeezeend", M),
                  r.addEventListener("end", A),
                  r.addEventListener("inputsourceschange", R),
                  !0 !== p.xrCompatible && (await e.makeXRCompatible()),
                  void 0 === r.renderState.layers ||
                    !1 === t.capabilities.isWebGL2)
                ) {
                  const n = {
                    antialias: void 0 !== r.renderState.layers || p.antialias,
                    alpha: !0,
                    depth: p.depth,
                    stencil: p.stencil,
                    framebufferScaleFactor: i,
                  };
                  (d = new XRWebGLLayer(r, e, n)),
                    r.updateRenderState({ baseLayer: d }),
                    (_ = new Hc(d.framebufferWidth, d.framebufferHeight, {
                      format: Nh,
                      type: Mh,
                      colorSpace: t.outputColorSpace,
                      stencilBuffer: p.stencil,
                    }));
                } else {
                  let n = null,
                    o = null,
                    a = null;
                  p.depth &&
                    ((a = p.stencil ? e.DEPTH24_STENCIL8 : e.DEPTH_COMPONENT24),
                    (n = p.stencil ? Dh : Lh),
                    (o = p.stencil ? Ch : Rh));
                  const s = {
                    colorFormat: e.RGBA8,
                    depthFormat: a,
                    scaleFactor: i,
                  };
                  (h = new XRWebGLBinding(r, e)),
                    (c = h.createProjectionLayer(s)),
                    r.updateRenderState({ layers: [c] }),
                    (_ = new Hc(c.textureWidth, c.textureHeight, {
                      format: Nh,
                      type: Mh,
                      depthTexture: new H_(
                        c.textureWidth,
                        c.textureHeight,
                        o,
                        void 0,
                        void 0,
                        void 0,
                        void 0,
                        void 0,
                        void 0,
                        n,
                      ),
                      stencilBuffer: p.stencil,
                      colorSpace: t.outputColorSpace,
                      samples: p.antialias ? 4 : 0,
                    })),
                    (t.properties.get(_).__ignoreDepthValues =
                      c.ignoreDepthValues);
                }
                (_.isXRRenderTarget = !0),
                  this.setFoveation(s),
                  (l = null),
                  (o = await r.requestReferenceSpace(a)),
                  C.setContext(r),
                  C.start(),
                  (n.isPresenting = !0),
                  n.dispatchEvent({ type: "sessionstart" });
              }
            }),
            (this.getEnvironmentBlendMode = function () {
              if (null !== r) return r.environmentBlendMode;
            });
          const w = new Wc(),
            P = new Wc();
          function I(t, e) {
            null === e
              ? t.matrixWorld.copy(t.matrix)
              : t.matrixWorld.multiplyMatrices(e.matrixWorld, t.matrix),
              t.matrixWorldInverse.copy(t.matrixWorld).invert();
          }
          (this.updateCamera = function (t) {
            if (null === r) return;
            (b.near = E.near = y.near = t.near),
              (b.far = E.far = y.far = t.far),
              (x === b.near && S === b.far) ||
                (r.updateRenderState({ depthNear: b.near, depthFar: b.far }),
                (x = b.near),
                (S = b.far));
            const e = t.parent,
              n = b.cameras;
            I(b, e);
            for (let t = 0; t < n.length; t++) I(n[t], e);
            2 === n.length
              ? (function (t, e, n) {
                  w.setFromMatrixPosition(e.matrixWorld),
                    P.setFromMatrixPosition(n.matrixWorld);
                  const r = w.distanceTo(P),
                    i = e.projectionMatrix.elements,
                    o = n.projectionMatrix.elements,
                    a = i[14] / (i[10] - 1),
                    s = i[14] / (i[10] + 1),
                    l = (i[9] + 1) / i[5],
                    u = (i[9] - 1) / i[5],
                    h = (i[8] - 1) / i[0],
                    c = (o[8] + 1) / o[0],
                    d = a * h,
                    f = a * c,
                    p = r / (-h + c),
                    m = p * -h;
                  e.matrixWorld.decompose(t.position, t.quaternion, t.scale),
                    t.translateX(m),
                    t.translateZ(p),
                    t.matrixWorld.compose(t.position, t.quaternion, t.scale),
                    t.matrixWorldInverse.copy(t.matrixWorld).invert();
                  const _ = a + p,
                    g = s + p,
                    v = d - m,
                    y = f + (r - m),
                    E = ((l * s) / g) * _,
                    T = ((u * s) / g) * _;
                  t.projectionMatrix.makePerspective(v, y, E, T, _, g),
                    t.projectionMatrixInverse.copy(t.projectionMatrix).invert();
                })(b, y, E)
              : b.projectionMatrix.copy(y.projectionMatrix),
              (function (t, e, n) {
                null === n
                  ? t.matrix.copy(e.matrixWorld)
                  : (t.matrix.copy(n.matrixWorld),
                    t.matrix.invert(),
                    t.matrix.multiply(e.matrixWorld)),
                  t.matrix.decompose(t.position, t.quaternion, t.scale),
                  t.updateMatrixWorld(!0);
                const r = t.children;
                for (let t = 0, e = r.length; t < e; t++)
                  r[t].updateMatrixWorld(!0);
                t.projectionMatrix.copy(e.projectionMatrix),
                  t.projectionMatrixInverse.copy(e.projectionMatrixInverse),
                  t.isPerspectiveCamera &&
                    ((t.fov =
                      2 * ac * Math.atan(1 / t.projectionMatrix.elements[5])),
                    (t.zoom = 1));
              })(t, b, e);
          }),
            (this.getCamera = function () {
              return b;
            }),
            (this.getFoveation = function () {
              if (null !== c || null !== d) return s;
            }),
            (this.setFoveation = function (t) {
              (s = t),
                null !== c && (c.fixedFoveation = t),
                null !== d &&
                  void 0 !== d.fixedFoveation &&
                  (d.fixedFoveation = t);
            });
          let O = null;
          const C = new fp();
          C.setAnimationLoop(function (e, r) {
            if (((u = r.getViewerPose(l || o)), (f = r), null !== u)) {
              const e = u.views;
              null !== d &&
                (t.setRenderTargetFramebuffer(_, d.framebuffer),
                t.setRenderTarget(_));
              let n = !1;
              e.length !== b.cameras.length &&
                ((b.cameras.length = 0), (n = !0));
              for (let r = 0; r < e.length; r++) {
                const i = e[r];
                let o = null;
                if (null !== d) o = d.getViewport(i);
                else {
                  const e = h.getViewSubImage(c, i);
                  (o = e.viewport),
                    0 === r &&
                      (t.setRenderTargetTextures(
                        _,
                        e.colorTexture,
                        c.ignoreDepthValues ? void 0 : e.depthStencilTexture,
                      ),
                      t.setRenderTarget(_));
                }
                let a = T[r];
                void 0 === a &&
                  ((a = new ep()),
                  a.layers.enable(r),
                  (a.viewport = new Gc()),
                  (T[r] = a)),
                  a.matrix.fromArray(i.transform.matrix),
                  a.matrix.decompose(a.position, a.quaternion, a.scale),
                  a.projectionMatrix.fromArray(i.projectionMatrix),
                  a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),
                  a.viewport.set(o.x, o.y, o.width, o.height),
                  0 === r &&
                    (b.matrix.copy(a.matrix),
                    b.matrix.decompose(b.position, b.quaternion, b.scale)),
                  !0 === n && b.cameras.push(a);
              }
            }
            for (let t = 0; t < g.length; t++) {
              const e = v[t],
                n = g[t];
              null !== e && void 0 !== n && n.update(e, r, l || o);
            }
            O && O(e, r),
              r.detectedPlanes &&
                n.dispatchEvent({ type: "planesdetected", data: r }),
              (f = null);
          }),
            (this.setAnimationLoop = function (t) {
              O = t;
            }),
            (this.dispose = function () {});
        }
      }
      function V_(t, e) {
        function n(t, e) {
          !0 === t.matrixAutoUpdate && t.updateMatrix(), e.value.copy(t.matrix);
        }
        function r(r, i) {
          (r.opacity.value = i.opacity),
            i.color && r.diffuse.value.copy(i.color),
            i.emissive &&
              r.emissive.value
                .copy(i.emissive)
                .multiplyScalar(i.emissiveIntensity),
            i.map && ((r.map.value = i.map), n(i.map, r.mapTransform)),
            i.alphaMap &&
              ((r.alphaMap.value = i.alphaMap),
              n(i.alphaMap, r.alphaMapTransform)),
            i.bumpMap &&
              ((r.bumpMap.value = i.bumpMap),
              n(i.bumpMap, r.bumpMapTransform),
              (r.bumpScale.value = i.bumpScale),
              i.side === nh && (r.bumpScale.value *= -1)),
            i.normalMap &&
              ((r.normalMap.value = i.normalMap),
              n(i.normalMap, r.normalMapTransform),
              r.normalScale.value.copy(i.normalScale),
              i.side === nh && r.normalScale.value.negate()),
            i.displacementMap &&
              ((r.displacementMap.value = i.displacementMap),
              n(i.displacementMap, r.displacementMapTransform),
              (r.displacementScale.value = i.displacementScale),
              (r.displacementBias.value = i.displacementBias)),
            i.emissiveMap &&
              ((r.emissiveMap.value = i.emissiveMap),
              n(i.emissiveMap, r.emissiveMapTransform)),
            i.specularMap &&
              ((r.specularMap.value = i.specularMap),
              n(i.specularMap, r.specularMapTransform)),
            i.alphaTest > 0 && (r.alphaTest.value = i.alphaTest);
          const o = e.get(i).envMap;
          if (
            (o &&
              ((r.envMap.value = o),
              (r.flipEnvMap.value =
                o.isCubeTexture && !1 === o.isRenderTargetTexture ? -1 : 1),
              (r.reflectivity.value = i.reflectivity),
              (r.ior.value = i.ior),
              (r.refractionRatio.value = i.refractionRatio)),
            i.lightMap)
          ) {
            r.lightMap.value = i.lightMap;
            const e = !0 === t._useLegacyLights ? Math.PI : 1;
            (r.lightMapIntensity.value = i.lightMapIntensity * e),
              n(i.lightMap, r.lightMapTransform);
          }
          i.aoMap &&
            ((r.aoMap.value = i.aoMap),
            (r.aoMapIntensity.value = i.aoMapIntensity),
            n(i.aoMap, r.aoMapTransform));
        }
        return {
          refreshFogUniforms: function (e, n) {
            n.color.getRGB(e.fogColor.value, Qf(t)),
              n.isFog
                ? ((e.fogNear.value = n.near), (e.fogFar.value = n.far))
                : n.isFogExp2 && (e.fogDensity.value = n.density);
          },
          refreshMaterialUniforms: function (t, i, o, a, s) {
            i.isMeshBasicMaterial || i.isMeshLambertMaterial
              ? r(t, i)
              : i.isMeshToonMaterial
                ? (r(t, i),
                  (function (t, e) {
                    e.gradientMap && (t.gradientMap.value = e.gradientMap);
                  })(t, i))
                : i.isMeshPhongMaterial
                  ? (r(t, i),
                    (function (t, e) {
                      t.specular.value.copy(e.specular),
                        (t.shininess.value = Math.max(e.shininess, 1e-4));
                    })(t, i))
                  : i.isMeshStandardMaterial
                    ? (r(t, i),
                      (function (t, r) {
                        (t.metalness.value = r.metalness),
                          r.metalnessMap &&
                            ((t.metalnessMap.value = r.metalnessMap),
                            n(r.metalnessMap, t.metalnessMapTransform)),
                          (t.roughness.value = r.roughness),
                          r.roughnessMap &&
                            ((t.roughnessMap.value = r.roughnessMap),
                            n(r.roughnessMap, t.roughnessMapTransform));
                        e.get(r).envMap &&
                          (t.envMapIntensity.value = r.envMapIntensity);
                      })(t, i),
                      i.isMeshPhysicalMaterial &&
                        (function (t, e, r) {
                          (t.ior.value = e.ior),
                            e.sheen > 0 &&
                              (t.sheenColor.value
                                .copy(e.sheenColor)
                                .multiplyScalar(e.sheen),
                              (t.sheenRoughness.value = e.sheenRoughness),
                              e.sheenColorMap &&
                                ((t.sheenColorMap.value = e.sheenColorMap),
                                n(e.sheenColorMap, t.sheenColorMapTransform)),
                              e.sheenRoughnessMap &&
                                ((t.sheenRoughnessMap.value =
                                  e.sheenRoughnessMap),
                                n(
                                  e.sheenRoughnessMap,
                                  t.sheenRoughnessMapTransform,
                                ))),
                            e.clearcoat > 0 &&
                              ((t.clearcoat.value = e.clearcoat),
                              (t.clearcoatRoughness.value =
                                e.clearcoatRoughness),
                              e.clearcoatMap &&
                                ((t.clearcoatMap.value = e.clearcoatMap),
                                n(e.clearcoatMap, t.clearcoatMapTransform)),
                              e.clearcoatRoughnessMap &&
                                ((t.clearcoatRoughnessMap.value =
                                  e.clearcoatRoughnessMap),
                                n(
                                  e.clearcoatRoughnessMap,
                                  t.clearcoatRoughnessMapTransform,
                                )),
                              e.clearcoatNormalMap &&
                                ((t.clearcoatNormalMap.value =
                                  e.clearcoatNormalMap),
                                n(
                                  e.clearcoatNormalMap,
                                  t.clearcoatNormalMapTransform,
                                ),
                                t.clearcoatNormalScale.value.copy(
                                  e.clearcoatNormalScale,
                                ),
                                e.side === nh &&
                                  t.clearcoatNormalScale.value.negate())),
                            e.iridescence > 0 &&
                              ((t.iridescence.value = e.iridescence),
                              (t.iridescenceIOR.value = e.iridescenceIOR),
                              (t.iridescenceThicknessMinimum.value =
                                e.iridescenceThicknessRange[0]),
                              (t.iridescenceThicknessMaximum.value =
                                e.iridescenceThicknessRange[1]),
                              e.iridescenceMap &&
                                ((t.iridescenceMap.value = e.iridescenceMap),
                                n(e.iridescenceMap, t.iridescenceMapTransform)),
                              e.iridescenceThicknessMap &&
                                ((t.iridescenceThicknessMap.value =
                                  e.iridescenceThicknessMap),
                                n(
                                  e.iridescenceThicknessMap,
                                  t.iridescenceThicknessMapTransform,
                                ))),
                            e.transmission > 0 &&
                              ((t.transmission.value = e.transmission),
                              (t.transmissionSamplerMap.value = r.texture),
                              t.transmissionSamplerSize.value.set(
                                r.width,
                                r.height,
                              ),
                              e.transmissionMap &&
                                ((t.transmissionMap.value = e.transmissionMap),
                                n(
                                  e.transmissionMap,
                                  t.transmissionMapTransform,
                                )),
                              (t.thickness.value = e.thickness),
                              e.thicknessMap &&
                                ((t.thicknessMap.value = e.thicknessMap),
                                n(e.thicknessMap, t.thicknessMapTransform)),
                              (t.attenuationDistance.value =
                                e.attenuationDistance),
                              t.attenuationColor.value.copy(
                                e.attenuationColor,
                              )),
                            e.anisotropy > 0 &&
                              (t.anisotropyVector.value.set(
                                e.anisotropy * Math.cos(e.anisotropyRotation),
                                e.anisotropy * Math.sin(e.anisotropyRotation),
                              ),
                              e.anisotropyMap &&
                                ((t.anisotropyMap.value = e.anisotropyMap),
                                n(e.anisotropyMap, t.anisotropyMapTransform))),
                            (t.specularIntensity.value = e.specularIntensity),
                            t.specularColor.value.copy(e.specularColor),
                            e.specularColorMap &&
                              ((t.specularColorMap.value = e.specularColorMap),
                              n(
                                e.specularColorMap,
                                t.specularColorMapTransform,
                              )),
                            e.specularIntensityMap &&
                              ((t.specularIntensityMap.value =
                                e.specularIntensityMap),
                              n(
                                e.specularIntensityMap,
                                t.specularIntensityMapTransform,
                              ));
                        })(t, i, s))
                    : i.isMeshMatcapMaterial
                      ? (r(t, i),
                        (function (t, e) {
                          e.matcap && (t.matcap.value = e.matcap);
                        })(t, i))
                      : i.isMeshDepthMaterial
                        ? r(t, i)
                        : i.isMeshDistanceMaterial
                          ? (r(t, i),
                            (function (t, n) {
                              const r = e.get(n).light;
                              t.referencePosition.value.setFromMatrixPosition(
                                r.matrixWorld,
                              ),
                                (t.nearDistance.value = r.shadow.camera.near),
                                (t.farDistance.value = r.shadow.camera.far);
                            })(t, i))
                          : i.isMeshNormalMaterial
                            ? r(t, i)
                            : i.isLineBasicMaterial
                              ? ((function (t, e) {
                                  t.diffuse.value.copy(e.color),
                                    (t.opacity.value = e.opacity),
                                    e.map &&
                                      ((t.map.value = e.map),
                                      n(e.map, t.mapTransform));
                                })(t, i),
                                i.isLineDashedMaterial &&
                                  (function (t, e) {
                                    (t.dashSize.value = e.dashSize),
                                      (t.totalSize.value =
                                        e.dashSize + e.gapSize),
                                      (t.scale.value = e.scale);
                                  })(t, i))
                              : i.isPointsMaterial
                                ? (function (t, e, r, i) {
                                    t.diffuse.value.copy(e.color),
                                      (t.opacity.value = e.opacity),
                                      (t.size.value = e.size * r),
                                      (t.scale.value = 0.5 * i),
                                      e.map &&
                                        ((t.map.value = e.map),
                                        n(e.map, t.uvTransform)),
                                      e.alphaMap &&
                                        ((t.alphaMap.value = e.alphaMap),
                                        n(e.alphaMap, t.alphaMapTransform)),
                                      e.alphaTest > 0 &&
                                        (t.alphaTest.value = e.alphaTest);
                                  })(t, i, o, a)
                                : i.isSpriteMaterial
                                  ? (function (t, e) {
                                      t.diffuse.value.copy(e.color),
                                        (t.opacity.value = e.opacity),
                                        (t.rotation.value = e.rotation),
                                        e.map &&
                                          ((t.map.value = e.map),
                                          n(e.map, t.mapTransform)),
                                        e.alphaMap &&
                                          ((t.alphaMap.value = e.alphaMap),
                                          n(e.alphaMap, t.alphaMapTransform)),
                                        e.alphaTest > 0 &&
                                          (t.alphaTest.value = e.alphaTest);
                                    })(t, i)
                                  : i.isShadowMaterial
                                    ? (t.color.value.copy(i.color),
                                      (t.opacity.value = i.opacity))
                                    : i.isShaderMaterial &&
                                      (i.uniformsNeedUpdate = !1);
          },
        };
      }
      function X_(t, e, n, r) {
        let i = {},
          o = {},
          a = [];
        const s = n.isWebGL2
          ? t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS)
          : 0;
        function l(t, e, n) {
          const r = t.value;
          if (void 0 === n[e]) {
            if ("number" == typeof r) n[e] = r;
            else {
              const t = Array.isArray(r) ? r : [r],
                i = [];
              for (let e = 0; e < t.length; e++) i.push(t[e].clone());
              n[e] = i;
            }
            return !0;
          }
          if ("number" == typeof r) {
            if (n[e] !== r) return (n[e] = r), !0;
          } else {
            const t = Array.isArray(n[e]) ? n[e] : [n[e]],
              i = Array.isArray(r) ? r : [r];
            for (let e = 0; e < t.length; e++) {
              const n = t[e];
              if (!1 === n.equals(i[e])) return n.copy(i[e]), !0;
            }
          }
          return !1;
        }
        function u(t) {
          const e = { boundary: 0, storage: 0 };
          return (
            "number" == typeof t
              ? ((e.boundary = 4), (e.storage = 4))
              : t.isVector2
                ? ((e.boundary = 8), (e.storage = 8))
                : t.isVector3 || t.isColor
                  ? ((e.boundary = 16), (e.storage = 12))
                  : t.isVector4
                    ? ((e.boundary = 16), (e.storage = 16))
                    : t.isMatrix3
                      ? ((e.boundary = 48), (e.storage = 48))
                      : t.isMatrix4
                        ? ((e.boundary = 64), (e.storage = 64))
                        : t.isTexture
                          ? console.warn(
                              "THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.",
                            )
                          : console.warn(
                              "THREE.WebGLRenderer: Unsupported uniform value type.",
                              t,
                            ),
            e
          );
        }
        function h(e) {
          const n = e.target;
          n.removeEventListener("dispose", h);
          const r = a.indexOf(n.__bindingPointIndex);
          a.splice(r, 1),
            t.deleteBuffer(i[n.id]),
            delete i[n.id],
            delete o[n.id];
        }
        return {
          bind: function (t, e) {
            const n = e.program;
            r.uniformBlockBinding(t, n);
          },
          update: function (n, c) {
            let d = i[n.id];
            void 0 === d &&
              ((function (t) {
                const e = t.uniforms;
                let n = 0;
                let r = 0;
                for (let t = 0, i = e.length; t < i; t++) {
                  const i = e[t],
                    o = { boundary: 0, storage: 0 },
                    a = Array.isArray(i.value) ? i.value : [i.value];
                  for (let t = 0, e = a.length; t < e; t++) {
                    const e = u(a[t]);
                    (o.boundary += e.boundary), (o.storage += e.storage);
                  }
                  (i.__data = new Float32Array(
                    o.storage / Float32Array.BYTES_PER_ELEMENT,
                  )),
                    (i.__offset = n),
                    t > 0 &&
                      ((r = n % 16),
                      0 !== r &&
                        16 - r - o.boundary < 0 &&
                        ((n += 16 - r), (i.__offset = n))),
                    (n += o.storage);
                }
                (r = n % 16),
                  r > 0 && (n += 16 - r),
                  (t.__size = n),
                  (t.__cache = {});
              })(n),
              (d = (function (e) {
                const n = (function () {
                  for (let t = 0; t < s; t++)
                    if (-1 === a.indexOf(t)) return a.push(t), t;
                  return (
                    console.error(
                      "THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.",
                    ),
                    0
                  );
                })();
                e.__bindingPointIndex = n;
                const r = t.createBuffer(),
                  i = e.__size,
                  o = e.usage;
                return (
                  t.bindBuffer(t.UNIFORM_BUFFER, r),
                  t.bufferData(t.UNIFORM_BUFFER, i, o),
                  t.bindBuffer(t.UNIFORM_BUFFER, null),
                  t.bindBufferBase(t.UNIFORM_BUFFER, n, r),
                  r
                );
              })(n)),
              (i[n.id] = d),
              n.addEventListener("dispose", h));
            const f = c.program;
            r.updateUBOMapping(n, f);
            const p = e.render.frame;
            o[n.id] !== p &&
              ((function (e) {
                const n = i[e.id],
                  r = e.uniforms,
                  o = e.__cache;
                t.bindBuffer(t.UNIFORM_BUFFER, n);
                for (let e = 0, n = r.length; e < n; e++) {
                  const n = r[e];
                  if (!0 === l(n, e, o)) {
                    const e = n.__offset,
                      r = Array.isArray(n.value) ? n.value : [n.value];
                    let i = 0;
                    for (let o = 0; o < r.length; o++) {
                      const a = r[o],
                        s = u(a);
                      "number" == typeof a
                        ? ((n.__data[0] = a),
                          t.bufferSubData(t.UNIFORM_BUFFER, e + i, n.__data))
                        : a.isMatrix3
                          ? ((n.__data[0] = a.elements[0]),
                            (n.__data[1] = a.elements[1]),
                            (n.__data[2] = a.elements[2]),
                            (n.__data[3] = a.elements[0]),
                            (n.__data[4] = a.elements[3]),
                            (n.__data[5] = a.elements[4]),
                            (n.__data[6] = a.elements[5]),
                            (n.__data[7] = a.elements[0]),
                            (n.__data[8] = a.elements[6]),
                            (n.__data[9] = a.elements[7]),
                            (n.__data[10] = a.elements[8]),
                            (n.__data[11] = a.elements[0]))
                          : (a.toArray(n.__data, i),
                            (i += s.storage / Float32Array.BYTES_PER_ELEMENT));
                    }
                    t.bufferSubData(t.UNIFORM_BUFFER, e, n.__data);
                  }
                }
                t.bindBuffer(t.UNIFORM_BUFFER, null);
              })(n),
              (o[n.id] = p));
          },
          dispose: function () {
            for (const e in i) t.deleteBuffer(i[e]);
            (a = []), (i = {}), (o = {});
          },
        };
      }
      function W_() {
        const t = bc("canvas");
        return (t.style.display = "block"), t;
      }
      class j_ {
        constructor(t = {}) {
          const {
            canvas: e = W_(),
            context: n = null,
            depth: r = !0,
            stencil: i = !0,
            alpha: o = !1,
            antialias: a = !1,
            premultipliedAlpha: s = !0,
            preserveDrawingBuffer: l = !1,
            powerPreference: u = "default",
            failIfMajorPerformanceCaveat: h = !1,
          } = t;
          let c;
          (this.isWebGLRenderer = !0),
            (c = null !== n ? n.getContextAttributes().alpha : o);
          const d = new Uint32Array(4),
            f = new Int32Array(4);
          let p = null,
            m = null;
          const _ = [],
            g = [];
          (this.domElement = e),
            (this.debug = { checkShaderErrors: !0, onShaderError: null }),
            (this.autoClear = !0),
            (this.autoClearColor = !0),
            (this.autoClearDepth = !0),
            (this.autoClearStencil = !0),
            (this.sortObjects = !0),
            (this.clippingPlanes = []),
            (this.localClippingEnabled = !1),
            (this.outputColorSpace = qh),
            (this._useLegacyLights = !1),
            (this.toneMapping = uh),
            (this.toneMappingExposure = 1);
          const v = this;
          let y = !1,
            E = 0,
            T = 0,
            b = null,
            x = -1,
            S = null;
          const M = new Gc(),
            A = new Gc();
          let R = null;
          const w = new df(0);
          let P = 0,
            I = e.width,
            O = e.height,
            C = 1,
            N = null,
            L = null;
          const D = new Gc(0, 0, I, O),
            U = new Gc(0, 0, I, O);
          let F = !1;
          const B = new dp();
          let G = !1,
            k = !1,
            H = null;
          const z = new Td(),
            V = new vc(),
            X = new Wc(),
            W = {
              background: null,
              fog: null,
              environment: null,
              overrideMaterial: null,
              isScene: !0,
            };
          function j() {
            return null === b ? C : 1;
          }
          let Y,
            q,
            K,
            Z,
            Q,
            $,
            J,
            tt,
            et,
            nt,
            rt,
            it,
            ot,
            at,
            st,
            lt,
            ut,
            ht,
            ct,
            dt,
            ft,
            pt,
            mt,
            _t,
            gt = n;
          function vt(t, n) {
            for (let r = 0; r < t.length; r++) {
              const i = t[r],
                o = e.getContext(i, n);
              if (null !== o) return o;
            }
            return null;
          }
          try {
            const t = {
              alpha: !0,
              depth: r,
              stencil: i,
              antialias: a,
              premultipliedAlpha: s,
              preserveDrawingBuffer: l,
              powerPreference: u,
              failIfMajorPerformanceCaveat: h,
            };
            if (
              ("setAttribute" in e &&
                e.setAttribute("data-engine", `three.js r${Qu}`),
              e.addEventListener("webglcontextlost", Tt, !1),
              e.addEventListener("webglcontextrestored", bt, !1),
              e.addEventListener("webglcontextcreationerror", xt, !1),
              null === gt)
            ) {
              const e = ["webgl2", "webgl", "experimental-webgl"];
              if (
                (!0 === v.isWebGL1Renderer && e.shift(),
                (gt = vt(e, t)),
                null === gt)
              )
                throw vt(e)
                  ? new Error(
                      "Error creating WebGL context with your selected attributes.",
                    )
                  : new Error("Error creating WebGL context.");
            }
            "undefined" != typeof WebGLRenderingContext &&
              gt instanceof WebGLRenderingContext &&
              console.warn(
                "THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163.",
              ),
              void 0 === gt.getShaderPrecisionFormat &&
                (gt.getShaderPrecisionFormat = function () {
                  return { rangeMin: 1, rangeMax: 1, precision: 1 };
                });
          } catch (t) {
            throw (console.error("THREE.WebGLRenderer: " + t.message), t);
          }
          function yt() {
            (Y = new Hp(gt)),
              (q = new xp(gt, Y, t)),
              Y.init(q),
              (pt = new U_(gt, Y, q)),
              (K = new L_(gt, Y, q)),
              (Z = new Xp(gt)),
              (Q = new E_()),
              ($ = new D_(gt, Y, K, Q, q, pt, Z)),
              (J = new Mp(v)),
              (tt = new kp(v)),
              (et = new pp(gt, q)),
              (mt = new Tp(gt, Y, et, q)),
              (nt = new zp(gt, et, Z, mt)),
              (rt = new qp(gt, nt, et, Z)),
              (ct = new Yp(gt, q, $)),
              (lt = new Sp(Q)),
              (it = new y_(v, J, tt, Y, q, mt, lt)),
              (ot = new V_(v, Q)),
              (at = new S_()),
              (st = new I_(Y, q)),
              (ht = new Ep(v, J, tt, K, rt, c, s)),
              (ut = new N_(v, rt, q)),
              (_t = new X_(gt, Z, q, K)),
              (dt = new bp(gt, Y, Z, q)),
              (ft = new Vp(gt, Y, Z, q)),
              (Z.programs = it.programs),
              (v.capabilities = q),
              (v.extensions = Y),
              (v.properties = Q),
              (v.renderLists = at),
              (v.shadowMap = ut),
              (v.state = K),
              (v.info = Z);
          }
          yt();
          const Et = new z_(v, gt);
          function Tt(t) {
            t.preventDefault(),
              console.log("THREE.WebGLRenderer: Context Lost."),
              (y = !0);
          }
          function bt() {
            console.log("THREE.WebGLRenderer: Context Restored."), (y = !1);
            const t = Z.autoReset,
              e = ut.enabled,
              n = ut.autoUpdate,
              r = ut.needsUpdate,
              i = ut.type;
            yt(),
              (Z.autoReset = t),
              (ut.enabled = e),
              (ut.autoUpdate = n),
              (ut.needsUpdate = r),
              (ut.type = i);
          }
          function xt(t) {
            console.error(
              "THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",
              t.statusMessage,
            );
          }
          function St(t) {
            const e = t.target;
            e.removeEventListener("dispose", St),
              (function (t) {
                (function (t) {
                  const e = Q.get(t).programs;
                  void 0 !== e &&
                    (e.forEach(function (t) {
                      it.releaseProgram(t);
                    }),
                    t.isShaderMaterial && it.releaseShaderCache(t));
                })(t),
                  Q.remove(t);
              })(e);
          }
          (this.xr = Et),
            (this.getContext = function () {
              return gt;
            }),
            (this.getContextAttributes = function () {
              return gt.getContextAttributes();
            }),
            (this.forceContextLoss = function () {
              const t = Y.get("WEBGL_lose_context");
              t && t.loseContext();
            }),
            (this.forceContextRestore = function () {
              const t = Y.get("WEBGL_lose_context");
              t && t.restoreContext();
            }),
            (this.getPixelRatio = function () {
              return C;
            }),
            (this.setPixelRatio = function (t) {
              void 0 !== t && ((C = t), this.setSize(I, O, !1));
            }),
            (this.getSize = function (t) {
              return t.set(I, O);
            }),
            (this.setSize = function (t, n, r = !0) {
              Et.isPresenting
                ? console.warn(
                    "THREE.WebGLRenderer: Can't change size while VR device is presenting.",
                  )
                : ((I = t),
                  (O = n),
                  (e.width = Math.floor(t * C)),
                  (e.height = Math.floor(n * C)),
                  !0 === r &&
                    ((e.style.width = t + "px"), (e.style.height = n + "px")),
                  this.setViewport(0, 0, t, n));
            }),
            (this.getDrawingBufferSize = function (t) {
              return t.set(I * C, O * C).floor();
            }),
            (this.setDrawingBufferSize = function (t, n, r) {
              (I = t),
                (O = n),
                (C = r),
                (e.width = Math.floor(t * r)),
                (e.height = Math.floor(n * r)),
                this.setViewport(0, 0, t, n);
            }),
            (this.getCurrentViewport = function (t) {
              return t.copy(M);
            }),
            (this.getViewport = function (t) {
              return t.copy(D);
            }),
            (this.setViewport = function (t, e, n, r) {
              t.isVector4 ? D.set(t.x, t.y, t.z, t.w) : D.set(t, e, n, r),
                K.viewport(M.copy(D).multiplyScalar(C).floor());
            }),
            (this.getScissor = function (t) {
              return t.copy(U);
            }),
            (this.setScissor = function (t, e, n, r) {
              t.isVector4 ? U.set(t.x, t.y, t.z, t.w) : U.set(t, e, n, r),
                K.scissor(A.copy(U).multiplyScalar(C).floor());
            }),
            (this.getScissorTest = function () {
              return F;
            }),
            (this.setScissorTest = function (t) {
              K.setScissorTest((F = t));
            }),
            (this.setOpaqueSort = function (t) {
              N = t;
            }),
            (this.setTransparentSort = function (t) {
              L = t;
            }),
            (this.getClearColor = function (t) {
              return t.copy(ht.getClearColor());
            }),
            (this.setClearColor = function () {
              ht.setClearColor.apply(ht, arguments);
            }),
            (this.getClearAlpha = function () {
              return ht.getClearAlpha();
            }),
            (this.setClearAlpha = function () {
              ht.setClearAlpha.apply(ht, arguments);
            }),
            (this.clear = function (t = !0, e = !0, n = !0) {
              let r = 0;
              if (t) {
                let t = !1;
                if (null !== b) {
                  const e = b.texture.format;
                  t = e === Bh || e === Fh || e === Uh;
                }
                if (t) {
                  const t = b.texture.type,
                    e =
                      t === Mh ||
                      t === Rh ||
                      t === Ah ||
                      t === Ch ||
                      t === Ih ||
                      t === Oh,
                    n = ht.getClearColor(),
                    r = ht.getClearAlpha(),
                    i = n.r,
                    o = n.g,
                    a = n.b;
                  e
                    ? ((d[0] = i),
                      (d[1] = o),
                      (d[2] = a),
                      (d[3] = r),
                      gt.clearBufferuiv(gt.COLOR, 0, d))
                    : ((f[0] = i),
                      (f[1] = o),
                      (f[2] = a),
                      (f[3] = r),
                      gt.clearBufferiv(gt.COLOR, 0, f));
                } else r |= gt.COLOR_BUFFER_BIT;
              }
              e && (r |= gt.DEPTH_BUFFER_BIT),
                n && (r |= gt.STENCIL_BUFFER_BIT),
                gt.clear(r);
            }),
            (this.clearColor = function () {
              this.clear(!0, !1, !1);
            }),
            (this.clearDepth = function () {
              this.clear(!1, !0, !1);
            }),
            (this.clearStencil = function () {
              this.clear(!1, !1, !0);
            }),
            (this.dispose = function () {
              e.removeEventListener("webglcontextlost", Tt, !1),
                e.removeEventListener("webglcontextrestored", bt, !1),
                e.removeEventListener("webglcontextcreationerror", xt, !1),
                at.dispose(),
                st.dispose(),
                Q.dispose(),
                J.dispose(),
                tt.dispose(),
                rt.dispose(),
                mt.dispose(),
                _t.dispose(),
                it.dispose(),
                Et.dispose(),
                Et.removeEventListener("sessionstart", At),
                Et.removeEventListener("sessionend", Rt),
                H && (H.dispose(), (H = null)),
                wt.stop();
            }),
            (this.renderBufferDirect = function (t, e, n, r, i, o) {
              null === e && (e = W);
              const a = i.isMesh && i.matrixWorld.determinant() < 0,
                s = (function (t, e, n, r, i) {
                  !0 !== e.isScene && (e = W), $.resetTextureUnits();
                  const o = e.fog,
                    a = r.isMeshStandardMaterial ? e.environment : null,
                    s =
                      null === b
                        ? v.outputColorSpace
                        : !0 === b.isXRRenderTarget
                          ? b.texture.colorSpace
                          : Kh,
                    l = (r.isMeshStandardMaterial ? tt : J).get(r.envMap || a),
                    u =
                      !0 === r.vertexColors &&
                      !!n.attributes.color &&
                      4 === n.attributes.color.itemSize,
                    h =
                      !!n.attributes.tangent &&
                      (!!r.normalMap || r.anisotropy > 0),
                    c = !!n.morphAttributes.position,
                    d = !!n.morphAttributes.normal,
                    f = !!n.morphAttributes.color;
                  let p = uh;
                  r.toneMapped &&
                    ((null !== b && !0 !== b.isXRRenderTarget) ||
                      (p = v.toneMapping));
                  const _ =
                      n.morphAttributes.position ||
                      n.morphAttributes.normal ||
                      n.morphAttributes.color,
                    g = void 0 !== _ ? _.length : 0,
                    y = Q.get(r),
                    E = m.state.lights;
                  if (!0 === G && (!0 === k || t !== S)) {
                    const e = t === S && r.id === x;
                    lt.setState(r, t, e);
                  }
                  let T = !1;
                  r.version === y.__version
                    ? (y.needsLights &&
                        y.lightsStateVersion !== E.state.version) ||
                      y.outputColorSpace !== s ||
                      (i.isInstancedMesh && !1 === y.instancing)
                      ? (T = !0)
                      : i.isInstancedMesh || !0 !== y.instancing
                        ? i.isSkinnedMesh && !1 === y.skinning
                          ? (T = !0)
                          : i.isSkinnedMesh || !0 !== y.skinning
                            ? (i.isInstancedMesh &&
                                !0 === y.instancingColor &&
                                null === i.instanceColor) ||
                              (i.isInstancedMesh &&
                                !1 === y.instancingColor &&
                                null !== i.instanceColor) ||
                              y.envMap !== l ||
                              (!0 === r.fog && y.fog !== o)
                              ? (T = !0)
                              : void 0 === y.numClippingPlanes ||
                                  (y.numClippingPlanes === lt.numPlanes &&
                                    y.numIntersection === lt.numIntersection)
                                ? (y.vertexAlphas !== u ||
                                    y.vertexTangents !== h ||
                                    y.morphTargets !== c ||
                                    y.morphNormals !== d ||
                                    y.morphColors !== f ||
                                    y.toneMapping !== p ||
                                    (!0 === q.isWebGL2 &&
                                      y.morphTargetsCount !== g)) &&
                                  (T = !0)
                                : (T = !0)
                            : (T = !0)
                        : (T = !0)
                    : ((T = !0), (y.__version = r.version));
                  let M = y.currentProgram;
                  !0 === T && (M = Nt(r, e, i));
                  let A = !1,
                    R = !1,
                    w = !1;
                  const P = M.getUniforms(),
                    I = y.uniforms;
                  if (
                    (K.useProgram(M.program) && ((A = !0), (R = !0), (w = !0)),
                    r.id !== x && ((x = r.id), (R = !0)),
                    A || S !== t)
                  ) {
                    if (
                      (P.setValue(gt, "projectionMatrix", t.projectionMatrix),
                      q.logarithmicDepthBuffer &&
                        P.setValue(
                          gt,
                          "logDepthBufFC",
                          2 / (Math.log(t.far + 1) / Math.LN2),
                        ),
                      S !== t && ((S = t), (R = !0), (w = !0)),
                      r.isShaderMaterial ||
                        r.isMeshPhongMaterial ||
                        r.isMeshToonMaterial ||
                        r.isMeshStandardMaterial ||
                        r.envMap)
                    ) {
                      const e = P.map.cameraPosition;
                      void 0 !== e &&
                        e.setValue(gt, X.setFromMatrixPosition(t.matrixWorld));
                    }
                    (r.isMeshPhongMaterial ||
                      r.isMeshToonMaterial ||
                      r.isMeshLambertMaterial ||
                      r.isMeshBasicMaterial ||
                      r.isMeshStandardMaterial ||
                      r.isShaderMaterial) &&
                      P.setValue(
                        gt,
                        "isOrthographic",
                        !0 === t.isOrthographicCamera,
                      ),
                      (r.isMeshPhongMaterial ||
                        r.isMeshToonMaterial ||
                        r.isMeshLambertMaterial ||
                        r.isMeshBasicMaterial ||
                        r.isMeshStandardMaterial ||
                        r.isShaderMaterial ||
                        r.isShadowMaterial ||
                        i.isSkinnedMesh) &&
                        P.setValue(gt, "viewMatrix", t.matrixWorldInverse);
                  }
                  if (i.isSkinnedMesh) {
                    P.setOptional(gt, i, "bindMatrix"),
                      P.setOptional(gt, i, "bindMatrixInverse");
                    const t = i.skeleton;
                    t &&
                      (q.floatVertexTextures
                        ? (null === t.boneTexture && t.computeBoneTexture(),
                          P.setValue(gt, "boneTexture", t.boneTexture, $),
                          P.setValue(gt, "boneTextureSize", t.boneTextureSize))
                        : console.warn(
                            "THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required.",
                          ));
                  }
                  const N = n.morphAttributes;
                  var L, D;
                  if (
                    ((void 0 !== N.position ||
                      void 0 !== N.normal ||
                      (void 0 !== N.color && !0 === q.isWebGL2)) &&
                      ct.update(i, n, M),
                    (R || y.receiveShadow !== i.receiveShadow) &&
                      ((y.receiveShadow = i.receiveShadow),
                      P.setValue(gt, "receiveShadow", i.receiveShadow)),
                    r.isMeshGouraudMaterial &&
                      null !== r.envMap &&
                      ((I.envMap.value = l),
                      (I.flipEnvMap.value =
                        l.isCubeTexture && !1 === l.isRenderTargetTexture
                          ? -1
                          : 1)),
                    R &&
                      (P.setValue(
                        gt,
                        "toneMappingExposure",
                        v.toneMappingExposure,
                      ),
                      y.needsLights &&
                        ((D = w),
                        ((L = I).ambientLightColor.needsUpdate = D),
                        (L.lightProbe.needsUpdate = D),
                        (L.directionalLights.needsUpdate = D),
                        (L.directionalLightShadows.needsUpdate = D),
                        (L.pointLights.needsUpdate = D),
                        (L.pointLightShadows.needsUpdate = D),
                        (L.spotLights.needsUpdate = D),
                        (L.spotLightShadows.needsUpdate = D),
                        (L.rectAreaLights.needsUpdate = D),
                        (L.hemisphereLights.needsUpdate = D)),
                      o && !0 === r.fog && ot.refreshFogUniforms(I, o),
                      ot.refreshMaterialUniforms(I, r, C, O, H),
                      $m.upload(gt, y.uniformsList, I, $)),
                    r.isShaderMaterial &&
                      !0 === r.uniformsNeedUpdate &&
                      ($m.upload(gt, y.uniformsList, I, $),
                      (r.uniformsNeedUpdate = !1)),
                    r.isSpriteMaterial && P.setValue(gt, "center", i.center),
                    P.setValue(gt, "modelViewMatrix", i.modelViewMatrix),
                    P.setValue(gt, "normalMatrix", i.normalMatrix),
                    P.setValue(gt, "modelMatrix", i.matrixWorld),
                    r.isShaderMaterial || r.isRawShaderMaterial)
                  ) {
                    const t = r.uniformsGroups;
                    for (let e = 0, n = t.length; e < n; e++)
                      if (q.isWebGL2) {
                        const n = t[e];
                        _t.update(n, M), _t.bind(n, M);
                      } else
                        console.warn(
                          "THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.",
                        );
                  }
                  return M;
                })(t, e, n, r, i);
              K.setMaterial(r, a);
              let l = n.index,
                u = 1;
              if (!0 === r.wireframe) {
                if (((l = nt.getWireframeAttribute(n)), void 0 === l)) return;
                u = 2;
              }
              const h = n.drawRange,
                c = n.attributes.position;
              let d = h.start * u,
                f = (h.start + h.count) * u;
              null !== o &&
                ((d = Math.max(d, o.start * u)),
                (f = Math.min(f, (o.start + o.count) * u))),
                null !== l
                  ? ((d = Math.max(d, 0)), (f = Math.min(f, l.count)))
                  : null != c &&
                    ((d = Math.max(d, 0)), (f = Math.min(f, c.count)));
              const p = f - d;
              if (p < 0 || p === 1 / 0) return;
              let _;
              mt.setup(i, r, s, n, l);
              let g = dt;
              if (
                (null !== l && ((_ = et.get(l)), (g = ft), g.setIndex(_)),
                i.isMesh)
              )
                !0 === r.wireframe
                  ? (K.setLineWidth(r.wireframeLinewidth * j()),
                    g.setMode(gt.LINES))
                  : g.setMode(gt.TRIANGLES);
              else if (i.isLine) {
                let t = r.linewidth;
                void 0 === t && (t = 1),
                  K.setLineWidth(t * j()),
                  i.isLineSegments
                    ? g.setMode(gt.LINES)
                    : i.isLineLoop
                      ? g.setMode(gt.LINE_LOOP)
                      : g.setMode(gt.LINE_STRIP);
              } else
                i.isPoints
                  ? g.setMode(gt.POINTS)
                  : i.isSprite && g.setMode(gt.TRIANGLES);
              if (i.isInstancedMesh) g.renderInstances(d, p, i.count);
              else if (n.isInstancedBufferGeometry) {
                const t =
                    void 0 !== n._maxInstanceCount
                      ? n._maxInstanceCount
                      : 1 / 0,
                  e = Math.min(n.instanceCount, t);
                g.renderInstances(d, p, e);
              } else g.render(d, p);
            }),
            (this.compile = function (t, e) {
              function n(t, e, n) {
                !0 === t.transparent &&
                t.side === rh &&
                !1 === t.forceSinglePass
                  ? ((t.side = nh),
                    (t.needsUpdate = !0),
                    Nt(t, e, n),
                    (t.side = eh),
                    (t.needsUpdate = !0),
                    Nt(t, e, n),
                    (t.side = rh))
                  : Nt(t, e, n);
              }
              (m = st.get(t)),
                m.init(),
                g.push(m),
                t.traverseVisible(function (t) {
                  t.isLight &&
                    t.layers.test(e.layers) &&
                    (m.pushLight(t), t.castShadow && m.pushShadow(t));
                }),
                m.setupLights(v._useLegacyLights),
                t.traverse(function (e) {
                  const r = e.material;
                  if (r)
                    if (Array.isArray(r))
                      for (let i = 0; i < r.length; i++) n(r[i], t, e);
                    else n(r, t, e);
                }),
                g.pop(),
                (m = null);
            });
          let Mt = null;
          function At() {
            wt.stop();
          }
          function Rt() {
            wt.start();
          }
          const wt = new fp();
          function Pt(t, e, n, r) {
            if (!1 === t.visible) return;
            if (t.layers.test(e.layers))
              if (t.isGroup) n = t.renderOrder;
              else if (t.isLOD) !0 === t.autoUpdate && t.update(e);
              else if (t.isLight)
                m.pushLight(t), t.castShadow && m.pushShadow(t);
              else if (t.isSprite) {
                if (!t.frustumCulled || B.intersectsSprite(t)) {
                  r && X.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);
                  const e = rt.update(t),
                    i = t.material;
                  i.visible && p.push(t, e, i, n, X.z, null);
                }
              } else if (
                (t.isMesh || t.isLine || t.isPoints) &&
                (!t.frustumCulled || B.intersectsObject(t))
              ) {
                const e = rt.update(t),
                  i = t.material;
                if (
                  (r &&
                    (void 0 !== t.boundingSphere
                      ? (null === t.boundingSphere && t.computeBoundingSphere(),
                        X.copy(t.boundingSphere.center))
                      : (null === e.boundingSphere && e.computeBoundingSphere(),
                        X.copy(e.boundingSphere.center)),
                    X.applyMatrix4(t.matrixWorld).applyMatrix4(z)),
                  Array.isArray(i))
                ) {
                  const r = e.groups;
                  for (let o = 0, a = r.length; o < a; o++) {
                    const a = r[o],
                      s = i[a.materialIndex];
                    s && s.visible && p.push(t, e, s, n, X.z, a);
                  }
                } else i.visible && p.push(t, e, i, n, X.z, null);
              }
            const i = t.children;
            for (let t = 0, o = i.length; t < o; t++) Pt(i[t], e, n, r);
          }
          function It(t, e, n, r) {
            const i = t.opaque,
              o = t.transmissive,
              a = t.transparent;
            m.setupLightsView(n),
              !0 === G && lt.setGlobalState(v.clippingPlanes, n),
              o.length > 0 &&
                (function (t, e, n, r) {
                  const i = q.isWebGL2;
                  null === H &&
                    (H = new Hc(1, 1, {
                      generateMipmaps: !0,
                      type: Y.has("EXT_color_buffer_half_float") ? Ph : Mh,
                      minFilter: Sh,
                      samples: i ? 4 : 0,
                    })),
                    v.getDrawingBufferSize(V),
                    i ? H.setSize(V.x, V.y) : H.setSize(dc(V.x), dc(V.y));
                  const o = v.getRenderTarget();
                  v.setRenderTarget(H),
                    v.getClearColor(w),
                    (P = v.getClearAlpha()),
                    P < 1 && v.setClearColor(16777215, 0.5),
                    v.clear();
                  const a = v.toneMapping;
                  (v.toneMapping = uh),
                    Ot(t, n, r),
                    $.updateMultisampleRenderTarget(H),
                    $.updateRenderTargetMipmap(H);
                  let s = !1;
                  for (let t = 0, i = e.length; t < i; t++) {
                    const i = e[t],
                      o = i.object,
                      a = i.geometry,
                      l = i.material,
                      u = i.group;
                    if (l.side === rh && o.layers.test(r.layers)) {
                      const t = l.side;
                      (l.side = nh),
                        (l.needsUpdate = !0),
                        Ct(o, n, r, a, l, u),
                        (l.side = t),
                        (l.needsUpdate = !0),
                        (s = !0);
                    }
                  }
                  !0 === s &&
                    ($.updateMultisampleRenderTarget(H),
                    $.updateRenderTargetMipmap(H)),
                    v.setRenderTarget(o),
                    v.setClearColor(w, P),
                    (v.toneMapping = a);
                })(i, o, e, n),
              r && K.viewport(M.copy(r)),
              i.length > 0 && Ot(i, e, n),
              o.length > 0 && Ot(o, e, n),
              a.length > 0 && Ot(a, e, n),
              K.buffers.depth.setTest(!0),
              K.buffers.depth.setMask(!0),
              K.buffers.color.setMask(!0),
              K.setPolygonOffset(!1);
          }
          function Ot(t, e, n) {
            const r = !0 === e.isScene ? e.overrideMaterial : null;
            for (let i = 0, o = t.length; i < o; i++) {
              const o = t[i],
                a = o.object,
                s = o.geometry,
                l = null === r ? o.material : r,
                u = o.group;
              a.layers.test(n.layers) && Ct(a, e, n, s, l, u);
            }
          }
          function Ct(t, e, n, r, i, o) {
            t.onBeforeRender(v, e, n, r, i, o),
              t.modelViewMatrix.multiplyMatrices(
                n.matrixWorldInverse,
                t.matrixWorld,
              ),
              t.normalMatrix.getNormalMatrix(t.modelViewMatrix),
              i.onBeforeRender(v, e, n, r, t, o),
              !0 === i.transparent && i.side === rh && !1 === i.forceSinglePass
                ? ((i.side = nh),
                  (i.needsUpdate = !0),
                  v.renderBufferDirect(n, e, r, i, t, o),
                  (i.side = eh),
                  (i.needsUpdate = !0),
                  v.renderBufferDirect(n, e, r, i, t, o),
                  (i.side = rh))
                : v.renderBufferDirect(n, e, r, i, t, o),
              t.onAfterRender(v, e, n, r, i, o);
          }
          function Nt(t, e, n) {
            !0 !== e.isScene && (e = W);
            const r = Q.get(t),
              i = m.state.lights,
              o = m.state.shadowsArray,
              a = i.state.version,
              s = it.getParameters(t, i.state, o, e, n),
              l = it.getProgramCacheKey(s);
            let u = r.programs;
            (r.environment = t.isMeshStandardMaterial ? e.environment : null),
              (r.fog = e.fog),
              (r.envMap = (t.isMeshStandardMaterial ? tt : J).get(
                t.envMap || r.environment,
              )),
              void 0 === u &&
                (t.addEventListener("dispose", St),
                (u = new Map()),
                (r.programs = u));
            let h = u.get(l);
            if (void 0 !== h) {
              if (r.currentProgram === h && r.lightsStateVersion === a)
                return Lt(t, s), h;
            } else
              (s.uniforms = it.getUniforms(t)),
                t.onBuild(n, s, v),
                t.onBeforeCompile(s, v),
                (h = it.acquireProgram(s, l)),
                u.set(l, h),
                (r.uniforms = s.uniforms);
            const c = r.uniforms;
            ((t.isShaderMaterial || t.isRawShaderMaterial) &&
              !0 !== t.clipping) ||
              (c.clippingPlanes = lt.uniform),
              Lt(t, s),
              (r.needsLights = (function (t) {
                return (
                  t.isMeshLambertMaterial ||
                  t.isMeshToonMaterial ||
                  t.isMeshPhongMaterial ||
                  t.isMeshStandardMaterial ||
                  t.isShadowMaterial ||
                  (t.isShaderMaterial && !0 === t.lights)
                );
              })(t)),
              (r.lightsStateVersion = a),
              r.needsLights &&
                ((c.ambientLightColor.value = i.state.ambient),
                (c.lightProbe.value = i.state.probe),
                (c.directionalLights.value = i.state.directional),
                (c.directionalLightShadows.value = i.state.directionalShadow),
                (c.spotLights.value = i.state.spot),
                (c.spotLightShadows.value = i.state.spotShadow),
                (c.rectAreaLights.value = i.state.rectArea),
                (c.ltc_1.value = i.state.rectAreaLTC1),
                (c.ltc_2.value = i.state.rectAreaLTC2),
                (c.pointLights.value = i.state.point),
                (c.pointLightShadows.value = i.state.pointShadow),
                (c.hemisphereLights.value = i.state.hemi),
                (c.directionalShadowMap.value = i.state.directionalShadowMap),
                (c.directionalShadowMatrix.value =
                  i.state.directionalShadowMatrix),
                (c.spotShadowMap.value = i.state.spotShadowMap),
                (c.spotLightMatrix.value = i.state.spotLightMatrix),
                (c.spotLightMap.value = i.state.spotLightMap),
                (c.pointShadowMap.value = i.state.pointShadowMap),
                (c.pointShadowMatrix.value = i.state.pointShadowMatrix));
            const d = h.getUniforms(),
              f = $m.seqWithValue(d.seq, c);
            return (r.currentProgram = h), (r.uniformsList = f), h;
          }
          function Lt(t, e) {
            const n = Q.get(t);
            (n.outputColorSpace = e.outputColorSpace),
              (n.instancing = e.instancing),
              (n.instancingColor = e.instancingColor),
              (n.skinning = e.skinning),
              (n.morphTargets = e.morphTargets),
              (n.morphNormals = e.morphNormals),
              (n.morphColors = e.morphColors),
              (n.morphTargetsCount = e.morphTargetsCount),
              (n.numClippingPlanes = e.numClippingPlanes),
              (n.numIntersection = e.numClipIntersection),
              (n.vertexAlphas = e.vertexAlphas),
              (n.vertexTangents = e.vertexTangents),
              (n.toneMapping = e.toneMapping);
          }
          wt.setAnimationLoop(function (t) {
            Mt && Mt(t);
          }),
            "undefined" != typeof self && wt.setContext(self),
            (this.setAnimationLoop = function (t) {
              (Mt = t),
                Et.setAnimationLoop(t),
                null === t ? wt.stop() : wt.start();
            }),
            Et.addEventListener("sessionstart", At),
            Et.addEventListener("sessionend", Rt),
            (this.render = function (t, e) {
              if (void 0 !== e && !0 !== e.isCamera)
                return void console.error(
                  "THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.",
                );
              if (!0 === y) return;
              !0 === t.matrixWorldAutoUpdate && t.updateMatrixWorld(),
                null === e.parent &&
                  !0 === e.matrixWorldAutoUpdate &&
                  e.updateMatrixWorld(),
                !0 === Et.enabled &&
                  !0 === Et.isPresenting &&
                  (!0 === Et.cameraAutoUpdate && Et.updateCamera(e),
                  (e = Et.getCamera())),
                !0 === t.isScene && t.onBeforeRender(v, t, e, b),
                (m = st.get(t, g.length)),
                m.init(),
                g.push(m),
                z.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse),
                B.setFromProjectionMatrix(z),
                (k = this.localClippingEnabled),
                (G = lt.init(this.clippingPlanes, k)),
                (p = at.get(t, _.length)),
                p.init(),
                _.push(p),
                Pt(t, e, 0, v.sortObjects),
                p.finish(),
                !0 === v.sortObjects && p.sort(N, L),
                this.info.render.frame++,
                !0 === G && lt.beginShadows();
              const n = m.state.shadowsArray;
              if (
                (ut.render(n, t, e),
                !0 === G && lt.endShadows(),
                !0 === this.info.autoReset && this.info.reset(),
                ht.render(p, t),
                m.setupLights(v._useLegacyLights),
                e.isArrayCamera)
              ) {
                const n = e.cameras;
                for (let e = 0, r = n.length; e < r; e++) {
                  const r = n[e];
                  It(p, t, r, r.viewport);
                }
              } else It(p, t, e);
              null !== b &&
                ($.updateMultisampleRenderTarget(b),
                $.updateRenderTargetMipmap(b)),
                !0 === t.isScene && t.onAfterRender(v, t, e),
                mt.resetDefaultState(),
                (x = -1),
                (S = null),
                g.pop(),
                (m = g.length > 0 ? g[g.length - 1] : null),
                _.pop(),
                (p = _.length > 0 ? _[_.length - 1] : null);
            }),
            (this.getActiveCubeFace = function () {
              return E;
            }),
            (this.getActiveMipmapLevel = function () {
              return T;
            }),
            (this.getRenderTarget = function () {
              return b;
            }),
            (this.setRenderTargetTextures = function (t, e, n) {
              (Q.get(t.texture).__webglTexture = e),
                (Q.get(t.depthTexture).__webglTexture = n);
              const r = Q.get(t);
              (r.__hasExternalTextures = !0),
                r.__hasExternalTextures &&
                  ((r.__autoAllocateDepthBuffer = void 0 === n),
                  r.__autoAllocateDepthBuffer ||
                    (!0 === Y.has("WEBGL_multisampled_render_to_texture") &&
                      (console.warn(
                        "THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided",
                      ),
                      (r.__useRenderToTexture = !1))));
            }),
            (this.setRenderTargetFramebuffer = function (t, e) {
              const n = Q.get(t);
              (n.__webglFramebuffer = e),
                (n.__useDefaultFramebuffer = void 0 === e);
            }),
            (this.setRenderTarget = function (t, e = 0, n = 0) {
              (b = t), (E = e), (T = n);
              let r = !0,
                i = null,
                o = !1,
                a = !1;
              if (t) {
                const s = Q.get(t);
                void 0 !== s.__useDefaultFramebuffer
                  ? (K.bindFramebuffer(gt.FRAMEBUFFER, null), (r = !1))
                  : void 0 === s.__webglFramebuffer
                    ? $.setupRenderTarget(t)
                    : s.__hasExternalTextures &&
                      $.rebindTextures(
                        t,
                        Q.get(t.texture).__webglTexture,
                        Q.get(t.depthTexture).__webglTexture,
                      );
                const l = t.texture;
                (l.isData3DTexture ||
                  l.isDataArrayTexture ||
                  l.isCompressedArrayTexture) &&
                  (a = !0);
                const u = Q.get(t).__webglFramebuffer;
                t.isWebGLCubeRenderTarget
                  ? ((i = Array.isArray(u[e]) ? u[e][n] : u[e]), (o = !0))
                  : (i =
                      q.isWebGL2 &&
                      t.samples > 0 &&
                      !1 === $.useMultisampledRTT(t)
                        ? Q.get(t).__webglMultisampledFramebuffer
                        : Array.isArray(u)
                          ? u[n]
                          : u),
                  M.copy(t.viewport),
                  A.copy(t.scissor),
                  (R = t.scissorTest);
              } else
                M.copy(D).multiplyScalar(C).floor(),
                  A.copy(U).multiplyScalar(C).floor(),
                  (R = F);
              if (
                (K.bindFramebuffer(gt.FRAMEBUFFER, i) &&
                  q.drawBuffers &&
                  r &&
                  K.drawBuffers(t, i),
                K.viewport(M),
                K.scissor(A),
                K.setScissorTest(R),
                o)
              ) {
                const r = Q.get(t.texture);
                gt.framebufferTexture2D(
                  gt.FRAMEBUFFER,
                  gt.COLOR_ATTACHMENT0,
                  gt.TEXTURE_CUBE_MAP_POSITIVE_X + e,
                  r.__webglTexture,
                  n,
                );
              } else if (a) {
                const r = Q.get(t.texture),
                  i = e || 0;
                gt.framebufferTextureLayer(
                  gt.FRAMEBUFFER,
                  gt.COLOR_ATTACHMENT0,
                  r.__webglTexture,
                  n || 0,
                  i,
                );
              }
              x = -1;
            }),
            (this.readRenderTargetPixels = function (t, e, n, r, i, o, a) {
              if (!t || !t.isWebGLRenderTarget)
                return void console.error(
                  "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.",
                );
              let s = Q.get(t).__webglFramebuffer;
              if (
                (t.isWebGLCubeRenderTarget && void 0 !== a && (s = s[a]), s)
              ) {
                K.bindFramebuffer(gt.FRAMEBUFFER, s);
                try {
                  const a = t.texture,
                    s = a.format,
                    l = a.type;
                  if (
                    s !== Nh &&
                    pt.convert(s) !==
                      gt.getParameter(gt.IMPLEMENTATION_COLOR_READ_FORMAT)
                  )
                    return void console.error(
                      "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.",
                    );
                  const u =
                    l === Ph &&
                    (Y.has("EXT_color_buffer_half_float") ||
                      (q.isWebGL2 && Y.has("EXT_color_buffer_float")));
                  if (
                    !(
                      l === Mh ||
                      pt.convert(l) ===
                        gt.getParameter(gt.IMPLEMENTATION_COLOR_READ_TYPE) ||
                      (l === wh &&
                        (q.isWebGL2 ||
                          Y.has("OES_texture_float") ||
                          Y.has("WEBGL_color_buffer_float"))) ||
                      u
                    )
                  )
                    return void console.error(
                      "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.",
                    );
                  e >= 0 &&
                    e <= t.width - r &&
                    n >= 0 &&
                    n <= t.height - i &&
                    gt.readPixels(e, n, r, i, pt.convert(s), pt.convert(l), o);
                } finally {
                  const t = null !== b ? Q.get(b).__webglFramebuffer : null;
                  K.bindFramebuffer(gt.FRAMEBUFFER, t);
                }
              }
            }),
            (this.copyFramebufferToTexture = function (t, e, n = 0) {
              const r = Math.pow(2, -n),
                i = Math.floor(e.image.width * r),
                o = Math.floor(e.image.height * r);
              $.setTexture2D(e, 0),
                gt.copyTexSubImage2D(gt.TEXTURE_2D, n, 0, 0, t.x, t.y, i, o),
                K.unbindTexture();
            }),
            (this.copyTextureToTexture = function (t, e, n, r = 0) {
              const i = e.image.width,
                o = e.image.height,
                a = pt.convert(n.format),
                s = pt.convert(n.type);
              $.setTexture2D(n, 0),
                gt.pixelStorei(gt.UNPACK_FLIP_Y_WEBGL, n.flipY),
                gt.pixelStorei(
                  gt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                  n.premultiplyAlpha,
                ),
                gt.pixelStorei(gt.UNPACK_ALIGNMENT, n.unpackAlignment),
                e.isDataTexture
                  ? gt.texSubImage2D(
                      gt.TEXTURE_2D,
                      r,
                      t.x,
                      t.y,
                      i,
                      o,
                      a,
                      s,
                      e.image.data,
                    )
                  : e.isCompressedTexture
                    ? gt.compressedTexSubImage2D(
                        gt.TEXTURE_2D,
                        r,
                        t.x,
                        t.y,
                        e.mipmaps[0].width,
                        e.mipmaps[0].height,
                        a,
                        e.mipmaps[0].data,
                      )
                    : gt.texSubImage2D(
                        gt.TEXTURE_2D,
                        r,
                        t.x,
                        t.y,
                        a,
                        s,
                        e.image,
                      ),
                0 === r &&
                  n.generateMipmaps &&
                  gt.generateMipmap(gt.TEXTURE_2D),
                K.unbindTexture();
            }),
            (this.copyTextureToTexture3D = function (t, e, n, r, i = 0) {
              if (v.isWebGL1Renderer)
                return void console.warn(
                  "THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.",
                );
              const o = t.max.x - t.min.x + 1,
                a = t.max.y - t.min.y + 1,
                s = t.max.z - t.min.z + 1,
                l = pt.convert(r.format),
                u = pt.convert(r.type);
              let h;
              if (r.isData3DTexture) $.setTexture3D(r, 0), (h = gt.TEXTURE_3D);
              else {
                if (!r.isDataArrayTexture)
                  return void console.warn(
                    "THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.",
                  );
                $.setTexture2DArray(r, 0), (h = gt.TEXTURE_2D_ARRAY);
              }
              gt.pixelStorei(gt.UNPACK_FLIP_Y_WEBGL, r.flipY),
                gt.pixelStorei(
                  gt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                  r.premultiplyAlpha,
                ),
                gt.pixelStorei(gt.UNPACK_ALIGNMENT, r.unpackAlignment);
              const c = gt.getParameter(gt.UNPACK_ROW_LENGTH),
                d = gt.getParameter(gt.UNPACK_IMAGE_HEIGHT),
                f = gt.getParameter(gt.UNPACK_SKIP_PIXELS),
                p = gt.getParameter(gt.UNPACK_SKIP_ROWS),
                m = gt.getParameter(gt.UNPACK_SKIP_IMAGES),
                _ = n.isCompressedTexture ? n.mipmaps[0] : n.image;
              gt.pixelStorei(gt.UNPACK_ROW_LENGTH, _.width),
                gt.pixelStorei(gt.UNPACK_IMAGE_HEIGHT, _.height),
                gt.pixelStorei(gt.UNPACK_SKIP_PIXELS, t.min.x),
                gt.pixelStorei(gt.UNPACK_SKIP_ROWS, t.min.y),
                gt.pixelStorei(gt.UNPACK_SKIP_IMAGES, t.min.z),
                n.isDataTexture || n.isData3DTexture
                  ? gt.texSubImage3D(h, i, e.x, e.y, e.z, o, a, s, l, u, _.data)
                  : n.isCompressedArrayTexture
                    ? (console.warn(
                        "THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture.",
                      ),
                      gt.compressedTexSubImage3D(
                        h,
                        i,
                        e.x,
                        e.y,
                        e.z,
                        o,
                        a,
                        s,
                        l,
                        _.data,
                      ))
                    : gt.texSubImage3D(h, i, e.x, e.y, e.z, o, a, s, l, u, _),
                gt.pixelStorei(gt.UNPACK_ROW_LENGTH, c),
                gt.pixelStorei(gt.UNPACK_IMAGE_HEIGHT, d),
                gt.pixelStorei(gt.UNPACK_SKIP_PIXELS, f),
                gt.pixelStorei(gt.UNPACK_SKIP_ROWS, p),
                gt.pixelStorei(gt.UNPACK_SKIP_IMAGES, m),
                0 === i && r.generateMipmaps && gt.generateMipmap(h),
                K.unbindTexture();
            }),
            (this.initTexture = function (t) {
              t.isCubeTexture
                ? $.setTextureCube(t, 0)
                : t.isData3DTexture
                  ? $.setTexture3D(t, 0)
                  : t.isDataArrayTexture || t.isCompressedArrayTexture
                    ? $.setTexture2DArray(t, 0)
                    : $.setTexture2D(t, 0),
                K.unbindTexture();
            }),
            (this.resetState = function () {
              (E = 0), (T = 0), (b = null), K.reset(), mt.reset();
            }),
            "undefined" != typeof __THREE_DEVTOOLS__ &&
              __THREE_DEVTOOLS__.dispatchEvent(
                new CustomEvent("observe", { detail: this }),
              );
        }
        get coordinateSystem() {
          return ec;
        }
        get physicallyCorrectLights() {
          return (
            console.warn(
              "THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead.",
            ),
            !this.useLegacyLights
          );
        }
        set physicallyCorrectLights(t) {
          console.warn(
            "THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead.",
          ),
            (this.useLegacyLights = !t);
        }
        get outputEncoding() {
          return (
            console.warn(
              "THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead.",
            ),
            this.outputColorSpace === qh ? Yh : 3e3
          );
        }
        set outputEncoding(t) {
          console.warn(
            "THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead.",
          ),
            (this.outputColorSpace = t === Yh ? qh : Kh);
        }
        get useLegacyLights() {
          return (
            console.warn(
              "THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733.",
            ),
            this._useLegacyLights
          );
        }
        set useLegacyLights(t) {
          console.warn(
            "THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733.",
          ),
            (this._useLegacyLights = t);
        }
      }
      (class extends j_ {}).prototype.isWebGL1Renderer = !0;
      class Y_ extends jd {
        constructor() {
          super(),
            (this.isScene = !0),
            (this.type = "Scene"),
            (this.background = null),
            (this.environment = null),
            (this.fog = null),
            (this.backgroundBlurriness = 0),
            (this.backgroundIntensity = 1),
            (this.overrideMaterial = null),
            "undefined" != typeof __THREE_DEVTOOLS__ &&
              __THREE_DEVTOOLS__.dispatchEvent(
                new CustomEvent("observe", { detail: this }),
              );
        }
        copy(t, e) {
          return (
            super.copy(t, e),
            null !== t.background && (this.background = t.background.clone()),
            null !== t.environment &&
              (this.environment = t.environment.clone()),
            null !== t.fog && (this.fog = t.fog.clone()),
            (this.backgroundBlurriness = t.backgroundBlurriness),
            (this.backgroundIntensity = t.backgroundIntensity),
            null !== t.overrideMaterial &&
              (this.overrideMaterial = t.overrideMaterial.clone()),
            (this.matrixAutoUpdate = t.matrixAutoUpdate),
            this
          );
        }
        toJSON(t) {
          const e = super.toJSON(t);
          return (
            null !== this.fog && (e.object.fog = this.fog.toJSON()),
            this.backgroundBlurriness > 0 &&
              (e.object.backgroundBlurriness = this.backgroundBlurriness),
            1 !== this.backgroundIntensity &&
              (e.object.backgroundIntensity = this.backgroundIntensity),
            e
          );
        }
      }
      class q_ {
        constructor(t, e) {
          (this.isInterleavedBuffer = !0),
            (this.array = t),
            (this.stride = e),
            (this.count = void 0 !== t ? t.length / e : 0),
            (this.usage = $h),
            (this.updateRange = { offset: 0, count: -1 }),
            (this.version = 0),
            (this.uuid = sc());
        }
        onUploadCallback() {}
        set needsUpdate(t) {
          !0 === t && this.version++;
        }
        setUsage(t) {
          return (this.usage = t), this;
        }
        copy(t) {
          return (
            (this.array = new t.array.constructor(t.array)),
            (this.count = t.count),
            (this.stride = t.stride),
            (this.usage = t.usage),
            this
          );
        }
        copyAt(t, e, n) {
          (t *= this.stride), (n *= e.stride);
          for (let r = 0, i = this.stride; r < i; r++)
            this.array[t + r] = e.array[n + r];
          return this;
        }
        set(t, e = 0) {
          return this.array.set(t, e), this;
        }
        clone(t) {
          void 0 === t.arrayBuffers && (t.arrayBuffers = {}),
            void 0 === this.array.buffer._uuid &&
              (this.array.buffer._uuid = sc()),
            void 0 === t.arrayBuffers[this.array.buffer._uuid] &&
              (t.arrayBuffers[this.array.buffer._uuid] =
                this.array.slice(0).buffer);
          const e = new this.array.constructor(
              t.arrayBuffers[this.array.buffer._uuid],
            ),
            n = new this.constructor(e, this.stride);
          return n.setUsage(this.usage), n;
        }
        onUpload(t) {
          return (this.onUploadCallback = t), this;
        }
        toJSON(t) {
          return (
            void 0 === t.arrayBuffers && (t.arrayBuffers = {}),
            void 0 === this.array.buffer._uuid &&
              (this.array.buffer._uuid = sc()),
            void 0 === t.arrayBuffers[this.array.buffer._uuid] &&
              (t.arrayBuffers[this.array.buffer._uuid] = Array.from(
                new Uint32Array(this.array.buffer),
              )),
            {
              uuid: this.uuid,
              buffer: this.array.buffer._uuid,
              type: this.array.constructor.name,
              stride: this.stride,
            }
          );
        }
      }
      const K_ = new Wc();
      class Z_ {
        constructor(t, e, n, r = !1) {
          (this.isInterleavedBufferAttribute = !0),
            (this.name = ""),
            (this.data = t),
            (this.itemSize = e),
            (this.offset = n),
            (this.normalized = r);
        }
        get count() {
          return this.data.count;
        }
        get array() {
          return this.data.array;
        }
        set needsUpdate(t) {
          this.data.needsUpdate = t;
        }
        applyMatrix4(t) {
          for (let e = 0, n = this.data.count; e < n; e++)
            K_.fromBufferAttribute(this, e),
              K_.applyMatrix4(t),
              this.setXYZ(e, K_.x, K_.y, K_.z);
          return this;
        }
        applyNormalMatrix(t) {
          for (let e = 0, n = this.count; e < n; e++)
            K_.fromBufferAttribute(this, e),
              K_.applyNormalMatrix(t),
              this.setXYZ(e, K_.x, K_.y, K_.z);
          return this;
        }
        transformDirection(t) {
          for (let e = 0, n = this.count; e < n; e++)
            K_.fromBufferAttribute(this, e),
              K_.transformDirection(t),
              this.setXYZ(e, K_.x, K_.y, K_.z);
          return this;
        }
        setX(t, e) {
          return (
            this.normalized && (e = pc(e, this.array)),
            (this.data.array[t * this.data.stride + this.offset] = e),
            this
          );
        }
        setY(t, e) {
          return (
            this.normalized && (e = pc(e, this.array)),
            (this.data.array[t * this.data.stride + this.offset + 1] = e),
            this
          );
        }
        setZ(t, e) {
          return (
            this.normalized && (e = pc(e, this.array)),
            (this.data.array[t * this.data.stride + this.offset + 2] = e),
            this
          );
        }
        setW(t, e) {
          return (
            this.normalized && (e = pc(e, this.array)),
            (this.data.array[t * this.data.stride + this.offset + 3] = e),
            this
          );
        }
        getX(t) {
          let e = this.data.array[t * this.data.stride + this.offset];
          return this.normalized && (e = fc(e, this.array)), e;
        }
        getY(t) {
          let e = this.data.array[t * this.data.stride + this.offset + 1];
          return this.normalized && (e = fc(e, this.array)), e;
        }
        getZ(t) {
          let e = this.data.array[t * this.data.stride + this.offset + 2];
          return this.normalized && (e = fc(e, this.array)), e;
        }
        getW(t) {
          let e = this.data.array[t * this.data.stride + this.offset + 3];
          return this.normalized && (e = fc(e, this.array)), e;
        }
        setXY(t, e, n) {
          return (
            (t = t * this.data.stride + this.offset),
            this.normalized &&
              ((e = pc(e, this.array)), (n = pc(n, this.array))),
            (this.data.array[t + 0] = e),
            (this.data.array[t + 1] = n),
            this
          );
        }
        setXYZ(t, e, n, r) {
          return (
            (t = t * this.data.stride + this.offset),
            this.normalized &&
              ((e = pc(e, this.array)),
              (n = pc(n, this.array)),
              (r = pc(r, this.array))),
            (this.data.array[t + 0] = e),
            (this.data.array[t + 1] = n),
            (this.data.array[t + 2] = r),
            this
          );
        }
        setXYZW(t, e, n, r, i) {
          return (
            (t = t * this.data.stride + this.offset),
            this.normalized &&
              ((e = pc(e, this.array)),
              (n = pc(n, this.array)),
              (r = pc(r, this.array)),
              (i = pc(i, this.array))),
            (this.data.array[t + 0] = e),
            (this.data.array[t + 1] = n),
            (this.data.array[t + 2] = r),
            (this.data.array[t + 3] = i),
            this
          );
        }
        clone(t) {
          if (void 0 === t) {
            console.log(
              "THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.",
            );
            const t = [];
            for (let e = 0; e < this.count; e++) {
              const n = e * this.data.stride + this.offset;
              for (let e = 0; e < this.itemSize; e++)
                t.push(this.data.array[n + e]);
            }
            return new gf(
              new this.array.constructor(t),
              this.itemSize,
              this.normalized,
            );
          }
          return (
            void 0 === t.interleavedBuffers && (t.interleavedBuffers = {}),
            void 0 === t.interleavedBuffers[this.data.uuid] &&
              (t.interleavedBuffers[this.data.uuid] = this.data.clone(t)),
            new Z_(
              t.interleavedBuffers[this.data.uuid],
              this.itemSize,
              this.offset,
              this.normalized,
            )
          );
        }
        toJSON(t) {
          if (void 0 === t) {
            console.log(
              "THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.",
            );
            const t = [];
            for (let e = 0; e < this.count; e++) {
              const n = e * this.data.stride + this.offset;
              for (let e = 0; e < this.itemSize; e++)
                t.push(this.data.array[n + e]);
            }
            return {
              itemSize: this.itemSize,
              type: this.array.constructor.name,
              array: t,
              normalized: this.normalized,
            };
          }
          return (
            void 0 === t.interleavedBuffers && (t.interleavedBuffers = {}),
            void 0 === t.interleavedBuffers[this.data.uuid] &&
              (t.interleavedBuffers[this.data.uuid] = this.data.toJSON(t)),
            {
              isInterleavedBufferAttribute: !0,
              itemSize: this.itemSize,
              data: this.data.uuid,
              offset: this.offset,
              normalized: this.normalized,
            }
          );
        }
      }
      class Q_ extends sf {
        constructor(t) {
          super(),
            (this.isSpriteMaterial = !0),
            (this.type = "SpriteMaterial"),
            (this.color = new df(16777215)),
            (this.map = null),
            (this.alphaMap = null),
            (this.rotation = 0),
            (this.sizeAttenuation = !0),
            (this.transparent = !0),
            (this.fog = !0),
            this.setValues(t);
        }
        copy(t) {
          return (
            super.copy(t),
            this.color.copy(t.color),
            (this.map = t.map),
            (this.alphaMap = t.alphaMap),
            (this.rotation = t.rotation),
            (this.sizeAttenuation = t.sizeAttenuation),
            (this.fog = t.fog),
            this
          );
        }
      }
      let $_;
      const J_ = new Wc(),
        tg = new Wc(),
        eg = new Wc(),
        ng = new vc(),
        rg = new vc(),
        ig = new Td(),
        og = new Wc(),
        ag = new Wc(),
        sg = new Wc(),
        lg = new vc(),
        ug = new vc(),
        hg = new vc();
      class cg extends jd {
        constructor(t) {
          if (
            (super(),
            (this.isSprite = !0),
            (this.type = "Sprite"),
            void 0 === $_)
          ) {
            $_ = new wf();
            const t = new Float32Array([
                -0.5, -0.5, 0, 0, 0, 0.5, -0.5, 0, 1, 0, 0.5, 0.5, 0, 1, 1,
                -0.5, 0.5, 0, 0, 1,
              ]),
              e = new q_(t, 5);
            $_.setIndex([0, 1, 2, 0, 2, 3]),
              $_.setAttribute("position", new Z_(e, 3, 0, !1)),
              $_.setAttribute("uv", new Z_(e, 2, 3, !1));
          }
          (this.geometry = $_),
            (this.material = void 0 !== t ? t : new Q_()),
            (this.center = new vc(0.5, 0.5));
        }
        raycast(t, e) {
          null === t.camera &&
            console.error(
              'THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.',
            ),
            tg.setFromMatrixScale(this.matrixWorld),
            ig.copy(t.camera.matrixWorld),
            this.modelViewMatrix.multiplyMatrices(
              t.camera.matrixWorldInverse,
              this.matrixWorld,
            ),
            eg.setFromMatrixPosition(this.modelViewMatrix),
            t.camera.isPerspectiveCamera &&
              !1 === this.material.sizeAttenuation &&
              tg.multiplyScalar(-eg.z);
          const n = this.material.rotation;
          let r, i;
          0 !== n && ((i = Math.cos(n)), (r = Math.sin(n)));
          const o = this.center;
          dg(og.set(-0.5, -0.5, 0), eg, o, tg, r, i),
            dg(ag.set(0.5, -0.5, 0), eg, o, tg, r, i),
            dg(sg.set(0.5, 0.5, 0), eg, o, tg, r, i),
            lg.set(0, 0),
            ug.set(1, 0),
            hg.set(1, 1);
          let a = t.ray.intersectTriangle(og, ag, sg, !1, J_);
          if (
            null === a &&
            (dg(ag.set(-0.5, 0.5, 0), eg, o, tg, r, i),
            ug.set(0, 1),
            (a = t.ray.intersectTriangle(og, sg, ag, !1, J_)),
            null === a)
          )
            return;
          const s = t.ray.origin.distanceTo(J_);
          s < t.near ||
            s > t.far ||
            e.push({
              distance: s,
              point: J_.clone(),
              uv: of.getInterpolation(J_, og, ag, sg, lg, ug, hg, new vc()),
              face: null,
              object: this,
            });
        }
        copy(t, e) {
          return (
            super.copy(t, e),
            void 0 !== t.center && this.center.copy(t.center),
            (this.material = t.material),
            this
          );
        }
      }
      function dg(t, e, n, r, i, o) {
        ng.subVectors(t, n).addScalar(0.5).multiply(r),
          void 0 !== i
            ? ((rg.x = o * ng.x - i * ng.y), (rg.y = i * ng.x + o * ng.y))
            : rg.copy(ng),
          t.copy(e),
          (t.x += rg.x),
          (t.y += rg.y),
          t.applyMatrix4(ig);
      }
      class fg extends wf {
        constructor(t = 1, e = 32, n = 0, r = 2 * Math.PI) {
          super(),
            (this.type = "CircleGeometry"),
            (this.parameters = {
              radius: t,
              segments: e,
              thetaStart: n,
              thetaLength: r,
            }),
            (e = Math.max(3, e));
          const i = [],
            o = [],
            a = [],
            s = [],
            l = new Wc(),
            u = new vc();
          o.push(0, 0, 0), a.push(0, 0, 1), s.push(0.5, 0.5);
          for (let i = 0, h = 3; i <= e; i++, h += 3) {
            const c = n + (i / e) * r;
            (l.x = t * Math.cos(c)),
              (l.y = t * Math.sin(c)),
              o.push(l.x, l.y, l.z),
              a.push(0, 0, 1),
              (u.x = (o[h] / t + 1) / 2),
              (u.y = (o[h + 1] / t + 1) / 2),
              s.push(u.x, u.y);
          }
          for (let t = 1; t <= e; t++) i.push(t, t + 1, 0);
          this.setIndex(i),
            this.setAttribute("position", new Ef(o, 3)),
            this.setAttribute("normal", new Ef(a, 3)),
            this.setAttribute("uv", new Ef(s, 2));
        }
        copy(t) {
          return (
            super.copy(t),
            (this.parameters = Object.assign({}, t.parameters)),
            this
          );
        }
        static fromJSON(t) {
          return new fg(t.radius, t.segments, t.thetaStart, t.thetaLength);
        }
      }
      class pg extends wf {
        constructor(
          t = 1,
          e = 32,
          n = 16,
          r = 0,
          i = 2 * Math.PI,
          o = 0,
          a = Math.PI,
        ) {
          super(),
            (this.type = "SphereGeometry"),
            (this.parameters = {
              radius: t,
              widthSegments: e,
              heightSegments: n,
              phiStart: r,
              phiLength: i,
              thetaStart: o,
              thetaLength: a,
            }),
            (e = Math.max(3, Math.floor(e))),
            (n = Math.max(2, Math.floor(n)));
          const s = Math.min(o + a, Math.PI);
          let l = 0;
          const u = [],
            h = new Wc(),
            c = new Wc(),
            d = [],
            f = [],
            p = [],
            m = [];
          for (let d = 0; d <= n; d++) {
            const _ = [],
              g = d / n;
            let v = 0;
            0 === d && 0 === o
              ? (v = 0.5 / e)
              : d === n && s === Math.PI && (v = -0.5 / e);
            for (let n = 0; n <= e; n++) {
              const s = n / e;
              (h.x = -t * Math.cos(r + s * i) * Math.sin(o + g * a)),
                (h.y = t * Math.cos(o + g * a)),
                (h.z = t * Math.sin(r + s * i) * Math.sin(o + g * a)),
                f.push(h.x, h.y, h.z),
                c.copy(h).normalize(),
                p.push(c.x, c.y, c.z),
                m.push(s + v, 1 - g),
                _.push(l++);
            }
            u.push(_);
          }
          for (let t = 0; t < n; t++)
            for (let r = 0; r < e; r++) {
              const e = u[t][r + 1],
                i = u[t][r],
                a = u[t + 1][r],
                l = u[t + 1][r + 1];
              (0 !== t || o > 0) && d.push(e, i, l),
                (t !== n - 1 || s < Math.PI) && d.push(i, a, l);
            }
          this.setIndex(d),
            this.setAttribute("position", new Ef(f, 3)),
            this.setAttribute("normal", new Ef(p, 3)),
            this.setAttribute("uv", new Ef(m, 2));
        }
        copy(t) {
          return (
            super.copy(t),
            (this.parameters = Object.assign({}, t.parameters)),
            this
          );
        }
        static fromJSON(t) {
          return new pg(
            t.radius,
            t.widthSegments,
            t.heightSegments,
            t.phiStart,
            t.phiLength,
            t.thetaStart,
            t.thetaLength,
          );
        }
      }
      class mg extends wf {
        constructor(t = 1, e = 0.4, n = 12, r = 48, i = 2 * Math.PI) {
          super(),
            (this.type = "TorusGeometry"),
            (this.parameters = {
              radius: t,
              tube: e,
              radialSegments: n,
              tubularSegments: r,
              arc: i,
            }),
            (n = Math.floor(n)),
            (r = Math.floor(r));
          const o = [],
            a = [],
            s = [],
            l = [],
            u = new Wc(),
            h = new Wc(),
            c = new Wc();
          for (let o = 0; o <= n; o++)
            for (let d = 0; d <= r; d++) {
              const f = (d / r) * i,
                p = (o / n) * Math.PI * 2;
              (h.x = (t + e * Math.cos(p)) * Math.cos(f)),
                (h.y = (t + e * Math.cos(p)) * Math.sin(f)),
                (h.z = e * Math.sin(p)),
                a.push(h.x, h.y, h.z),
                (u.x = t * Math.cos(f)),
                (u.y = t * Math.sin(f)),
                c.subVectors(h, u).normalize(),
                s.push(c.x, c.y, c.z),
                l.push(d / r),
                l.push(o / n);
            }
          for (let t = 1; t <= n; t++)
            for (let e = 1; e <= r; e++) {
              const n = (r + 1) * t + e - 1,
                i = (r + 1) * (t - 1) + e - 1,
                a = (r + 1) * (t - 1) + e,
                s = (r + 1) * t + e;
              o.push(n, i, s), o.push(i, a, s);
            }
          this.setIndex(o),
            this.setAttribute("position", new Ef(a, 3)),
            this.setAttribute("normal", new Ef(s, 3)),
            this.setAttribute("uv", new Ef(l, 2));
        }
        copy(t) {
          return (
            super.copy(t),
            (this.parameters = Object.assign({}, t.parameters)),
            this
          );
        }
        static fromJSON(t) {
          return new mg(
            t.radius,
            t.tube,
            t.radialSegments,
            t.tubularSegments,
            t.arc,
          );
        }
      }
      function _g(t, e, n) {
        return vg(t)
          ? new t.constructor(t.subarray(e, void 0 !== n ? n : t.length))
          : t.slice(e, n);
      }
      function gg(t, e, n) {
        return !t || (!n && t.constructor === e)
          ? t
          : "number" == typeof e.BYTES_PER_ELEMENT
            ? new e(t)
            : Array.prototype.slice.call(t);
      }
      function vg(t) {
        return ArrayBuffer.isView(t) && !(t instanceof DataView);
      }
      class yg {
        constructor(t, e, n, r) {
          (this.parameterPositions = t),
            (this._cachedIndex = 0),
            (this.resultBuffer = void 0 !== r ? r : new e.constructor(n)),
            (this.sampleValues = e),
            (this.valueSize = n),
            (this.settings = null),
            (this.DefaultSettings_ = {});
        }
        evaluate(t) {
          const e = this.parameterPositions;
          let n = this._cachedIndex,
            r = e[n],
            i = e[n - 1];
          t: {
            e: {
              let o;
              n: {
                r: if (!(t < r)) {
                  for (let o = n + 2; ; ) {
                    if (void 0 === r) {
                      if (t < i) break r;
                      return (
                        (n = e.length),
                        (this._cachedIndex = n),
                        this.copySampleValue_(n - 1)
                      );
                    }
                    if (n === o) break;
                    if (((i = r), (r = e[++n]), t < r)) break e;
                  }
                  o = e.length;
                  break n;
                }
                if (t >= i) break t;
                {
                  const a = e[1];
                  t < a && ((n = 2), (i = a));
                  for (let o = n - 2; ; ) {
                    if (void 0 === i)
                      return (this._cachedIndex = 0), this.copySampleValue_(0);
                    if (n === o) break;
                    if (((r = i), (i = e[--n - 1]), t >= i)) break e;
                  }
                  (o = n), (n = 0);
                }
              }
              for (; n < o; ) {
                const r = (n + o) >>> 1;
                t < e[r] ? (o = r) : (n = r + 1);
              }
              if (((r = e[n]), (i = e[n - 1]), void 0 === i))
                return (this._cachedIndex = 0), this.copySampleValue_(0);
              if (void 0 === r)
                return (
                  (n = e.length),
                  (this._cachedIndex = n),
                  this.copySampleValue_(n - 1)
                );
            }
            (this._cachedIndex = n), this.intervalChanged_(n, i, r);
          }
          return this.interpolate_(n, i, t, r);
        }
        getSettings_() {
          return this.settings || this.DefaultSettings_;
        }
        copySampleValue_(t) {
          const e = this.resultBuffer,
            n = this.sampleValues,
            r = this.valueSize,
            i = t * r;
          for (let t = 0; t !== r; ++t) e[t] = n[i + t];
          return e;
        }
        interpolate_() {
          throw new Error("call to abstract method");
        }
        intervalChanged_() {}
      }
      class Eg extends yg {
        constructor(t, e, n, r) {
          super(t, e, n, r),
            (this._weightPrev = -0),
            (this._offsetPrev = -0),
            (this._weightNext = -0),
            (this._offsetNext = -0),
            (this.DefaultSettings_ = { endingStart: 2400, endingEnd: 2400 });
        }
        intervalChanged_(t, e, n) {
          const r = this.parameterPositions;
          let i = t - 2,
            o = t + 1,
            a = r[i],
            s = r[o];
          if (void 0 === a)
            switch (this.getSettings_().endingStart) {
              case 2401:
                (i = t), (a = 2 * e - n);
                break;
              case 2402:
                (i = r.length - 2), (a = e + r[i] - r[i + 1]);
                break;
              default:
                (i = t), (a = n);
            }
          if (void 0 === s)
            switch (this.getSettings_().endingEnd) {
              case 2401:
                (o = t), (s = 2 * n - e);
                break;
              case 2402:
                (o = 1), (s = n + r[1] - r[0]);
                break;
              default:
                (o = t - 1), (s = e);
            }
          const l = 0.5 * (n - e),
            u = this.valueSize;
          (this._weightPrev = l / (e - a)),
            (this._weightNext = l / (s - n)),
            (this._offsetPrev = i * u),
            (this._offsetNext = o * u);
        }
        interpolate_(t, e, n, r) {
          const i = this.resultBuffer,
            o = this.sampleValues,
            a = this.valueSize,
            s = t * a,
            l = s - a,
            u = this._offsetPrev,
            h = this._offsetNext,
            c = this._weightPrev,
            d = this._weightNext,
            f = (n - e) / (r - e),
            p = f * f,
            m = p * f,
            _ = -c * m + 2 * c * p - c * f,
            g = (1 + c) * m + (-1.5 - 2 * c) * p + (-0.5 + c) * f + 1,
            v = (-1 - d) * m + (1.5 + d) * p + 0.5 * f,
            y = d * m - d * p;
          for (let t = 0; t !== a; ++t)
            i[t] = _ * o[u + t] + g * o[l + t] + v * o[s + t] + y * o[h + t];
          return i;
        }
      }
      class Tg extends yg {
        constructor(t, e, n, r) {
          super(t, e, n, r);
        }
        interpolate_(t, e, n, r) {
          const i = this.resultBuffer,
            o = this.sampleValues,
            a = this.valueSize,
            s = t * a,
            l = s - a,
            u = (n - e) / (r - e),
            h = 1 - u;
          for (let t = 0; t !== a; ++t) i[t] = o[l + t] * h + o[s + t] * u;
          return i;
        }
      }
      class bg extends yg {
        constructor(t, e, n, r) {
          super(t, e, n, r);
        }
        interpolate_(t) {
          return this.copySampleValue_(t - 1);
        }
      }
      class xg {
        constructor(t, e, n, r) {
          if (void 0 === t)
            throw new Error("THREE.KeyframeTrack: track name is undefined");
          if (void 0 === e || 0 === e.length)
            throw new Error(
              "THREE.KeyframeTrack: no keyframes in track named " + t,
            );
          (this.name = t),
            (this.times = gg(e, this.TimeBufferType)),
            (this.values = gg(n, this.ValueBufferType)),
            this.setInterpolation(r || this.DefaultInterpolation);
        }
        static toJSON(t) {
          const e = t.constructor;
          let n;
          if (e.toJSON !== this.toJSON) n = e.toJSON(t);
          else {
            n = {
              name: t.name,
              times: gg(t.times, Array),
              values: gg(t.values, Array),
            };
            const e = t.getInterpolation();
            e !== t.DefaultInterpolation && (n.interpolation = e);
          }
          return (n.type = t.ValueTypeName), n;
        }
        InterpolantFactoryMethodDiscrete(t) {
          return new bg(this.times, this.values, this.getValueSize(), t);
        }
        InterpolantFactoryMethodLinear(t) {
          return new Tg(this.times, this.values, this.getValueSize(), t);
        }
        InterpolantFactoryMethodSmooth(t) {
          return new Eg(this.times, this.values, this.getValueSize(), t);
        }
        setInterpolation(t) {
          let e;
          switch (t) {
            case Xh:
              e = this.InterpolantFactoryMethodDiscrete;
              break;
            case Wh:
              e = this.InterpolantFactoryMethodLinear;
              break;
            case jh:
              e = this.InterpolantFactoryMethodSmooth;
          }
          if (void 0 === e) {
            const e =
              "unsupported interpolation for " +
              this.ValueTypeName +
              " keyframe track named " +
              this.name;
            if (void 0 === this.createInterpolant) {
              if (t === this.DefaultInterpolation) throw new Error(e);
              this.setInterpolation(this.DefaultInterpolation);
            }
            return console.warn("THREE.KeyframeTrack:", e), this;
          }
          return (this.createInterpolant = e), this;
        }
        getInterpolation() {
          switch (this.createInterpolant) {
            case this.InterpolantFactoryMethodDiscrete:
              return Xh;
            case this.InterpolantFactoryMethodLinear:
              return Wh;
            case this.InterpolantFactoryMethodSmooth:
              return jh;
          }
        }
        getValueSize() {
          return this.values.length / this.times.length;
        }
        shift(t) {
          if (0 !== t) {
            const e = this.times;
            for (let n = 0, r = e.length; n !== r; ++n) e[n] += t;
          }
          return this;
        }
        scale(t) {
          if (1 !== t) {
            const e = this.times;
            for (let n = 0, r = e.length; n !== r; ++n) e[n] *= t;
          }
          return this;
        }
        trim(t, e) {
          const n = this.times,
            r = n.length;
          let i = 0,
            o = r - 1;
          for (; i !== r && n[i] < t; ) ++i;
          for (; -1 !== o && n[o] > e; ) --o;
          if ((++o, 0 !== i || o !== r)) {
            i >= o && ((o = Math.max(o, 1)), (i = o - 1));
            const t = this.getValueSize();
            (this.times = _g(n, i, o)),
              (this.values = _g(this.values, i * t, o * t));
          }
          return this;
        }
        validate() {
          let t = !0;
          const e = this.getValueSize();
          e - Math.floor(e) != 0 &&
            (console.error(
              "THREE.KeyframeTrack: Invalid value size in track.",
              this,
            ),
            (t = !1));
          const n = this.times,
            r = this.values,
            i = n.length;
          0 === i &&
            (console.error("THREE.KeyframeTrack: Track is empty.", this),
            (t = !1));
          let o = null;
          for (let e = 0; e !== i; e++) {
            const r = n[e];
            if ("number" == typeof r && isNaN(r)) {
              console.error(
                "THREE.KeyframeTrack: Time is not a valid number.",
                this,
                e,
                r,
              ),
                (t = !1);
              break;
            }
            if (null !== o && o > r) {
              console.error(
                "THREE.KeyframeTrack: Out of order keys.",
                this,
                e,
                r,
                o,
              ),
                (t = !1);
              break;
            }
            o = r;
          }
          if (void 0 !== r && vg(r))
            for (let e = 0, n = r.length; e !== n; ++e) {
              const n = r[e];
              if (isNaN(n)) {
                console.error(
                  "THREE.KeyframeTrack: Value is not a valid number.",
                  this,
                  e,
                  n,
                ),
                  (t = !1);
                break;
              }
            }
          return t;
        }
        optimize() {
          const t = _g(this.times),
            e = _g(this.values),
            n = this.getValueSize(),
            r = this.getInterpolation() === jh,
            i = t.length - 1;
          let o = 1;
          for (let a = 1; a < i; ++a) {
            let i = !1;
            const s = t[a];
            if (s !== t[a + 1] && (1 !== a || s !== t[0]))
              if (r) i = !0;
              else {
                const t = a * n,
                  r = t - n,
                  o = t + n;
                for (let a = 0; a !== n; ++a) {
                  const n = e[t + a];
                  if (n !== e[r + a] || n !== e[o + a]) {
                    i = !0;
                    break;
                  }
                }
              }
            if (i) {
              if (a !== o) {
                t[o] = t[a];
                const r = a * n,
                  i = o * n;
                for (let t = 0; t !== n; ++t) e[i + t] = e[r + t];
              }
              ++o;
            }
          }
          if (i > 0) {
            t[o] = t[i];
            for (let t = i * n, r = o * n, a = 0; a !== n; ++a)
              e[r + a] = e[t + a];
            ++o;
          }
          return (
            o !== t.length
              ? ((this.times = _g(t, 0, o)), (this.values = _g(e, 0, o * n)))
              : ((this.times = t), (this.values = e)),
            this
          );
        }
        clone() {
          const t = _g(this.times, 0),
            e = _g(this.values, 0),
            n = new (0, this.constructor)(this.name, t, e);
          return (n.createInterpolant = this.createInterpolant), n;
        }
      }
      (xg.prototype.TimeBufferType = Float32Array),
        (xg.prototype.ValueBufferType = Float32Array),
        (xg.prototype.DefaultInterpolation = Wh);
      class Sg extends xg {}
      (Sg.prototype.ValueTypeName = "bool"),
        (Sg.prototype.ValueBufferType = Array),
        (Sg.prototype.DefaultInterpolation = Xh),
        (Sg.prototype.InterpolantFactoryMethodLinear = void 0),
        (Sg.prototype.InterpolantFactoryMethodSmooth = void 0);
      (class extends xg {}).prototype.ValueTypeName = "color";
      (class extends xg {}).prototype.ValueTypeName = "number";
      class Mg extends yg {
        constructor(t, e, n, r) {
          super(t, e, n, r);
        }
        interpolate_(t, e, n, r) {
          const i = this.resultBuffer,
            o = this.sampleValues,
            a = this.valueSize,
            s = (n - e) / (r - e);
          let l = t * a;
          for (let t = l + a; l !== t; l += 4)
            Xc.slerpFlat(i, 0, o, l - a, o, l, s);
          return i;
        }
      }
      class Ag extends xg {
        InterpolantFactoryMethodLinear(t) {
          return new Mg(this.times, this.values, this.getValueSize(), t);
        }
      }
      (Ag.prototype.ValueTypeName = "quaternion"),
        (Ag.prototype.DefaultInterpolation = Wh),
        (Ag.prototype.InterpolantFactoryMethodSmooth = void 0);
      class Rg extends xg {}
      (Rg.prototype.ValueTypeName = "string"),
        (Rg.prototype.ValueBufferType = Array),
        (Rg.prototype.DefaultInterpolation = Xh),
        (Rg.prototype.InterpolantFactoryMethodLinear = void 0),
        (Rg.prototype.InterpolantFactoryMethodSmooth = void 0);
      (class extends xg {}).prototype.ValueTypeName = "vector";
      const wg = {
        enabled: !1,
        files: {},
        add: function (t, e) {
          !1 !== this.enabled && (this.files[t] = e);
        },
        get: function (t) {
          if (!1 !== this.enabled) return this.files[t];
        },
        remove: function (t) {
          delete this.files[t];
        },
        clear: function () {
          this.files = {};
        },
      };
      class Pg {
        constructor(t, e, n) {
          const r = this;
          let i,
            o = !1,
            a = 0,
            s = 0;
          const l = [];
          (this.onStart = void 0),
            (this.onLoad = t),
            (this.onProgress = e),
            (this.onError = n),
            (this.itemStart = function (t) {
              s++,
                !1 === o && void 0 !== r.onStart && r.onStart(t, a, s),
                (o = !0);
            }),
            (this.itemEnd = function (t) {
              a++,
                void 0 !== r.onProgress && r.onProgress(t, a, s),
                a === s && ((o = !1), void 0 !== r.onLoad && r.onLoad());
            }),
            (this.itemError = function (t) {
              void 0 !== r.onError && r.onError(t);
            }),
            (this.resolveURL = function (t) {
              return i ? i(t) : t;
            }),
            (this.setURLModifier = function (t) {
              return (i = t), this;
            }),
            (this.addHandler = function (t, e) {
              return l.push(t, e), this;
            }),
            (this.removeHandler = function (t) {
              const e = l.indexOf(t);
              return -1 !== e && l.splice(e, 2), this;
            }),
            (this.getHandler = function (t) {
              for (let e = 0, n = l.length; e < n; e += 2) {
                const n = l[e],
                  r = l[e + 1];
                if ((n.global && (n.lastIndex = 0), n.test(t))) return r;
              }
              return null;
            });
        }
      }
      const Ig = new Pg();
      class Og {
        constructor(t) {
          (this.manager = void 0 !== t ? t : Ig),
            (this.crossOrigin = "anonymous"),
            (this.withCredentials = !1),
            (this.path = ""),
            (this.resourcePath = ""),
            (this.requestHeader = {});
        }
        load() {}
        loadAsync(t, e) {
          const n = this;
          return new Promise(function (r, i) {
            n.load(t, r, e, i);
          });
        }
        parse() {}
        setCrossOrigin(t) {
          return (this.crossOrigin = t), this;
        }
        setWithCredentials(t) {
          return (this.withCredentials = t), this;
        }
        setPath(t) {
          return (this.path = t), this;
        }
        setResourcePath(t) {
          return (this.resourcePath = t), this;
        }
        setRequestHeader(t) {
          return (this.requestHeader = t), this;
        }
      }
      Og.DEFAULT_MATERIAL_NAME = "__DEFAULT";
      class Cg extends Og {
        constructor(t) {
          super(t);
        }
        load(t, e, n, r) {
          void 0 !== this.path && (t = this.path + t),
            (t = this.manager.resolveURL(t));
          const i = this,
            o = wg.get(t);
          if (void 0 !== o)
            return (
              i.manager.itemStart(t),
              setTimeout(function () {
                e && e(o), i.manager.itemEnd(t);
              }, 0),
              o
            );
          const a = bc("img");
          function s() {
            u(), wg.add(t, this), e && e(this), i.manager.itemEnd(t);
          }
          function l(e) {
            u(), r && r(e), i.manager.itemError(t), i.manager.itemEnd(t);
          }
          function u() {
            a.removeEventListener("load", s, !1),
              a.removeEventListener("error", l, !1);
          }
          return (
            a.addEventListener("load", s, !1),
            a.addEventListener("error", l, !1),
            "data:" !== t.slice(0, 5) &&
              void 0 !== this.crossOrigin &&
              (a.crossOrigin = this.crossOrigin),
            i.manager.itemStart(t),
            (a.src = t),
            a
          );
        }
      }
      class Ng extends Og {
        constructor(t) {
          super(t);
        }
        load(t, e, n, r) {
          const i = new Bc(),
            o = new Cg(this.manager);
          return (
            o.setCrossOrigin(this.crossOrigin),
            o.setPath(this.path),
            o.load(
              t,
              function (t) {
                (i.image = t), (i.needsUpdate = !0), void 0 !== e && e(i);
              },
              n,
              r,
            ),
            i
          );
        }
      }
      class Lg {
        constructor(t = !0) {
          (this.autoStart = t),
            (this.startTime = 0),
            (this.oldTime = 0),
            (this.elapsedTime = 0),
            (this.running = !1);
        }
        start() {
          (this.startTime = Dg()),
            (this.oldTime = this.startTime),
            (this.elapsedTime = 0),
            (this.running = !0);
        }
        stop() {
          this.getElapsedTime(), (this.running = !1), (this.autoStart = !1);
        }
        getElapsedTime() {
          return this.getDelta(), this.elapsedTime;
        }
        getDelta() {
          let t = 0;
          if (this.autoStart && !this.running) return this.start(), 0;
          if (this.running) {
            const e = Dg();
            (t = (e - this.oldTime) / 1e3),
              (this.oldTime = e),
              (this.elapsedTime += t);
          }
          return t;
        }
      }
      function Dg() {
        return ("undefined" == typeof performance ? Date : performance).now();
      }
      const Ug = "\\[\\]\\.:\\/",
        Fg = new RegExp("[" + Ug + "]", "g"),
        Bg = "[^" + Ug + "]",
        Gg = "[^" + Ug.replace("\\.", "") + "]",
        kg = new RegExp(
          "^" +
            /((?:WC+[\/:])*)/.source.replace("WC", Bg) +
            /(WCOD+)?/.source.replace("WCOD", Gg) +
            /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", Bg) +
            /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", Bg) +
            "$",
        ),
        Hg = ["material", "materials", "bones", "map"];
      class zg {
        constructor(t, e, n) {
          (this.path = e),
            (this.parsedPath = n || zg.parseTrackName(e)),
            (this.node = zg.findNode(t, this.parsedPath.nodeName)),
            (this.rootNode = t),
            (this.getValue = this._getValue_unbound),
            (this.setValue = this._setValue_unbound);
        }
        static create(t, e, n) {
          return t && t.isAnimationObjectGroup
            ? new zg.Composite(t, e, n)
            : new zg(t, e, n);
        }
        static sanitizeNodeName(t) {
          return t.replace(/\s/g, "_").replace(Fg, "");
        }
        static parseTrackName(t) {
          const e = kg.exec(t);
          if (null === e)
            throw new Error("PropertyBinding: Não é possível analisar trackName: " + t);
          const n = {
              nodeName: e[2],
              objectName: e[3],
              objectIndex: e[4],
              propertyName: e[5],
              propertyIndex: e[6],
            },
            r = n.nodeName && n.nodeName.lastIndexOf(".");
          if (void 0 !== r && -1 !== r) {
            const t = n.nodeName.substring(r + 1);
            -1 !== Hg.indexOf(t) &&
              ((n.nodeName = n.nodeName.substring(0, r)), (n.objectName = t));
          }
          if (null === n.propertyName || 0 === n.propertyName.length)
            throw new Error(
              "PropertyBinding: não é possível analisar propertyName de trackName: " +
                t,
            );
          return n;
        }
        static findNode(t, e) {
          if (
            void 0 === e ||
            "" === e ||
            "." === e ||
            -1 === e ||
            e === t.name ||
            e === t.uuid
          )
            return t;
          if (t.skeleton) {
            const n = t.skeleton.getBoneByName(e);
            if (void 0 !== n) return n;
          }
          if (t.children) {
            const n = function (t) {
                for (let r = 0; r < t.length; r++) {
                  const i = t[r];
                  if (i.name === e || i.uuid === e) return i;
                  const o = n(i.children);
                  if (o) return o;
                }
                return null;
              },
              r = n(t.children);
            if (r) return r;
          }
          return null;
        }
        _getValue_unavailable() {}
        _setValue_unavailable() {}
        _getValue_direct(t, e) {
          t[e] = this.targetObject[this.propertyName];
        }
        _getValue_array(t, e) {
          const n = this.resolvedProperty;
          for (let r = 0, i = n.length; r !== i; ++r) t[e++] = n[r];
        }
        _getValue_arrayElement(t, e) {
          t[e] = this.resolvedProperty[this.propertyIndex];
        }
        _getValue_toArray(t, e) {
          this.resolvedProperty.toArray(t, e);
        }
        _setValue_direct(t, e) {
          this.targetObject[this.propertyName] = t[e];
        }
        _setValue_direct_setNeedsUpdate(t, e) {
          (this.targetObject[this.propertyName] = t[e]),
            (this.targetObject.needsUpdate = !0);
        }
        _setValue_direct_setMatrixWorldNeedsUpdate(t, e) {
          (this.targetObject[this.propertyName] = t[e]),
            (this.targetObject.matrixWorldNeedsUpdate = !0);
        }
        _setValue_array(t, e) {
          const n = this.resolvedProperty;
          for (let r = 0, i = n.length; r !== i; ++r) n[r] = t[e++];
        }
        _setValue_array_setNeedsUpdate(t, e) {
          const n = this.resolvedProperty;
          for (let r = 0, i = n.length; r !== i; ++r) n[r] = t[e++];
          this.targetObject.needsUpdate = !0;
        }
        _setValue_array_setMatrixWorldNeedsUpdate(t, e) {
          const n = this.resolvedProperty;
          for (let r = 0, i = n.length; r !== i; ++r) n[r] = t[e++];
          this.targetObject.matrixWorldNeedsUpdate = !0;
        }
        _setValue_arrayElement(t, e) {
          this.resolvedProperty[this.propertyIndex] = t[e];
        }
        _setValue_arrayElement_setNeedsUpdate(t, e) {
          (this.resolvedProperty[this.propertyIndex] = t[e]),
            (this.targetObject.needsUpdate = !0);
        }
        _setValue_arrayElement_setMatrixWorldNeedsUpdate(t, e) {
          (this.resolvedProperty[this.propertyIndex] = t[e]),
            (this.targetObject.matrixWorldNeedsUpdate = !0);
        }
        _setValue_fromArray(t, e) {
          this.resolvedProperty.fromArray(t, e);
        }
        _setValue_fromArray_setNeedsUpdate(t, e) {
          this.resolvedProperty.fromArray(t, e),
            (this.targetObject.needsUpdate = !0);
        }
        _setValue_fromArray_setMatrixWorldNeedsUpdate(t, e) {
          this.resolvedProperty.fromArray(t, e),
            (this.targetObject.matrixWorldNeedsUpdate = !0);
        }
        _getValue_unbound(t, e) {
          this.bind(), this.getValue(t, e);
        }
        _setValue_unbound(t, e) {
          this.bind(), this.setValue(t, e);
        }
        bind() {
          let t = this.node;
          const e = this.parsedPath,
            n = e.objectName,
            r = e.propertyName;
          let i = e.propertyIndex;
          if (
            (t ||
              ((t = zg.findNode(this.rootNode, e.nodeName)), (this.node = t)),
            (this.getValue = this._getValue_unavailable),
            (this.setValue = this._setValue_unavailable),
            !t)
          )
            return void console.warn(
              "THREE.PropertyBinding: Nenhum nó de destino encontrado para a trilha: " +
                this.path +
                ".",
            );
          if (n) {
            let r = e.objectIndex;
            switch (n) {
              case "materials":
                if (!t.material)
                  return void console.error(
                    "THREE.PropertyBinding: Não é possível vincular ao material porque o nó não tem um material.",
                    this,
                  );
                if (!t.material.materials)
                  return void console.error(
                    "THREE.PropertyBinding: Não é possível vincular a material.materials porque node.material não tem uma matriz de materiais.",
                    this,
                  );
                t = t.material.materials;
                break;
              case "bones":
                if (!t.skeleton)
                  return void console.error(
                    "THREE.PropertyBinding: Não pode se ligar aos ossos, pois o nó não tem esqueleto.",
                    this,
                  );
                t = t.skeleton.bones;
                for (let e = 0; e < t.length; e++)
                  if (t[e].name === r) {
                    r = e;
                    break;
                  }
                break;
              case "map":
                if ("map" in t) {
                  t = t.map;
                  break;
                }
                if (!t.material)
                  return void console.error(
                    "THREE.PropertyBinding: Não é possível vincular ao material porque o nó não possui material.",
                    this,
                  );
                if (!t.material.map)
                  return void console.error(
                    "THREE.PropertyBinding: Não é possível vincular a material.map porque node.material não tem um mapa.",
                    this,
                  );
                t = t.material.map;
                break;
              default:
                if (void 0 === t[n])
                  return void console.error(
                    "THREE.PropertyBinding: Não é possível vincular ao objectName do nó indefinido.",
                    this,
                  );
                t = t[n];
            }
            if (void 0 !== r) {
              if (void 0 === t[r])
                return void console.error(
                  "THREE.PropertyBinding: Tentando vincular ao objectIndex de objectName, mas não está definido.",
                  this,
                  t,
                );
              t = t[r];
            }
          }
          const o = t[r];
          if (void 0 === o) {
            const n = e.nodeName;
            return void console.error(
              "THREE.PropertyBinding: Tentando atualizar propriedade para trilha: " +
                n +
                "." +
                r +
                " mas não foi encontrado.",
              t,
            );
          }
          let a = this.Versioning.None;
          (this.targetObject = t),
            void 0 !== t.needsUpdate
              ? (a = this.Versioning.NeedsUpdate)
              : void 0 !== t.matrixWorldNeedsUpdate &&
                (a = this.Versioning.MatrixWorldNeedsUpdate);
          let s = this.BindingType.Direct;
          if (void 0 !== i) {
            if ("morphTargetInfluences" === r) {
              if (!t.geometry)
                return void console.error(
                  "THREE.PropertyBinding: Não é possível vincular a morphTargetInfluences porque o nó não tem uma geometria.",
                  this,
                );
              if (!t.geometry.morphAttributes)
                return void console.error(
                  "THREE.PropertyBinding: Não é possível vincular a morphTargetInfluences porque o nó não tem geometry.morphAttributes.",
                  this,
                );
              void 0 !== t.morphTargetDictionary[i] &&
                (i = t.morphTargetDictionary[i]);
            }
            (s = this.BindingType.ArrayElement),
              (this.resolvedProperty = o),
              (this.propertyIndex = i);
          } else
            void 0 !== o.fromArray && void 0 !== o.toArray
              ? ((s = this.BindingType.HasFromToArray),
                (this.resolvedProperty = o))
              : Array.isArray(o)
                ? ((s = this.BindingType.EntireArray),
                  (this.resolvedProperty = o))
                : (this.propertyName = r);
          (this.getValue = this.GetterByBindingType[s]),
            (this.setValue = this.SetterByBindingTypeAndVersioning[s][a]);
        }
        unbind() {
          (this.node = null),
            (this.getValue = this._getValue_unbound),
            (this.setValue = this._setValue_unbound);
        }
      }
      (zg.Composite = class {
        constructor(t, e, n) {
          const r = n || zg.parseTrackName(e);
          (this._targetGroup = t), (this._bindings = t.subscribe_(e, r));
        }
        getValue(t, e) {
          this.bind();
          const n = this._targetGroup.nCachedObjects_,
            r = this._bindings[n];
          void 0 !== r && r.getValue(t, e);
        }
        setValue(t, e) {
          const n = this._bindings;
          for (
            let r = this._targetGroup.nCachedObjects_, i = n.length;
            r !== i;
            ++r
          )
            n[r].setValue(t, e);
        }
        bind() {
          const t = this._bindings;
          for (
            let e = this._targetGroup.nCachedObjects_, n = t.length;
            e !== n;
            ++e
          )
            t[e].bind();
        }
        unbind() {
          const t = this._bindings;
          for (
            let e = this._targetGroup.nCachedObjects_, n = t.length;
            e !== n;
            ++e
          )
            t[e].unbind();
        }
      }),
        (zg.prototype.BindingType = {
          Direct: 0,
          EntireArray: 1,
          ArrayElement: 2,
          HasFromToArray: 3,
        }),
        (zg.prototype.Versioning = {
          None: 0,
          NeedsUpdate: 1,
          MatrixWorldNeedsUpdate: 2,
        }),
        (zg.prototype.GetterByBindingType = [
          zg.prototype._getValue_direct,
          zg.prototype._getValue_array,
          zg.prototype._getValue_arrayElement,
          zg.prototype._getValue_toArray,
        ]),
        (zg.prototype.SetterByBindingTypeAndVersioning = [
          [
            zg.prototype._setValue_direct,
            zg.prototype._setValue_direct_setNeedsUpdate,
            zg.prototype._setValue_direct_setMatrixWorldNeedsUpdate,
          ],
          [
            zg.prototype._setValue_array,
            zg.prototype._setValue_array_setNeedsUpdate,
            zg.prototype._setValue_array_setMatrixWorldNeedsUpdate,
          ],
          [
            zg.prototype._setValue_arrayElement,
            zg.prototype._setValue_arrayElement_setNeedsUpdate,
            zg.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate,
          ],
          [
            zg.prototype._setValue_fromArray,
            zg.prototype._setValue_fromArray_setNeedsUpdate,
            zg.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate,
          ],
        ]),
        new Float32Array(1);
      class Vg {
        constructor(t, e, n = 0, r = 1 / 0) {
          (this.ray = new Ed(t, e)),
            (this.near = n),
            (this.far = r),
            (this.camera = null),
            (this.layers = new Cd()),
            (this.params = {
              Mesh: {},
              Line: { threshold: 1 },
              LOD: {},
              Points: { threshold: 1 },
              Sprite: {},
            });
        }
        set(t, e) {
          this.ray.set(t, e);
        }
        setFromCamera(t, e) {
          e.isPerspectiveCamera
            ? (this.ray.origin.setFromMatrixPosition(e.matrixWorld),
              this.ray.direction
                .set(t.x, t.y, 0.5)
                .unproject(e)
                .sub(this.ray.origin)
                .normalize(),
              (this.camera = e))
            : e.isOrthographicCamera
              ? (this.ray.origin
                  .set(t.x, t.y, (e.near + e.far) / (e.near - e.far))
                  .unproject(e),
                this.ray.direction
                  .set(0, 0, -1)
                  .transformDirection(e.matrixWorld),
                (this.camera = e))
              : console.error(
                  "THREE.Raycaster: Tipo de câmera não suportado: " + e.type,
                );
        }
        intersectObject(t, e = !0, n = []) {
          return Wg(t, this, n, e), n.sort(Xg), n;
        }
        intersectObjects(t, e = !0, n = []) {
          for (let r = 0, i = t.length; r < i; r++) Wg(t[r], this, n, e);
          return n.sort(Xg), n;
        }
      }
      function Xg(t, e) {
        return t.distance - e.distance;
      }
      function Wg(t, e, n, r) {
        if ((t.layers.test(e.layers) && t.raycast(e, n), !0 === r)) {
          const r = t.children;
          for (let t = 0, i = r.length; t < i; t++) Wg(r[t], e, n, !0);
        }
      }
      class jg {
        constructor(t = 1, e = 0, n = 0) {
          return (this.radius = t), (this.phi = e), (this.theta = n), this;
        }
        set(t, e, n) {
          return (this.radius = t), (this.phi = e), (this.theta = n), this;
        }
        copy(t) {
          return (
            (this.radius = t.radius),
            (this.phi = t.phi),
            (this.theta = t.theta),
            this
          );
        }
        makeSafe() {
          const t = 1e-6;
          return (
            (this.phi = Math.max(t, Math.min(Math.PI - t, this.phi))), this
          );
        }
        setFromVector3(t) {
          return this.setFromCartesianCoords(t.x, t.y, t.z);
        }
        setFromCartesianCoords(t, e, n) {
          return (
            (this.radius = Math.sqrt(t * t + e * e + n * n)),
            0 === this.radius
              ? ((this.theta = 0), (this.phi = 0))
              : ((this.theta = Math.atan2(t, n)),
                (this.phi = Math.acos(lc(e / this.radius, -1, 1)))),
            this
          );
        }
        clone() {
          return new this.constructor().copy(this);
        }
      }
      "undefined" != typeof __THREE_DEVTOOLS__ &&
        __THREE_DEVTOOLS__.dispatchEvent(
          new CustomEvent("register", { detail: { revision: Qu } }),
        ),
        "undefined" != typeof window &&
          (window.__THREE__
            ? console.warn(
                "AVISO: Várias instâncias do Three.js estão sendo importadas.",
              )
            : (window.__THREE__ = Qu));
      const Yg = { type: "change" },
        qg = { type: "start" },
        Kg = { type: "end" },
        Zg = new Ed(),
        Qg = new up(),
        $g = Math.cos(70 * mc);
      class Jg extends rc {
        constructor(t, e) {
          super(),
            (this.object = t),
            (this.domElement = e),
            (this.domElement.style.touchAction = "none"),
            (this.enabled = !0),
            (this.target = new Wc()),
            (this.minDistance = 0),
            (this.maxDistance = 1 / 0),
            (this.minZoom = 0),
            (this.maxZoom = 1 / 0),
            (this.minPolarAngle = 0),
            (this.maxPolarAngle = Math.PI),
            (this.minAzimuthAngle = -1 / 0),
            (this.maxAzimuthAngle = 1 / 0),
            (this.enableDamping = !1),
            (this.dampingFactor = 0.05),
            (this.enableZoom = !0),
            (this.zoomSpeed = 1),
            (this.enableRotate = !0),
            (this.rotateSpeed = 1),
            (this.enablePan = !0),
            (this.panSpeed = 1),
            (this.screenSpacePanning = !0),
            (this.keyPanSpeed = 7),
            (this.zoomToCursor = !1),
            (this.autoRotate = !1),
            (this.autoRotateSpeed = 2),
            (this.keys = {
              LEFT: "ArrowLeft",
              UP: "ArrowUp",
              RIGHT: "ArrowRight",
              BOTTOM: "ArrowDown",
            }),
            (this.mouseButtons = { LEFT: 0, MIDDLE: 1, RIGHT: 2 }),
            (this.touches = { ONE: 0, TWO: 2 }),
            (this.target0 = this.target.clone()),
            (this.position0 = this.object.position.clone()),
            (this.zoom0 = this.object.zoom),
            (this._domElementKeyEvents = null),
            (this.getPolarAngle = function () {
              return a.phi;
            }),
            (this.getAzimuthalAngle = function () {
              return a.theta;
            }),
            (this.getDistance = function () {
              return this.object.position.distanceTo(this.target);
            }),
            (this.listenToKeyEvents = function (t) {
              t.addEventListener("keydown", j), (this._domElementKeyEvents = t);
            }),
            (this.stopListenToKeyEvents = function () {
              this._domElementKeyEvents.removeEventListener("keydown", j),
                (this._domElementKeyEvents = null);
            }),
            (this.saveState = function () {
              n.target0.copy(n.target),
                n.position0.copy(n.object.position),
                (n.zoom0 = n.object.zoom);
            }),
            (this.reset = function () {
              n.target.copy(n.target0),
                n.object.position.copy(n.position0),
                (n.object.zoom = n.zoom0),
                n.object.updateProjectionMatrix(),
                n.dispatchEvent(Yg),
                n.update(),
                (i = r.NONE);
            }),
            (this.update = (function () {
              const e = new Wc(),
                h = new Xc().setFromUnitVectors(t.up, new Wc(0, 1, 0)),
                c = h.clone().invert(),
                d = new Wc(),
                f = new Xc(),
                p = new Wc(),
                m = 2 * Math.PI;
              return function () {
                const _ = n.object.position;
                e.copy(_).sub(n.target),
                  e.applyQuaternion(h),
                  a.setFromVector3(e),
                  n.autoRotate &&
                    i === r.NONE &&
                    M(((2 * Math.PI) / 60 / 60) * n.autoRotateSpeed),
                  n.enableDamping
                    ? ((a.theta += s.theta * n.dampingFactor),
                      (a.phi += s.phi * n.dampingFactor))
                    : ((a.theta += s.theta), (a.phi += s.phi));
                let g = n.minAzimuthAngle,
                  v = n.maxAzimuthAngle;
                isFinite(g) &&
                  isFinite(v) &&
                  (g < -Math.PI ? (g += m) : g > Math.PI && (g -= m),
                  v < -Math.PI ? (v += m) : v > Math.PI && (v -= m),
                  (a.theta =
                    g <= v
                      ? Math.max(g, Math.min(v, a.theta))
                      : a.theta > (g + v) / 2
                        ? Math.max(g, a.theta)
                        : Math.min(v, a.theta))),
                  (a.phi = Math.max(
                    n.minPolarAngle,
                    Math.min(n.maxPolarAngle, a.phi),
                  )),
                  a.makeSafe(),
                  !0 === n.enableDamping
                    ? n.target.addScaledVector(u, n.dampingFactor)
                    : n.target.add(u),
                  (n.zoomToCursor && T) || n.object.isOrthographicCamera
                    ? (a.radius = N(a.radius))
                    : (a.radius = N(a.radius * l)),
                  e.setFromSpherical(a),
                  e.applyQuaternion(c),
                  _.copy(n.target).add(e),
                  n.object.lookAt(n.target),
                  !0 === n.enableDamping
                    ? ((s.theta *= 1 - n.dampingFactor),
                      (s.phi *= 1 - n.dampingFactor),
                      u.multiplyScalar(1 - n.dampingFactor))
                    : (s.set(0, 0, 0), u.set(0, 0, 0));
                let b = !1;
                if (n.zoomToCursor && T) {
                  let r = null;
                  if (n.object.isPerspectiveCamera) {
                    const t = e.length();
                    r = N(t * l);
                    const i = t - r;
                    n.object.position.addScaledVector(y, i),
                      n.object.updateMatrixWorld();
                  } else if (n.object.isOrthographicCamera) {
                    const t = new Wc(E.x, E.y, 0);
                    t.unproject(n.object),
                      (n.object.zoom = Math.max(
                        n.minZoom,
                        Math.min(n.maxZoom, n.object.zoom / l),
                      )),
                      n.object.updateProjectionMatrix(),
                      (b = !0);
                    const i = new Wc(E.x, E.y, 0);
                    i.unproject(n.object),
                      n.object.position.sub(i).add(t),
                      n.object.updateMatrixWorld(),
                      (r = e.length());
                  } else
                    console.warn(
                      "AVISO: OrbitControls encontrou um tipo de câmera desconhecido - zoom no cursor desabilitado.",
                    ),
                      (n.zoomToCursor = !1);
                  null !== r &&
                    (this.screenSpacePanning
                      ? n.target
                          .set(0, 0, -1)
                          .transformDirection(n.object.matrix)
                          .multiplyScalar(r)
                          .add(n.object.position)
                      : (Zg.origin.copy(n.object.position),
                        Zg.direction
                          .set(0, 0, -1)
                          .transformDirection(n.object.matrix),
                        Math.abs(n.object.up.dot(Zg.direction)) < $g
                          ? t.lookAt(n.target)
                          : (Qg.setFromNormalAndCoplanarPoint(
                              n.object.up,
                              n.target,
                            ),
                            Zg.intersectPlane(Qg, n.target))));
                } else
                  n.object.isOrthographicCamera &&
                    ((n.object.zoom = Math.max(
                      n.minZoom,
                      Math.min(n.maxZoom, n.object.zoom / l),
                    )),
                    n.object.updateProjectionMatrix(),
                    (b = !0));
                return (
                  (l = 1),
                  (T = !1),
                  !!(
                    b ||
                    d.distanceToSquared(n.object.position) > o ||
                    8 * (1 - f.dot(n.object.quaternion)) > o ||
                    p.distanceToSquared(n.target) > 0
                  ) &&
                    (n.dispatchEvent(Yg),
                    d.copy(n.object.position),
                    f.copy(n.object.quaternion),
                    p.copy(n.target),
                    (b = !1),
                    !0)
                );
              };
            })()),
            (this.dispose = function () {
              n.domElement.removeEventListener("contextmenu", Y),
                n.domElement.removeEventListener("pointerdown", z),
                n.domElement.removeEventListener("pointercancel", X),
                n.domElement.removeEventListener("wheel", W),
                n.domElement.removeEventListener("pointermove", V),
                n.domElement.removeEventListener("pointerup", X),
                null !== n._domElementKeyEvents &&
                  (n._domElementKeyEvents.removeEventListener("keydown", j),
                  (n._domElementKeyEvents = null));
            });
          const n = this,
            r = {
              NONE: -1,
              ROTATE: 0,
              DOLLY: 1,
              PAN: 2,
              TOUCH_ROTATE: 3,
              TOUCH_PAN: 4,
              TOUCH_DOLLY_PAN: 5,
              TOUCH_DOLLY_ROTATE: 6,
            };
          let i = r.NONE;
          const o = 1e-6,
            a = new jg(),
            s = new jg();
          let l = 1;
          const u = new Wc(),
            h = new vc(),
            c = new vc(),
            d = new vc(),
            f = new vc(),
            p = new vc(),
            m = new vc(),
            _ = new vc(),
            g = new vc(),
            v = new vc(),
            y = new Wc(),
            E = new vc();
          let T = !1;
          const b = [],
            x = {};
          function S() {
            return Math.pow(0.95, n.zoomSpeed);
          }
          function M(t) {
            s.theta -= t;
          }
          function A(t) {
            s.phi -= t;
          }
          const R = (function () {
              const t = new Wc();
              return function (e, n) {
                t.setFromMatrixColumn(n, 0), t.multiplyScalar(-e), u.add(t);
              };
            })(),
            w = (function () {
              const t = new Wc();
              return function (e, r) {
                !0 === n.screenSpacePanning
                  ? t.setFromMatrixColumn(r, 1)
                  : (t.setFromMatrixColumn(r, 0),
                    t.crossVectors(n.object.up, t)),
                  t.multiplyScalar(e),
                  u.add(t);
              };
            })(),
            P = (function () {
              const t = new Wc();
              return function (e, r) {
                const i = n.domElement;
                if (n.object.isPerspectiveCamera) {
                  const o = n.object.position;
                  t.copy(o).sub(n.target);
                  let a = t.length();
                  (a *= Math.tan(((n.object.fov / 2) * Math.PI) / 180)),
                    R((2 * e * a) / i.clientHeight, n.object.matrix),
                    w((2 * r * a) / i.clientHeight, n.object.matrix);
                } else
                  n.object.isOrthographicCamera
                    ? (R(
                        (e * (n.object.right - n.object.left)) /
                          n.object.zoom /
                          i.clientWidth,
                        n.object.matrix,
                      ),
                      w(
                        (r * (n.object.top - n.object.bottom)) /
                          n.object.zoom /
                          i.clientHeight,
                        n.object.matrix,
                      ))
                    : (console.warn(
                        "AVISO: O OrbitControls encontrou um tipo de câmera desconhecido - panorâmica desabilitada.",
                      ),
                      (n.enablePan = !1));
              };
            })();
          function I(t) {
            n.object.isPerspectiveCamera || n.object.isOrthographicCamera
              ? (l /= t)
              : (console.warn(
                  "AVISO: OrbitControls encontrou um tipo de câmera desconhecido - dolly/zoom desabilitado.",
                ),
                (n.enableZoom = !1));
          }
          function O(t) {
            n.object.isPerspectiveCamera || n.object.isOrthographicCamera
              ? (l *= t)
              : (console.warn(
                  "AVISO: O OrbitControls encontrou um tipo de câmera desconhecido - dolly/zoom desabilitado.",
                ),
                (n.enableZoom = !1));
          }
          function C(e) {
            if (!n.zoomToCursor) return;
            T = !0;
            const r = n.domElement.getBoundingClientRect(),
              i = e.clientX - r.left,
              o = e.clientY - r.top,
              a = r.width,
              s = r.height;
            (E.x = (i / a) * 2 - 1),
              (E.y = (-o / s) * 2 + 1),
              y.set(E.x, E.y, 1).unproject(t).sub(t.position).normalize();
          }
          function N(t) {
            return Math.max(n.minDistance, Math.min(n.maxDistance, t));
          }
          function L(t) {
            h.set(t.clientX, t.clientY);
          }
          function D(t) {
            f.set(t.clientX, t.clientY);
          }
          function U() {
            if (1 === b.length) h.set(b[0].pageX, b[0].pageY);
            else {
              const t = 0.5 * (b[0].pageX + b[1].pageX),
                e = 0.5 * (b[0].pageY + b[1].pageY);
              h.set(t, e);
            }
          }
          function F() {
            if (1 === b.length) f.set(b[0].pageX, b[0].pageY);
            else {
              const t = 0.5 * (b[0].pageX + b[1].pageX),
                e = 0.5 * (b[0].pageY + b[1].pageY);
              f.set(t, e);
            }
          }
          function B() {
            const t = b[0].pageX - b[1].pageX,
              e = b[0].pageY - b[1].pageY,
              n = Math.sqrt(t * t + e * e);
            _.set(0, n);
          }
          function G(t) {
            if (1 == b.length) c.set(t.pageX, t.pageY);
            else {
              const e = K(t),
                n = 0.5 * (t.pageX + e.x),
                r = 0.5 * (t.pageY + e.y);
              c.set(n, r);
            }
            d.subVectors(c, h).multiplyScalar(n.rotateSpeed);
            const e = n.domElement;
            M((2 * Math.PI * d.x) / e.clientHeight),
              A((2 * Math.PI * d.y) / e.clientHeight),
              h.copy(c);
          }
          function k(t) {
            if (1 === b.length) p.set(t.pageX, t.pageY);
            else {
              const e = K(t),
                n = 0.5 * (t.pageX + e.x),
                r = 0.5 * (t.pageY + e.y);
              p.set(n, r);
            }
            m.subVectors(p, f).multiplyScalar(n.panSpeed),
              P(m.x, m.y),
              f.copy(p);
          }
          function H(t) {
            const e = K(t),
              r = t.pageX - e.x,
              i = t.pageY - e.y,
              o = Math.sqrt(r * r + i * i);
            g.set(0, o),
              v.set(0, Math.pow(g.y / _.y, n.zoomSpeed)),
              I(v.y),
              _.copy(g);
          }
          function z(t) {
            !1 !== n.enabled &&
              (0 === b.length &&
                (n.domElement.setPointerCapture(t.pointerId),
                n.domElement.addEventListener("pointermove", V),
                n.domElement.addEventListener("pointerup", X)),
              (function (t) {
                b.push(t);
              })(t),
              "touch" === t.pointerType
                ? (function (t) {
                    switch ((q(t), b.length)) {
                      case 1:
                        switch (n.touches.ONE) {
                          case 0:
                            if (!1 === n.enableRotate) return;
                            U(), (i = r.TOUCH_ROTATE);
                            break;
                          case 1:
                            if (!1 === n.enablePan) return;
                            F(), (i = r.TOUCH_PAN);
                            break;
                          default:
                            i = r.NONE;
                        }
                        break;
                      case 2:
                        switch (n.touches.TWO) {
                          case 2:
                            if (!1 === n.enableZoom && !1 === n.enablePan)
                              return;
                            n.enableZoom && B(),
                              n.enablePan && F(),
                              (i = r.TOUCH_DOLLY_PAN);
                            break;
                          case 3:
                            if (!1 === n.enableZoom && !1 === n.enableRotate)
                              return;
                            n.enableZoom && B(),
                              n.enableRotate && U(),
                              (i = r.TOUCH_DOLLY_ROTATE);
                            break;
                          default:
                            i = r.NONE;
                        }
                        break;
                      default:
                        i = r.NONE;
                    }
                    i !== r.NONE && n.dispatchEvent(qg);
                  })(t)
                : (function (t) {
                    let e;
                    switch (t.button) {
                      case 0:
                        e = n.mouseButtons.LEFT;
                        break;
                      case 1:
                        e = n.mouseButtons.MIDDLE;
                        break;
                      case 2:
                        e = n.mouseButtons.RIGHT;
                        break;
                      default:
                        e = -1;
                    }
                    switch (e) {
                      case 1:
                        if (!1 === n.enableZoom) return;
                        !(function (t) {
                          C(t), _.set(t.clientX, t.clientY);
                        })(t),
                          (i = r.DOLLY);
                        break;
                      case 0:
                        if (t.ctrlKey || t.metaKey || t.shiftKey) {
                          if (!1 === n.enablePan) return;
                          D(t), (i = r.PAN);
                        } else {
                          if (!1 === n.enableRotate) return;
                          L(t), (i = r.ROTATE);
                        }
                        break;
                      case 2:
                        if (t.ctrlKey || t.metaKey || t.shiftKey) {
                          if (!1 === n.enableRotate) return;
                          L(t), (i = r.ROTATE);
                        } else {
                          if (!1 === n.enablePan) return;
                          D(t), (i = r.PAN);
                        }
                        break;
                      default:
                        i = r.NONE;
                    }
                    i !== r.NONE && n.dispatchEvent(qg);
                  })(t));
          }
          function V(t) {
            !1 !== n.enabled &&
              ("touch" === t.pointerType
                ? (function (t) {
                    switch ((q(t), i)) {
                      case r.TOUCH_ROTATE:
                        if (!1 === n.enableRotate) return;
                        G(t), n.update();
                        break;
                      case r.TOUCH_PAN:
                        if (!1 === n.enablePan) return;
                        k(t), n.update();
                        break;
                      case r.TOUCH_DOLLY_PAN:
                        if (!1 === n.enableZoom && !1 === n.enablePan) return;
                        !(function (t) {
                          n.enableZoom && H(t), n.enablePan && k(t);
                        })(t),
                          n.update();
                        break;
                      case r.TOUCH_DOLLY_ROTATE:
                        if (!1 === n.enableZoom && !1 === n.enableRotate)
                          return;
                        !(function (t) {
                          n.enableZoom && H(t), n.enableRotate && G(t);
                        })(t),
                          n.update();
                        break;
                      default:
                        i = r.NONE;
                    }
                  })(t)
                : (function (t) {
                    switch (i) {
                      case r.ROTATE:
                        if (!1 === n.enableRotate) return;
                        !(function (t) {
                          c.set(t.clientX, t.clientY),
                            d.subVectors(c, h).multiplyScalar(n.rotateSpeed);
                          const e = n.domElement;
                          M((2 * Math.PI * d.x) / e.clientHeight),
                            A((2 * Math.PI * d.y) / e.clientHeight),
                            h.copy(c),
                            n.update();
                        })(t);
                        break;
                      case r.DOLLY:
                        if (!1 === n.enableZoom) return;
                        !(function (t) {
                          g.set(t.clientX, t.clientY),
                            v.subVectors(g, _),
                            v.y > 0 ? I(S()) : v.y < 0 && O(S()),
                            _.copy(g),
                            n.update();
                        })(t);
                        break;
                      case r.PAN:
                        if (!1 === n.enablePan) return;
                        !(function (t) {
                          p.set(t.clientX, t.clientY),
                            m.subVectors(p, f).multiplyScalar(n.panSpeed),
                            P(m.x, m.y),
                            f.copy(p),
                            n.update();
                        })(t);
                    }
                  })(t));
          }
          function X(t) {
            !(function (t) {
              delete x[t.pointerId];
              for (let e = 0; e < b.length; e++)
                if (b[e].pointerId == t.pointerId) return void b.splice(e, 1);
            })(t),
              0 === b.length &&
                (n.domElement.releasePointerCapture(t.pointerId),
                n.domElement.removeEventListener("pointermove", V),
                n.domElement.removeEventListener("pointerup", X)),
              n.dispatchEvent(Kg),
              (i = r.NONE);
          }
          function W(t) {
            !1 !== n.enabled &&
              !1 !== n.enableZoom &&
              i === r.NONE &&
              (t.preventDefault(),
              n.dispatchEvent(qg),
              (function (t) {
                C(t),
                  t.deltaY < 0 ? O(S()) : t.deltaY > 0 && I(S()),
                  n.update();
              })(t),
              n.dispatchEvent(Kg));
          }
          function j(t) {
            !1 !== n.enabled &&
              !1 !== n.enablePan &&
              (function (t) {
                let e = !1;
                switch (t.code) {
                  case n.keys.UP:
                    t.ctrlKey || t.metaKey || t.shiftKey
                      ? A(
                          (2 * Math.PI * n.rotateSpeed) /
                            n.domElement.clientHeight,
                        )
                      : P(0, n.keyPanSpeed),
                      (e = !0);
                    break;
                  case n.keys.BOTTOM:
                    t.ctrlKey || t.metaKey || t.shiftKey
                      ? A(
                          (-2 * Math.PI * n.rotateSpeed) /
                            n.domElement.clientHeight,
                        )
                      : P(0, -n.keyPanSpeed),
                      (e = !0);
                    break;
                  case n.keys.LEFT:
                    t.ctrlKey || t.metaKey || t.shiftKey
                      ? M(
                          (2 * Math.PI * n.rotateSpeed) /
                            n.domElement.clientHeight,
                        )
                      : P(n.keyPanSpeed, 0),
                      (e = !0);
                    break;
                  case n.keys.RIGHT:
                    t.ctrlKey || t.metaKey || t.shiftKey
                      ? M(
                          (-2 * Math.PI * n.rotateSpeed) /
                            n.domElement.clientHeight,
                        )
                      : P(-n.keyPanSpeed, 0),
                      (e = !0);
                }
                e && (t.preventDefault(), n.update());
              })(t);
          }
          function Y(t) {
            !1 !== n.enabled && t.preventDefault();
          }
          function q(t) {
            let e = x[t.pointerId];
            void 0 === e && ((e = new vc()), (x[t.pointerId] = e)),
              e.set(t.pageX, t.pageY);
          }
          function K(t) {
            const e = t.pointerId === b[0].pointerId ? b[1] : b[0];
            return x[e.pointerId];
          }
          n.domElement.addEventListener("contextmenu", Y),
            n.domElement.addEventListener("pointerdown", z),
            n.domElement.addEventListener("pointercancel", X),
            n.domElement.addEventListener("wheel", W, { passive: !1 }),
            this.update();
        }
      }
      const tv = {
          uniforms: {
            tDiffuse: { value: null },
            resolution: { value: new vc(1 / 1024, 1 / 512) },
          },
          vertexShader:
            "\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",
          fragmentShader:
            "\n\tprecision highp float;\n\n\tuniform sampler2D tDiffuse;\n\n\tuniform vec2 resolution;\n\n\tvarying vec2 vUv;\n\n\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t//----------------------------------------------------------------------------------\n\t// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n\t// SDK Version: v3.00\n\t// Email:       gameworks@nvidia.com\n\t// Site:        http://developer.nvidia.com/\n\t//\n\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t//\n\t// Redistribution and use in source and binary forms, with or without\n\t// modification, are permitted provided that the following conditions\n\t// are met:\n\t//  * Redistributions of source code must retain the above copyright\n\t//    notice, this list of conditions and the following disclaimer.\n\t//  * Redistributions in binary form must reproduce the above copyright\n\t//    notice, this list of conditions and the following disclaimer in the\n\t//    documentation and/or other materials provided with the distribution.\n\t//  * Neither the name of NVIDIA CORPORATION nor the names of its\n\t//    contributors may be used to endorse or promote products derived\n\t//    from this software without specific prior written permission.\n\t//\n\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY\n\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t//\n\t//----------------------------------------------------------------------------------\n\n\t#ifndef FXAA_DISCARD\n\t\t\t//\n\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t//\n\t\t\t// 1 = Use discard on pixels which don't need AA.\n\t\t\t//     For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t// 0 = Return unchanged color on pixels which don't need AA.\n\t\t\t//\n\t\t\t#define FXAA_DISCARD 0\n\t#endif\n\n\t/*--------------------------------------------------------------------------*/\n\t#define FxaaTexTop(t, p) texture2D(t, p, -100.0)\n\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)\n\t/*--------------------------------------------------------------------------*/\n\n\t#define NUM_SAMPLES 5\n\n\t// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha\n\tfloat contrast( vec4 a, vec4 b ) {\n\t\t\tvec4 diff = abs( a - b );\n\t\t\treturn max( max( max( diff.r, diff.g ), diff.b ), diff.a );\n\t}\n\n\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\tFXAA3 QUALITY - PC\n\n\t============================================================================*/\n\n\t/*--------------------------------------------------------------------------*/\n\tvec4 FxaaPixelShader(\n\t\t\tvec2 posM,\n\t\t\tsampler2D tex,\n\t\t\tvec2 fxaaQualityRcpFrame,\n\t\t\tfloat fxaaQualityEdgeThreshold,\n\t\t\tfloat fxaaQualityinvEdgeThreshold\n\t) {\n\t\t\tvec4 rgbaM = FxaaTexTop(tex, posM);\n\t\t\tvec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\t// . S .\n\t\t\t// W M E\n\t\t\t// . N .\n\n\t\t\tbool earlyExit = max( max( max(\n\t\t\t\t\tcontrast( rgbaM, rgbaN ),\n\t\t\t\t\tcontrast( rgbaM, rgbaS ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaE ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaW ) )\n\t\t\t\t\t< fxaaQualityEdgeThreshold;\n\t\t\t// . 0 .\n\t\t\t// 0 0 0\n\t\t\t// . 0 .\n\n\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\tif(earlyExit) FxaaDiscard;\n\t\t\t#else\n\t\t\t\t\tif(earlyExit) return rgbaM;\n\t\t\t#endif\n\n\t\t\tfloat contrastN = contrast( rgbaM, rgbaN );\n\t\t\tfloat contrastS = contrast( rgbaM, rgbaS );\n\t\t\tfloat contrastE = contrast( rgbaM, rgbaE );\n\t\t\tfloat contrastW = contrast( rgbaM, rgbaW );\n\n\t\t\tfloat relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );\n\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\tbool horzSpan = relativeVContrast > 0.;\n\t\t\t// . 1 .\n\t\t\t// 0 0 0\n\t\t\t// . 1 .\n\n\t\t\t// 45 deg edge detection and corners of objects, aka V/H contrast is too similar\n\t\t\tif( abs( relativeVContrast ) < .3 ) {\n\t\t\t\t\t// locate the edge\n\t\t\t\t\tvec2 dirToEdge;\n\t\t\t\t\tdirToEdge.x = contrastE > contrastW ? 1. : -1.;\n\t\t\t\t\tdirToEdge.y = contrastS > contrastN ? 1. : -1.;\n\t\t\t\t\t// . 2 .      . 1 .\n\t\t\t\t\t// 1 0 2  ~=  0 0 1\n\t\t\t\t\t// . 1 .      . 0 .\n\n\t\t\t\t\t// tap 2 pixels and see which ones are \"outside\" the edge, to\n\t\t\t\t\t// determine if the edge is vertical or horizontal\n\n\t\t\t\t\tvec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongH = contrast( rgbaM, rgbaAlongH );\n\t\t\t\t\t// . 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 H\n\n\t\t\t\t\tvec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongV = contrast( rgbaM, rgbaAlongV );\n\t\t\t\t\t// V 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 .\n\n\t\t\t\t\trelativeVContrast = matchAlongV - matchAlongH;\n\t\t\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\t\t\tif( abs( relativeVContrast ) < .3 ) { // 45 deg edge\n\t\t\t\t\t\t\t// 1 1 .\n\t\t\t\t\t\t\t// 0 0 1\n\t\t\t\t\t\t\t// . 0 1\n\n\t\t\t\t\t\t\t// do a simple blur\n\t\t\t\t\t\t\treturn mix(\n\t\t\t\t\t\t\t\t\trgbaM,\n\t\t\t\t\t\t\t\t\t(rgbaN + rgbaS + rgbaE + rgbaW) * .25,\n\t\t\t\t\t\t\t\t\t.4\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\thorzSpan = relativeVContrast > 0.;\n\t\t\t}\n\n\t\t\tif(!horzSpan) rgbaN = rgbaW;\n\t\t\tif(!horzSpan) rgbaS = rgbaE;\n\t\t\t// . 0 .      1\n\t\t\t// 1 0 1  ->  0\n\t\t\t// . 0 .      1\n\n\t\t\tbool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );\n\t\t\tif(!pairN) rgbaN = rgbaS;\n\n\t\t\tvec2 offNP;\n\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\n\t\t\tbool doneN = false;\n\t\t\tbool doneP = false;\n\n\t\t\tfloat nDist = 0.;\n\t\t\tfloat pDist = 0.;\n\n\t\t\tvec2 posN = posM;\n\t\t\tvec2 posP = posM;\n\n\t\t\tint iterationsUsed = 0;\n\t\t\tint iterationsUsedN = 0;\n\t\t\tint iterationsUsedP = 0;\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i++ ) {\n\t\t\t\t\titerationsUsed = i;\n\n\t\t\t\t\tfloat increment = float(i + 1);\n\n\t\t\t\t\tif(!doneN) {\n\t\t\t\t\t\t\tnDist += increment;\n\t\t\t\t\t\t\tposN = posM + offNP * nDist;\n\t\t\t\t\t\t\tvec4 rgbaEndN = FxaaTexTop(tex, posN.xy);\n\t\t\t\t\t\t\tdoneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );\n\t\t\t\t\t\t\titerationsUsedN = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!doneP) {\n\t\t\t\t\t\t\tpDist += increment;\n\t\t\t\t\t\t\tposP = posM - offNP * pDist;\n\t\t\t\t\t\t\tvec4 rgbaEndP = FxaaTexTop(tex, posP.xy);\n\t\t\t\t\t\t\tdoneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );\n\t\t\t\t\t\t\titerationsUsedP = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(doneN || doneP) break;\n\t\t\t}\n\n\n\t\t\tif ( !doneP && !doneN ) return rgbaM; // failed to find end of edge\n\n\t\t\tfloat dist = min(\n\t\t\t\t\tdoneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,\n\t\t\t\t\tdoneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.\n\t\t\t);\n\n\t\t\t// hacky way of reduces blurriness of mostly diagonal edges\n\t\t\t// but reduces AA quality\n\t\t\tdist = pow(dist, .5);\n\n\t\t\tdist = 1. - dist;\n\n\t\t\treturn mix(\n\t\t\t\t\trgbaM,\n\t\t\t\t\trgbaN,\n\t\t\t\t\tdist * .5\n\t\t\t);\n\t}\n\n\tvoid main() {\n\t\t\tconst float edgeDetectionQuality = .2;\n\t\t\tconst float invEdgeDetectionQuality = 1. / edgeDetectionQuality;\n\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\t\tvUv,\n\t\t\t\t\ttDiffuse,\n\t\t\t\t\tresolution,\n\t\t\t\t\tedgeDetectionQuality, // [0,1] contrast needed, otherwise early discard\n\t\t\t\t\tinvEdgeDetectionQuality\n\t\t\t);\n\n\t}\n\t",
        },
        ev = {
          name: "CopyShader",
          uniforms: { tDiffuse: { value: null }, opacity: { value: 1 } },
          vertexShader:
            "\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",
          fragmentShader:
            "\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}",
        };
      class nv {
        constructor() {
          (this.isPass = !0),
            (this.enabled = !0),
            (this.needsSwap = !0),
            (this.clear = !1),
            (this.renderToScreen = !1);
        }
        setSize() {}
        render() {
          console.error(
            "THREE.Pass: .render() deve ser implementado na passagem derivada.",
          );
        }
        dispose() {}
      }
      const rv = new Ap(-1, 1, 1, -1, 0, 1),
        iv = new wf();
      iv.setAttribute("position", new Ef([-1, 3, 0, -1, -1, 0, 3, -1, 0], 3)),
        iv.setAttribute("uv", new Ef([0, 2, 0, 0, 2, 0], 2));
      class ov {
        constructor(t) {
          this._mesh = new jf(iv, t);
        }
        dispose() {
          this._mesh.geometry.dispose();
        }
        render(t) {
          t.render(this._mesh, rv);
        }
        get material() {
          return this._mesh.material;
        }
        set material(t) {
          this._mesh.material = t;
        }
      }
      class av extends nv {
        constructor(t, e) {
          super(),
            (this.textureID = void 0 !== e ? e : "tDiffuse"),
            t instanceof Jf
              ? ((this.uniforms = t.uniforms), (this.material = t))
              : t &&
                ((this.uniforms = $f.clone(t.uniforms)),
                (this.material = new Jf({
                  name: void 0 !== t.name ? t.name : "unspecified",
                  defines: Object.assign({}, t.defines),
                  uniforms: this.uniforms,
                  vertexShader: t.vertexShader,
                  fragmentShader: t.fragmentShader,
                }))),
            (this.fsQuad = new ov(this.material));
        }
        render(t, e, n) {
          this.uniforms[this.textureID] &&
            (this.uniforms[this.textureID].value = n.texture),
            (this.fsQuad.material = this.material),
            this.renderToScreen
              ? (t.setRenderTarget(null), this.fsQuad.render(t))
              : (t.setRenderTarget(e),
                this.clear &&
                  t.clear(
                    t.autoClearColor,
                    t.autoClearDepth,
                    t.autoClearStencil,
                  ),
                this.fsQuad.render(t));
        }
        dispose() {
          this.material.dispose(), this.fsQuad.dispose();
        }
      }
      class sv extends nv {
        constructor(t, e) {
          super(),
            (this.scene = t),
            (this.camera = e),
            (this.clear = !0),
            (this.needsSwap = !1),
            (this.inverse = !1);
        }
        render(t, e, n) {
          const r = t.getContext(),
            i = t.state;
          let o, a;
          i.buffers.color.setMask(!1),
            i.buffers.depth.setMask(!1),
            i.buffers.color.setLocked(!0),
            i.buffers.depth.setLocked(!0),
            this.inverse ? ((o = 0), (a = 1)) : ((o = 1), (a = 0)),
            i.buffers.stencil.setTest(!0),
            i.buffers.stencil.setOp(r.REPLACE, r.REPLACE, r.REPLACE),
            i.buffers.stencil.setFunc(r.ALWAYS, o, 4294967295),
            i.buffers.stencil.setClear(a),
            i.buffers.stencil.setLocked(!0),
            t.setRenderTarget(n),
            this.clear && t.clear(),
            t.render(this.scene, this.camera),
            t.setRenderTarget(e),
            this.clear && t.clear(),
            t.render(this.scene, this.camera),
            i.buffers.color.setLocked(!1),
            i.buffers.depth.setLocked(!1),
            i.buffers.color.setMask(!0),
            i.buffers.depth.setMask(!0),
            i.buffers.stencil.setLocked(!1),
            i.buffers.stencil.setFunc(r.EQUAL, 1, 4294967295),
            i.buffers.stencil.setOp(r.KEEP, r.KEEP, r.KEEP),
            i.buffers.stencil.setLocked(!0);
        }
      }
      class lv extends nv {
        constructor() {
          super(), (this.needsSwap = !1);
        }
        render(t) {
          t.state.buffers.stencil.setLocked(!1),
            t.state.buffers.stencil.setTest(!1);
        }
      }
      class uv {
        constructor(t, e) {
          if (
            ((this.renderer = t),
            (this._pixelRatio = t.getPixelRatio()),
            void 0 === e)
          ) {
            const n = t.getSize(new vc());
            (this._width = n.width),
              (this._height = n.height),
              ((e = new Hc(
                this._width * this._pixelRatio,
                this._height * this._pixelRatio,
                { type: Ph },
              )).texture.name = "EffectComposer.rt1");
          } else (this._width = e.width), (this._height = e.height);
          (this.renderTarget1 = e),
            (this.renderTarget2 = e.clone()),
            (this.renderTarget2.texture.name = "EffectComposer.rt2"),
            (this.writeBuffer = this.renderTarget1),
            (this.readBuffer = this.renderTarget2),
            (this.renderToScreen = !0),
            (this.passes = []),
            (this.copyPass = new av(ev)),
            (this.copyPass.material.blending = ih),
            (this.clock = new Lg());
        }
        swapBuffers() {
          const t = this.readBuffer;
          (this.readBuffer = this.writeBuffer), (this.writeBuffer = t);
        }
        addPass(t) {
          this.passes.push(t),
            t.setSize(
              this._width * this._pixelRatio,
              this._height * this._pixelRatio,
            );
        }
        insertPass(t, e) {
          this.passes.splice(e, 0, t),
            t.setSize(
              this._width * this._pixelRatio,
              this._height * this._pixelRatio,
            );
        }
        removePass(t) {
          const e = this.passes.indexOf(t);
          -1 !== e && this.passes.splice(e, 1);
        }
        isLastEnabledPass(t) {
          for (let e = t + 1; e < this.passes.length; e++)
            if (this.passes[e].enabled) return !1;
          return !0;
        }
        render(t) {
          void 0 === t && (t = this.clock.getDelta());
          const e = this.renderer.getRenderTarget();
          let n = !1;
          for (let e = 0, r = this.passes.length; e < r; e++) {
            const r = this.passes[e];
            if (!1 !== r.enabled) {
              if (
                ((r.renderToScreen =
                  this.renderToScreen && this.isLastEnabledPass(e)),
                r.render(
                  this.renderer,
                  this.writeBuffer,
                  this.readBuffer,
                  t,
                  n,
                ),
                r.needsSwap)
              ) {
                if (n) {
                  const e = this.renderer.getContext(),
                    n = this.renderer.state.buffers.stencil;
                  n.setFunc(e.NOTEQUAL, 1, 4294967295),
                    this.copyPass.render(
                      this.renderer,
                      this.writeBuffer,
                      this.readBuffer,
                      t,
                    ),
                    n.setFunc(e.EQUAL, 1, 4294967295);
                }
                this.swapBuffers();
              }
              void 0 !== sv &&
                (r instanceof sv ? (n = !0) : r instanceof lv && (n = !1));
            }
          }
          this.renderer.setRenderTarget(e);
        }
        reset(t) {
          if (void 0 === t) {
            const e = this.renderer.getSize(new vc());
            (this._pixelRatio = this.renderer.getPixelRatio()),
              (this._width = e.width),
              (this._height = e.height),
              (t = this.renderTarget1.clone()).setSize(
                this._width * this._pixelRatio,
                this._height * this._pixelRatio,
              );
          }
          this.renderTarget1.dispose(),
            this.renderTarget2.dispose(),
            (this.renderTarget1 = t),
            (this.renderTarget2 = t.clone()),
            (this.writeBuffer = this.renderTarget1),
            (this.readBuffer = this.renderTarget2);
        }
        setSize(t, e) {
          (this._width = t), (this._height = e);
          const n = this._width * this._pixelRatio,
            r = this._height * this._pixelRatio;
          this.renderTarget1.setSize(n, r), this.renderTarget2.setSize(n, r);
          for (let t = 0; t < this.passes.length; t++)
            this.passes[t].setSize(n, r);
        }
        setPixelRatio(t) {
          (this._pixelRatio = t), this.setSize(this._width, this._height);
        }
        dispose() {
          this.renderTarget1.dispose(),
            this.renderTarget2.dispose(),
            this.copyPass.dispose();
        }
      }
      class hv extends nv {
        constructor(t, e, n, r, i) {
          super(),
            (this.scene = t),
            (this.camera = e),
            (this.overrideMaterial = n),
            (this.clearColor = r),
            (this.clearAlpha = void 0 !== i ? i : 0),
            (this.clear = !0),
            (this.clearDepth = !1),
            (this.needsSwap = !1),
            (this._oldClearColor = new df());
        }
        render(t, e, n) {
          const r = t.autoClear;
          let i, o;
          (t.autoClear = !1),
            void 0 !== this.overrideMaterial &&
              ((o = this.scene.overrideMaterial),
              (this.scene.overrideMaterial = this.overrideMaterial)),
            this.clearColor &&
              (t.getClearColor(this._oldClearColor),
              (i = t.getClearAlpha()),
              t.setClearColor(this.clearColor, this.clearAlpha)),
            this.clearDepth && t.clearDepth(),
            t.setRenderTarget(this.renderToScreen ? null : n),
            this.clear &&
              t.clear(t.autoClearColor, t.autoClearDepth, t.autoClearStencil),
            t.render(this.scene, this.camera),
            this.clearColor && t.setClearColor(this._oldClearColor, i),
            void 0 !== this.overrideMaterial &&
              (this.scene.overrideMaterial = o),
            (t.autoClear = r);
        }
      }
      function cv(t) {
        return (
          (cv =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (t) {
                  return typeof t;
                }
              : function (t) {
                  return t &&
                    "function" == typeof Symbol &&
                    t.constructor === Symbol &&
                    t !== Symbol.prototype
                    ? "symbol"
                    : typeof t;
                }),
          cv(t)
        );
      }
      function dv(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            "value" in r && (r.writable = !0),
            Object.defineProperty(t, fv(r.key), r);
        }
      }
      function fv(t) {
        var e = (function (t, e) {
          if ("object" !== cv(t) || null === t) return t;
          var n = t[Symbol.toPrimitive];
          if (void 0 !== n) {
            var r = n.call(t, "string");
            if ("object" !== cv(r)) return r;
            throw new TypeError("@@toPrimitive deve retornar um valor primitivo.");
          }
          return String(t);
        })(t);
        return "symbol" === cv(e) ? e : String(e);
      }
      function pv(t, e) {
        return (
          (pv = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (t, e) {
                return (t.__proto__ = e), t;
              }),
          pv(t, e)
        );
      }
      function mv(t) {
        if (void 0 === t)
          throw new ReferenceError(
            "isso não foi inicializado - super() não foi chamado",
          );
        return t;
      }
      function _v(t) {
        return (
          (_v = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (t) {
                return t.__proto__ || Object.getPrototypeOf(t);
              }),
          _v(t)
        );
      }
      var gv = (function (e) {
        !(function (t, e) {
          if ("function" != typeof e && null !== e)
            throw new TypeError(
              "A super expressão deve ser nula ou uma função",
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: { value: t, writable: !0, configurable: !0 },
          })),
            Object.defineProperty(t, "prototype", { writable: !1 }),
            e && pv(t, e);
        })(s, e);
        var n,
          r,
          i,
          o,
          a =
            ((i = s),
            (o = (function () {
              if ("undefined" == typeof Reflect || !Reflect.construct)
                return !1;
              if (Reflect.construct.sham) return !1;
              if ("function" == typeof Proxy) return !0;
              try {
                return (
                  Boolean.prototype.valueOf.call(
                    Reflect.construct(Boolean, [], function () {}),
                  ),
                  !0
                );
              } catch (t) {
                return !1;
              }
            })()),
            function () {
              var t,
                e = _v(i);
              if (o) {
                var n = _v(this).constructor;
                t = Reflect.construct(e, arguments, n);
              } else t = e.apply(this, arguments);
              return (function (t, e) {
                if (e && ("object" === cv(e) || "function" == typeof e))
                  return e;
                if (void 0 !== e)
                  throw new TypeError(
                    "Construtores derivados podem retornar apenas objetos ou indefinidos",
                  );
                return mv(t);
              })(this, t);
            });
        function s(t) {
          var e;
          return (
            (function (t, e) {
              if (!(t instanceof e))
                throw new TypeError("Não é possível chamar uma classe como uma função");
            })(this, s),
            ((e = a.call(this, t)).initialState = {
              isDragging: !1,
              isDraggingSun: !1,
              isDraggingMoon: !1,
              mouseoverSun: !1,
              mouseoverMoon: !1,
            }),
            (e.state = e.initialState),
            (e.dayColor = 9486591),
            (e.id = "CelestialSphere"),
            (e.start = e.start.bind(mv(e))),
            (e.stop = e.stop.bind(mv(e))),
            (e.animacao = e.animacao.bind(mv(e))),
            (e.raycaster = new Vg()),
            (e.mouse = new vc()),
            (e.onMouseMove = e.onMouseMove.bind(mv(e))),
            (e.onMouseDown = e.onMouseDown.bind(mv(e))),
            (e.onMouseUp = e.onMouseUp.bind(mv(e))),
            e
          );
        }
        return (
          (n = s),
          (r = [
            {
              key: "componentDidMount",
              value: function () {
                var t = this.mount.clientWidth,
                  e = this.mount.clientHeight,
                  n = t / e,
                  r = new Y_(),
                  i = new Ap((100 * n) / -2, (100 * n) / 2, 50, -50, 1, 1e3);
                i.position.set(-60, 20, 0);
                var o = new Jg(i, this.mount);
                (o.enableKeys = !1),
                  (o.enablePan = !1),
                  (o.enableZoom = !1),
                  (o.minPolarAngle = _c(0)),
                  (o.maxPolarAngle = _c(70));
                var a = new j_({
                  antialias: !0,
                  canvas: document.getElementById(this.id + "Canvas"),
                });
                (a.useLegacyLights = !0),
                  a.setPixelRatio(window.devicePixelRatio),
                  a.setClearColor(16777215);
                var s = window.devicePixelRatio,
                  l = new uv(a);
                l.addPass(new hv(r, i));
                var u = new av(tv);
                (u.uniforms.resolution.value = new vc(
                  1 / (2 * t * s),
                  1 / (2 * e * s),
                )),
                  (u.renderToScreen = !0),
                  l.setSize(4 * t * s, 4 * e * s),
                  l.addPass(u),
                  o.update(),
                  (this.controls = o),
                  (this.plane = this.drawPlane(r)),
                  this.drawStickFigure(r),
                  this.drawGlobe(r),
                  (this.moon = this.drawMoon(r)),
                  (this.sun = this.drawSun(r)),
                  (this.angle = this.drawAngle(r)),
                  (this.orbitGroup = new B_()),
                  this.orbitGroup.add(this.sun),
                  this.orbitGroup.add(this.moon),
                  this.orbitGroup.add(this.celestialEquator),
                  this.orbitGroup.add(this.angle),
                  (this.orbitGroup.rotation.x = _c(-50)),
                  r.add(this.orbitGroup),
                  (this.orbitPlane = new up(new Wc(0, _c(50), -1), 0)),
                  (this.scene = r),
                  (this.camera = i),
                  (this.renderer = a),
                  this.renderer.domElement.addEventListener(
                    "pointermove",
                    this.onMouseMove,
                    !1,
                  ),
                  this.renderer.domElement.addEventListener(
                    "pointerdown",
                    this.onMouseDown,
                    !1,
                  ),
                  this.renderer.domElement.addEventListener(
                    "pointerup",
                    this.onMouseUp,
                    !1,
                  ),
                  (this.composer = l),
                  this.mount.appendChild(this.renderer.domElement),
                  this.start();
              },
            },
            {
              key: "componentWillUnmount",
              value: function () {
                this.stop(), this.mount.removeChild(this.renderer.domElement);
              },
            },
            {
              key: "componentDidUpdate",
              value: function (t, e) {
                if (
                  (!this.props.showAngle ||
                    (t.observerAngle === this.props.observerAngle &&
                      t.LuaAngle === this.props.LuaAngle) ||
                    ((this.angle.visible = !0),
                    this.updateAngleGeometry(
                      this.angle,
                      this.props.observerAngle,
                      this.props.LuaAngle,
                    )),
                  t.showAngle !== this.props.showAngle &&
                    (this.props.showAngle &&
                      this.updateAngleGeometry(
                        this.angle,
                        this.props.observerAngle,
                        this.props.LuaAngle,
                      ),
                    (this.angle.visible = this.props.showAngle)),
                  t.observerAngle !== this.props.observerAngle &&
                    (this.updateSunPos(this.sun, this.props.observerAngle),
                    this.updateMoonPos(
                      this.moon,
                      this.props.observerAngle,
                      this.props.LuaAngle,
                    ),
                    (this.skyMaterial.color = this.getSkyColor())),
                  t.LuaAngle !== this.props.LuaAngle &&
                    this.updateMoonPos(
                      this.moon,
                      this.props.observerAngle,
                      this.props.LuaAngle,
                    ),
                  e.mouseoverSun !== this.state.mouseoverSun)
                ) {
                  var n = this.sun.children[1];
                  (n.verticesNeedUpdate = !0),
                    this.state.mouseoverSun
                      ? (n.geometry = new mg(5, 0.35, 16, 32))
                      : (n.geometry = new mg(5, 0.2, 16, 32));
                }
                if (e.mouseoverMoon !== this.state.mouseoverMoon) {
                  var r = this.moon.children[1];
                  (r.verticesNeedUpdate = !0),
                    this.state.mouseoverMoon
                      ? (r.geometry = new mg(5, 0.35, 16, 32))
                      : (r.geometry = new mg(5, 0.2, 16, 32));
                }
              },
            },
            {
              key: "updateSunPos",
              value: function (t, e) {
                (t.position.x = 50.25 * Math.cos(e)),
                  (t.position.z = 50.25 * Math.sin(e)),
                  (t.rotation.y = -e + Math.PI / 2);
              },
            },
            {
              key: "updateMoonPos",
              value: function (t, e, n) {
                (t.position.x = 50.25 * Math.cos(-n + e - Math.PI)),
                  (t.position.z = 50.25 * Math.sin(-n + e - Math.PI)),
                  (t.rotation.y = -(-n + e) + _c(90) - Math.PI);
              },
            },
            {
              key: "drawPlane",
              value: function (t) {
                var e = new Ng().load("img/plane.svg"),
                  n = new pf({ map: e });
                n.map.minFilter = xh;
                var r = new fg(50, 64),
                  i = new jf(r, n);
                return (
                  (i.name = "Plane"), (i.rotation.x = _c(-90)), t.add(i), i
                );
              },
            },
            {
              key: "drawGlobe",
              value: function (t) {
                var e = new pg(50, 64, 64, 0, 2 * Math.PI, 0, Math.PI / 2),
                  n = new pf({
                    transparent: !0,
                    opacity: 0.8,
                    color: 0,
                    side: nh,
                  }),
                  r = new jf(e, n);
                (r.rotation.x = Math.PI),
                  t.add(r),
                  (this.skyMaterial = new pf({
                    transparent: !0,
                    opacity: 0.8,
                    color: this.dayColor,
                    side: nh,
                  }));
                var i = new jf(e, this.skyMaterial);
                t.add(i);
                var o = new pf({
                    transparent: !0,
                    opacity: 0.5,
                    color: 16777215,
                  }),
                  a = new mg(50, 0.1, 16, 64),
                  s = new jf(a, o);
                (s.rotation.y = _c(90)), t.add(s);
                var l = new jf(a, o);
                (l.rotation.z = _c(90)), t.add(l);
                var u = new pf({ color: 16777215 }),
                  h = new mg(50, 0.3, 16, 64);
                (this.celestialEquator = new jf(h, u)),
                  (this.celestialEquator.rotation.x = _c(90));
              },
            },
            {
              key: "drawStickFigure",
              value: function (t) {
                var e = new Ng().load("img/stickfigure.svg"),
                  n = new Q_({ map: e }),
                  r = new cg(n);
                r.scale.set(5, 10, 5), (r.position.y = 4.5), t.add(r);
              },
            },
            {
              key: "drawSun",
              value: function () {
                var t = new mg(5, 0.2, 16, 32),
                  e = new pf({ color: 0 }),
                  n = new pf({ color: 16768256, side: rh }),
                  r = new fg(5, 32),
                  i = new jf(t, e),
                  o = new jf(r, n);
                o.name = "Sun";
                var a = new B_();
                return (
                  a.add(o),
                  a.add(i),
                  this.updateSunPos(a, this.props.observerAngle),
                  a
                );
              },
            },
            {
              key: "drawMoon",
              value: function () {
                var t = new mg(5, 0.2, 16, 32),
                  e = new pf({ color: 0 }),
                  n = new pf({ color: 12303291, side: rh }),
                  r = new fg(5, 32),
                  i = new jf(t, e),
                  o = new jf(r, n);
                o.name = "Moon";
                var a = new B_();
                return (
                  a.add(o),
                  a.add(i),
                  this.updateMoonPos(
                    a,
                    this.props.observerAngle,
                    this.props.LuaAngle,
                  ),
                  a
                );
              },
            },
            {
              key: "updateAngleGeometry",
              value: function (t, e, n) {
                var r = t.children.find(function (t) {
                    return "angleOutline" === t.name;
                  }),
                  i = t.children.find(function (t) {
                    return "angleSlice" === t.name;
                  }),
                  o = new mg(50, 0.4, 16, 100, n - Math.PI);
                r.geometry = o;
                var a = new fg(
                  50,
                  32,
                  Math.PI,
                  n > 0 ? n - Math.PI : n + Math.PI,
                );
                (i.geometry = a), (t.rotation.y = -e - Math.PI);
              },
            },
            {
              key: "drawAngle",
              value: function () {
                var t = new mg(50, 0.4, 16, 100, 0),
                  e = new pf({ color: 16776960 }),
                  n = new jf(t, e);
                (n.name = "angleOutline"), (n.rotation.x = Math.PI / 2);
                var r = new fg(50, 32, 0),
                  i = new pf({
                    color: 16776960,
                    transparent: !0,
                    opacity: 0.4,
                    side: rh,
                  }),
                  o = new jf(r, i);
                (o.name = "angleSlice"), (o.rotation.x = -Math.PI / 2);
                var a = new B_();
                return (
                  a.add(n),
                  a.add(o),
                  (a.visible = !1),
                  (a.rotation.y = Math.PI / 2),
                  this.updateAngleGeometry(
                    a,
                    this.props.observerAngle,
                    this.props.LuaAngle,
                  ),
                  a
                );
              },
            },
            {
              key: "start",
              value: function () {
                this.frameId ||
                  (this.frameId = requestAnimationFrame(this.animacao));
              },
            },
            {
              key: "stop",
              value: function () {
                cancelAnimationFrame(this.frameId);
              },
            },
            {
              key: "animacao",
              value: function () {
                (this.sun.position.x =
                  50.25 * Math.cos(this.props.observerAngle)),
                  (this.sun.position.z =
                    50.25 * Math.sin(this.props.observerAngle)),
                  (this.sun.rotation.y = -this.props.observerAngle + _c(90)),
                  this.renderScene(),
                  (this.frameId = window.requestAnimationFrame(this.animacao));
              },
            },
            {
              key: "renderScene",
              value: function () {
                this.composer.render();
              },
            },
            {
              key: "getTime",
              value: function (t) {
                var e = (gc(t) / 15) * 3600,
                  n = new Date("1/1/2018 6:00 AM");
                return new Date(n.getTime() + 1e3 * e);
              },
            },
            {
              key: "getSkyColor",
              value: function () {
                var t = new Wc();
                this.sun.getWorldPosition(t);
                var e = t.y;
                if (e < 0 || e > 180) return new df(137280);
                var n = new df(this.dayColor);
                return n.lerp(new df(137280), 1 - e / 40), n;
              },
            },
            {
              key: "render",
              value: function () {
                var e = this,
                  n = this.getTime(this.props.observerAngle).toLocaleTimeString(
                    [],
                    { hour: "2-digit", minute: "2-digit" },
                  );
                return t.createElement(
                  t.Fragment,
                  null,
                  t.createElement(
                    "div",
                    {
                      id: this.id,
                      style: {
                        width: "228px",
                        height: "228px",
                        visibility: this.props.isHidden ? "hidden" : "visible",
                      },
                      ref: function (t) {
                        e.mount = t;
                      },
                    },
                    t.createElement("canvas", {
                      id: this.id + "Canvas",
                      width: 456,
                      height: 456,
                    }),
                  ),
                  t.createElement(
                    "div",
                    {
                      style: {
                        visibility: this.props.isHidden ? "hidden" : "visible",
                      },
                    },
                    "Hora local do observador: ",
                    n,
                  ),
                  t.createElement(
                    "div",
                    { className: "text-right" },
                    t.createElement(
                      "button",
                      {
                        type: "button",
                        onClick: this.props.onHideShowToggle,
                        className: "btn btn-primary btn-sm",
                      },
                      this.props.isHidden ? "Exibir" : "Esconder",
                    ),
                  ),
                );
              },
            },
            {
              key: "findMouseIntersects",
              value: function (t, e, n, r) {
                r.setFromCamera(e, n);
                var i = [this.plane]
                  .concat(this.sun.children)
                  .concat(this.moon.children);
                return this.raycaster.intersectObjects(i);
              },
            },
            {
              key: "onMouseMove",
              value: function (t) {
                if (
                  (t.preventDefault(),
                  void 0 !== t.offsetX &&
                    void 0 !== t.offsetY &&
                    !this.state.isDragging)
                ) {
                  if (
                    ((this.mouse.x =
                      (t.offsetX / this.renderer.domElement.clientWidth) * 2 -
                      1),
                    (this.mouse.y =
                      (-t.offsetY / this.renderer.domElement.clientHeight) * 2 +
                      1),
                    this.state.isDraggingSun || this.state.isDraggingMoon)
                  ) {
                    var e = new Wc(),
                      n = new Wc(),
                      r = new Wc();
                    this.raycaster.setFromCamera(this.mouse, this.camera),
                      this.raycaster.ray.intersectPlane(this.orbitPlane, e);
                    for (
                      var i = this.celestialEquator.geometry,
                        o = i.index,
                        a = i.attributes.position,
                        s = 1 / 0,
                        l = new of(),
                        u = 0,
                        h = o.count;
                      u < h;
                      u += 3
                    ) {
                      var c = o.getX(u),
                        d = o.getX(u + 1),
                        f = o.getX(u + 2);
                      l.a.fromBufferAttribute(a, c),
                        l.b.fromBufferAttribute(a, d),
                        l.c.fromBufferAttribute(a, f),
                        l.closestPointToPoint(e, r);
                      var p = e.distanceToSquared(r);
                      p < s && (n.copy(r), (s = p));
                    }
                    var m = Math.atan2(n.y, n.x);
                    if (this.state.isDraggingSun) {
                      var _ = this.props.observerAngle - m;
                      return (
                        this.props.onLuaAngleUpdate(
                          (this.props.LuaAngle - _) % (2 * Math.PI),
                        ),
                        this.props.ObservadorAngleUpdate(m)
                      );
                    }
                    if (this.state.isDraggingMoon) {
                      var g = -m + this.props.observerAngle + Math.PI;
                      return (
                        g < -Math.PI
                          ? (g += 2 * Math.PI)
                          : g > Math.PI && (g -= 2 * Math.PI),
                        this.props.onLuaAngleUpdate(g)
                      );
                    }
                  }
                  this.setState(this.initialState);
                  var v = this.findMouseIntersects(
                    t,
                    this.mouse,
                    this.camera,
                    this.raycaster,
                  );
                  if (v.length > 0 && v[0].object) {
                    var y = "pointerover" + v[0].object.name;
                    this.setState(
                      (function (t, e, n) {
                        return (
                          (e = fv(e)) in t
                            ? Object.defineProperty(t, e, {
                                value: true,
                                enumerable: !0,
                                configurable: !0,
                                writable: !0,
                              })
                            : (t[e] = true),
                          t
                        );
                      })({}, y),
                    );
                  }
                }
              },
            },
            {
              key: "onMouseDown",
              value: function (t) {
                t.preventDefault();
                var e = this.findMouseIntersects(
                  t,
                  this.mouse,
                  this.camera,
                  this.raycaster,
                  this.renderer,
                );
                if (e.length > 0) {
                  if (e[0].object) {
                    var n = e[0].object;
                    "Plane" !== n.name
                      ? ((this.controls.enabled = !1),
                        "Sun" === n.name &&
                          this.setState({ isDraggingSun: !0 }),
                        "Moon" === n.name &&
                          this.setState({ isDraggingMoon: !0 }))
                      : this.setState({ isDragging: !0 });
                  }
                } else this.setState({ isDragging: !0 });
              },
            },
            {
              key: "onMouseUp",
              value: function (t) {
                t.preventDefault(),
                  (this.controls.enabled = !0),
                  this.setState({
                    isDragging: !1,
                    isDraggingSun: !1,
                    isDraggingMoon: !1,
                  });
              },
            },
            {
              key: "ReiniciarClicked",
              value: function () {
                this.controls.reset();
              },
            },
          ]) && dv(n.prototype, r),
          Object.defineProperty(n, "prototype", { writable: !1 }),
          s
        );
      })(t.Component);
      gv.propTypes = {
        observerAngle: i().number.isRequired,
        ObservadorAngleUpdate: i().func.isRequired,
        LuaAngle: i().number.isRequired,
        onLuaAngleUpdate: i().func.isRequired,
        showAngle: i().bool.isRequired,
        isHidden: i().bool.isRequired,
        onHideShowToggle: i().func.isRequired,
      };
      var vv = n(87);
      function yv(t) {
        return (
          (yv =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (t) {
                  return typeof t;
                }
              : function (t) {
                  return t &&
                    "function" == typeof Symbol &&
                    t.constructor === Symbol &&
                    t !== Symbol.prototype
                    ? "symbol"
                    : typeof t;
                }),
          yv(t)
        );
      }
      function Ev(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            "value" in r && (r.writable = !0),
            Object.defineProperty(t, Tv(r.key), r);
        }
      }
      function Tv(t) {
        var e = (function (t, e) {
          if ("object" !== yv(t) || null === t) return t;
          var n = t[Symbol.toPrimitive];
          if (void 0 !== n) {
            var r = n.call(t, "string");
            if ("object" !== yv(r)) return r;
            throw new TypeError("@@toPrimitive deve retornar um valor primitivo.");
          }
          return String(t);
        })(t);
        return "symbol" === yv(e) ? e : String(e);
      }
      function bv(t, e) {
        return (
          (bv = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (t, e) {
                return (t.__proto__ = e), t;
              }),
          bv(t, e)
        );
      }
      function xv(t) {
        if (void 0 === t)
          throw new ReferenceError(
            "isso não foi inicializado - super() não foi chamado",
          );
        return t;
      }
      function Sv(t) {
        return (
          (Sv = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (t) {
                return t.__proto__ || Object.getPrototypeOf(t);
              }),
          Sv(t)
        );
      }
      var Mv = (function (e) {
          !(function (t, e) {
            if ("function" != typeof e && null !== e)
              throw new TypeError(
                "A super expressão deve ser nula ou uma função",
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: { value: t, writable: !0, configurable: !0 },
            })),
              Object.defineProperty(t, "prototype", { writable: !1 }),
              e && bv(t, e);
          })(s, e);
          var n,
            r,
            i,
            o,
            a =
              ((i = s),
              (o = (function () {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                  return !1;
                if (Reflect.construct.sham) return !1;
                if ("function" == typeof Proxy) return !0;
                try {
                  return (
                    Boolean.prototype.valueOf.call(
                      Reflect.construct(Boolean, [], function () {}),
                    ),
                    !0
                  );
                } catch (t) {
                  return !1;
                }
              })()),
              function () {
                var t,
                  e = Sv(i);
                if (o) {
                  var n = Sv(this).constructor;
                  t = Reflect.construct(e, arguments, n);
                } else t = e.apply(this, arguments);
                return (function (t, e) {
                  if (e && ("object" === yv(e) || "function" == typeof e))
                    return e;
                  if (void 0 !== e)
                    throw new TypeError(
                      "Derived constructors may only return object or undefined",
                    );
                  return xv(t);
                })(this, t);
              });
          function s(e) {
            var n;
            return (
              (function (t, e) {
                if (!(t instanceof e))
                  throw new TypeError("Cannot call a class as a function");
              })(this, s),
              ((n = a.call(this, e)).initialState = {
                observerAngle: Math.PI / 2,
                LuaAngle: -Math.PI,
                isPlaying: !1,
                animacaoTaxa: 1,
                showAngle: !1,
                showLunarLandmark: !1,
                showTimeTickmarks: !1,
                celestialSphereIsHidden: !1,
                moonPhaseViewIsHidden: !1,
              }),
              (n.state = n.initialState),
              (n.raf = null),
              (n.synodicPeriod = 29.530589),
              (n.handleInputChange = n.handleInputChange.bind(xv(n))),
              (n.OcultarMostrarFaseLuarAlternar = n.OcultarMostrarFaseLuarAlternar.bind(
                xv(n),
              )),
              (n.OcultarMostrarEsferaCelestialAlternar =
                n.OcultarMostrarEsferaCelestialAlternar.bind(xv(n))),
              (n.pararAnimação = n.pararAnimação.bind(xv(n))),
              (n.celestialSphereRef = t.createRef()),
              n
            );
          }
          return (
            (n = s),
            (r = [
              {
                key: "render",
                value: function () {
                  var e = "Iniciar animação";
                  return (
                    this.state.isPlaying && (e = "Pausar animação"),
                    t.createElement(
                      t.Fragment,
                      null,
                      t.createElement(
                        "nav",
                        {
                          className:
                            "navbar navbar-expand-md navbar-light bg-light d-flex justify-content-between",
                        },
                        t.createElement(
                          "span",
                          { className: "navbar-brand mb-0 h1" },
                          "Simulador das fases da Lua",
                        ),
                        t.createElement(
                          "ul",
                          { className: "navbar-nav" },
                          t.createElement(
                            "li",
                            { className: "nav-item" },
                            t.createElement(
                              "a",
                              {
                                className: "nav-link",
                                href: "#",
                                onClick: this.ReiniciarClick.bind(this),
                              },
                              "Reiniciar",
                            ),
                          ),
                          t.createElement(
                            "li",
                            { className: "nav-item" },
                            t.createElement(
                              "a",
                              {
                                className: "nav-link",
                                href: "#",
                                "data-toggle": "modal",
                                "data-target": "#helpModal",
                              },
                              "Ajuda",
                            ),
                          ),
                          t.createElement(
                            "li",
                            { className: "nav-item" },
                            t.createElement(
                              "a",
                              {
                                className: "nav-link",
                                href: "#",
                                "data-toggle": "modal",
                                "data-target": "#aboutModal",
                              },
                              "Sobre",
                            ),
                          ),
                        ),
                      ),
                      t.createElement(
                        "div",
                        { className: "row mt-2" },
                        t.createElement(
                          "div",
                          { className: "col-8" },
                          t.createElement(Wu, {
                            observerAngle: this.state.observerAngle,
                            LuaAngle: this.state.LuaAngle,
                            showAngle: this.state.showAngle,
                            showLunarLandmark: this.state.showLunarLandmark,
                            showTimeTickmarks: this.state.showTimeTickmarks,
                            ObservadorAngleUpdate:
                              this.ObservadorAngleUpdate.bind(this),
                            onLuaAngleUpdate:
                              this.onLuaAngleUpdate.bind(this),
                              pararAnimação: this.pararAnimação,
                          }),
                          t.createElement(
                            "div",
                            { className: "row" },
                            t.createElement(
                              "div",
                              { className: "col" },
                              t.createElement(
                                "h4",
                                null,
                                "Animação e controles",
                              ),
                              t.createElement(
                                "button",
                                {
                                  type: "button",
                                  className: "btn btn-primary btn-sm",
                                  onClick: this.IniciarClique.bind(this),
                                },
                                e,
                              ),
                              t.createElement(
                                "form",
                                { className: "form-inline" },
                                t.createElement(
                                  "label",
                                  { htmlFor: "diamRange" },
                                  "Velocidade da animação:",
                                ),
                                t.createElement(vv.RangeStepInput, {
                                  name: "animacaoTaxa",
                                  className: "form-control-range ml-2",
                                  value: this.state.animacaoTaxa,
                                  onChange:
                                    this.onanimacaoTaxaChange.bind(this),
                                  step: 0.1,
                                  min: 0.1,
                                  max: 5,
                                }),
                              ),
                            ),
                            t.createElement(
                              "div",
                              { className: "col" },
                              "Incrementar o tempo:",
                              t.createElement(
                                "form",
                                { className: "form container increment-area" },
                                t.createElement(
                                  "div",
                                  { className: "row" },
                                  t.createElement(
                                    "div",
                                    { className: "col" },
                                    t.createElement(
                                      "div",
                                      { className: "form-group text-right" },
                                      t.createElement("label", null, "Dia:"),
                                    ),
                                    t.createElement(
                                      "div",
                                      { className: "form-group text-right" },
                                      t.createElement("label", null, "Hora:"),
                                    ),
                                    t.createElement(
                                      "div",
                                      { className: "form-group text-right" },
                                      t.createElement("label", null, "Minuto:"),
                                    ),
                                  ),
                                  t.createElement(
                                    "div",
                                    { className: "col" },
                                    t.createElement(
                                      "div",
                                      { className: "form-group" },
                                      t.createElement(
                                        "button",
                                        {
                                          type: "button",
                                          onClick:
                                            this.onDecrementDia.bind(this),
                                          className:
                                            "btn btn-outline-primary btn-sm",
                                        },
                                        "-",
                                      ),
                                      t.createElement(
                                        "button",
                                        {
                                          type: "button",
                                          onClick:
                                            this.onIncrementDia.bind(this),
                                          className:
                                            "btn btn-outline-primary btn-sm ml-1",
                                        },
                                        "+",
                                      ),
                                    ),
                                    t.createElement(
                                      "div",
                                      { className: "form-group" },
                                      t.createElement(
                                        "button",
                                        {
                                          type: "button",
                                          onClick:
                                            this.onDecrementHoras.bind(this),
                                          className:
                                            "btn btn-outline-primary btn-sm",
                                        },
                                        "-",
                                      ),
                                      t.createElement(
                                        "button",
                                        {
                                          type: "button",
                                          onClick:
                                            this.onIncrementHoras.bind(this),
                                          className:
                                            "btn btn-outline-primary btn-sm ml-1",
                                        },
                                        "+",
                                      ),
                                    ),
                                    t.createElement(
                                      "div",
                                      { className: "form-group" },
                                      t.createElement(
                                        "button",
                                        {
                                          type: "button",
                                          onClick:
                                            this.onDecrementMinute.bind(this),
                                          className:
                                            "btn btn-outline-primary btn-sm",
                                        },
                                        "-",
                                      ),
                                      t.createElement(
                                        "button",
                                        {
                                          type: "button",
                                          onClick:
                                            this.onIncrementMinute.bind(this),
                                          className:
                                            "btn btn-outline-primary btn-sm ml-1",
                                        },
                                        "+",
                                      ),
                                    ),
                                  ),
                                ),
                              ),
                            ),
                            t.createElement(      /*opções*/
                              "div",
                              { className: "col" },
                              t.createElement("h4", null, "Opções"),
                              t.createElement(
                                "div",
                                { className: "custom-control custom-checkbox" },
                                t.createElement("input", {
                                  type: "checkbox",
                                  className: "custom-control-input",
                                  name: "showAngle",
                                  onChange: this.handleInputChange,
                                  checked: this.state.showAngle,
                                  id: "showAngleToggle",
                                }),
                                t.createElement(
                                  "label",
                                  {
                                    className: "custom-control-label",
                                    htmlFor: "showAngleToggle",
                                  },
                                  "Ver ângulo",  //botao angulo
                                ),
                              ),
                              t.createElement(
                                "div",
                                { className: "custom-control custom-checkbox" },
                                t.createElement("input", {
                                  type: "checkbox",
                                  className: "custom-control-input",
                                  name: "showLunarLandmark",
                                  onChange: this.handleInputChange,
                                  checked: this.state.showLunarLandmark,
                                  id: "showLunarLandmarkToggle",
                                }),
                                t.createElement(
                                  "label",
                                  {
                                    className: "custom-control-label",
                                    htmlFor: "showLunarLandmarkToggle",
                                  },
                                  "Ver marcação lunar",   //botao marcação
                                ),
                              ),
                              t.createElement(
                                "div",
                                { className: "custom-control custom-checkbox" },
                                t.createElement("input", {
                                  type: "checkbox",
                                  className: "custom-control-input",
                                  name: "showTimeTickmarks",
                                  onChange: this.handleInputChange,
                                  checked: this.state.showTimeTickmarks,
                                  id: "showTimeTickmarksToggle",
                                }),
                                t.createElement(
                                  "label",
                                  {
                                    className: "custom-control-label",
                                    htmlFor: "showTimeTickmarksToggle",
                                  },
                                  "Ver relógio",       //botao relogio
                                ),
                              ),
                            ),
                          ),
                        ),
                        t.createElement(
                          "div",
                          { className: "col-4" },
                          t.createElement(
                            "div",
                            null,
                            t.createElement("h4", null, "Fase Lunar"),
                            t.createElement(Zu, {
                              isHidden: this.state.moonPhaseViewIsHidden,
                              onHideShowToggle: this.OcultarMostrarFaseLuarAlternar,
                              showLunarLandmark: this.state.showLunarLandmark,
                              LuaAngle: this.state.LuaAngle,
                              onLuaAngleUpdate:
                                this.onLuaAngleUpdate.bind(this),
                            }),
                          ),
                          t.createElement(
                            "div",       /*visual observador terra*/
                            null,
                            t.createElement("h4", null, "Visão do observador"),     
                            t.createElement(gv, {
                              ref: this.celestialSphereRef,
                              isHidden: this.state.celestialSphereIsHidden,
                              onHideShowToggle:
                                this.OcultarMostrarEsferaCelestialAlternar,
                              observerAngle: this.state.observerAngle,
                              ObservadorAngleUpdate:
                                this.ObservadorAngleUpdate.bind(this),
                                LuaAngle: this.state.LuaAngle,
                              onLuaAngleUpdate:
                                this.onLuaAngleUpdate.bind(this),
                              showAngle: this.state.showAngle,
                            }),
                          ),
                        ),
                      ),
                    )
                  );
                },
              },         /*Angulos */
              {
                key: "incrementoAngle",
                value: function (t, e) {
                  var n = t + e;
                  return n > 2 * Math.PI ? n - 2 * Math.PI : n;
                },
              },
              {
                key: "decrementoAngle",
                value: function (t, e) {
                  var n = t - e;
                  return n < 0 ? n + 2 * Math.PI : n;
                },
              },
              {
                key: "incrementLuaAngle",
                value: function (t, e) {
                  var n = t + e;
                  return n > Math.PI ? n - 2 * Math.PI : n;
                },
              },
              {
                key: "decrementLuaAngle",
                value: function (t, e) {
                  var n = t - e;
                  return n < -Math.PI ? n + 2 * Math.PI : n;
                },
              },                         /*animcao lunar */
              {
                key: "animacao",
                value: function () {
                  var t = this,
                    e = this;
                  this.setState(function (n) {
                    return {
                      observerAngle: e.incrementoAngle(
                        n.observerAngle,
                        0.03 * t.state.animacaoTaxa,
                      ),
                      LuaAngle: e.incrementLuaAngle(
                        n.LuaAngle,
                        0.001 * t.state.animacaoTaxa,
                      ),
                    };
                  }),
                    (this.raf = requestAnimationFrame(this.animacao.bind(this)));
                },
              },
              {                      /*iniciar lunar animaçaõ */
                key: "IniciarClique",
                value: function () {
                  this.state.isPlaying
                    ? (this.pararAnimação(), this.setState({ isPlaying: !1 }))
                    : ((this.raf = requestAnimationFrame(
                        this.animacao.bind(this),
                      )),
                      this.setState({ isPlaying: !0 }));
                },
              },
              {
                key: "ObservadorAngleUpdate",
                value: function (t) {
                  this.pararAnimação(),
                    this.setState({ isPlaying: !1, observerAngle: t });
                },
              },
              {
                key: "onLuaAngleUpdate",
                value: function (t) {
                  this.pararAnimação(),
                    this.setState({ isPlaying: !1, LuaAngle: t });
                },
              },
              {
                key: "onanimacaoTaxaChange",
                value: function (t) {
                  this.setState({ animacaoTaxa: Du(t.target.value) });
                },
              },
              {
                key: "obterLuaObserverPos",
                value: function (t, e) {
                  return t + Math.PI - e;
                },
              },
              {
                key: "onDecrementDia",
                value: function () {
                  var t = this.decrementoAngle(
                      this.state.observerAngle,
                      Uu(360),
                    ),
                    e = this.decrementLuaAngle(
                      this.state.LuaAngle,
                      (2 * Math.PI) / this.synodicPeriod,
                    );
                  this.setState({ observerAngle: t, LuaAngle: e });
                },
              },
              {
                key: "onIncrementDia",
                value: function () {
                  var t = this.incrementoAngle(
                      this.state.observerAngle,
                      Uu(360),
                    ),
                    e = this.incrementLuaAngle(
                      this.state.LuaAngle,
                      (2 * Math.PI) / this.synodicPeriod,
                    );
                  this.setState({ observerAngle: t, LuaAngle: e });
                },
              },
              {
                key: "onDecrementHoras",
                value: function () {
                  var t = this.decrementoAngle(this.state.observerAngle, Uu(15)),
                    e = this.decrementLuaAngle(
                      this.state.LuaAngle,
                      (2 * Math.PI) / this.synodicPeriod / 24,
                    );
                  this.setState({ observerAngle: t, LuaAngle: e });
                },
              },
              {
                key: "onIncrementHoras",
                value: function () {
                  var t = this.incrementoAngle(this.state.observerAngle, Uu(15)),
                    e = this.incrementLuaAngle(
                      this.state.LuaAngle,
                      (2 * Math.PI) / this.synodicPeriod / 24,
                    );
                  this.setState({ observerAngle: t, LuaAngle: e });
                },
              },
              {
                key: "onDecrementMinute",
                value: function () {
                  var t = this.decrementoAngle(
                      this.state.observerAngle,
                      Uu(0.25),
                    ),
                    e = this.decrementLuaAngle(
                      this.state.LuaAngle,
                      (2 * Math.PI) / (24 * this.synodicPeriod) / 60,
                    );
                  this.setState({ observerAngle: t, LuaAngle: e });
                },
              },
              {
                key: "onIncrementMinute",
                value: function () {
                  var t = this.incremenotAngle(
                      this.state.observerAngle,
                      Uu(0.25),
                    ),
                    e = this.incrementLuaAngle(
                      this.state.LuaAngle,
                      (2 * Math.PI) / (24 * this.synodicPeriod) / 60,
                    );
                  this.setState({ observerAngle: t, LuaAngle: e });
                },
              },
              {
                key: "handleInputChange",
                value: function (t) {
                  var e = t.target,
                    n = "checkbox" === e.type ? e.checked : e.value,
                    r = e.name;
                  this.setState(
                    (function (t, e, n) {
                      return (
                        (e = Tv(e)) in t
                          ? Object.defineProperty(t, e, {
                              value: n,
                              enumerable: !0,
                              configurable: !0,
                              writable: !0,
                            })
                          : (t[e] = n),
                        t
                      );
                    })({}, r, n),
                  );
                },
              },
              {
                key: "pararAnimação",
                value: function () {
                  cancelAnimationFrame(this.raf);
                },
              },
              {
                key: "ReiniciarClick",
                value: function (t) {
                  t.preventDefault(),
                    this.pararAnimação(),
                    this.setState(this.initialState),
                    this.celestialSphereRef &&
                      this.celestialSphereRef.current &&
                      this.celestialSphereRef.current.ReiniciarClicked();
                },
              },
              {
                key: "OcultarMostrarFaseLuarAlternar",
                value: function () {
                  this.setState({
                    moonPhaseViewIsHidden: !this.state.moonPhaseViewIsHidden,
                  });
                },
              },
              {
                key: "OcultarMostrarEsferaCelestialAlternar",
                value: function () {
                  this.setState({
                    celestialSphereIsHidden:
                      !this.state.celestialSphereIsHidden,
                  });
                },
              },
            ]) && Ev(n.prototype, r),
            Object.defineProperty(n, "prototype", { writable: !1 }),
            s
          );
        })(t.Component),
        Av = document.querySelector("#sim-container");
      e.render(t.createElement(Mv, null), Av);
    })();
})();

// Fundo com estrelas
function createStarfield() {
  const starfield = document.getElementById('starfield');
  const numStars = 200;

  for (let i = 0; i < numStars; i++) {
    const star = document.createElement('div');
    star.className = `star layer-${Math.floor(Math.random() * 3) + 1}`;
    star.style.left = `${Math.random() * 100}%`;
    star.style.top = `${Math.random() * 100}%`;
    star.style.animationDelay = `${Math.random() * 2}s`;
    starfield.appendChild(star);
  }
}
createStarfield();